!function(e){function t(t){for(var i,l,s=t[0],r=t[1],d=t[2],c=0,f=[];c<s.length;c++)l=s[c],o[l]&&f.push(o[l][0]),o[l]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);for(u&&u(t);f.length;)f.shift()();return n.push.apply(n,d||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],i=!0,s=1;s<a.length;s++){var r=a[s];0!==o[r]&&(i=!1)}i&&(n.splice(t--,1),e=l(l.s=a[0]))}return e}var i={},o={1:0},n=[];function l(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=i,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(a,i,function(t){return e[t]}.bind(null,i));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="./";var s=window.webpackJsonp=window.webpackJsonp||[],r=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var u=r;n.push(["QrCR",0]),a()}({"++Kp":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=h(a("gDS+")),n=h(a("Yz+Y")),l=h(a("iCc5")),s=h(a("V7oC")),r=h(a("FYw3")),d=h(a("mRg0")),u=h(a("q1tI")),c=h(a("GCUw")),f=a("okNM");function h(e){return e&&e.__esModule?e:{default:e}}var m=(0,f.inject)("userListDataStore","userListStatusStore")(i=(0,f.observer)(i=function(e){function t(){return(0,l.default)(this,t),(0,r.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.userListDataStore,a=e.userListStatusStore,i=e.groupId,n=t.userListGroupData[i],l=a.allShowGroup.indexOf(i)>-1,s=n.value.length,r=(0,o.default)(n);return u.default.createElement("ul",{className:"list-box "+(a.nowOperationUserId&&-1!==r.indexOf(a.nowOperationUserId)?"content-min-height":""),id:"tool_participant_user_list",style:{display:l?"block":"none"}},n.value.map(function(e,t){return u.default.createElement(c.default,{key:t,value:e,index:t,itemLen:s})}))}}]),t}(u.default.Component))||i)||i;t.default=m},"+Aed":function(e,t,a){},"+zfL":function(e,t,a){},"/PVF":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=f(a("Yz+Y")),o=f(a("iCc5")),n=f(a("V7oC")),l=f(a("FYw3")),s=f(a("mRg0")),r=a("q1tI"),d=f(r),u=f(a("mrNk")),c=f(a("uuqz"));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){(0,o.default)(this,t);var e=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return e.state={audiochangeStyle:0},e.setStylesThrottle=null,e}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){if(this.props.stream){this.setStylesThrottle=c.default.throttle.call(this,this.setStyles,500);try{this.props.stream&&t&&u.default.getTkRoom().registerAudioVolumeListener(this.props.stream.extensionId,80,this.setStylesThrottle,function(){L.Logger.error("registerAudioVolumeListener error")})}catch(e){L.Logger.error("!Your browser does not support SoundMeterInstance , error info:",e)}}}},{key:"setStyles",value:function(e){this.setState({audiochangeStyle:e/20+.1+"rem"})}},{key:"componentWillUnmount",value:function(){u.default.getTkRoom().unregisterAudioVolumeListener(this.props.stream.extensionId),this.setStylesThrottle.cancel()}},{key:"render",value:function(){return d.default.createElement("div",{style:{display:"block",width:this.state.audiochangeStyle},className:"Audiochange ",id:"Audiochange_"+(this.props.stream?this.props.stream.extensionId:"")})}}]),t}(r.Component);t.default=h},"/S8a":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(a("Yz+Y")),o=f(a("iCc5")),n=f(a("V7oC")),l=f(a("FYw3")),s=f(a("mRg0")),r=f(a("q1tI")),d=f(a("HPAy")),u=f(a("M3nf")),c=f(a("Fveh"));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.showShapeList,a=e.changeShape,i=e.mouseLeave,o=e.setLineColor,n=e.onAfterChangeShapeLineWidth;return r.default.createElement("li",{className:"tool-option shape-list "+this.props.shape+" "+(this.props.isActive===this.props.shapeActive(this.props.shape)?"active":"")+(this.props.show?"":" hide"),"data-current-shape":this.props.shape,onClick:t,title:d.default.language.languageData.header.tool.shape.title},r.default.createElement("em",{className:"icon icon-juxing_sanjiao"}),r.default.createElement("div",{className:"tool-shape-list-extend",style:{display:this.props.isShowShapeList&&this.props.isActive===this.props.shapeActive(this.props.shape)?"block":"none"},onClick:a,onMouseLeave:i},r.default.createElement("ol",{className:"tool-shape-container"},r.default.createElement("li",{className:"shape-option tool_rectangle_empty "+("tool_rectangle_empty"===this.props.isActive?"active":"")},r.default.createElement("em",{"data-type":"tool_rectangle_empty",className:"shape-icon  icon-kongxinjuxing"})),r.default.createElement("li",{className:"shape-option tool_rectangle "+("tool_rectangle"===this.props.isActive?"active":"")},r.default.createElement("em",{"data-type":"tool_rectangle",className:"shape-icon icon-juxing"})),r.default.createElement("li",{className:"shape-option tool_ellipse_empty "+("tool_ellipse_empty"===this.props.isActive?"active":"")},r.default.createElement("em",{"data-type":"tool_ellipse_empty",className:"shape-icon icon-kongxinyuan"})),r.default.createElement("li",{className:"shape-option tool_ellipse "+("tool_ellipse"===this.props.isActive?"active":"")},r.default.createElement("em",{"data-type":"tool_ellipse",className:"shape-icon icon-shixinyuan icon-shixinyuan"}))),r.default.createElement("div",{style:{position:"relative"}},r.default.createElement(u.default,{setLineColor:o,selectColor:this.props.primaryColor})),r.default.createElement("div",{className:"tool-slider"},r.default.createElement(c.default,{value:this.props.shapeWidth,onAfterChange:n}),r.default.createElement("span",null,this.props.shapeWidth))))}}]),t}(r.default.Component);t.default=h},"/dUc":function(e,t,a){},"0Dtr":function(e,t,a){},"0c+C":function(e,t,a){},"0oMa":function(e,t,a){},"0rwh":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=I(a("GQeE")),n=I(a("Yz+Y")),l=I(a("iCc5")),s=I(a("V7oC")),r=I(a("FYw3")),d=I(a("mRg0")),u=I(a("q1tI")),c=I(a("mrNk")),f=I(a("eQYT")),h=I(a("HPAy")),m=I(a("ZqRg")),p=I(a("4b5b")),g=I(a("1RfO")),v=I(a("upFd")),y=I(a("vgEN")),S=I(a("tW1m")),b=I(a("xG/F")),C=a("N+lb");a("Dryh");var k=a("lqVD"),w=a("LAQx"),T=a("okNM"),E=I(a("JL1q"));function I(e){return e&&e.__esModule?e:{default:e}}var D=(0,T.inject)("videoStore")(i=(0,T.observer)(i=function(e){function t(e){(0,l.default)(this,t);var a=(0,r.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.mouseMove=a.props.mouseMove,a.mouseDown=a.props.mouseDown,a.videoOnDoubleClick=a.props.videoOnDoubleClick,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.restoreDrag,a=e.isCanDrag,i=e.isDrag,n=e.user,l=e.videoToolBoxHeight,s=e.isHideOtherVideo,r=e.videoChange2,d=e.studentLength,T=e.layoutName,I=(0,w.isTeacher)(this.props.user.id)?this.props.videoStore.pictureInPictureClassnameFromTeacherStream:this.props.videoStore.pictureInPictureClassnameFromStudentStream,D="";f.default.hasRoomtype.oneToOne&&(0==(0,o.default)(this.props.user).length||this.props.user&&this.props.user.publishstate===f.default.PUBLISHSTATE.PUBLISH_STATE_NONE)&&(D=" noVideo"),n.role===f.default.role.roleStudent&&E.default.handler.getAppPermissions("hasVideoCapture")&&(h.default.videoCaptureBoxId=n.id?"videoContainer_"+n.id:"");var x=this.props.videoStyle||{};x.width=x.width||"100%",x.height=x.height||"100%";var R,_,P,A=f.default.joinRoomInfo.isStuHideOtherVideo&&f.default.hasRole.roleStudent,L=E.default.handler.getAppPermissions("isShowTrophy");return u.default.createElement("div",{className:((0,o.default)(this.props.user).length>0?(R=this.props,_=(0,C.loadActionButtonArray)(R.user,R),P="video-wrap",P+=R.user&&R.user.hasvideo?"":" not-video-device ",P+=R.user&&R.user.hasaudio?"":" not-audio-device ",P+=(h.default.isOnlyAudioRoom?" only-audio-bg ":"")+" ",P+=0!==_.length&&f.default.PUBLISHSTATE.PUBLISH_STATE_NONE!=R.user.publishstate?"isHover ":""):"video-wrap")+(f.default.hasRoomtype.oneToOne?D:""),id:n.id?"videoContainer_"+n.id:null,style:f.default.hasRoomtype.oneToOne||A?{height:"100%",width:"100%"}:{height:x.height,width:x.width}},(f.default.joinRoomInfo.pointerReminder&&"hvideo"===this.props.videoDumbClassName&&this.props.user.role!==f.default.role.roleChairman&&this.props.user.role!==f.default.role.roleTeachingAssistant&&(f.default.hasRole.roleChairman||f.default.hasRole.roleTeachingAssistant),u.default.createElement(k.PointerReminderStatusDiv,this.props)),this.props.stream?u.default.createElement(m.default,{loader:this.props.loader,mode:this.props.mode,isMirror:c.default.getTkRoom()&&c.default.getTkRoom().getMySelf()&&this.props.isVideoMirror&&this.props.user.id&&this.props.user&&this.props.user.id===c.default.getTkRoom().getMySelf().id,user:Object.customAssign({},this.props.user),myUserId:c.default.getTkRoom()&&c.default.getTkRoom().getMySelf()?c.default.getTkRoom().getMySelf().id:void 0,changeVolumeJurisdiction:!(TK.isNative&&TK.subscribe_from_native),volume:c.default.getTkRoom()&&c.default.getTkRoom().getMySelf()?c.default.getTkRoom().getMySelf().volume:100,stream:this.props.stream,isHideOtherVideo:s,videoDumbElementIdPrefix:this.props.videoDumbClassName}):void 0,u.default.createElement("div",{className:"video-tools-box "+(f.default.hasRoomtype.oneToOne?"two-people":"many-people"),onDoubleClick:a&&i&&f.default.joinRoomInfo.roomrole!==f.default.role.roleStudent?t:function(){},style:{height:i||this.props.isDoubleClick||A?"100%":l}},f.default.hasRoomtype.oneToOne?this.props.isDoubleClick||this.props.videoStore.isHasCloseBtn?null:u.default.createElement(u.default.Fragment,null,u.default.createElement(p.default,{stream:this.props.stream,user:this.props.user}),L?u.default.createElement(g.default,{stream:this.props.stream,user:this.props.user}):null,u.default.createElement(v.default,{stream:this.props.stream,user:this.props.user}),u.default.createElement(y.default,{user:this.props.user}),u.default.createElement(b.default,this.props)):u.default.createElement(u.default.Fragment,null,u.default.createElement("div",{className:"video-bottom "+(d>6&&d<11&&("CoursewareDown"===T||"VideoDown"===T||"Encompassment"===T)?"many-vbottom":"")},u.default.createElement(p.default,{stream:this.props.stream,user:this.props.user}),r?null:u.default.createElement(v.default,{stream:this.props.stream,user:this.props.user})),u.default.createElement("div",{className:"video-top"},r||!L?null:u.default.createElement(g.default,{stream:this.props.stream,user:this.props.user}),u.default.createElement("div",{className:"video-top-right"},u.default.createElement(S.default,{user:this.props.user}),u.default.createElement(y.default,{user:this.props.user}))),u.default.createElement(b.default,this.props)),u.default.createElement("div",{className:"background-mode-float",style:{display:(h.default.classBegin||f.default.joinRoomInfo.isBeforeClassReleaseVideo)&&this.props.user.isInBackGround?"block":"none"}},u.default.createElement("p",{className:"background-mode-prompt"},this.props.user.role===f.default.role.roleChairman?h.default.language.languageData.otherVideoContainer.prompt.userText:h.default.language.languageData.otherVideoContainer.prompt.text))),u.default.createElement(k.ForegroundPicDiv,{foregroundpicUrl:this.props.videoStore.foregroundpicUrl,pictureInPictureClassname:I}))}}]),t}(u.default.Component))||i)||i;t.default=D},"12+s":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=g(a("YEIV")),o=g(a("Yz+Y")),n=g(a("iCc5")),l=g(a("V7oC")),s=g(a("FYw3")),r=g(a("mRg0")),d=a("q1tI"),u=g(d),c=g(a("HPAy")),f=g(a("eQYT")),h=g(a("aJKe")),m=(g(a("JL1q")),g(a("mrNk")),g(a("3mpg"))),p=g(a("XbJA"));g(a("pIe1")),g(a("uuqz"));function g(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){(0,n.default)(this,t);var e=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return e.state={list:[],nowKey:window.WBGlobal.docAddressKey,nowLine:0,nowShow:!1,user:null},e.newCdnList=[],e.isOne=!1,e.versions=1,e}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){h.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid)}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"RemoteControl":switch(a.data.action){case"callCdnIp":if(this.versions=2,this.hasGetAllCndIped){var i=this.findKeyToIndex(this.state.list,a.data.serverInfo.serverKey);this.setState({list:this.newCdnList,user:a.fromID,nowShow:!0,nowLine:i,nowKey:a.data.serverInfo.serverKey})}else m.default.getAllCndIp(function(e){t.hasGetAllCndIped=!0,t.newCdnList=e,t.setState({list:t.newCdnList},function(){var e=t.findKeyToIndex(t.state.list,a.data.serverInfo.serverKey);t.setState({user:a.fromID,nowShow:!0,nowLine:e,nowKey:a.data.serverInfo.serverKey})})});break;case"pushDocServer":this.versions=1,this.setState({list:a.data.serverInfo.serverList,user:a.fromID,nowShow:!0,nowLine:a.data.serverInfo.serverIndex})}}}},{key:"findKeyToIndex",value:function(e,t){var a=0;return e&&Array.isArray(e)&&(a=e.findIndex(function(e,a){return e.domain===t})),-1==a?0:a}},{key:"changeInput",value:function(e,t){this.setState({nowLine:e,nowKey:t.domain})}},{key:"okclick",value:function(){if(this.versions)if(1===this.versions){var e={action:"changeLine",lineIndex:this.state.nowLine};p.default.sendSignallingFromRemoteControl(this.state.user,e)}else 2===this.versions&&p.default.sendSignallingFromRemoteControl(this.state.user,{action:"changeCdnIp",key:this.state.nowKey});this.setState({nowKey:window.WBGlobal.docAddressKey,nowLine:0,nowShow:!1,user:null})}},{key:"close",value:function(){this.setState({nowKey:window.WBGlobal.docAddressKey,nowLine:0,nowShow:!1,user:null})}},{key:"render",value:function(){var e=this,t=this.state,a=t.list,o=t.nowLine,n=t.nowShow;return u.default.createElement("section",{className:"user-device-container",style:{display:n?"block":"none"}},u.default.createElement("article",{className:"device-control"},u.default.createElement("div",{className:"control-header"},u.default.createElement("span",{className:"text"},c.default.language.languageData.remoteControl.getDocAddress),u.default.createElement("button",{className:" close-detection icon-close",onClick:this.close.bind(this)})),u.default.createElement("div",{className:"control-body"},u.default.createElement("div",{className:"device-ops-wrapper"},u.default.createElement("ul",{className:"ops-list",style:{marginTop:"13px"}},a.map(function(t,a){return u.default.createElement("li",{key:a,onClick:e.changeInput.bind(e,a,t)},u.default.createElement("span",(0,i.default)({className:"icon"},"className","icon "+(a===o?"icon-gouxuan":"icon-weigouxuan"))),u.default.createElement("span",{className:"name"},1===e.versions?0===a?c.default.language.languageData.remoteControl.line1:c.default.language.languageData.remoteControl.line2:("chinese"===c.default.language.name?t.cninfo:"japan"===c.default.language.name?t.japinfo:t.eninfo)+"("+t.domain+")"))})),u.default.createElement("button",{className:"device-result-btn",onClick:this.okclick.bind(this)},c.default.language.languageData.login.language.detection.button.ok.text)))))}}]),t}(d.Component);t.default=v},"1AM9":function(e,t,a){},"1CIW":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=k(a("Yz+Y")),n=k(a("iCc5")),l=k(a("V7oC")),s=k(a("FYw3")),r=k(a("mRg0")),d=k(a("q1tI")),u=a("okNM"),c=k(a("HPAy")),f=k(a("aJKe")),h=k(a("eQYT")),m=(k(a("uuqz")),k(a("Dn0Y")));a("opMs");var p=k(a("per1")),g=k(a("mwLC")),v=k(a("vwMP")),y=k(a("s1tW")),S=k(a("bmQc")),b=k(a("LvrH")),C=k(a("yGYm"));function k(e){return e&&e.__esModule?e:{default:e}}var w=(0,u.observer)(i=function(e){function t(){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,r.default)(t,e),(0,l.default)(t,[{key:"close",value:function(){f.default.CoreController.dispatchEvent({type:"userListClose"}),S.default.updateIsUserListShow(!1)}},{key:"render",value:function(){return d.default.createElement(u.Provider,{userListDataStore:S.default,userListStatusStore:b.default,globalStore:C.default},d.default.createElement("div",{className:"mask",onClick:this.close.bind(this),style:{display:S.default.isUserListShow?"block":"none"}},d.default.createElement("div",{className:"userlist-container",onClick:function(e){e.stopPropagation()},style:{display:S.default.isUserListShow?"block":"none"}},d.default.createElement("div",{className:"title-wrapper"},d.default.createElement(p.default,null),h.default.joinRoomInfo.issearchwrapper?void 0:d.default.createElement(m.default,null),C.default.canDivided&&c.default.classBegin&&!h.default.joinRoomInfo.createOnlyAudioRoom&&!h.default.hasRoomtype.oneToOne&&(h.default.hasRole.roleChairman||h.default.hasRole.roleTeachingAssistant)?d.default.createElement(y.default,null):void 0),d.default.createElement(g.default,null),!C.default.canDivided||C.default.canDivided&&h.default.hasRole.roleClassTeacher?d.default.createElement(v.default,{pageSum:S.default.pageSum}):void 0)))}}]),t}(d.default.Component))||i;t.default=w},"1Ea7":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(a("lJXf")),o=n(a("HPAy"));function n(e){return e&&e.__esModule?e:{default:e}}var l=void 0,s=function(e,t,a){return l||(l=i.default),l.addNotice(e,t,a)},r=function(e,t){return s("showAlert",e,t)},d=function(e,t){return s("showConfirm",e,t)},u=function(e,t){return s("showInputTooltip",e,t)};t.default={showError:function(e,t,a,i){var n={message:e,title:a||o.default.language.languageData.alertWin.title.showError.text,ok:i||o.default.language.languageData.alertWin.ok.showError.text};r(n,t)},showPrompt:function(e,t,a,i){var n={message:e,title:a||o.default.language.languageData.alertWin.title.showPrompt.text,ok:i||o.default.language.languageData.alertWin.ok.showPrompt.text};r(n,t)},showConfirm:function(e,t,a,i,n){var l={title:a||o.default.language.languageData.alertWin.title.showConfirm.text,button:{cancel:n||o.default.language.languageData.alertWin.ok.showConfirm.cancel,ok:i||o.default.language.languageData.alertWin.ok.showConfirm.ok},message:e};d(l,t)},showInputTooltip:function(e,t){e.bottom=e.bottom?e.bottom:{button:[{name:"confirm",text:o.default.language.languageData.notice.publish},{name:"cancel",text:o.default.language.languageData.notice.cancel}]},u(e,t)}}},"1G3J":function(e,t,a){},"1Nl6":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=c(a("Yz+Y")),o=c(a("iCc5")),n=c(a("V7oC")),l=c(a("FYw3")),s=c(a("mRg0")),r=a("q1tI"),d=c(r),u=c(a("aJKe"));c(a("JL1q"));function c(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return function(t){function a(){(0,o.default)(this,a);var e=(0,l.default)(this,(a.__proto__||(0,i.default)(a)).call(this));return e.listernerBackupid=(new Date).getTime()+"_"+Math.random(),e}return(0,s.default)(a,t),(0,n.default)(a,[{key:"componentWillUnmount",value:function(){u.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.isDisabled!==e.isDisabled||this.props.isShow!==e.isShow}},{key:"render",value:function(){return d.default.createElement(e,this.props)}}]),a}(r.Component)}},"1RfO":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(a("Yz+Y")),o=u(a("iCc5")),n=u(a("V7oC")),l=u(a("FYw3")),s=u(a("mRg0")),r=(0,u(a("CSPP")).default)(["\n  display: ",";\n"],["\n  display: ",";\n"]),d=u(a("q1tI"));function u(e){return e&&e.__esModule?e:{default:e}}var c=u(a("vOnD")).default.div(r,function(e){return e.stream&&e.user.role===TkConstant.role.roleStudent?void 0:"none !important"}),f=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.stream,a=e.user;return d.default.createElement(c,{className:"gift-show-container",stream:t,user:a},d.default.createElement("span",{className:"gift-icon"}),d.default.createElement("span",{className:"gift-num"},a.giftnumber||0))}}]),t}(d.default.Component);t.default=f},"1rgB":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=v(a("HaWR")),o=v(a("Yz+Y")),n=v(a("iCc5")),l=v(a("V7oC")),s=v(a("FYw3")),r=v(a("mRg0"));a("wa3/");var d=v(a("q1tI")),u=v(a("HPAy")),c=v(a("eQYT")),f=v(a("uuqz")),h=v(a("aJKe")),m=(v(a("JL1q")),v(a("mrNk"))),p=v(a("XbJA")),g=v(a("pIe1"));function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={timeDescArray:[0,5,0,0],triangleStyle:"visible",againBtnStyle:!1,startBtnStyle:!0,numContentBorder:!1,timerIsShow:!1,restarting:!1,startAndStop:!1,startAndStopImg:!1,againUnClickableStyle:!0,stopUnClickableStyle:!1,resizeInfo:{width:0,height:0},playBackServerTime:0},a.servicerTimes=0,a.isSetDefaultPosition=!1,a.stop=null,a.startTime=0,a.endTime=0,a.timerBeginTsValue=0,a.speedOrBack=!1,a.initTimerValue=[],a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){if(88===u.default.logintype)return!1;h.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomDisconnected,this.handlerRoomDisconnected.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener("receive-msglist-timer",this.handlerMsglistTimerShow.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener("playOrPausePlaybackTimer",this.handlerPlayOrPausePlaybackTimer.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,this.handlerRoomPlaybackClearAll.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomPlaybackPlaybackEnd,this.handlerRoomPlaybackPlaybackEnd.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomPlaybackPlaybackUpdatetime,this.handlerRoomPlaybackPlaybackUpdatetime.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomPlaybackDuration,this.handlerRoomPlaybackDuration.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){h.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){if(88===u.default.logintype)return!1;t.timerIsShow!==this.state.timerIsShow&&this.state.timerIsShow&&this.isSetDefaultPosition&&(this.isSetDefaultPosition=!1,this.setDefaultPosition()),this.updateResize()}},{key:"updateResize",value:function(){var e=this.props.id,t=document.getElementById(e);if(!t)return!1;var a=u.default.windowInnerWidth/c.default.STANDARDSIZE,o=t.offsetWidth/a,n=t.offsetHeight/a,l=this.state.resizeInfo;(0,i.default)(l.width,o)&&(0,i.default)(l.height,n)||this.setState({resizeInfo:{width:o,height:n}})}},{key:"handlerRoomDisconnected",value:function(){clearInterval(this.stop),this.setState({timerIsShow:!1,startAndStopImg:!1,timeDescArray:[0,5,0,0],stopUnClickableStyle:!1})}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,i=document.getElementById(t),o=document.querySelector(a.bounds);if(i&&o){var n=a.changePosition;n&&n(t,{percentLeft:.5,percentTop:.5,isDrag:!1},!0)}}},{key:"handlerRoomPlaybackPlaybackEnd",value:function(){clearInterval(this.stop)}},{key:"handlerPlayOrPausePlaybackTimer",value:function(e){e.play?(clearInterval(this.stop),this.timeReduce()):clearInterval(this.stop)}},{key:"handlerRoomPlaybackDuration",value:function(e){var t=e.message,a=t.startTime,i=t.endTime;this.startTime=a,this.endTime=i}},{key:"handlerRoomPlaybackPlaybackUpdatetime",value:function(e){var t=Number(e.message.current.toFixed(0)),a=(Number(this.state.playBackServerTime.toFixed(0))-t)/1e3;if(!isNaN(a)&&Math.abs(a)>2&&this.timerBeginTsValue){var i=this._timeDifferenceToFormat(this.startTime,t),o=this._timeDifferenceToFormat(this.startTime,this.timerBeginTsValue);if(i<=o)clearInterval(this.stop),this.timerBeginTsValue=0;else{var n=600*this.initTimerValue[0]+60*this.initTimerValue[1]+10*this.initTimerValue[2]+1*this.initTimerValue[3]-i+o;if(n<0)clearInterval(this.stop),this.setState({timeDescArray:[0,0,0,0]}),this.playAudioToAudiooutput("ring_audio",!0);else{clearInterval(this.stop),this.timeReduce();var l=parseInt(n/60)<10?"0"+parseInt(n/60):parseInt(n/60),s=parseInt(n%60)<10?"0"+parseInt(n%60):parseInt(n%60),r=[parseInt(l/10),parseInt(l%10),parseInt(s/10),parseInt(s%10)];this.setState({timeDescArray:r}),0===r[0]&&0===r[1]&&0===r[2]&&0===r[3]&&this.playAudioToAudiooutput("ring_audio",!0)}}}this.setState({playBackServerTime:t})}},{key:"_timeDifferenceToFormat",value:function(e,t){if(0===t)return!1;var a=f.default.getTimeDifferenceToFormat(e,t);if(!a)return!1;var i=a.hh,o=a.mm,n=a.ss;return Number(n)+60*o+360*i}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"timer":c.default.hasRole.roleStudent?this.handelTmerShowStudent(t):this.handleTimerShow(t);break;case"UpdateTime":this.servicerTimes=t.ts}}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"ClassBegin":this.setState({timerIsShow:!1});break;case"timer":this.setState({timerIsShow:!1,startAndStopImg:!1,timeDescArray:[0,5,0,0],stopUnClickableStyle:!1}),clearInterval(this.stop),this.timerBeginTsValue=0}}},{key:"handlerMsglistTimerShow",value:function(e){var t=e.message.timerShowArr;c.default.hasRole.roleStudent?this.handelTmerShowStudent(t[0]):this.handleTimerShow(t[0])}},{key:"handelTmerShowStudent",value:function(e){var t=this;if(e.data.isShow)return!1;var a=u.default.serviceTime/1e3-e.ts,i=e.data,o=i.sutdentTimerArry,n=i.isStatus;this.setState({timeDescArray:o,timerIsShow:!0,triangleStyle:"hidden"});var l=600*o[0]+60*o[1]+10*o[2]+1*o[3],s=l-a;if(this.setDefaultPosition(),n)if(clearInterval(this.stop),this.setState({startAndStopImg:!1,numContentBorder:!1}),s>0){s>l&&(s=l);var r=parseInt(s/60)<10?"0"+parseInt(s/60):parseInt(s/60),d=parseInt(s%60)<10?"0"+parseInt(s%60):parseInt(s%60),c=[parseInt(r/10),parseInt(r%10),parseInt(d/10),parseInt(d%10)];this.setState({timeDescArray:c},function(){t.timeReduce()})}else clearInterval(this.stop),this.setState({timeDescArray:[0,0,0,0],numContentBorder:!0});else clearInterval(this.stop),this.setState({timeDescArray:o,startAndStopImg:!0,numContentBorder:!1})}},{key:"handleTimerShow",value:function(e){var t=this,a=void 0,i=e.data,o=i.sutdentTimerArry,n=i.isShow,l=i.isStatus,s=i.isRestart;this.setState({timeDescArray:o}),this.isSetDefaultPosition=!0,this.setDefaultPosition();var r=600*o[0]+60*o[1]+10*o[2]+1*o[3];if(u.default.playback?(clearInterval(this.stop),a=r):a=r-(u.default.serviceTime/1e3-e.ts),n)this.setState({timeDescArray:o,timerIsShow:!0,againUnClickableStyle:!0,startBtnStyle:!0,startAndStopImg:!1,againBtnStyle:!1,numContentBorder:!1,triangleStyle:"visible"});else if(l)if(this.initTimerValue=o,this.timerBeginTsValue=e.ts,clearInterval(this.stop),this.setState({startAndStopImg:!0,timerIsShow:!0,startBtnStyle:!1,numContentBorder:!1,againBtnStyle:!0,triangleStyle:"hidden",againUnClickableStyle:!1}),a>0){a>r&&(a=r);var d=parseInt(a/60)<10?"0"+parseInt(a/60):parseInt(a/60),c=parseInt(a%60)<10?"0"+parseInt(a%60):parseInt(a%60),f=[parseInt(d/10),parseInt(d%10),parseInt(c/10),parseInt(c%10)];this.setState({timeDescArray:f},function(){t.timeReduce()})}else clearInterval(this.stop),this.setState({timeDescArray:[0,0,0,0],numContentBorder:!0,stopUnClickableStyle:!0});else s?(clearInterval(this.stop),this.setState({timeDescArray:o,timerIsShow:!0,numContentBorder:!1,startAndStopImg:!1,startBtnStyle:!0,againBtnStyle:!1,triangleStyle:"visible",startAndStop:!1,againUnClickableStyle:!0,stopUnClickableStyle:!1})):(this.setState({timeDescArray:o,timerIsShow:!0,numContentBorder:!1,startAndStopImg:!1,startBtnStyle:!0,againBtnStyle:!0,triangleStyle:"hidden",startAndStop:!1,againUnClickableStyle:!1}),clearInterval(this.stop))}},{key:"handlerRoomPlaybackClearAll",value:function(){if(!u.default.playback)return L.Logger.error("No playback environment, no execution event[roomPlaybackClearAll] handler ");this.setState({timeDescArray:[0,5,0,0],triangleStyle:"visible",againBtnStyle:!1,startBtnStyle:!0,numContentBorder:!1,timerIsShow:!1,restarting:!1,startAndStop:!1,startAndStopImg:!1,isShow:!1,againUnClickableStyle:!0,stopUnClickableStyle:!1}),clearInterval(this.stop),this.stop=null}},{key:"AddHandel",value:function(e,t){if(!c.default.hasRole.roleChairman&&!c.default.hasRole.roleTeachingAssistant)return!1;var a=t+1,i=this.state.timeDescArray,o=i[0],n=i[1],l=i[2],s=i[3];switch(e){case 0:(o=a)>9&&(o=0);break;case 1:(n=a)>9&&(n=0);break;case 2:(l=a)>5&&(l=0);break;case 3:(s=a)>9&&(s=0)}this.setState({timeDescArray:[o,n,l,s]})}},{key:"ReduceHandel",value:function(e,t){if(!c.default.hasRole.roleChairman&&!c.default.hasRole.roleTeachingAssistant)return!1;var a=t-1,i=this.state.timeDescArray,o=i[0],n=i[1],l=i[2],s=i[3];switch(e){case 0:(o=a)<0&&(o=9);break;case 1:(n=a)<0&&(n=9);break;case 2:(l=a)<0&&(l=5);break;case 3:(s=a)<0&&(s=9)}this.setState({timeDescArray:[o,n,l,s]})}},{key:"timeReduce",value:function(){var e=this,t=this.state,a=t.timeDescArray,i=t.numContentBorder,o=a[0],n=a[1],l=a[2],s=a[3],r=i;this.stop=setInterval(function(){(s-=1)<0&&(s=9,l-=1),l<0&&(l=5,n-=1),n<0&&(n=9,o-=1),o<0&&(o=0,n=0,l=0,s=0,r="red",clearInterval(e.stop),e.setState({stopUnClickableStyle:!0})),0===o&&0===n&&0===l&&0===s&&(e.playAudioToAudiooutput("ring_audio",!0),r="red",clearInterval(e.stop),e.setState({stopUnClickableStyle:!0})),e.setState({timeDescArray:[o,n,l,s],numContentBorder:r})},1e3)}},{key:"startBtnHandel",value:function(){if(!c.default.hasRole.roleChairman&&!c.default.hasRole.roleTeachingAssistant)return!1;var e=this.state,t=e.stopUnClickableStyle,a=e.timeDescArray;if(t)return!1;clearInterval(this.stop);var i={isStatus:!0,sutdentTimerArry:a,isShow:!1,isRestart:!1};p.default.sendSignallingTimerToStudent(i)}},{key:"stopBtnHandel",value:function(){if(!c.default.hasRole.roleChairman&&!c.default.hasRole.roleTeachingAssistant)return!1;var e=this.state,t=e.stopUnClickableStyle,a=e.timeDescArray;if(t)return!1;clearInterval(this.stop);var i={isStatus:!1,sutdentTimerArry:a,isShow:!1,isRestart:!1};p.default.sendSignallingTimerToStudent(i)}},{key:"againBtnHandel",value:function(){if(!c.default.hasRole.roleChairman&&!c.default.hasRole.roleTeachingAssistant)return!1;clearInterval(this.stop);p.default.sendSignallingTimerToStudent({isStatus:!1,sutdentTimerArry:[0,5,0,0],isShow:!1,isRestart:!0})}},{key:"timerCloseHandel",value:function(){if(!c.default.hasRole.roleChairman&&!c.default.hasRole.roleTeachingAssistant)return!1;clearInterval(this.stop),p.default.sendSignallingTimerToStudent({},!0)}},{key:"playAudioToAudiooutput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ring_audio",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("mobile"===TK.SDKTYPE){var a=document.getElementById("ring_audio");L.Utils.mediaPlay(a)}else if(TK.isTkNative&&TK.subscribe_from_native){var i=u.default.projectPublishDirAddress+"music/timer_default.wav",o=t?"play":"destroy",n={localMediaFile:"timer_default.wav"};m.default.getNativeInterface().clientAudioMediaPlayer(i,o,n)}else{var l=$("#"+e);l&&l.length>0&&(t?L.Utils.mediaPlay(l[0]):L.Utils.mediaPause(l[0]))}}},{key:"_renderTimer",value:function(e,t,a){var i=this;return e.map(function(e,o){return 1===o?d.default.createElement(d.default.Fragment,{key:o},d.default.createElement("div",{className:"timer-teachTool-num-div",key:o},d.default.createElement("div",{className:"triangle-up",style:{visibility:t,display:c.default.hasRole.rolePatrol?"none":"block"},onClick:i.AddHandel.bind(i,o,e)}),d.default.createElement("div",{className:"timer-teacher-num-content"+(a?" timer-font-style-red":" timer-font-style-default")},e),d.default.createElement("div",{className:"triangle-down",style:{visibility:t,display:c.default.hasRole.rolePatrol?"none":"block"},onClick:i.ReduceHandel.bind(i,o,e)})),d.default.createElement("div",{className:"timer-teachTool-colon"},":")):d.default.createElement("div",{className:"timer-teachTool-num-div",key:o},d.default.createElement("div",{className:"triangle-up",style:{visibility:t,display:c.default.hasRole.rolePatrol?"none":"block"},onClick:i.AddHandel.bind(i,o,e)}),d.default.createElement("div",{className:"timer-teacher-num-content"+(a?" timer-font-style-red":" timer-font-style-default")},e),d.default.createElement("div",{className:"triangle-down",style:{visibility:t,display:c.default.hasRole.rolePatrol?"none":"block"},onClick:i.ReduceHandel.bind(i,o,e)}))})}},{key:"render",value:function(){var e=this.state,t=e.timeDescArray,a=e.resizeInfo,i=e.againBtnStyle,o=e.triangleStyle,n=e.numContentBorder,l=this.props,s=l.id,r=l.draggableData,f=l.timerDrag,h=f.percentLeft,m=f.percentTop;0==h||h||(h=.5),0==m||m||(m=.5);var p=Object.customAssign({id:s,size:a,percentPosition:{percentLeft:h,percentTop:m}},r);return d.default.createElement(g.default,p,d.default.createElement("div",{id:s,className:"timer-div"+(c.default.hasRole.roleStudent?" student ":" teacher"),style:{display:this.state.timerIsShow?"block":"none"}},d.default.createElement("div",{className:"timer-teachTool-wrap touch-select-select "+(c.default.hasRole.rolePatrol?" disabled":"")+(c.default.hasRole.roleStudent?"timer-sutdentTool-wraps":"")},d.default.createElement("div",{className:"timer-teachTool-header"},d.default.createElement("span",null,u.default.language.languageData.timers.timerSetInterval.text),c.default.hasRole.roleStudent||c.default.hasRole.rolePatrol?void 0:d.default.createElement("span",{className:"icon-close timer-close",onClick:this.timerCloseHandel.bind(this)})),d.default.createElement("div",{className:"timer-teacher-content "+(c.default.hasRole.rolePatrol?"timer-rolePatrol":"")},d.default.createElement("div",{className:i&&"hidden"===o?"timer-teacher-num textColorWhite":"timer-teacher-num textColorBlack"},this._renderTimer(t,o,n)),d.default.createElement("div",{className:"timer-teacher-btn",style:{display:c.default.hasRole.rolePatrol?"none":"block"}},c.default.hasRole.roleStudent?d.default.createElement("div",{className:"icon student-teachTool-stopBtn icon-timer_pause",style:{display:this.state.startAndStopImg?"block":"none"},title:u.default.language.languageData.timers.timerStop.text}):void 0,c.default.hasRole.roleStudent?void 0:d.default.createElement("div",null,d.default.createElement("div",{className:"timer-teachTool-startNowBtn",ref:"timerStartBtn",style:{display:this.state.startBtnStyle&&"visible"===this.state.triangleStyle?"block":"none"},onClick:this.startBtnHandel.bind(this),title:u.default.language.languageData.timers.startNowBtn.text},u.default.language.languageData.timers.startNowBtn.text),d.default.createElement("div",{className:"icon icon-timer_star",ref:"timerStartBtn",style:{display:this.state.startBtnStyle&&"hidden"===this.state.triangleStyle?"block":"none"},onClick:this.startBtnHandel.bind(this),title:u.default.language.languageData.timers.timerBegin.text}),d.default.createElement("div",{className:"icon disabled icon-timer_pause",style:{display:!this.state.startBtnStyle&&this.state.stopUnClickableStyle&&"hidden"===this.state.triangleStyle?"block":"none"},title:u.default.language.languageData.timers.timerStop.text}),d.default.createElement("div",{className:"icon icon-timer_pause "+(this.state.stopUnClickableStyle?"disabled":""),style:{display:this.state.startAndStopImg&&"hidden"===this.state.triangleStyle?"block":"none"},onClick:this.stopBtnHandel.bind(this),title:u.default.language.languageData.timers.timerStop.text}),d.default.createElement("div",{className:"icon timer-teachTool-againBtn icon-timer_stop",style:{display:this.state.againBtnStyle&&"hidden"===this.state.triangleStyle?"block":"none"},onClick:this.againBtnHandel.bind(this),title:u.default.language.languageData.timers.again.text})))),"mobile"===TK.SDKTYPE?d.default.createElement("audio",{id:"ring_audio",src:"./music/ring.mp3?ts="+this.listernerBackupid,className:"audio-play"}):TK.isTkNative&&TK.subscribe_from_native?void 0:d.default.createElement("audio",{id:"ring_audio",src:"./music/timer_default.wav",className:"audio-play"}))))}}]),t}(d.default.Component);t.default=y},"1tGc":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=D(a("YEIV")),o=D(a("Yz+Y")),n=D(a("iCc5")),l=D(a("V7oC")),s=D(a("FYw3")),r=D(a("mRg0")),d=D(a("q1tI")),u=a("P9b8"),c=D(a("sZWH")),f=D(a("aJKe")),h=D(a("HPAy")),m=D(a("uuqz")),p=D(a("eQYT")),g=D(a("JL1q")),v=(D(a("mrNk")),D(a("NTrz"))),y=D(a("Z2dm")),S=D(a("KUns")),b=D(a("z3Fu")),C=D(a("jiMi")),k=D(a("HFXx"));a("WAjv");var w=D(a("K49K")),T=D(a("Y0V4")),E=D(a("uH9Y")),I=D(a("iDD2"));function D(e){return e&&e.__esModule?e:{default:e}}var x=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={updateState:!1,chatbox:{left:0,top:0,percentLeft:0,percentTop:0,isDrag:!1}},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){h.default.playback=!0,h.default.playbackControllerHeight="0.5rem",h.default.routeName="playback",h.default.playback&&(h.default.isClient=!1,h.default.isMacClient=!1,h.default.clientversion=void 0),$(document.body).addClass("playback"),this._refreshHandler()}},{key:"componentDidMount",value:function(){if(!h.default.isReload){f.default.CoreController.addEventListener(p.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener("updateSystemStyleJson",this.handlerUpdateSystemStyleJson.bind(this));var e=(new Date).getTime(),t=window.location.href;L.Utils.sessionStorage.setItem(e,m.default.encrypt(t)),this.props.history.push("/replay?timestamp="+e+"&reset=true"),f.default.CoreController.dispatchEvent({type:"loadSupernatantPrompt",message:{show:!0,content:h.default.language.languageData.loadSupernatantPrompt.loadRoomingPlayback}});!window.localStorage.getItem("onlyAudioOutPut")||window.localStorage.getItem("onlyAudioOutPut");88===h.default.logintype&&g.default.handler.joinPlaybackRoom(),document.getElementById("defaultDocumentToolViewRoot").style.display="none"}}},{key:"componentWillUnmount",value:function(){f.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerRoomConnected",value:function(){this.setState({updateState:!this.state.updateState})}},{key:"handlerUpdateSystemStyleJson",value:function(){this.setState({updateState:!this.state.updateState})}},{key:"_refreshHandler",value:function(){m.default.getUrlParams("reset",window.location.href)&&m.default.getUrlParams("timestamp",window.location.href)&&L.Utils.sessionStorage.getItem(m.default.getUrlParams("timestamp",window.location.href))&&(h.default.isReload=!0,window.location.href=m.default.decrypt(L.Utils.sessionStorage.getItem(m.default.getUrlParams("timestamp",window.location.href))),window.location.reload(!0))}},{key:"callPlaybackOnClick",value:function(e){f.default.CoreController.dispatchEvent({type:"callPlaybackOnClick",message:{event:e}})}},{key:"onStartDrag",value:function(e,t){}},{key:"onStopDrag",value:function(e,t,a){var o=t.node.id;!o||""===o||this.state[o].left===t.x&&this.state[o].top===t.y||(this.state[o].left=t.x,this.state[o].top=t.y,this.state[o].isDrag=!0,Object.customAssign(this.state[o],a),this.setState((0,i.default)({},o,this.state[o])))}},{key:"changePosition",value:function(e,t,a){t&&e&&(Object.customAssign(this.state[e],t),this.setState((0,i.default)({},e,this.state[e])))}},{key:"changeLayerIsShow",value:function(e){f.default.CoreController.dispatchEvent({type:"changeLayerIsShow",data:{mainContentLayerIsShow:e}})}},{key:"handlerOkCallback",value:function(e){var t=(e||{}).needDetection;h.default.needDetectioned=t,g.default.handler.joinPlaybackRoom()}},{key:"render",value:function(){!window.localStorage.getItem("onlyAudioOutPut")||window.localStorage.getItem("onlyAudioOutPut");var e=this.props.connectDropTarget,t=h.default.systemStyleJson,a=t.HeaderVesselSmartStyleJson,i=void 0===a?{}:a,o=t.RightVesselSmartStyleJson,n=void 0===o?{}:o,l=(t.BottomVesselSmartStyleJson,t.LeftToolBarVesselSmartStyleJson,t.RightContentVesselSmartStyleJson),s=void 0===l?{}:l;t.DesktopShareSmartStyleJson,t.BottomToolsVesselJson;g.default.handler.updateLoadModuleJson("LeftToolBarVesselSmart",!h.default.playback);var r={bounds:"pc"===TK.SDKTYPE?"#all_wrap":"#tk_app",onStartDrag:this.onStartDrag.bind(this),onStopDrag:this.onStopDrag.bind(this),changePosition:this.changePosition.bind(this),changeLayerIsShow:this.changeLayerIsShow.bind(this)};return e(d.default.createElement("section",{className:"add-position-relative",id:"room",style:{width:"100%",height:"100%"}},d.default.createElement("div",{onClick:this.callPlaybackOnClick.bind(this),style:{width:"100%",height:"100%"}},d.default.createElement("article",{className:"all-wrap clear-float disabled playback-all-container ",id:"all_wrap",style:{disabled:!0,height:"100%"}},d.default.createElement(v.default,{styleJson:i}),"   ",p.default.hasRoomtype.oneToOne?d.default.createElement(E.default,{RightContentVesselSmartStyleJson:s,RightVesselSmartStyleJson:n}):d.default.createElement(T.default,null),d.default.createElement(b.default,null)," ",d.default.createElement(y.default,null)," ",d.default.createElement(w.default,{id:"chatbox",dragInfo:this.state.chatbox,draggableData:r}))),d.default.createElement(k.default,{isEnter:!0,clearFinsh:!0,handlerOkCallback:this.handlerOkCallback.bind(this),backgroundColor:"#121A2C",okText:h.default.language.languageData.login.language.detection.button.join.text,titleText:h.default.language.languageData.login.language.detection.deviceTestHeader.device.text}),d.default.createElement(C.default,null)," ",d.default.createElement(S.default,null)," "))}}]),t}(d.default.Component),R=(0,u.DropTarget)("talkDrag",I.default,function(e){return{connectDropTarget:e.dropTarget()}})(x);t.default=(0,u.DragDropContext)(c.default)(R)},"28kM":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,n,l,s,r=S(a("JO7F")),d=S(a("Yz+Y")),u=S(a("iCc5")),c=S(a("V7oC")),f=S(a("FYw3")),h=S(a("mRg0")),m=a("av60"),p=S(m),g=S(a("eQYT")),v=(S(a("HPAy")),S(a("mrNk")),S(a("yGYm")),S(a("3l8K"))),y=S(a("UstG"));S(a("XbJA"));function S(e){return e&&e.__esModule?e:{default:e}}function b(e,t,a,i,o){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),o&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(o):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}var C=g.default.EVENTTYPE.RoomEvent,k=(i=(0,m.listener)(C.roomPubmsg),o=(0,m.listener)(C.roomDelmsg),n=(0,m.listener)("receive-msglist-isGroup"),(0,m.listenService)((b((s=function(e){function t(e){(0,u.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.store=e,a}return(0,h.default)(t,e),(0,c.default)(t,[{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"isGroup":var a=t.data,i=a.isGroup,o=a.groupingDocumentId,n=void 0===o?0:o;this.store.changeGroup(i),this.store.changeGroupingDocumentId(n);var l=v.default.getRoleHasDefalutAppPermissions();y.default.initAppPermissions(l)}}},{key:"handlerRoomDelmsg",value:function(e){e.message.name}},{key:"handlerRoomMsglist",value:function(e){var t=v.default.getRoleHasDefalutAppPermissions();y.default.initAppPermissions(t),this.store.changeGroup(e.message.isGroup)}}]),t}(p.default)).prototype,"handlerRoomPubmsg",[i],(0,r.default)(s.prototype,"handlerRoomPubmsg"),s.prototype),b(s.prototype,"handlerRoomDelmsg",[o],(0,r.default)(s.prototype,"handlerRoomDelmsg"),s.prototype),b(s.prototype,"handlerRoomMsglist",[n],(0,r.default)(s.prototype,"handlerRoomMsglist"),s.prototype),l=s))||l);t.default=k},"290z":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=d(a("Yz+Y")),o=d(a("iCc5")),n=d(a("V7oC")),l=d(a("FYw3")),s=d(a("mRg0")),r=d(a("q1tI"));function d(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.roomLogoUrl,a=e.logoError,i=e.logoLoad;return r.default.createElement("span",{className:"add-fl h-logo-wrap "+(void 0===t?"add-display-none":"add-block"),ref:"logoBox"},t?r.default.createElement("img",{src:t,onLoad:i,onError:a}):void 0)}}]),t}(r.default.Component);t.default=u},"2Ltr":function(e,t,a){},"2hPu":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={login:{language:{joinRoomHint:{text:"Entering class"},preLoad:{text:"File downloading",pass:"Skip "},detection:{company:{text:"Talk Cloud",normal:"Talk Cloud",icoachu:"Coach U"},selectOption:{noCam:"No camera was detected.",noMicrophone:"No microphone was detected.",noEarphones:"No headphones or speaker  was detected."},welAll:{one:"Welcome to use ",two:"Online classroom.",three:"For satisfactory effiect, please complete the device test first.",four:"Start Testing"},deviceTestHeader:{device:{text:"Device Test"},areaSwitch:{text:"Region Select"},deviceSwitch:{text:"Settings"},optimalServer:{text:"Optimal Server"},areaSelection:{text:"Region Select"},videoinput:{text:"Camera Test"},audioouput:{text:"Speaker Test"},audioinput:{text:"Mic Test"},detectionResult:{text:"Report"},changeScreen:{text:"double screen"},MainMinorChange:{text:"change screen"},systemInfo:{text:"System info"}},networkExtend:{title:{select:"Select",area:"Region",delay:"Delay",text:"Please choose the nearest server"},testBtn:"Server delay test"},videoinputExtend:{cameraOptionAll:{cameraOption:{text:"Camera"},noticeRed:{text:'Notice: Select "Forbid" may disable the camera.'}},noticeCarmera:{one:"Tips:If you can not see the video, you can check as follows:",two:'1.Select "Allow" when an anti-virus software pops up a message.',three:"2.Make sure that the camera has been connected and activated.",four:"3.If the camera does not work, please plug off and plug into another slot.",five:'4.Please select the correct camera.Select "Forbid" may disable the it.',six:"5.Make sure the camera is not  occupied by other programs.",seven:"6.Restart Computer."}},audioouputExtend:{cameraOptionAll:{cameraOption:{text:"Speaker"},earphoneVolume:{text:"Volume"},clickmusic:{one:"Click the play button, can you hear the music?"},playMusic:"Play Music"},noticeCarmera:{one:"Tips: If you can not hear the music, please check as follows:",two:'1.Select "Allow" when an anti-virus software pops up a reminder.',three:"2.Make Sure that the earphone and  the speaker have been connected and activateed.",four:"3.Make sure that the volume of earphone and speaker is at maximum level.",five:'4.Please select the correct earphone and the speaker. Select "Forbid" may disable the them.',six:"5.If the earphone and the speaker do not work, please plug them off and plug them into anthor slot.",seven:"6.Restart Computer."}},audioinputExtend:{cameraOptionAll:{cameraOption:{text:"Microphone"},noticeRed:{text:'Please select the correct microphone. Select "Forbid" may disable it.'},speakSound:{text:"Count from 1 to 10, Can you hear your voice and see the green bar rolling."}},noticeCarmera:{one:"Tips: If you fail to see the green rolling signs, pleack check as follows:",two:'1.Select "Allow" when an anti-virus software pops up a reminder.',three:"2.Make sure that the micorphone has been connected.",four:"3.Make sure that microphone has been plugged in and the volume is at maximum level.",five:'4.Please select the correct microphone. Select "Forbid" may disable the device.',six:"5.If there is no sound from the microphone, please plug off and plug it in to anther slot.",seven:"6.Restart Computer."}},browserDetection:{browserVersion:"Browser Version",versionError:"Not the latest Chrome version",versionPass:"Google Chrome version is up to date",prompt:{one:"Tip: Please click the link",two:"to download the latest version of the Google chrome browser"}},systemInfo:{currentUser:"Current user:",operatingSystem:"Operating system:",processor:"Processor:",RAM:"RAM:",serverName:"Server name:",IPAddress:"IP Address:",LoginDevice:"Login device:",MediaServer:"Media server",CoursewareServer:"Courseware server",networkDelay:"Network delay:",packetLoss:"Packet loss:",browser:"Browser:",uploadSpeed:"Upload speed:",downloadSpeed:"Download speed:",roomNumber:"Room number:",versionNumber:"Version number:"},CoursewareServer:{TkServer:"Talk-cloud CDN Server",DocServer:"CDN Server"},resultExtend:{head:{text:"Detection complete"},item1:{text:"Test items"},item2:{text:"Test reports",content:{abnormal:"Abnormal",normal:"Normal"}},item3:{text:"Detection details",content:{video:"No camera equipment was detected",listen:"You have choosen 'Do not hear the sound'",speak:"You have choosen 'Do not see the fluctuation'"}},item4:{content:{video:"Can see the video",listen:"Can hear the audio ",speak:"Can see the microphone work"}}},button:{next:{text:"Next"},join:{text:"Join"},ok:{text:"OK"},startNetworkTest:{text:"Start network test"},canSee:{text:"See"},notSee:{text:"Can't See"},canListen:{text:"Hear"},notListen:{text:"Can't Hear"},canSpeak:{text:"Fluctuations"},notSpeak:{text:"No fluctuations"},checkBack:{text:"Check again"},joinRoom:{text:"Join room"}},mirrorMode:{text:"Mirror mode"}}}},header:{tool:{allMute:{title:{yes:"All Microphones On",no:"All Microphones Off"}},capture:{title:{all:"Screenshot",small:"Hide the classroom window when Screenshot"}},qrCode:{title:{yes:"Upload picture by QR code"}},allGift:{title:{yes:"Award Trophy",giftText:"Award Trophy to all"}},blackBoard:{title:{open:"Small Whiteboard",close:"Close",prev:"Previous",next:"Next",shrink:"Shrink"},content:{blackboardHeadTitle:"Small Whiteboard"},toolBtn:{dispenseed:"Send",recycle:"Take Back",againDispenseed:"Send Again",commonTeacher:"Teacher"},tip:{saveImage:"Save Image"},boardTool:{pen:"Pen",text:"Text",eraser:"Eraser",color:"Colors and Thickness"},upload:{localUpload:"upload",scanCodeUpload:"upload by qrcode"}},sharing:{title:"Sharing"},mouse:{title:"Mouse"},pencil:{title:"Draw",pen:{text:"Pencil"},Highlighter:{text:"Highlighter"},linellae:{text:"Line"},arrow:{text:"Arrow"},laser:{title:"Laser pen",text:"Laser pen"}},text:{title:"Text",Msyh:{text:"Microsoft YaHei"},Ming:{text:"SimSun"},Arial:{text:"Arial"}},shape:{title:"Shapes",outlinedRectangle:{text:"Square"},filledRectangle:{text:"Solid Square"},outlinedCircle:{text:"Circle"},filledCircle:{text:"Solid Circle"}},eraser:{title:"Eraser"},undo:{title:"Undo"},redo:{title:"Recover"},clear:{title:" Clear Screen"},tool_zoom_big:{title:"Zoom In"},tool_zoom_small:{title:"Zoom Out"},VideoCapture:{title:"Video screenshot"}},page:{prev:{text:"Previous Page"},next:{text:"Next Page"},add:{text:"Add Page"},lcFullBtn:{title:"Full Screen of Drawing Area"},pptFullBtn:{title:"Full Screen  of PPT"},h5FileFullBtn:{title:"Full Screen  of Courseware"},skipPage:{text_one:"To ",text_two:" pages"},ok:{text:"Confirm"},coursewareRemarks:{title:"Courseware Remarks"}},system:{attend:{text:"Start Class"},oneToOneFinsh:{text:"Finish Class"},Raise:{hashand:"someone hands up",text:"Raise Hand",noText:"Cancel your hands",yesText:"Raise hands",raisingHand:"Raising hand"},finish:{text:"Finish Class"},gift:{text:"Award Trophy to All"},muteAll:{text:"Students' Microphone Off"},help:{title:"Help"},network:{title:"Select Server",extend:{ChinaTelecom:"China Telecom",ChinaUnicom:"China Unicom",ChinaMobile:"China Mobile",InternationalNetwork:"International Network",ChinaSouthernTelecom:"China Southern Telecom"}},setting:{title:"Settings"}},volume:{title:"Volume"}},toolContainer:{toolIcon:{whiteBoard:{title:"Whiteboard"},courseList:{title:"Courseware List"},classFolder:{title:"room files"},adminFolders:{title:"public files"},documentList:{title:"Files",titleTop:"Courseware List",titleSort:"Sort",button:{addCourse:{text:" + Add file"},fileName:{text:"Name"},fileType:{text:"Type"},uploadTime:{text:"Time"},search:{name:"Search",text:"Enter search content"},close:{text:"Close"}}},H5DocumentList:{title:"Courseware Files",titleTop:"Courseware List",button:{addCourse:{text:" + Add a H5 "}}},addCourse:{relationCourse:{title:"Resources",button:{addCourse:{text:"Resources"},pervPage:"Previous",nextPage:"Next",relation:"Sync to classroom",loadMore:"Loading more"}},uploadCourse:{resourceLibrary:"Files",localUpload:"Upload",uploadNotice:{one:"1. You can upload files in *.xls;*.xlsx;*.ppt;*.pptx;*.doc;*.docx;*.txt;*.pdf;*.jpg; *.gif;*.jpeg;*.png;*.bmp format;",two:"2. The uploaded file is not allowed to exceed 300M, and the number of file pages is not allowed to exceed 300;",three:'3. If the uploaded ppt has animation, audio and video, trigger, etc., please tick "dynamic ppt";',four:"4. WPS format courseware upload is not supported in the classroom. If yes, please transfer it to PDF and upload it;",five:'5. The dynamic ppt needs to be converted after upload. If it will play automatically after conversion, please tick "auto play after conversion"'},button:{setLoaclFile:"choose file",setLoaclAgain:"choose Again",upload:"Upload",uploadAgain:"Upload Again"},fileInfo:"File attribute",h5Name:"File name",dynamicPpt:"dynamic ppt",dynamicPptSuccess:"play after conversion"}},mediaDocumentList:{title:"Media",titleTop:"Media List",button:{addCourse:{text:" + Add a Media File"}}},moviesSharing:{title:"Media Sharing"},resourceLibrary:{title:"Files",dynamicpptSuccess:"the file has conversion",dynamicpptFail:"the file conversion fail"},message:{title:"message"},full:{title:"Full Screen"},fullOff:{title:"Exit full screen"},overallControl:{title:"Global Control"},screenSharing:{title:"Screen Sharing"},messageList:{title:"Message List"},addDocument:{title:"Add a Meida File"},userList:{title:"Students List",thead:{facility:"Device",nick:"Nickname",platform:"Onstage",camera:"Camera",microphone:"Microphone",draw:"Draw",raise:"Raise",mute:"Mute",remove:"Kick Out"},button:{Scrawl:{on:{title:"Draw"},off:{title:"No Drawing"}},answered:{on:{title:"Answered"},off:{title:"No Answered"}},video:{on:{title:"Video On"},off:{title:"Video Off"},disabled:{title:"Video disabled"}},update:{up:{title:"Speaking"},down:{title:"Not speaking"}},audio:{on:{title:"Microphone On"},off:{title:"Microphone Off"},disabled:{title:"Microphone disabled"}},mute:{on:{title:"Banned On"},off:{title:"Banned OFF"},patrol:{on:{title:""},off:{title:""}}},remove:{title:"Kick Out"}},input:{text:"Check the network"},userStatus:{assistant:{text:"Assistant"},student:{text:"Student"}},groupModeStatus:{groupMode:{text:""},normalMode:{text:""}}},disableVideo:{yes:"Video On",no:"Disable Video"},disableAudio:{yes:"Audio On",no:"Disable Audio"},setting:{title:"Settings"},help:{title:"Help"},guide:{title:"Newbie Guide"},seekHelp:{title:"Seek Help"},FileConversion:{text:"File Conversion"}}},videoContainer:{videoIcon:{camera:{title:"Camera"},microphone:{title:"Microphone"}},sendMsg:{inputText:{placeholder:"Press button Enter to send message.",patrolPlaceholder:"You can't send a message on a cruise.",frequently:"Messages are sent too frequently.Please try later"},btn:{title:{banChat:"Chat Banned",allChat:"Allow Chat",sendImg:"Send Picture",sendEmotion:"Send Emotion"}},repeatSpeak:{text:"Not flood the screen here"},sendBtn:{text:"Send",title:"Send Message"},tap:{chat:"Chat",question:"Quiz",users:"Users' list",doc:"WhiteBoard",refresh:"Refresh"},tips:{online:"Online",goback:"Back",pics:" Person(s) ",private:"Chat privately",teacher:"teacher",assistant:"assistant",student:"student",patrol:"patrol",me:"Me",join:"Join room",leave:"Leave room",beforeClass:"Class not start",afterClass:"Class is finished",whiteBoard:"Class not start,no content show",openAllBans:"Open all bans",closeAllBans:"Cancellation of all bans"},filter:{quizobj:"Just ask the teacher",seeQuiz:"Only mine visible",seeChat:"Only teacher's visible",seeAnswer:"Only mine visible"},fontSize:{fontSize14:"Normal",fontSize16:"Medium",fontSize18:"Large",fontSize22:"Largest"}},download:{downloadFile:{title:"Download"},downloadFailMessage:{title:"Download Failed"}}},otherVideoContainer:{videoIcon:{microphone:{title:"Microphone"},userPen:{title:"Operation"}},button:{scrawl:{yes:"Operation",no:"No Operation"},platform:{yes:"Start speaking",no:"Stop speaking"},audio:{yes:"Microphone On",no:"Microphone Off "},video:{yes:"Video On",no:"Video Off "},gift:{yes:"Award Trophy",no:"Deduct trophy"},close:{yes:"Close"},restoreDrag:{text:"Restore Position"},allMute:{yes:"All Microphone Off"},videoStatusChairman:{yes:"Video On",no:"Video Off",text:"Video Off"},audioStatusChairman:{yes:"Microphone On",no:"Microphone Off",text:"Microphone Off"},areaExchange:{text:"Area Exchange"},oneKeyReset:{text:"Restore All"},doubleDivision:{text:"Video Switch"},onlyAudio:{no:"Audio lessons",yes:"Video lessons",create:"Switch to audio interactive teaching mode",cancel:"Switch to video interactive teaching mode"},pointerReminder:{text:"poninter reminder"}},prompt:{text:"student pressed home button",userText:"user pressed home button"}},alertWin:{login:{register:{eventListener:{roomDelClassBegin:{text:"The class is over!"},participantEvicted:{roleConflict:{text:"User of the same identity has entered the room. You are blocked."},kick:{text:"You have been sent out of the classroom by the teacher!"},noJoin:{text:"You have been kicked out of the classroom,please try again after three minutes!"}}}},func:{checkMeeting:{status_minus_1:{text:"Class Information Retriveal Failed"},status_3001:{text:"Server has expired!"},status_3002:{text:"Account of the company has expired."},status_3003:{text:"The class not exist or has expired."},status_4007:{text:"The classroom not exist."},status_4008:{text:"Wrong Password."},status_4020:{text:"This class has been cancelled"},status_4110:{text:"You need to be authenticated.Please enter password."},status_4109:{text:"Authentication Failed"},status_4103:{text:"The number of students has exceeded limit."},status_4112:{text:"Enterprise point has exceeded limit!"},status_4113:{text:"The balance of the package is insufficient. Please contact the administrator to recharge it."},status_defalut:{text:"Class Information Retriveal Failed"}}}},call:{prompt:{chat:{literally:{yes:{text:"You are allowed to scrawl now."},no:{text:"You are not allowed to scrawl now."}}},publishStatus:{stream:{yes_status_3:{text:"Your screen video is on now. "},no_status_0:{text:"Your screen video is off now."},yes_status_0_to_2:{text:"Your screen video is on now. But audio is off and you can press the raising-hand button if you have any questions."},yes_status_3_to_2:{text:"Audio is off and you can press the raising-hand button if you have any questions."},videooff:{text:"Your video is off."},audiooff:{text:"Microphone is off and you can press the raising-hand button if you have any questions."},audioon:{text:"Microphone is on and you can speak now"},videoon:{text:"Your video is on."},allon:{text:"Your video and microphone are all on."},alloff:{text:"Your video and microphone are all off."},speakoff:{text:"You have been banned for speaking."},speakon:{text:"You have been allowed to speaking."}},download:{success:{text:"Download successful!"},failed:{text:"Download failed!"}},allMute:{yes:{text:"All Microphone Off Now"},no:{text:"All Microphone On Now"}}},joinRoom:{stream:{join:{text:"Enter Classroom"},leave:{text:"Left Classroom"}}},allSilence:{yes:{text:"All prohibition to chat"},no:{text:"All permission to chat"}},homeBtnRemind:{join:{text:"Back to normal mode"},leave:{text:"Background mode"},userBackgroundMode:{text:"The student's application in the background, could not on stage."}},streamConnectFailed:{onceSuccessed:{text:"Network exception, check the network environment and re-enter"},notSuccess:{text:"We detected that your network do not support udp. Please contact your network administrator to turn off the firewall of udp."}},remoteStreamFailure:{udpNotOnceSuccess:{one:"Due to the firewall intervention,the user(",two:") is unable to carry out UDP connection with the server.  Opening video failed."},udpMidwayDisconnected:{one:"Anomalous UDP communication occurs between the user(",two:") and the server. Opening video failed."},publishvideoFailure_notOverrun:{one:"User",two:"Anomaly in server connection. Presence failed."},publishvideoFailure_overrun:{one:"Attendants number is over limit."},mobileHome:{one:"Student",two:"is running at back-end.  Presence failed."}}},fun:{uploadCourseFile:{fileTypeError:{text:{one:"The file type'.",two:"'is not supported"}},fileSizeError:{text:{one:"File size exceeds limit, file size cannot exceed "}},fileUpload:{success:{text:"The file has been uploaded successfully.the file name is '"},failureCode:{text:"Error code"},failureNegativeOne:{text:"File conversion failure"},failureNegativeTwo:{text:"Upload Failed"},failureNegativeThree:{text:"Upload file location error"},failureNegativeFour:{text:"This type of file is not supported"},failureNegativeSeven:{text:"Class does not exist or has been deleted"},failureNegativeEight:{text:"The class does not belong to the company"},failureNegativeTen:{text:"The number of pages in the courseware is beyond the limit"},failureFhree:{text:"Cloud storage failed"},failureFour:{text:"Error: file index.html missed"}}},deleteCourseFile:{fileDelete:{failure:{text:"Deletion Failed"}},isDel:"Are you sure you want to delete it?"},page:{pageInteger:{text:"The page number inputted must be integers."},pageMax:{text:"The page number inputted not exceed the maximum!"},pageMin:{text:"The page number entered can't be less than 1."}},UnreadMessage:{text:"Unread message"}}},ok:{showError:{text:"Confirm"},showPrompt:{text:"Confirm"},showConfirm:{cancel:"Cancel",ok:"Confirm"}},title:{showError:{text:"Error Message"},showPrompt:{text:"Prompt Message"},showConfirm:{text:"Confirmation Messages"}},settingWin:{settingTitle:{text:"Settings"},default:{text:"Default"},communications:{text:"Communications"},settingOk:{text:"Apply"},settingClose:{text:"Cancel"},videoInput:{text:"Video Equipment"},audioInput:{text:"Audio Input Equipment"},audioOutput:{text:"Audio Output Equipment"}},messageWin:{title:{closeWindow:{text:"Message Conformation Box"},classBeginEnd:{text:"Ending Class Reminder"},allGift:{text:"Sending Message Reminder"}},winMessageText:{closeWindow:{ok:{text:"Shutting down the system?"}},classBeginEnd:{text:"Are you sure you want to finish class?"},removeStudent:{text:"are you sure to kick this member off?"},classBeginEndLocalRecord:{text:"The recording will be stopped after class. The storage address of the recording file is as follows:"},classBeginStartNotSelectRecord:{text:"Do not start recording and start class"},aloneGift:{before:"Are you sure to award trophies to ",after:"?"},allGift:{one:"Are you sure to",two:"Award trophies to ",three:"all visible students?"}},messageOk:{text:"Confirm"},messageClose:{text:"Cancel"}}},remind:{time:{readyStart:{one:"The class will start after ",two:" minute. Get ready."},timeoutStart:{one:"You are ",two:" minute late already. Seize the time!"},endNotBegin:{one:"The class is over. You  have missed it."},readyEnd:{one:"There are ",two:"minutes to finish class. Be reminded."},timeoutReadyEnd:{one:"Your class is",two:"minutes overtime now. This  class will end automatically in",three:"minutes."},timeoutEnd:{one:"This  class is about to shut down. (",two:")"},endBegin:{one:"The class has been finished."},readyEndAiBanMa:{one:"minutes to the end of the class.",two:"seconds to the end of the class.",three:"Please arrange the time",four:"Exceed the end of the classroom !"}},button:{remindKnow:{text:"I got it."},raise:{yes:"Agree",no:"Disagree"}},raise:{content:{text:"A hand is raised!"}}},publish:{beyondMaxVideo:{text:"More than a limit speech seats!"},reason401:{text:"This class was finished"},reason402:{text:"This class has been cancelled"}},networkStatus:{rtt:{title:{text:"Network delay"}},packetsLost:{title:{text:"Packet loss"}},network:{title:{text:"Network state"},value:{excellent:"Excellent",well:"Good",general:"General",suck:"Bad"},notice:"Your network is not in good condition at present"}},toolCase:{toolBox:{text:"ToolBox"}},qrCode:{scan:{text:"Scan to upload"},attention:{text:"Please do not close"}},timers:{timerSetInterval:{text:"timer"},timerBegin:{text:"Start"},timerStop:{text:"Pause"},again:{text:"Restart"},startNowBtn:{text:"Start the time"}},dial:{turntable:{text:"Turntable"}},answers:{headerTopLeft:{text:"Answer"},headerMiddel:{text:"Set the right choice"},beginAnswer:{text:"Start Answer"},tureAccuracy:{text:"Accuracy"},add:{text:"Add Answer"},reduce:{text:"Reduce Answer"},people:{text:"People"},trueAnswer:{text:"The right answer"},endAnswer:{text:"End of the answer"},restarting:{text:"Restart"},myAnswer:{text:"My Answer"},changeAnswer:{text:"Modify the Answer"},selectAnswer:{text:"Please select at least one answer"},submitAnswer:{text:"Submit the answer"},numberOfAnswer:{text:"Number of answer"},PublishTheAnswer:{text:"Publish the answer"},published:{text:"Published"},details:{text:"Details"},statistics:{text:"Statistics"},student:{text:"Student"},TheSelectedTheAnswer:{text:"The selections"},AnswerTime:{text:"Answer Time"},end:{text:"Please finish your questions first"},selectedAnswer:{text:"Selected answer"}},responder:{responder:{text:"Responder"},begin:{text:"Start"},restart:{text:"Restart"},clickTitle:{text:"Click button to start"},somebodyTeacher:{text:"Someone Snatched"},my:{text:"Congratulations,It's your turn"},other:{text:"Be Snatched"},inAnswerTitle:{text:"Is answering"},inAnswerBtn:{text:"Is answering"},inAnswerStudent:{text:"Ready to snatch"},noContest:{text:"Nobody to snatch"},noStart:{text:"Not started"}},shares:{shareSceen:{text:"Desktop Sharing"},stopShare:{text:"Stop Share"},shareing:{text0:"Program sharing is being carried out......",text1:"Regional Sharing is being carried out......",text2:"Desktop sharing is being carried out......"},sharingMode:{text:"Please select the sharing mode"},programmShare:{text:"Programm sharing"},shareArea:{text:"Area sharing"},startSharing:{text:"Start sharing"},selectProgramm:{text:"Please select the program you want to share"},programmShareArea:{text:"* The blue box is a shared area"},screenWidthTip:{text:"Your current resolution is greater than 1080P. You should choose region sharing."},safariNotify:{text:"You are currently using Safri, which does not support DeskTopShare. To use this feature, please use Chrome browser or Download PC client!"}},layoutInfo:{layout:"layout",CoursewareDown:"Video set-top",VideoDown:"Video down",Encompassment:"Video around",Bilateral:"Teacher priority",MainPeople:"Main Video",OnlyVideo:"Free Video",oneToOne:"Default Layout",doubleDivision:"Double Layout",doubleVideo:"Video Layout",synStudent:"Student side synchronization"},phoneBroadcast:{chat:{face:{naughty:"Naughty",happy:"Happy",complacent:"Complacent",curlOnesLips:"Curl ones lips",grieved:"Grieved",shedTears:"shed tears",kiss:"kiss",love:"Kisses and hugs"}}},getUserMedia:{accessAccepted:{getUserMediaFailure_reGetAudio:"The system detects that your video is not successful, please check whether the camera device is loose or occupied by other programs.",getUserMediaFailure_reGetVideo:"The system detects that your audio is not successful, please check whether the microphone device is loose or occupied by other programs."},accessDenied:{streamFail:"Access to audio / video failure, please check the system camera / microphone device settings, or exit antivirus software.",notAudioAndVideo:"The system cannot find your camera / microphone device.Please check if the cables are correctly connected or occupied by other programs."},deviceError:"The system can't get the hardware information. Please restart the computer."},version:{clientDeviceVersionInfo:{key:"The client device used:",client:"pc_client",pc:"pc_web",mobile:"mobile_web"},browserVersionInfo:{webpageApp:"Browser:",mobileApp:"Operation system:"},appVersionInfo:{key:"Version:"},ipInfo:{key:"IP Address"}},notice:{content:"content",href:"href",publish:"publish",cancel:"cancel"},loadSupernatantPrompt:{reconnecting:"Network has a jitter. Trying to restore for you.",loadRooming:"Connecting to classroom",loadRoomingPlayback:"Obtaining replay content",refreshing:"The assistant is trying to log in again."},remoteControl:{remoteTitle:"Remote Control",refresh:"Force Refresh",deviceManagement:"Device Control",optimalServer:"Optimal server",kick:"Kicked out of the classroom",getDocAddress:"Course Server",line1:"Talk-cloud CDN Server",line2:"CDN Server"},localRecord:{recordState:{notStart:"Local Recording",recording:"In Recording",recordPaused:"Paused"},title:{notStart:"Start Recording",recording:"Stop Recording",recordPaused:"Pause Recording",recordPlay:"Restore Recording"}},coursewareRemarks:{remarks:"remarks",close:"close"},videLabel:{exit:"Drop out"},captureImg:{StartUploading:"Capture the image to start uploading",UploadSuccess:"The image of the screenshot is uploaded",uploadFailed:"The upload failed due to a network problem",SaveSuccess:"Screen shot is successfully stored in "},moreUser:{text:"Under current sceneonly onstage students can use little whiteboard !"},reloadDoucumentHint:{one:"The network is unstable , Trying to reopen the courseware ...",two:""},qPanel:{answerPanel:"Answer Panel",tips:["Click on the letter to preset the correct answer","Please Chose Option"],addOption:"Add",delOption:"Delete",start:"Release",end:"End",restart:"Restart",rightOptionIs:"The Right Option is",hasPub:"Published",answerNum:"Answer Number",people:"People",commitAnswer:"Commit",modifyAnswer:"Modify",detail:"Detail",statistics:"Statistics",useTime:"Use Time",choseAnswer:"Chose Answer",myAnswer:"My Answer",pubResult:"Publish Result",loading:"No Data"},whiteboardSetSize:{lineWidth:"Line width",eraserWidth:"Eraser size",textWidth:"Text size"},fontSize:{number:"Number"}}},"361B":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(a("q1tI")),o=l(a("HPAy")),n=l(a("veco"));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t,a,l,s,r=e.parentState,d=e.dispose,u=e.pageDict,c=null,f=(r.studentNum,r.result,r.ansTime),h=r.resultNum,m=r.detailData;return i.default.createElement("div",{className:"statistics",style:{display:r.page.index===u.detail?"":"none"}},i.default.createElement("div",{className:"statistics-header"},i.default.createElement("span",{className:"num item"},o.default.language.languageData.qPanel.answerNum,":",h,o.default.language.languageData.qPanel.people),i.default.createElement("span",{className:"time item"},o.default.language.languageData.qPanel.useTime,":",(t=f,a=Number(t%60),l=Math.floor(t/60),((s=Math.floor(t/3600))>9&&s||"0"+s)+":"+(l>9&&l||"0"+l)+":"+(a>9&&a||"0"+a))),i.default.createElement("span",{className:"cut item",onClick:function(){d({action:"changeDetailOrStatistics",data:{}})}},o.default.language.languageData.qPanel.statistics,i.default.createElement("span",{className:"icon icon-right"}))),i.default.createElement("div",{className:"detail",ref:function(e){c=e}},m&&m.length&&m.length>0?m.map(function(e,t){return i.default.createElement("div",{className:"detail-item",key:t},i.default.createElement("span",null,e&&e.studentname),i.default.createElement("span",{className:"selectedAnswers"},o.default.language.languageData.qPanel.choseAnswer,":",e&&e.options.map(function(e){return String.fromCharCode("A".charCodeAt()+e)})+""),i.default.createElement("span",{className:"useTime"},o.default.language.languageData.qPanel.useTime,":",e&&e.timestr))}):i.default.createElement("div",{className:"detail-item"},i.default.createElement("span",null,o.default.language.languageData.qPanel.loading))),i.default.createElement(n.default,{sum:r.detailPageInfo.total,isPageText:r.detailPageInfo.current,pagingClickPrev:function(){d({action:"changeDetail",data:{action:-1}}),c.scrollTop=0},pagingInputFocus:function(){},pagingInputChange:function(e){d({action:"changeDetail",data:{action:2,text:e}}),c.scrollTop=0},pagingInputBlur:function(e){d({action:"changeDetail",data:{action:3,text:e}})},pagingClickNext:function(){d({action:"changeDetail",data:{action:1}}),c.scrollTop=0}}))}},"3UvJ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,n,l,s,r,d,u,c,f,h,m,p,g,v,y=A(a("JO7F")),S=A(a("Yz+Y")),b=A(a("iCc5")),C=A(a("V7oC")),k=A(a("FYw3")),w=A(a("mRg0")),T=a("av60"),E=A(T),I=A(a("eQYT")),D=A(a("HPAy")),x=A(a("mrNk")),R=A(a("JL1q")),_=A(a("XbJA")),P=(A(a("yGYm")),a("LAQx"));function A(e){return e&&e.__esModule?e:{default:e}}function L(e,t,a,i,o){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),o&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(o):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}var B=I.default.EVENTTYPE.RoomEvent,M=(i=(0,T.listener)(B.roomUserpropertyChanged),o=(0,T.listener)(B.roomConnected),n=(0,T.listener)(B.roomDisconnected),l=(0,T.listener)(B.roomPubmsg),s=(0,T.listener)(B.roomDelmsg),r=(0,T.listener)(B.roomParticipantLeave),d=(0,T.listener)(B.roomUservideostateChanged),u=(0,T.listener)(B.roomUseraudiostateChanged),c=(0,T.listener)("endClassbeginShowLocalStream"),f=(0,T.listener)("receive-msglist-ClassBegin"),h=(0,T.listener)("playbackProgressChange"),m=(0,T.listener)("receive-msglist-FullScreen"),p=(0,T.listener)("fullScreen"),(0,T.listenService)((L((v=function(e){function t(e){(0,b.default)(this,t);var a=(0,k.default)(this,(t.__proto__||(0,S.default)(t)).call(this,e));return a.store=e,a.tmediaFlagObj={videoFlag:!1,audioFlag:!1},a.smediaFlagObj={videoFlag:!1,audioFlag:!1},a.fullScreenType=void 0,a}return(0,w.default)(t,e),(0,C.default)(t,[{key:"handlerRoomUserpropertyChanged",value:function(e){var t=e.message.publishstate,a=e.user.id;if(null!=t)switch(t){case 0:(0,P.getUser)(a)&&(0,P.getUser)(a).role===I.default.role.roleStudent&&this.store.setStreams({studentStream:void 0})}this.store.updateChangedMsg(e)}},{key:"handlerRoomConnected",value:function(){D.default.classBegin||!D.default.classBegin&&I.default.joinRoomInfo.autoClassBegin&&I.default.hasRole.roleChairman&&R.default.handler.getAppPermissions("autoClassBegin")||I.default.hasRoomtype.oneToOne&&this._addLocalStreamToVideoContainer()}},{key:"handlerRoomDisconnected",value:function(){this._clearAllStream()}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"ClassBegin":if(D.default.playback)return;this._clearAllLocalStream();break;case"FullScreen":this._handlerSignallingFullScreen(t)}}},{key:"handlerRoomDelmsg",value:function(e){var t=this;switch(e.message.name){case"ClassBegin":if(I.default.joinRoomInfo.isClassOverNotLeave||!I.default.joinRoomInfo.isClassOverNotLeave&&I.default.joinRoomInfo.isBeforeClassReleaseVideo)return;this._clearAllStream(),setTimeout(function(){R.default.handler.getAppPermissions("endClassbeginShowLocalStream")&&(I.default.hasRole.roleChairman&&!t.state.teacherStream||I.default.hasRole.roleStudent&&!t.state.studentStream)&&t._addLocalStreamToVideoContainer()},250);break;case"FullScreen":this.fullScreenType=void 0,this.store.setStateData({pictureInPictureClassnameFromTeacherStream:void 0,pictureInPictureClassnameFromStudentStream:void 0,isHasCloseBtn:!1,isVideoSCreen:!1,whoIsBigVideo:void 0,isSignallingScreen:!1,foregroundpicUrl:void 0})}}},{key:"handlerRoomParticipantLeave",value:function(e){var t=e.user.role,a=e.userId;!this.store.whoIsBigVideo||!I.default.hasRoomtype.oneToOne||this.store.streams1v1.teacherStream&&this.store.streams1v1.studentStream||t!==I.default.role.roleChairman&&t!==I.default.role.roleStudent||(this.store.isSignallingScreen?_.default.sendSignallingFromFullScreen({},!0):eventObjectDefine.CoreController.dispatchEvent({type:"fullScreen",message:{fullScreenType:"stream_video",needPictureInPictureSmall:!1}}));var i=this.store.streams1v1;i.teacherStream&&i.teacherStream.extensionId===a?this.store.setStreams({teacherStream:void 0}):i.studentStream&&i.studentStream.extensionId===a&&this.store.setStreams({studentStream:void 0})}},{key:"videoStateChange",value:function(e){var t=e.message;"video"===t.type&&((0,P.isTeacher)(t.userId)?(this.tmediaFlagObj.videoFlag=t.published,this.store.setStreams({teacherStream:{extensionId:t.userId,mediaFlagObj:Object.customAssign({},this.tmediaFlagObj),type:t.type}})):(this.smediaFlagObj.videoFlag=t.published,this.store.setStreams({studentStream:{extensionId:t.userId,mediaFlagObj:Object.customAssign({},this.smediaFlagObj),type:t.type}})),this._commomVideoState(t))}},{key:"audioStateChange",value:function(e){var t=e.message;"video"===t.type&&((0,P.isTeacher)(t.userId)?(this.tmediaFlagObj.audioFlag=t.published,this.store.setStreams({teacherStream:{extensionId:t.userId,mediaFlagObj:Object.customAssign({},this.tmediaFlagObj),type:t.type}})):(this.smediaFlagObj.audioFlag=t.published,this.store.setStreams({studentStream:{extensionId:t.userId,mediaFlagObj:Object.customAssign({},this.smediaFlagObj),type:t.type}})),this._commomVideoState(t))}},{key:"handlerEndClassbeginShowLocalStream",value:function(){var e=this;I.default.joinRoomInfo.isClassOverNotLeave||!I.default.joinRoomInfo.isClassOverNotLeave&&I.default.joinRoomInfo.isBeforeClassReleaseVideo||setTimeout(function(){R.default.handler.getAppPermissions("endClassbeginShowLocalStream")&&(I.default.hasRole.roleChairman&&!e.state.teacherStream||I.default.hasRole.roleStudent&&!e.state.studentStream)&&e._addLocalStreamToVideoContainer()},250)}},{key:"handlerReceiveMsglistClassBegin",value:function(){D.default.playback||this._clearAllLocalStream()}},{key:"playbackProgressChange",value:function(){}},{key:"handlerReceiveMsglistFullScreen",value:function(e){var t=e.message.FullScreenArray;this._handlerSignallingFullScreen(t[0])}},{key:"handlerFullScreen",value:function(e){var t=e.message,a=t.isFullScreen,i=t.fullScreenType;if("courseware_file"!==i&&"stream_media"!==i||!I.default.hasRoomtype.oneToOne){if("stream_video"===i&&I.default.hasRoomtype.oneToOne){var o=e.message,n=o.needPictureInPictureSmall,l=o.isTeacher;n?l?this.store.setStateData({pictureInPictureClassnameFromTeacherStream:"pictureInPicture big "+i,pictureInPictureClassnameFromStudentStream:void 0,isHasCloseBtn:!0,whoIsBigVideo:"T",isVideoSCreen:n,isSignallingScreen:!1}):this.store.setStateData({pictureInPictureClassnameFromStudentStream:"pictureInPicture big "+i,pictureInPictureClassnameFromTeacherStream:void 0,isHasCloseBtn:!0,whoIsBigVideo:"S",isVideoSCreen:n,isSignallingScreen:!1}):this.store.setStateData({pictureInPictureClassnameFromTeacherStream:void 0,pictureInPictureClassnameFromStudentStream:void 0,isHasCloseBtn:!1,whoIsBigVideo:void 0,isVideoSCreen:n,isSignallingScreen:!1})}}else{if(!D.default.classBegin)return;if(a){var s={data:{fullScreenType:i,needPictureInPictureSmall:!0}};this._handlerSignallingFullScreen(s)}else this.store.setStateData({pictureInPictureClassnameFromTeacherStream:void 0,isHasCloseBtn:!1}),this.store.setStateData({pictureInPictureClassnameFromStudentStream:void 0})}}},{key:"_addLocalStreamToVideoContainer",value:function(){if(!D.default.isLeaveRoom&&R.default.handler.getAppPermissions("localStream")){var e=x.default.getTkRoom().getMySelf().id;I.default.hasRole.roleChairman?this.store.setStreams({teacherStream:{extensionId:e,mediaFlagObj:{videoFlag:!0,audioFlag:!0},type:"video"}}):I.default.hasRole.roleStudent&&this.store.setStreams({studentStream:{extensionId:e,mediaFlagObj:{videoFlag:!0,audioFlag:!0},type:"video"}})}}},{key:"_clearAllStream",value:function(){this.store.setStreams({teacherStream:void 0,studentStream:void 0})}},{key:"_clearAllLocalStream",value:function(){var e=this.store.streams1v1;e.teacherStream&&e.teacherStream.local&&"local"===e.teacherStream.getID()&&this.store.setStreams({teacherStream:void 0}),e.studentStream&&this.store.streams1v1.studentStream.local&&"local"===this.store.streams1v1.studentStream.getID()&&this.store.setStreams({studentStream:void 0})}},{key:"_handlerSignallingFullScreen",value:function(e){if(I.default.hasRoomtype.oneToOne){var t=e.data,a=t.fullScreenType;t.needPictureInPictureSmall;"courseware_file"!==a&&"stream_media"!==a||!I.default.joinRoomInfo.videoInFullScreen?"stream_video"===a&&this.videoFullScreen(e):I.default.hasRole.roleStudent?this.store.setStateData({pictureInPictureClassnameFromStudentStream:void 0,pictureInPictureClassnameFromTeacherStream:"pictureInPicture small "+a,isHasCloseBtn:!0,isVideoSCreen:!0}):this.store.setStateData({pictureInPictureClassnameFromTeacherStream:void 0,pictureInPictureClassnameFromStudentStream:"pictureInPicture small "+a,isHasCloseBtn:!0,isVideoSCreen:!0})}}},{key:"videoFullScreen",value:function(e){var t=e.data,a=t.fullScreenType,i=t.isTeacher;I.default.hasRole.roleStudent?i&&this.store.setStateData({pictureInPictureClassnameFromStudentStream:void 0,pictureInPictureClassnameFromTeacherStream:"pictureInPicture big "+a,isHasCloseBtn:!0,whoIsBigVideo:"T",isVideoSCreen:!0,isSignallingScreen:!0,foregroundpicUrl:window.WBGlobal.nowUseDocAddress+I.default.joinRoomInfo.foregroundpic}):i?this.store.setStateData({pictureInPictureClassnameFromTeacherStream:"pictureInPicture big "+a,pictureInPictureClassnameFromStudentStream:"pictureInPicture small "+a,isHasCloseBtn:!0,whoIsBigVideo:"T",isVideoSCreen:!0,isSignallingScreen:!0}):this.store.setStateData({pictureInPictureClassnameFromStudentStream:"pictureInPicture big "+a,pictureInPictureClassnameFromTeacherStream:"pictureInPicture small "+a,isHasCloseBtn:!0,whoIsBigVideo:"S",isVideoSCreen:!0,isSignallingScreen:!0})}},{key:"_commomVideoState",value:function(e){!1===this.tmediaFlagObj.videoFlag&&!1===this.tmediaFlagObj.audioFlag?(0,P.getUser)(e.userId).publishstate!==I.default.PUBLISHSTATE.PUBLISH_STATE_MUTEALL&&("stream_video"===this.fullScreenType&&this.fullScreenStreamExtensionId===this.state.teacherStream.extensionId&&_.default.sendSignallingFromFullScreen({},!0),!0===(0,P.isTeacher)(e.userId)&&this.store.setStreams({teacherStream:void 0})):!1===this.smediaFlagObj.videoFlag&&!1===this.smediaFlagObj.audioFlag&&(0,P.getUser)(e.userId).publishstate!==I.default.PUBLISHSTATE.PUBLISH_STATE_MUTEALL&&((0,P.getUser)(e.userId).role,I.default.role.roleStudent)}}]),t}(E.default)).prototype,"handlerRoomUserpropertyChanged",[i],(0,y.default)(v.prototype,"handlerRoomUserpropertyChanged"),v.prototype),L(v.prototype,"handlerRoomConnected",[o],(0,y.default)(v.prototype,"handlerRoomConnected"),v.prototype),L(v.prototype,"handlerRoomDisconnected",[n],(0,y.default)(v.prototype,"handlerRoomDisconnected"),v.prototype),L(v.prototype,"handlerRoomPubmsg",[l],(0,y.default)(v.prototype,"handlerRoomPubmsg"),v.prototype),L(v.prototype,"handlerRoomDelmsg",[s],(0,y.default)(v.prototype,"handlerRoomDelmsg"),v.prototype),L(v.prototype,"handlerRoomParticipantLeave",[r],(0,y.default)(v.prototype,"handlerRoomParticipantLeave"),v.prototype),L(v.prototype,"videoStateChange",[d],(0,y.default)(v.prototype,"videoStateChange"),v.prototype),L(v.prototype,"audioStateChange",[u],(0,y.default)(v.prototype,"audioStateChange"),v.prototype),L(v.prototype,"handlerEndClassbeginShowLocalStream",[c],(0,y.default)(v.prototype,"handlerEndClassbeginShowLocalStream"),v.prototype),L(v.prototype,"handlerReceiveMsglistClassBegin",[f],(0,y.default)(v.prototype,"handlerReceiveMsglistClassBegin"),v.prototype),L(v.prototype,"playbackProgressChange",[h],(0,y.default)(v.prototype,"playbackProgressChange"),v.prototype),L(v.prototype,"handlerReceiveMsglistFullScreen",[m],(0,y.default)(v.prototype,"handlerReceiveMsglistFullScreen"),v.prototype),L(v.prototype,"handlerFullScreen",[p],(0,y.default)(v.prototype,"handlerFullScreen"),v.prototype),g=v))||g);t.default=M},"3l8K":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(a("GQeE")),o=f(a("FyfS")),n=f(a("iCc5")),l=f(a("V7oC")),s=f(a("eQYT")),r=f(a("mrNk")),d=f(a("UstG")),u=(f(a("aJKe")),f(a("HPAy"))),c=(f(a("JL1q")),f(a("yGYm")));function f(e){return e&&e.__esModule?e:{default:e}}var h=new(function(){function e(t){(0,n.default)(this,e),this.role=t}return(0,l.default)(e,[{key:"getRoleHasDefalutAppPermissions",value:function(e){var t=e||d.default.productionDefaultAppAppPermissions();if(s.default.joinRoomInfo&&null!=s.default.joinRoomInfo.roomrole)switch(s.default.joinRoomInfo.roomrole){case s.default.role.roleChairman:var a=d.default.getAppPermissions("classBtnIsDisableOfRemind");if(u.default.classBegin){var n=!0,l=!1,r=void 0;try{for(var f,h=(0,o.default)((0,i.default)(t));!(n=(f=h.next()).done);n=!0){t[f.value]=!0}}catch(e){l=!0,r=e}finally{try{!n&&h.return&&h.return()}finally{if(l)throw r}}Object.customAssign(t,{raisehand:!1,sendSignallingFromRemoteControl:!0,dialCircleClick:!1,startClassBegin:!s.default.joinRoomInfo.hiddenClassBegin&&!1,endClassBegin:!s.default.joinRoomInfo.hiddenClassBegin&&!0,forcedEndClassBegin:!s.default.joinRoomInfo.hiddenClassBegin&&!1,classBtnIsDisableOfRemind:a,loadClassbeginRemind:s.default.joinRoomInfo.endOfClassHoursIsClassOver,publishDeskTopShareStream:!0,unpublishDeskTopShareStream:!0,isCapture:u.default.clientversion&&u.default.clientversion>=2018010200&&u.default.isClient&&s.default.joinRoomInfo.hasCaptureImg,isMoviesShare:u.default.clientversion&&u.default.clientversion>=2018031e3&&u.default.isClient&&s.default.joinRoomInfo.isMoviesShare&&s.default.joinRoomInfo.isHasVideo,isQrCode:s.default.joinRoomInfo.qrCode,localRecord:s.default.joinRoomInfo.localRecord&&u.default.clientversion&&u.default.clientversion>=2018010200&&u.default.isClient&&!u.default.isMacClient,isSendSignallingFromVideoWhiteboard:s.default.joinRoomInfo.videoWhiteboardDraw,pictureInPicture:s.default.joinRoomInfo.pictureInPicture&&s.default.hasRoomtype.oneToOne,isHandleVideoInFullScreen:s.default.joinRoomInfo.videoInFullScreen,isSendSignallingFromFullScreen:!0,chatSendImg:s.default.joinRoomInfo.chatSendImg,isShowCoursewareRemarks:s.default.joinRoomInfo.hasCoursewareRemarks,sendSignllingEveryoneBanChat:!0,sendQuestion:!0,publishResult:!0,getQuestionCount:!0,doubleDivision:!0,sendIsGroup:!0,mainPeopleExchangeVideo:!0,hasVideoCapture:!u.default.isClient,isStuHideOtherVideo:!1,isShowTrophy:u.default.companyidentify!==s.default.COMPANYIDENTIFY.MEETING})}else Object.customAssign(t,{sendSignallingFromRemoteControl:!0,sendSignallingFromLowConsume:!0,dynamicPptActionClick:!0,whiteboardPagingPage:!0,newpptPagingPage:!0,h5DocumentPagingPage:!0,jumpPage:!0,sendSignallingFromClassBegin:!0,roomStart:!0,hiddenClassBeginAutoClassBegin:!0,startClassBegin:!s.default.joinRoomInfo.hiddenClassBegin&&!0,endClassBegin:!s.default.joinRoomInfo.hiddenClassBegin&&!1,loadUserlist:!0,autoClassBegin:!0,sendSignallingFromDocumentChange:!0,dblclickDeviceVideoFullScreenRight:!0,publishMediaStream:!0,unpublishMediaStream:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,setParticipantPropertyToAllByoRole:!0,sendSignallingDataToParticipant:!0,sendTextMessage:!0,sendSignallingFromUpdateTime:!0,sendSignallingFromStreamFailure:!0,loadClassbeginRemind:s.default.joinRoomInfo.endOfClassHoursIsClassOver,classBtnIsDisableOfRemind:a,h5DocumentActionClick:!0,localStream:!s.default.joinRoomInfo.isBeforeClassReleaseVideo,mediaPlayAndPause:!0,endClassbeginRevertToStartupLayout:!0,endClassbeginShowLocalStream:!0,delmsgTo__AllAll:!0,closeMyseftAV:s.default.joinRoomInfo.isBeforeClassReleaseVideo,userAudioOpenOrClose:s.default.joinRoomInfo.isBeforeClassReleaseVideo,userVideoOpenOrClose:s.default.joinRoomInfo.isBeforeClassReleaseVideo,localRecord:s.default.joinRoomInfo.localRecord&&u.default.clientversion&&u.default.clientversion>=2018010200&&u.default.isClient&&!u.default.isMacClient,isShowCoursewareRemarks:s.default.joinRoomInfo.hasCoursewareRemarks,chatSendImg:s.default.joinRoomInfo.chatSendImg,isShowPPTToolBottom:!0,sendSignallingFromExtendSignalling:!0,sendSignllingEveryoneBanChat:!0,switchLayout:!0,isSendSignallingFromFullScreen:!0,sendIsGroup:!0,hasBanChatBtn:!0,isShowTrophy:u.default.companyidentify!==s.default.COMPANYIDENTIFY.MEETING});break;case s.default.role.roleTeachingAssistant:if(u.default.classBegin){var m=!0,p=!1,g=void 0;try{for(var v,y=(0,o.default)((0,i.default)(t));!(m=(v=y.next()).done);m=!0){t[v.value]=!0}}catch(e){p=!0,g=e}finally{try{!m&&y.return&&y.return()}finally{if(p)throw g}}Object.customAssign(t,{sendSignallingFromRemoteControl:!0,sendSignallingFromLowConsume:!1,sendSignallingFromClassBegin:!1,roomStart:!1,hiddenClassBeginAutoClassBegin:!1,roomOver:!1,startClassBegin:!1,endClassBegin:!1,raisehand:!1,laser:!1,giveAllUserSendGift:!1,autoPublishAV:!1,forcedEndClassBegin:!s.default.joinRoomInfo.hiddenClassBegin&&!1,classBtnIsDisableOfRemind:!1,loadClassbeginRemind:s.default.joinRoomInfo.endOfClassHoursIsClassOver,localStream:!s.default.joinRoomInfo.isBeforeClassReleaseVideo&&s.default.joinRoomInfo.assistantOpenMyseftAV,userAudioOpenOrClose:!0,userVideoOpenOrClose:!0,endClassbeginRevertToStartupLayout:!1,endClassbeginShowLocalStream:!1,delmsgTo__AllAll:!1,studentVframeBtnIsHide:!(s.default.joinRoomInfo.studentCloseMyseftAV&&s.default.joinRoomInfo.assistantOpenMyseftAV),closeMyseftAV:s.default.joinRoomInfo.assistantOpenMyseftAV,isCapture:u.default.clientversion&&u.default.clientversion>=2018010200&&u.default.isClient&&s.default.joinRoomInfo.hasCaptureImg,isMoviesShare:u.default.clientversion&&u.default.clientversion>=2018031e3&&u.default.isClient&&s.default.joinRoomInfo.isMoviesShare,isQrCode:s.default.joinRoomInfo.qrCode,localRecord:s.default.joinRoomInfo.localRecord&&u.default.clientversion&&u.default.clientversion>=2018010200&&u.default.isClient&&!u.default.isMacClient,isSendSignallingFromVideoWhiteboard:s.default.joinRoomInfo.videoWhiteboardDraw,pictureInPicture:s.default.joinRoomInfo.pictureInPicture&&s.default.hasRoomtype.oneToOne,isHandleVideoInFullScreen:s.default.joinRoomInfo.videoInFullScreen,isSendSignallingFromFullScreen:!0,chatSendImg:s.default.joinRoomInfo.chatSendImg,isShowCoursewareRemarks:s.default.joinRoomInfo.hasCoursewareRemarks,canDraw:!0,sendSignllingEveryoneBanChat:!0,getQuestionCount:!0,doubleDivision:!0,mainPeopleExchangeVideo:!0,hasVideoCapture:!u.default.isClient,isStuHideOtherVideo:!1,isShowTrophy:u.default.companyidentify!==s.default.COMPANYIDENTIFY.MEETING})}else Object.customAssign(t,{sendSignallingFromRemoteControl:!0,dynamicPptActionClick:!0,whiteboardPagingPage:!0,newpptPagingPage:!0,h5DocumentPagingPage:!0,jumpPage:!0,loadUserlist:!0,sendSignallingFromDocumentChange:!0,dblclickDeviceVideoFullScreenRight:!0,publishMediaStream:!0,unpublishMediaStream:!0,delmsgTo__AllAll:s.default.joinRoomInfo.isClassOverNotLeave,closeMyseftAV:s.default.joinRoomInfo.isBeforeClassReleaseVideo&&s.default.joinRoomInfo.assistantOpenMyseftAV,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,setParticipantPropertyToAllByoRole:!0,sendSignallingDataToParticipant:!0,sendTextMessage:!0,sendSignallingFromUpdateTime:!0,sendSignallingFromStreamFailure:!0,h5DocumentActionClick:!0,localStream:!s.default.joinRoomInfo.isBeforeClassReleaseVideo&&s.default.joinRoomInfo.assistantOpenMyseftAV,mediaPlayAndPause:!0,endClassbeginRevertToStartupLayout:s.default.joinRoomInfo.isClassOverNotLeave,endClassbeginShowLocalStream:s.default.joinRoomInfo.isClassOverNotLeave,localRecord:s.default.joinRoomInfo.localRecord&&u.default.clientversion&&u.default.clientversion>=2018010200&&u.default.isClient&&!u.default.isMacClient,isShowCoursewareRemarks:s.default.joinRoomInfo.hasCoursewareRemarks,chatSendImg:s.default.joinRoomInfo.chatSendImg,userlisPlatform:!(!s.default.joinRoomInfo.isBeforeClassReleaseVideo||!s.default.joinRoomInfo.assistantOpenMyseftAV),userPlatformUpOrDown:!(!s.default.joinRoomInfo.isBeforeClassReleaseVideo||!s.default.joinRoomInfo.assistantOpenMyseftAV),userAudioOpenOrClose:s.default.joinRoomInfo.isBeforeClassReleaseVideo,userVideoOpenOrClose:s.default.joinRoomInfo.isBeforeClassReleaseVideo,isShowPPTToolBottom:!0,loadClassbeginRemind:s.default.joinRoomInfo.endOfClassHoursIsClassOver,sendSignllingEveryoneBanChat:!0,switchLayout:!0,isSendSignallingFromFullScreen:!0,hasBanChatBtn:!0,isShowTrophy:u.default.companyidentify!==s.default.COMPANYIDENTIFY.MEETING});break;case s.default.role.roleClassTeacher:if(u.default.classBegin){if(c.default.isGroup){var S=!0,b=!1,C=void 0;try{for(var k,w=(0,o.default)((0,i.default)(t));!(S=(k=w.next()).done);S=!0){t[k.value]=!0}}catch(e){b=!0,C=e}finally{try{!S&&w.return&&w.return()}finally{if(b)throw C}}Object.customAssign(t,{sendSignallingFromRemoteControl:!0,sendSignallingFromLowConsume:!1,sendSignallingFromClassBegin:!1,roomStart:!1,hiddenClassBeginAutoClassBegin:!1,roomOver:!1,startClassBegin:!1,endClassBegin:!1,raisehand:!1,laser:!1,giveAllUserSendGift:!1,autoPublishAV:!1,forcedEndClassBegin:!s.default.joinRoomInfo.hiddenClassBegin&&!1,classBtnIsDisableOfRemind:!1,loadClassbeginRemind:s.default.joinRoomInfo.endOfClassHoursIsClassOver,localStream:!s.default.joinRoomInfo.isBeforeClassReleaseVideo&&s.default.joinRoomInfo.assistantOpenMyseftAV,userAudioOpenOrClose:!0,userVideoOpenOrClose:!0,endClassbeginRevertToStartupLayout:!1,endClassbeginShowLocalStream:!1,delmsgTo__AllAll:!1,studentVframeBtnIsHide:!(s.default.joinRoomInfo.studentCloseMyseftAV&&s.default.joinRoomInfo.assistantOpenMyseftAV),closeMyseftAV:s.default.joinRoomInfo.assistantOpenMyseftAV,isCapture:u.default.clientversion&&u.default.clientversion>=2018010200&&u.default.isClient&&s.default.joinRoomInfo.hasCaptureImg,isMoviesShare:u.default.clientversion&&u.default.clientversion>=2018031e3&&u.default.isClient&&s.default.joinRoomInfo.isMoviesShare,isQrCode:s.default.joinRoomInfo.qrCode,localRecord:s.default.joinRoomInfo.localRecord&&u.default.clientversion&&u.default.clientversion>=2018010200&&u.default.isClient&&!u.default.isMacClient,isSendSignallingFromVideoWhiteboard:s.default.joinRoomInfo.videoWhiteboardDraw,pictureInPicture:s.default.joinRoomInfo.pictureInPicture&&s.default.hasRoomtype.oneToOne,isHandleVideoInFullScreen:s.default.joinRoomInfo.videoInFullScreen,isSendSignallingFromFullScreen:!0,chatSendImg:s.default.joinRoomInfo.chatSendImg,isShowCoursewareRemarks:s.default.joinRoomInfo.hasCoursewareRemarks,canDraw:!0,sendSignllingEveryoneBanChat:!0,getQuestionCount:!0,doubleDivision:!0,isStuHideOtherVideo:!1,isShowTrophy:u.default.companyidentify!==s.default.COMPANYIDENTIFY.MEETING})}else{var T=!0,E=!1,I=void 0;try{for(var D,x=(0,o.default)((0,i.default)(t));!(T=(D=x.next()).done);T=!0){t[D.value]=!0}}catch(e){E=!0,I=e}finally{try{!T&&x.return&&x.return()}finally{if(E)throw I}}Object.customAssign(t,{sendSignallingFromRemoteControl:!0,sendSignallingFromLowConsume:!1,sendSignallingFromClassBegin:!1,roomStart:!1,hiddenClassBeginAutoClassBegin:!1,roomOver:!1,startClassBegin:!1,endClassBegin:!1,raisehand:!1,laser:!1,giveAllUserSendGift:!1,autoPublishAV:!1,forcedEndClassBegin:!s.default.joinRoomInfo.hiddenClassBegin&&!1,classBtnIsDisableOfRemind:!1,loadClassbeginRemind:s.default.joinRoomInfo.endOfClassHoursIsClassOver,localStream:!s.default.joinRoomInfo.isBeforeClassReleaseVideo&&s.default.joinRoomInfo.assistantOpenMyseftAV,userAudioOpenOrClose:!0,userVideoOpenOrClose:!0,endClassbeginRevertToStartupLayout:!1,endClassbeginShowLocalStream:!1,delmsgTo__AllAll:!1,studentVframeBtnIsHide:!(s.default.joinRoomInfo.studentCloseMyseftAV&&s.default.joinRoomInfo.assistantOpenMyseftAV),closeMyseftAV:s.default.joinRoomInfo.assistantOpenMyseftAV,isCapture:u.default.clientversion&&u.default.clientversion>=2018010200&&u.default.isClient&&s.default.joinRoomInfo.hasCaptureImg,isMoviesShare:u.default.clientversion&&u.default.clientversion>=2018031e3&&u.default.isClient&&s.default.joinRoomInfo.isMoviesShare,isQrCode:s.default.joinRoomInfo.qrCode,localRecord:s.default.joinRoomInfo.localRecord&&u.default.clientversion&&u.default.clientversion>=2018010200&&u.default.isClient&&!u.default.isMacClient,isSendSignallingFromVideoWhiteboard:s.default.joinRoomInfo.videoWhiteboardDraw,pictureInPicture:s.default.joinRoomInfo.pictureInPicture&&s.default.hasRoomtype.oneToOne,isHandleVideoInFullScreen:s.default.joinRoomInfo.videoInFullScreen,isSendSignallingFromFullScreen:!0,chatSendImg:s.default.joinRoomInfo.chatSendImg,isShowCoursewareRemarks:s.default.joinRoomInfo.hasCoursewareRemarks,canDraw:!0,sendSignllingEveryoneBanChat:!0,getQuestionCount:!0,doubleDivision:!0,hasBanChatBtn:!1,isStuHideOtherVideo:!1,isShowTrophy:u.default.companyidentify!==s.default.COMPANYIDENTIFY.MEETING})}Object.customAssign(t,{sendSignallingFromRemoteControl:!0,sendSignallingFromLowConsume:!1,sendSignallingFromClassBegin:!1,roomStart:!1,hiddenClassBeginAutoClassBegin:!1,roomOver:!1,startClassBegin:!1,endClassBegin:!1,raisehand:!1,laser:!1,giveAllUserSendGift:!1,autoPublishAV:!1,forcedEndClassBegin:!s.default.joinRoomInfo.hiddenClassBegin&&!1,classBtnIsDisableOfRemind:!1,loadClassbeginRemind:s.default.joinRoomInfo.endOfClassHoursIsClassOver,localStream:!s.default.joinRoomInfo.isBeforeClassReleaseVideo&&s.default.joinRoomInfo.assistantOpenMyseftAV,userAudioOpenOrClose:!0,userVideoOpenOrClose:!0,endClassbeginRevertToStartupLayout:!1,endClassbeginShowLocalStream:!1,delmsgTo__AllAll:!1,studentVframeBtnIsHide:!(s.default.joinRoomInfo.studentCloseMyseftAV&&s.default.joinRoomInfo.assistantOpenMyseftAV),closeMyseftAV:s.default.joinRoomInfo.assistantOpenMyseftAV,isCapture:u.default.clientversion&&u.default.clientversion>=2018010200&&u.default.isClient&&s.default.joinRoomInfo.hasCaptureImg,isMoviesShare:u.default.clientversion&&u.default.clientversion>=2018031e3&&u.default.isClient&&s.default.joinRoomInfo.isMoviesShare,isQrCode:s.default.joinRoomInfo.qrCode,localRecord:s.default.joinRoomInfo.localRecord&&u.default.clientversion&&u.default.clientversion>=2018010200&&u.default.isClient&&!u.default.isMacClient,isSendSignallingFromVideoWhiteboard:s.default.joinRoomInfo.videoWhiteboardDraw,pictureInPicture:s.default.joinRoomInfo.pictureInPicture&&s.default.hasRoomtype.oneToOne,isHandleVideoInFullScreen:s.default.joinRoomInfo.videoInFullScreen,isSendSignallingFromFullScreen:!0,chatSendImg:s.default.joinRoomInfo.chatSendImg,isShowCoursewareRemarks:s.default.joinRoomInfo.hasCoursewareRemarks,canDraw:!0,sendSignllingEveryoneBanChat:!0,getQuestionCount:!0,doubleDivision:!0,mainPeopleExchangeVideo:!0,isShowTrophy:u.default.companyidentify!==s.default.COMPANYIDENTIFY.MEETING})}else Object.customAssign(t,{sendSignallingFromRemoteControl:!0,dynamicPptActionClick:!0,whiteboardPagingPage:!0,newpptPagingPage:!0,h5DocumentPagingPage:!0,jumpPage:!0,loadUserlist:!0,sendSignallingFromDocumentChange:!0,dblclickDeviceVideoFullScreenRight:!0,publishMediaStream:!0,unpublishMediaStream:!0,delmsgTo__AllAll:s.default.joinRoomInfo.isClassOverNotLeave,closeMyseftAV:s.default.joinRoomInfo.isBeforeClassReleaseVideo&&s.default.joinRoomInfo.assistantOpenMyseftAV,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,setParticipantPropertyToAllByoRole:!0,sendSignallingDataToParticipant:!0,sendTextMessage:!0,sendSignallingFromUpdateTime:!0,sendSignallingFromStreamFailure:!0,h5DocumentActionClick:!0,localStream:!s.default.joinRoomInfo.isBeforeClassReleaseVideo&&s.default.joinRoomInfo.assistantOpenMyseftAV,mediaPlayAndPause:!0,endClassbeginRevertToStartupLayout:s.default.joinRoomInfo.isClassOverNotLeave,endClassbeginShowLocalStream:s.default.joinRoomInfo.isClassOverNotLeave,localRecord:s.default.joinRoomInfo.localRecord&&u.default.clientversion&&u.default.clientversion>=2018010200&&u.default.isClient&&!u.default.isMacClient,isShowCoursewareRemarks:s.default.joinRoomInfo.hasCoursewareRemarks,chatSendImg:s.default.joinRoomInfo.chatSendImg,userlisPlatform:!(!s.default.joinRoomInfo.isBeforeClassReleaseVideo||!s.default.joinRoomInfo.assistantOpenMyseftAV),userPlatformUpOrDown:!(!s.default.joinRoomInfo.isBeforeClassReleaseVideo||!s.default.joinRoomInfo.assistantOpenMyseftAV),userAudioOpenOrClose:s.default.joinRoomInfo.isBeforeClassReleaseVideo,userVideoOpenOrClose:s.default.joinRoomInfo.isBeforeClassReleaseVideo,isShowPPTToolBottom:!0,loadClassbeginRemind:s.default.joinRoomInfo.endOfClassHoursIsClassOver,sendSignllingEveryoneBanChat:!0,switchLayout:!0,isSendSignallingFromFullScreen:!0,isShowTrophy:u.default.companyidentify!==s.default.COMPANYIDENTIFY.MEETING});break;case s.default.role.rolePatrol:u.default.classBegin?Object.customAssign(t,{sendSignallingFromRemoteControl:!0,endClassBegin:!s.default.joinRoomInfo.hiddenClassBegin&&!s.default.joinRoomInfo.tourCancelBtn,roomOver:!0,sendSignallingFromClassBegin:!0,dblclickDeviceVideoFullScreenRight:!0,forcedEndClassBegin:!s.default.joinRoomInfo.hiddenClassBegin&&!s.default.joinRoomInfo.tourCancelBtn,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,setParticipantPropertyToAllByoRole:!0,sendSignallingDataToParticipant:!0,sendTextMessage:!1,sendSignallingFromUpdateTime:!0,sendSignallingFromStreamFailure:!0,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1,loadUserlist:!0,loadSystemSettings:!1,loadNoviceHelp:!1,openFileIsClick:!1,localStream:(s.default.joinRoomInfo.isBeforeClassReleaseVideo,!1),sendSignallingFromVideoSplitScreen:!0,isSendSignallingFromVideoWhiteboard:!1,chatSendImg:s.default.joinRoomInfo.chatSendImg,loadClassbeginRemind:s.default.joinRoomInfo.endOfClassHoursIsClassOver,getQuestionCount:!0,doubelClickVideo:!0,isShowTrophy:u.default.companyidentify!==s.default.COMPANYIDENTIFY.MEETING}):Object.customAssign(t,{sendSignallingFromRemoteControl:!0,dblclickDeviceVideoFullScreenRight:!0,forcedEndClassBegin:!s.default.joinRoomInfo.hiddenClassBegin&&!s.default.joinRoomInfo.tourCancelBtn,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,setParticipantPropertyToAllByoRole:!0,sendSignallingDataToParticipant:!0,sendTextMessage:!1,sendSignallingFromUpdateTime:!0,sendSignallingFromStreamFailure:!0,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1,loadUserlist:!0,loadSystemSettings:!1,loadNoviceHelp:!1,openFileIsClick:!1,localStream:(s.default.joinRoomInfo.isBeforeClassReleaseVideo,!1),unpublishMediaStream:s.default.joinRoomInfo.isClassOverNotLeave,unpublishFileStream:s.default.joinRoomInfo.isClassOverNotLeave,delmsgTo__AllAll:s.default.joinRoomInfo.isClassOverNotLeave,endClassbeginRevertToStartupLayout:s.default.joinRoomInfo.isClassOverNotLeave,endClassbeginShowLocalStream:s.default.joinRoomInfo.isClassOverNotLeave,isSendSignallingFromVideoWhiteboard:!1,loadClassbeginRemind:s.default.joinRoomInfo.endOfClassHoursIsClassOver,isShowTrophy:u.default.companyidentify!==s.default.COMPANYIDENTIFY.MEETING});break;case s.default.role.roleStudent:u.default.classBegin?Object.customAssign(t,{sendSignallingFromRemoteControl:!0,userAudioOpenOrClose:!0,userVideoOpenOrClose:!0,sendSignallingFromDocumentChange:s.default.joinRoomInfo.qrCode||u.default.companyidentify===s.default.COMPANYIDENTIFY.MEETING,whiteboardPagingPage:s.default.joinRoomInfo.isSupportPageTrun,newpptPagingPage:s.default.joinRoomInfo.isSupportPageTrun,h5DocumentPagingPage:s.default.joinRoomInfo.isSupportPageTrun,jumpPage:s.default.joinRoomInfo.isSupportPageTrun,autoPublishAV:!0,raisehand:!s.default.hasRoomtype.oneToOne&&u.default.companyidentify!==s.default.COMPANYIDENTIFY.MEETING,raisehandDisable:!1,dblclickDeviceVideoFullScreenRight:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,setParticipantPropertyToAllByoRole:!0,sendSignallingDataToParticipant:!0,sendTextMessage:!0,sendSignallingFromUpdateTime:!0,sendSignallingFromStreamFailure:!0,loadCoursewarelist:u.default.companyidentify===s.default.COMPANYIDENTIFY.MEETING,loadMedialist:!1,openFileIsClick:u.default.companyidentify===s.default.COMPANYIDENTIFY.MEETING,studentVframeBtnIsHide:!s.default.joinRoomInfo.studentCloseMyseftAV,closeMyseftAV:s.default.joinRoomInfo.studentCloseMyseftAV,localStream:!s.default.joinRoomInfo.isBeforeClassReleaseVideo,sendSignallingFromVideoDraghandle:!1,isSendSignallingFromVideoChangeSize:!1,sendSignallingFromVideoSplitScreen:!0,isSendSignallingFromVideoWhiteboard:s.default.joinRoomInfo.videoWhiteboardDraw,isSendSignallingFromFullScreen:!0,chatSendImg:s.default.joinRoomInfo.chatSendImg,loadClassbeginRemind:s.default.joinRoomInfo.endOfClassHoursIsClassOver,publishDeskTopShareStream:!0,unpublishDeskTopShareStream:!0,answerCommit:!0,isStuHideOtherVideo:s.default.joinRoomInfo.isStuHideOtherVideo,isShowTrophy:u.default.companyidentify!==s.default.COMPANYIDENTIFY.MEETING,canDraw:u.default.companyidentify===s.default.COMPANYIDENTIFY.MEETING}):Object.customAssign(t,{sendSignallingFromRemoteControl:!0,whiteboardPagingPage:s.default.joinRoomInfo.isSupportPageTrun,newpptPagingPage:s.default.joinRoomInfo.isSupportPageTrun,h5DocumentPagingPage:s.default.joinRoomInfo.isSupportPageTrun,jumpPage:s.default.joinRoomInfo.isSupportPageTrun,h5DocumentActionClick:s.default.joinRoomInfo.isSupportPageTrun,dynamicPptActionClick:s.default.joinRoomInfo.isSupportPageTrun,raisehand:!1,raisehandDisable:!0,unpublishMediaStream:s.default.joinRoomInfo.isClassOverNotLeave,unpublishFileStream:s.default.joinRoomInfo.isClassOverNotLeave,delmsgTo__AllAll:s.default.joinRoomInfo.isClassOverNotLeave,dblclickDeviceVideoFullScreenRight:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,setParticipantPropertyToAllByoRole:!0,sendSignallingDataToParticipant:!0,sendTextMessage:!0,sendSignallingFromUpdateTime:!0,sendSignallingFromStreamFailure:!0,loadMedialist:!1,openFileIsClick:!0,localStream:!s.default.joinRoomInfo.isBeforeClassReleaseVideo,closeMyseftAV:s.default.joinRoomInfo.isBeforeClassReleaseVideo&&s.default.joinRoomInfo.studentCloseMyseftAV,userAudioOpenOrClose:s.default.joinRoomInfo.isBeforeClassReleaseVideo&&s.default.joinRoomInfo.studentCloseMyseftAV,userVideoOpenOrClose:s.default.joinRoomInfo.isBeforeClassReleaseVideo&&s.default.joinRoomInfo.studentCloseMyseftAV,endClassbeginRevertToStartupLayout:s.default.joinRoomInfo.isClassOverNotLeave,endClassbeginShowLocalStream:s.default.joinRoomInfo.isClassOverNotLeave,isSendSignallingFromVideoWhiteboard:s.default.joinRoomInfo.videoWhiteboardDraw,chatSendImg:s.default.joinRoomInfo.chatSendImg,loadClassbeginRemind:s.default.joinRoomInfo.endOfClassHoursIsClassOver,isStuHideOtherVideo:s.default.joinRoomInfo.isStuHideOtherVideo,isShowTrophy:u.default.companyidentify!==s.default.COMPANYIDENTIFY.MEETING});break;case s.default.role.rolePlayback:u.default.classBegin,Object.customAssign(t,{pubMsg:!1,delMsg:!1,setProperty:!1,setParticipantPropertyToAll:!1,setParticipantPropertyToAllByoRole:!0,sendSignallingDataToParticipant:!1,sendTextMessage:!1,loadCoursewarelist:!1,loadMedialist:!1,loadSystemSettings:!1,loadNoviceHelp:!1,openFileIsClick:!1,localStream:(s.default.joinRoomInfo.isBeforeClassReleaseVideo,!1),isShowTrophy:u.default.companyidentify!==s.default.COMPANYIDENTIFY.MEETING});break;case s.default.role.roleRecord:u.default.classBegin?Object.customAssign(t,{sendSignallingFromRemoteControl:!0,roomOver:!0,sendSignallingFromClassBegin:!0,dblclickDeviceVideoFullScreenRight:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,setParticipantPropertyToAllByoRole:!0,sendSignallingDataToParticipant:!0,sendTextMessage:!1,sendSignallingFromUpdateTime:!0,sendSignallingFromStreamFailure:!0,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1,loadUserlist:!0,loadSystemSettings:!1,loadNoviceHelp:!1,openFileIsClick:!1,localStream:(s.default.joinRoomInfo.isBeforeClassReleaseVideo,!1),sendSignallingFromVideoSplitScreen:!0,isSendSignallingFromVideoWhiteboard:!1,chatSendImg:s.default.joinRoomInfo.chatSendImg,loadClassbeginRemind:s.default.joinRoomInfo.endOfClassHoursIsClassOver,getQuestionCount:!0,isShowTrophy:u.default.companyidentify!==s.default.COMPANYIDENTIFY.MEETING}):Object.customAssign(t,{sendSignallingFromRemoteControl:!0,dblclickDeviceVideoFullScreenRight:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,setParticipantPropertyToAllByoRole:!0,sendSignallingDataToParticipant:!0,sendTextMessage:!1,sendSignallingFromUpdateTime:!0,sendSignallingFromStreamFailure:!0,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1,loadUserlist:!0,loadSystemSettings:!1,loadNoviceHelp:!1,openFileIsClick:!1,localStream:(s.default.joinRoomInfo.isBeforeClassReleaseVideo,!1),unpublishMediaStream:s.default.joinRoomInfo.isClassOverNotLeave,unpublishFileStream:s.default.joinRoomInfo.isClassOverNotLeave,delmsgTo__AllAll:s.default.joinRoomInfo.isClassOverNotLeave,endClassbeginRevertToStartupLayout:s.default.joinRoomInfo.isClassOverNotLeave,endClassbeginShowLocalStream:s.default.joinRoomInfo.isClassOverNotLeave,isSendSignallingFromVideoWhiteboard:!1,loadClassbeginRemind:s.default.joinRoomInfo.endOfClassHoursIsClassOver,isShowTrophy:u.default.companyidentify!==s.default.COMPANYIDENTIFY.MEETING})}return t}},{key:"checkRoleConflict",value:function(e,t){var a=!1;return r.default.getTkRoom().getMySelf().id!==e.id&&(e.role===s.default.role.roleChairman&&s.default.hasRole.roleChairman?(a=!0,t&&r.default.getTkRoom().evictUser(e.id)):s.default.joinRoomInfo.roomtype===s.default.ROOMTYPE.oneToOne&&e.role===s.default.role.roleStudent&&s.default.hasRole.roleStudent?(a=!0,t&&r.default.getTkRoom().evictUser(e.id)):s.default.joinRoomInfo.roomtype!==s.default.ROOMTYPE.oneToOne&&e.role===s.default.role.roleStudent&&s.default.hasRole.roleStudent&&u.default.roomChange&&(a=!0,t&&r.default.getTkRoom().evictUser(e.id))),a}}]),e}());t.default=h},"3mpg":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webRequestFail=t.webRequestSuccess=void 0;var i=h(a("gDS+")),o=h(a("iCc5")),n=h(a("V7oC")),l=h(a("eQYT")),s=h(a("HPAy")),r=h(a("aJKe")),d=h(a("mrNk")),u=h(a("XbJA")),c=h(a("JL1q")),f=h(a("uuqz"));h(a("PW4q"));function h(e){return e&&e.__esModule?e:{default:e}}var m=t.webRequestSuccess=1,p=t.webRequestFail=0,g=new(function(){function e(){(0,o.default)(this,e)}return(0,n.default)(e,[{key:"baseAjax",value:function(e,t){(t=t||{}).ajaxHandlerCallback=function(t,a){if(a&&"-1"===a.type&&(s.default.reduceGift=!0),e.handlerEventKey){var o={type:l.default.EVENTTYPE.WebDaoEvent[e.handlerEventKey]};if(t&&!a)o.message={error:t,requestResult:p};else if(a&&(o.message={response:a,requestResult:m},e.excessResponseResultJson))for(var n in e.excessResponseResultJson)o.message[n]=e.excessResponseResultJson[n];r.default.HandlerWebDaoInterface.dispatchEvent(o)}else L.Logger.error("requestJson not handlerEventKey!",(0,i.default)(e))},$.ajax({type:e.type||"post",url:e.url,dataType:e.dataType||"json",async:e.async||!1,data:e.data,headers:e.headers||{}}).done(function(a){L.Logger.debug((e.remark?"["+e.remark+"]":"")+"success:ajax request  response:",a),t&&t.doneCallback&&"function"==typeof t.doneCallback?t.doneCallback(a):t.ajaxHandlerCallback(void 0,a)}).fail(function(a){L.Logger.error((e.remark?"["+e.remark+"]":"")+"fail:ajax request  error:",a),t&&t.failCallback&&"function"==typeof t.failCallback?t.failCallback(a):t.ajaxHandlerCallback(a,void 0)})}},{key:"getGiftInfo",value:function(e,t){if(c.default.handler.getAppPermissions("isShowTrophy")){var a={serial:l.default.joinRoomInfo.serial};e&&(a.receiveid=e);var i={type:"get",url:l.default.SERVICEINFO.webAddress+"/ClientAPI/getgiftinfo?ts="+(new Date).getTime(),data:a,async:!0,handlerEventKey:"getGiftInfo",remark:""};this.baseAjax(i,{doneCallback:t})}}},{key:"sendGift",value:function(e,t){if(c.default.handler.getAppPermissions("sendGift")&&c.default.handler.getAppPermissions("isShowTrophy")){var a={serial:l.default.joinRoomInfo.serial,sendid:d.default.getTkRoom().getMySelf().id,sendname:d.default.getTkRoom().getMySelf().nickname,receivearr:e},i={type:"post",url:l.default.SERVICEINFO.webAddress+"/ClientAPI/sendgift?ts="+(new Date).getTime(),data:a,async:!0,handlerEventKey:"sendGift",excessResponseResultJson:{participantIdJson:e,customTrophys:t},remark:""};this.baseAjax(i)}}},{key:"reduceGift",value:function(e,t){if(c.default.handler.getAppPermissions("sendGift")&&c.default.handler.getAppPermissions("isShowTrophy")){var a={serial:l.default.joinRoomInfo.serial,sendid:d.default.getTkRoom().getMySelf().id,sendname:d.default.getTkRoom().getMySelf().nickname,receivearr:e,type:"-1"},i={type:"post",url:l.default.SERVICEINFO.webAddress+"/ClientAPI/sendgift?ts="+(new Date).getTime(),data:a,async:!0,handlerEventKey:"sendGift",excessResponseResultJson:{participantIdJson:e,customTrophys:t},remark:""};this.baseAjax(i)}}},{key:"roomStart",value:function(e){if(c.default.handler.getAppPermissions("roomStart")){var t={serial:l.default.joinRoomInfo.serial,companyid:l.default.joinRoomInfo.companyid},a={type:"post",url:l.default.SERVICEINFO.webAddress+"/ClientAPI/roomstart?ts="+(new Date).getTime(),data:t,async:!0,handlerEventKey:"roomStart",remark:""};this.baseAjax(a,{doneCallback:e}),u.default.sendSignallingFromClassBegin(!1)}}},{key:"roomOver",value:function(){if(c.default.handler.getAppPermissions("roomOver")){var e={act:3,serial:l.default.joinRoomInfo.serial,companyid:l.default.joinRoomInfo.companyid},t={type:"post",url:l.default.SERVICEINFO.webAddress+"/ClientAPI/roomover?ts="+(new Date).getTime(),data:e,async:!0,handlerEventKey:"roomOver",remark:""};this.baseAjax(t),u.default.sendSignallingFromClassBegin(!0)}}},{key:"getQrCodeUploadFile",value:function(e,t){var a={key:l.default.joinRoomInfo.companyid,serial:l.default.joinRoomInfo.serial,uploaduserid:d.default.getTkRoom().getMySelf().id,codeid:e,codetype:1},i={type:"get",url:l.default.SERVICEINFO.webAddress+"/ClientAPI/getUploadfile?ts="+(new Date).getTime(),data:a,async:!0,handlerEventKey:"getQrCodeUploadFile",remark:""};this.baseAjax(i,t)}},{key:"getSimplifyAnswer",value:function(e,t){var a=e.id,i=e.page,o={serial:l.default.joinRoomInfo.serial,id:a,page:i},n={type:"post",url:l.default.SERVICEINFO.webAddress+"/ClientAPI/simplifyAnswer?ts="+(new Date).getTime(),data:o,async:!0,handlerEventKey:"getSimplifyAnswer",remark:""};this.baseAjax(n,t)}},{key:"getAllCndIp",value:function(e){var t={type:"get",url:l.default.SERVICEINFO.webAddress+"/ClientAPI/getcdnlist?ts="+(new Date).getTime(),async:!0,remark:"cnd",handlerEventKey:"getAllCndIp"};this.baseAjax(t,{doneCallback:e})}},{key:"getServiceList",value:function(e,t){var a={ipaddress:e,companyid:l.default.joinRoomInfo.companyid},i={type:"get",url:l.default.SERVICEINFO.webAddress+"/ClientAPI/getserverarea?ts="+(new Date).getTime(),data:a,async:!0,remark:"",handlerEventKey:"getServiceList"};this.baseAjax(i,{doneCallback:t})}},{key:"documentSendServer",value:function(e,t){var a={serial:l.default.joinRoomInfo.serial,userid:d.default.getTkRoom().getMySelf().id,ts:s.default.serviceTime/1e3,detail:f.default.base64Encode((0,i.default)(e))},o={type:"post",url:l.default.SERVICEINFO.webAddress+"/ClientAPI/addcoursewareinfo?ts="+(new Date).getTime(),data:a,async:!0,remark:"",handlerEventKey:"addcoursewareinfo"};this.baseAjax(o,{doneCallback:t})}},{key:"getUserInfoByName",value:function(e,t){var a={account:e,domain:"nyu"},i={type:"post",url:l.default.SERVICEINFO.webAddress+"/ClientAPI/getCompanyUserid?ts="+(new Date).getTime(),data:a,async:!0,handlerEventKey:"getUserInfoByName",remark:""};this.baseAjax(i,{doneCallback:t})}},{key:"getClassList",value:function(e,t){var a={userid:e,status:1,pagenum:1},i={type:"post",url:l.default.SERVICEINFO.webAddress+"/ClientAPI/getLessonList?ts="+(new Date).getTime(),data:a,async:!0,handlerEventKey:"getClassList",remark:""};this.baseAjax(i,{doneCallback:t})}},{key:"getCatalog",value:function(e,t){var a=e.index,i=void 0===a?null:a,o=e.pid,n=void 0===o?0:o,s=e.keyword,r=void 0===s?"":s,d=e.pagesize,u=void 0===d?10:d,c={serial:l.default.joinRoomInfo.serial,companyid:l.default.joinRoomInfo.companyid,index:i,pid:n,keyword:r,pagesize:u},f={type:"post",url:l.default.SERVICEINFO.webAddress+"/ClientAPI/getCatalog?ts="+(new Date).getTime(),data:c,async:!0,handlerEventKey:"getClassList",remark:""};this.baseAjax(f,{doneCallback:t})}},{key:"bandDucument",value:function(e,t){var a=e.fileids,i=void 0===a?[]:a,o=e.catalogs,n=void 0===o?[]:o,s={serial:l.default.joinRoomInfo.serial,companyid:l.default.joinRoomInfo.companyid,fileids:i,catalogs:n},r={type:"post",url:l.default.SERVICEINFO.webAddress+"/ClientAPI/bandDucument?ts="+(new Date).getTime(),data:s,async:!0,handlerEventKey:"getClassList",remark:""};this.baseAjax(r,{doneCallback:t})}},{key:"delBandDucument",value:function(e,t){var a=e.fileid,i={serial:l.default.joinRoomInfo.serial,fileid:a},o={type:"post",url:l.default.SERVICEINFO.webAddress+"/ClientAPI/delBandDucument?ts="+(new Date).getTime(),data:i,async:!0,handlerEventKey:"getClassList",remark:""};this.baseAjax(o,{doneCallback:t})}},{key:"getUpdateInfo",value:function(e){l.default.SERVICEINFO.webAddress="https://democn.talk-cloud.net";var t={type:"get",url:l.default.SERVICEINFO.webAddress+"/ClientAPI/checkGoogleVersion?ts="+(new Date).getTime(),data:{},async:!0,handlerEventKey:"getUpdateInfo",remark:""};this.baseAjax(t,{doneCallback:e})}}]),e}());t.default=g},"3of3":function(e,t,a){},"3vm4":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={login:{language:{joinRoomHint:{text:"......",remind:""},timeOver:{title:"",context:"10",confirm:"",notice:""},preLoad:{text:"",pass:""},detection:{company:{text:"",normal:"",icoachu:"icoachU"},selectOption:{noCam:"",noMicrophone:"",noEarphones:""},welAll:{one:"",two:"",three:"",four:""},deviceTestHeader:{device:{text:""},areaSwitch:{text:""},deviceSwitch:{text:""},optimalServer:{text:""},areaSelection:{text:""},videoinput:{text:""},audioouput:{text:""},audioinput:{text:""},detectionResult:{text:""},changeScreen:{text:""},MainMinorChange:{text:""},systemInfo:{text:""}},networkExtend:{title:{select:"",area:"",delay:"",text:""},testBtn:""},videoinputExtend:{cameraOptionAll:{cameraOption:{text:""},noticeRed:{text:""}},noticeCarmera:{one:"",two:"1360",three:"",four:"3",five:"4",six:"5",seven:"6"}},audioouputExtend:{cameraOptionAll:{cameraOption:{text:""},earphoneVolume:{text:""},clickmusic:{one:""},playMusic:""},noticeCarmera:{one:"",two:"1360",three:"2",four:"3",five:"4",six:"5",seven:"6"}},audioinputExtend:{cameraOptionAll:{cameraOption:{text:""},noticeRed:{text:""},speakSound:{text:"110"}},noticeCarmera:{one:"",two:"1360",three:"2",four:"3",five:"4",six:"5",seven:"6"}},browserDetection:{browserVersion:"",versionError:"Chrome",versionPass:"Chrome",prompt:{one:": ",two:"Chrome"}},systemInfo:{currentUser:"",operatingSystem:"",processor:"",RAM:"",serverName:"",IPAddress:"IP",LoginDevice:"",MediaServer:"",CoursewareServer:"",networkDelay:"",packetLoss:"",browser:"",uploadSpeed:"",downloadSpeed:"",roomNumber:"",versionNumber:""},CoursewareServer:{TkServer:"",DocServer:""},resultExtend:{head:{text:""},item1:{text:""},item2:{text:"",content:{abnormal:"",normal:""}},item3:{text:"",content:{video:"",listen:"",speak:""}},item4:{content:{video:"",listen:"",speak:""}}},button:{next:{text:""},join:{text:""},ok:{text:"OK"},startNetworkTest:{text:""},canSee:{text:""},notSee:{text:""},canListen:{text:""},notListen:{text:""},canSpeak:{text:""},notSpeak:{text:""},checkBack:{text:""},joinRoom:{text:""}},mirrorMode:{text:""}}}},header:{tool:{allMute:{title:{yes:"",no:""}},capture:{title:{all:"",small:""}},qrCode:{title:{yes:""}},allGift:{title:{yes:"",giftText:""}},blackBoard:{title:{open:"",close:"",prev:"",next:"",shrink:""},content:{blackboardHeadTitle:""},toolBtn:{dispenseed:"",recycle:"",againDispenseed:"",commonTeacher:""},tip:{saveImage:""},boardTool:{pen:"",text:"",eraser:"",color:""},upload:{localUpload:"",scanCodeUpload:""}},sharing:{title:""},mouse:{title:""},pencil:{title:"",pen:{text:""},Highlighter:{text:""},linellae:{text:""},arrow:{text:""},laser:{title:"",text:""}},text:{title:"",Msyh:{text:"MicrosoftYahei"},Ming:{text:""},Arial:{text:"Arial"}},shape:{title:"",outlinedRectangle:{text:""},filledRectangle:{text:""},outlinedCircle:{text:""},filledCircle:{text:""}},eraser:{title:""},undo:{title:""},redo:{title:""},clear:{title:""},tool_zoom_big:{title:""},tool_zoom_small:{title:""},VideoCapture:{title:""}},page:{prev:{text:""},next:{text:""},add:{text:""},lcFullBtn:{title:""},pptFullBtn:{title:"PPT"},h5FileFullBtn:{title:"h5"},skipPage:{text_one:"",text_two:""},ok:{text:"OK"},coursewareRemarks:{title:""}},system:{attend:{text:""},oneToOneFinsh:{text:""},Raise:{hashand:"",text:"",noText:"",yesText:"",raisingHand:""},finish:{text:""},gift:{text:""},muteAll:{text:""},help:{title:""},network:{title:"",extend:{ChinaTelecom:"",ChinaUnicom:"",ChinaMobile:"",InternationalNetwork:"",ChinaSouthernTelecom:""}},setting:{title:""}},volume:{title:""}},toolContainer:{toolIcon:{whiteBoard:{title:""},courseList:{title:""},classFolder:{title:""},adminFolders:{title:""},documentList:{title:"",titleTop:"",titleSort:"",button:{addCourse:{text:" + "},fileName:{text:""},fileType:{text:""},uploadTime:{text:""},search:{name:"",text:""},close:{text:""}}},H5DocumentList:{title:"",titleTop:"",button:{addCourse:{text:" + h5"}}},addCourse:{relationCourse:{title:"",button:{addCourse:{text:" + "},pervPage:"",nextPage:"",relation:"",loadMore:""}},uploadCourse:{resourceLibrary:"",localUpload:"",uploadNotice:{one:"1. *.xls;*.xlsx;*.ppt;*.pptx;*.doc;*.docx;*.txt;*.pdf;*.jpg; *.gif;*.jpeg;*.png;*.bmp;",two:"2. 300M300;",three:"3. PPTPPT;",four:"4. WPSPDF;",five:"5. PPT ;"},button:{setLoaclFile:"",setLoaclAgain:"",upload:"",uploadAgain:""},fileInfo:"",h5Name:"",dynamicPpt:"ppt",dynamicPptSuccess:""}},mediaDocumentList:{title:"",titleTop:"",button:{addCourse:{text:" + "}}},moviesSharing:{title:""},resourceLibrary:{title:"",dynamicpptSuccess:"",dynamicpptFail:""},message:{title:""},full:{title:""},fullOff:{title:""},overallControl:{title:""},screenSharing:{title:""},messageList:{title:""},addDocument:{title:""},userList:{title:"",thead:{facility:"",nick:"",platform:"",camera:"",microphone:"",draw:"",raise:"",mute:"",remove:""},button:{Scrawl:{on:{title:""},off:{title:""}},answered:{on:{title:""},off:{title:""}},video:{on:{title:"ON"},off:{title:"OFF"},disabled:{title:""}},update:{up:{title:""},down:{title:""}},audio:{on:{title:"ON"},off:{title:"OFF"},disabled:{title:""}},mute:{on:{title:""},off:{title:""},patrol:{on:{title:""},off:{title:""}}},remove:{title:""}},input:{text:""},userStatus:{assistant:{text:""},student:{text:""}},groupModeStatus:{groupMode:{text:""},normalMode:{text:""}}},disableVideo:{yes:"ON",no:"OFF"},disableAudio:{yes:"ON",no:"OFF"},setting:{title:""},help:{title:""},guide:{title:""},seekHelp:{title:""},FileConversion:{text:""}}},videoContainer:{videoIcon:{camera:{title:""},microphone:{title:""}},sendMsg:{inputText:{placeholder:"",patrolPlaceholder:"",frequently:""},btn:{title:{banChat:"",allChat:"",sendImg:"",sendEmotion:""}},repeatSpeak:{text:""},sendBtn:{text:"",title:""},tap:{chat:"",question:"",users:"",doc:"",refresh:""},tips:{online:"",goback:"",pics:"",private:"",teacher:"",assistant:"",student:"",patrol:"",me:"",join:"",leave:"",beforeClass:"",afterClass:"",whiteBoard:"",openAllBans:"",closeAllBans:""},filter:{quizobj:"",seeQuiz:"",seeChat:"",seeAnswer:""},fontSize:{fontSize14:"",fontSize16:"",fontSize18:"",fontSize22:""}},download:{downloadFile:{title:""},downloadFailMessage:{title:""}}},otherVideoContainer:{videoIcon:{microphone:{title:""},userPen:{title:""}},button:{scrawl:{yes:"",no:""},platform:{yes:"",no:""},audio:{yes:"ON",no:"OFF"},video:{yes:"ON",no:"OFF"},gift:{yes:"",no:""},close:{yes:""},restoreDrag:{text:""},allMute:{yes:""},videoStatusChairman:{yes:"ON",no:"OFF",text:"OFF"},audioStatusChairman:{yes:"ON",no:"OFF",text:"OFF"},areaExchange:{text:""},oneKeyReset:{text:""},doubleDivision:{text:""},onlyAudio:{no:"",yes:"",create:"",cancel:""},pointerReminder:{text:""}},prompt:{text:"",userText:""}},alertWin:{login:{register:{eventListener:{roomDelClassBegin:{text:""},participantEvicted:{roleConflict:{text:""},kick:{text:""},noJoin:{text:"3"}}}},func:{checkMeeting:{status_minus_1:{text:""},status_3001:{text:""},status_3002:{text:""},status_3003:{text:""},status_4007:{text:""},status_4008:{text:""},status_4020:{text:""},status_4110:{text:""},status_4109:{text:""},status_4103:{text:""},status_4112:{text:""},status_4113:{text:""},status_defalut:{text:""}}}},call:{prompt:{chat:{literally:{yes:{text:"ON"},no:{text:"OFF"}}},publishStatus:{stream:{yes_status_3:{text:""},no_status_0:{text:""},yes_status_0_to_2:{text:"OFF"},yes_status_3_to_2:{text:"OFF"},videooff:{text:"OFF"},audiooff:{text:"OFF"},audioon:{text:"ON"},videoon:{text:"ON"},allon:{text:""},alloff:{text:""},speakoff:{text:""},speakon:{text:""}},download:{success:{text:""},failed:{text:""}},allMute:{yes:{text:""},no:{text:""}}},joinRoom:{stream:{join:{text:""},leave:{text:""}}},allSilence:{yes:{text:""},no:{text:""}},homeBtnRemind:{join:{text:""},leave:{text:""},userBackgroundMode:{text:""}},streamConnectFailed:{onceSuccessed:{text:""},notSuccess:{text:"UDPOFF"}},remoteStreamFailure:{udpNotOnceSuccess:{one:"",two:"UDP"},udpMidwayDisconnected:{one:"",two:"UDP"},publishvideoFailure_notOverrun:{one:"",two:""},publishvideoFailure_overrun:{one:""},mobileHome:{one:"",two:""}}},fun:{uploadCourseFile:{fileTypeError:{text:{one:".",two:"'"}},fileSizeError:{text:{one:""}},fileUpload:{success:{text:"'"},failureCode:{text:""},failureNegativeOne:{text:""},failureNegativeTwo:{text:""},failureNegativeThree:{text:""},failureNegativeFour:{text:""},failureNegativeSeven:{text:""},failureNegativeEight:{text:""},failureNegativeTen:{text:""},failureFhree:{text:""},failureFour:{text:"index.html"}}},deleteCourseFile:{fileDelete:{failure:{text:""}},isDel:""},page:{pageInteger:{text:""},pageMax:{text:""},pageMin:{text:"1"}},UnreadMessage:{text:""}}},ok:{showError:{text:"OK"},showPrompt:{text:"OK"},showConfirm:{cancel:"",ok:"OK"}},title:{showError:{text:""},showPrompt:{text:""},showConfirm:{text:""}},settingWin:{settingTitle:{text:""},default:{text:""},communications:{text:""},settingOk:{text:""},settingClose:{text:""},videoInput:{text:""},audioInput:{text:""},audioOutput:{text:""}},messageWin:{title:{closeWindow:{text:""},classBeginEnd:{text:""},allGift:{text:""}},winMessageText:{closeWindow:{ok:{text:""}},classBeginEnd:{text:""},removeStudent:{text:""},classBeginEndLocalRecord:{text:"URL"},classBeginStartNotSelectRecord:{text:""},aloneGift:{before:"",after:""},allGift:{one:"",two:"",three:""}},messageOk:{text:"OK"},messageClose:{text:""}}},remind:{time:{readyStart:{one:"",two:""},timeoutStart:{one:"",two:""},endNotBegin:{one:""},readyEnd:{one:"",two:""},timeoutReadyEnd:{one:"",two:"",three:""},timeoutEnd:{one:"",two:")"},endBegin:{one:""},readyEndAiBanMa:{one:",",two:",",three:"",four:""}},button:{remindKnow:{text:""},raise:{yes:"",no:""}},raise:{content:{text:""}}},publish:{beyondMaxVideo:{text:"!"},reason401:{text:""},reason402:{text:""}},networkStatus:{rtt:{title:{text:""}},packetsLost:{title:{text:""}},network:{title:{text:""},value:{excellent:"",well:"",general:"",suck:""},notice:""}},toolCase:{toolBox:{text:""}},qrCode:{scan:{text:""},attention:{text:""}},timers:{timerSetInterval:{text:""},timerBegin:{text:""},timerStop:{text:""},again:{text:""},startNowBtn:{text:""}},dial:{turntable:{text:""}},answers:{headerTopLeft:{text:""},headerMiddel:{text:""},beginAnswer:{text:""},tureAccuracy:{text:""},add:{text:""},reduce:{text:""},people:{text:""},trueAnswer:{text:""},endAnswer:{text:""},restarting:{text:""},myAnswer:{text:""},changeAnswer:{text:""},selectAnswer:{text:""},submitAnswer:{text:""},numberOfAnswer:{text:""},PublishTheAnswer:{text:""},published:{text:""},details:{text:""},statistics:{text:""},student:{text:""},TheSelectedTheAnswer:{text:""},AnswerTime:{text:""},end:{text:""},selectedAnswer:{text:""}},responder:{responder:{text:""},begin:{text:""},restart:{text:""},clickTitle:{text:""},somebodyTeacher:{text:""},my:{text:""},other:{text:""},inAnswerTitle:{text:"..."},inAnswerBtn:{text:""},inAnswerStudent:{text:""},noContest:{text:""},noStart:{text:""}},shares:{shareSceen:{text:""},stopShare:{text:""},shareing:{text0:"......",text1:"......",text2:"......"},sharingMode:{text:""},programmShare:{text:""},shareArea:{text:""},startSharing:{text:""},selectProgramm:{text:""},programmShareArea:{text:""},screenWidthTip:{text:"1080P"},safariNotify:{text:"SafariChromePC"}},layoutInfo:{layout:"",CoursewareDown:"",VideoDown:"",Encompassment:"",Bilateral:"",MainPeople:"",OnlyVideo:"",oneToOne:"",doubleDivision:"",doubleVideo:"",synStudent:""},phoneBroadcast:{chat:{face:{naughty:"",happy:"",complacent:"",curlOnesLips:"",grieved:"",shedTears:"",kiss:"",love:""}}},getUserMedia:{accessAccepted:{getUserMediaFailure_reGetAudio:"",getUserMediaFailure_reGetVideo:""},accessDenied:{streamFail:"/",notAudioAndVideo:""},deviceError:"The system can't get the hardware information. Please restart the computer."},version:{clientDeviceVersionInfo:{key:"",client:"",pc:"Web",mobile:"Web"},browserVersionInfo:{webpageApp:"",mobileApp:""},appVersionInfo:{key:""},ipInfo:{key:"IP"}},notice:{content:"",href:"",publish:"",cancel:""},loadSupernatantPrompt:{reconnecting:"",loadRooming:"",loadRoomingPlayback:"",refreshing:""},remoteControl:{remoteTitle:"",refresh:"",deviceManagement:"",optimalServer:"",kick:"",getDocAddress:"",line1:"",line2:""},localRecord:{recordState:{notStart:"",recording:"",recordPaused:""},title:{startRecord:"",stopRecord:"",pauseRecord:"",playRecord:""}},coursewareRemarks:{remarks:"",close:""},videLabel:{exit:""},captureImg:{StartUploading:"",UploadSuccess:"",uploadFailed:"",SaveSuccess:" "},moreUser:{text:""},reloadDoucumentHint:{one:"",two:""},qPanel:{answerPanel:"",tips:["",""],addOption:"",delOption:"",start:"",end:"",restart:"",rightOptionIs:"",hasPub:"",answerNum:"",people:"",commitAnswer:"",modifyAnswer:"",detail:"",statistics:"",useTime:"",choseAnswer:"",myAnswer:"",pubResult:"",loading:""},whiteboardSetSize:{lineWidth:"",eraserWidth:"",textWidth:""},fontSize:{number:""}}},"44Pr":function(e,t,a){},"47/Y":function(e,t,a){},"4M0Q":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=T(a("m1cH")),o=T(a("Yz+Y")),n=T(a("iCc5")),l=T(a("V7oC")),s=T(a("FYw3")),r=T(a("mRg0")),d=T(a("QbLZ")),u=T(a("CSPP")),c=(0,u.default)(["\n","\ndisplay: flex;\nflex-wrap: wrap-reverse;\n// flex-wrap: wrap-reverse;\nflex-direction: column-reverse;\n"],["\n","\ndisplay: flex;\nflex-wrap: wrap-reverse;\n// flex-wrap: wrap-reverse;\nflex-direction: column-reverse;\n"]),f=(0,u.default)(["\nposition: relative;\n","\n"],["\nposition: relative;\n","\n"]),h=(0,u.default)(["\n    \n    ","\n\n"],["\n    \n    ","\n\n"]),m=a("q1tI"),p=T(m),g=T(a("aJKe")),v=T(a("XbJA")),y=T(a("JL1q")),S=T(a("eQYT")),b=T(a("HPAy")),C=T(a("By8T")),k=T(a("AAUp")),w=T(a("vOnD"));T(a("mrNk"));a("jBpf");T(a("uuqz"));function T(e){return e&&e.__esModule?e:{default:e}}var E=w.default.div.attrs({className:"oneToone"})(c,function(e){return(0,d.default)({},e.RightContentVesselSmartStyleJson,e.RightVesselSmartStyleJson,{width:"100%"})}),I=w.default.div(f,function(e){return{width:e.width,height:e.height,top:e.top,left:e.isDoubleVideoStudent?"50%":e.left,rigth:e.rigth,position:e.position,order:e.order,zIndex:e.zIndex,display:void 0!==e.isDoubleVideo&&e.isDoubleVideo?"none":"block",background:e.background}}),D=w.default.div(h,function(e){return{left:"calc( "+e.width+" - 0.15rem )",opacity:e.opacity}}),x=w.default.div(h,function(e){return{left:"calc( 50vw - 0.15rem )",opacity:e.opacity}}),R=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.doubleVideotransStyleFn=function(e){if(a.state.isDoubleVideo){var t=e[0].height;if(e[a.state.styleArr[1]]=(0,d.default)({},e[a.state.styleArr[1]],{height:t,width:"50vw",position:"absolute !important",top:0,left:0}),e[a.state.styleArr[2]]=(0,d.default)({},e[a.state.styleArr[2]],{height:t,width:"50vw",position:"absolute  !important",top:0,right:0}),!a.state.isTeacherFirst){var i=e[a.state.styleArr[1]];e[a.state.styleArr[1]]=e[a.state.styleArr[2]],e[a.state.styleArr[2]]=i}return e}},a.doubleVideoExchang=function(){a.setState({isTeacherFirst:!a.state.isTeacherFirst})},a.state={styleArr:[0,1,2],offsetWidth:0,offsetHeight:0,mouseMoveX:0,isTrans:!1,switchName:"",update:!1,isFullScreen:!1,isStartMove:!1,isDoubleVideo:!1,isTeacherFirst:!0},a.defaultX=void 0,a.defaultY=void 0,a.videoScale=b.default.windowInnerWidth/S.default.STANDARDSIZE,a.baseOffsetWidth=0,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){g.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("doubleDivisionExchange",this.handlerDoubleDivisionExchange.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("receive-msglist-DoubleDivision",this.handlerReceiveMsglistDoubleDivision.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("receive-msglist-SwitchLayout",this.handleMsgListSwitchLayout.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("receive-msglist-FullScreen",this.handleMsgListFullScreen.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("SwitchLayout",this.handleSwitchLayout.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("fullScreen",this.handlerFullScreen.bind(this),this.listernerBackupid),g.default.CoreController.dispatchEvent({type:"SwitchLayout",nowLayout:S.default.layoutParams[S.default.layout]})}},{key:"componentWillUnmount",value:function(){g.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerRoomConnected",value:function(){g.default.CoreController.dispatchEvent({type:"SwitchLayout",nowLayout:S.default.layoutParams[S.default.layout]})}},{key:"handlerReceiveMsglistDoubleDivision",value:function(e){var t=e.message.offsetWidth;void 0!==t&&this.upDatesDoubleDivisionStatus(t)}},{key:"handleMsgListSwitchLayout",value:function(e){e.message.nowLayout&&this.handleSwitchLayout(e.message,!0)}},{key:"handleMsgListFullScreen",value:function(e){e.message.FullScreenArray&&e.message.FullScreenArray.length&&this.setState({isFullScreen:!0})}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message,a=void 0===t?{}:t;switch(a.name){case"DoubleDivision":var i=a.data&&a.data.offsetWidth;if(void 0===i)return;this.upDatesDoubleDivisionStatus(i);break;case"ClassBegin":this.forceUpdate();break;case"FullScreen":a.data.fullScreenType;this.setState({isFullScreen:!0});break;case"switchLayout":this.handleSwitchLayout(a.data,!0)}}},{key:"handleSwitchLayout",value:function(e,t){var a=e.nowLayout,i=e.isSynStudent,o=this.getTransWidth(),n=o.maxWidth;o.transWidth;switch(i&&!t&&v.default.sendSignllingSwitchLayout({nowLayout:a}),a){case"oneToOne":this.setState({isDoubleVideo:!1}),this.upDatesDoubleDivisionStatus(0),this.baseOffsetWidth=0;break;case"oneToOneDoubleDivision":this.setState({isDoubleVideo:!1}),this.upDatesDoubleDivisionStatus(n),this.baseOffsetWidth=n;break;case"oneToOneDoubleVideo":g.default.CoreController.dispatchEvent({type:"fullScreen",message:{fullScreenType:"courseware_file",needPictureInPictureSmall:!1}}),this.setState({isDoubleVideo:!0}),this.upDatesDoubleDivisionStatus(0);break;default:this.setState({isDoubleVideo:!1}),this.upDatesDoubleDivisionStatus(0)}}},{key:"handlerFullScreen",value:function(e){var t=e.message,a=void 0===t?{}:t,i=a.isFullScreen,o=a.fullScreenType;if(("courseware_file"===o||"stream_media"===o&&S.default.hasRoomtype.oneToOne)&&this.setState({isFullScreen:i}),"stream_video"===o&&S.default.hasRoomtype.oneToOne){var n=a.needPictureInPictureSmall;this.setState({isFullScreen:n})}}},{key:"handlerDoubleDivisionExchange",value:function(){var e=[].concat((0,i.default)(this.state.styleArr)),t=e[1];e[1]=e[2],e[2]=t,this.setState({styleArr:e})}},{key:"upDatesDoubleDivisionStatus",value:function(e){var t=this.getTransWidth(),a=t.maxWidth,i=t.transWidth;(e=e>0?e<a?e:a:0)>i&&!this.state.isTrans&&this.setState({isTrans:!0,switchName:"hide"}),e<i&&this.setState({isTrans:!1,switchName:"",styleArr:[0,1,2]}),0===e&&this.setState({isTrans:!1,switchName:"",styleArr:[0,1,2]}),this.setState({offsetWidth:e})}},{key:"handlerRoomDelmsg",value:function(e){var t=e.message,a=void 0===t?{}:t;switch(a.name){case"ClassBegin":this.upDatesDoubleDivisionStatus(0),this.forceUpdate();break;case"FullScreen":a.data.fullScreenType;this.setState({isFullScreen:!1})}}},{key:"getWindowWidth",value:function(){return this.delrem(this.props.RightVesselSmartStyleJson.width)+this.delrem(this.props.RightContentVesselSmartStyleJson.width)}},{key:"getTransWidth",value:function(){var e=this.getWindowWidth();return{maxWidth:e/2-this.delrem(this.props.RightVesselSmartStyleJson.width),transWidth:e/2*.75-this.delrem(this.props.RightVesselSmartStyleJson.width)}}},{key:"transStyleFn",value:function(e){if(!this.state.isFullScreen){var t=e[0].height;switch(e[0].position="absolute !important",e[0].left=0,e[this.state.styleArr[1]]=(0,d.default)({},e[this.state.styleArr[1]],{height:t,position:"absolute !important",top:0,right:0,zIndex:1}),e[this.state.styleArr[2]]=(0,d.default)({},e[this.state.styleArr[2]],{height:"2.46rem",width:"3.3rem",position:"absolute  !important",top:0,right:0,zIndex:3,transition:"all 0.5s"}),this.state.switchName){case"show":e[1].isSmallVideo&&(e[1].right="-3.3rem"),e[2].isSmallVideo&&(e[2].right="-3.3rem");break;case"hide":e[2].right=0}return e}}},{key:"delrem",value:function(e){return Number((e+="").split("rem")[0].split("px")[0])}},{key:"testMouseDown",value:function(e){e.stopPropagation(),this.defaultX=e.screenX,this.defaultY=e.screenY,this.a=0,this.setState({isStartMove:!0})}},{key:"testMouseMove",value:function(e){if(e.stopPropagation(),this.state.isStartMove&&this.defaultX&&this.defaultY){var t=e.screenX-this.defaultX,a=this.state.offsetWidth-(t-this.a)/this.videoScale;this.a=t,this.upDatesDoubleDivisionStatus(a)}}},{key:"testMouseUp",value:function(e){e.stopPropagation(),this.state.isStartMove&&(this.setState({isStartMove:!1}),this.setState({update:!this.state.update})),this.defaultX&&(this.defaultX=void 0),this.defaultY&&(this.defaultY=void 0),this.baseOffsetWidth!=this.state.offsetWidth&&(this.state.offsetWidth>0&&this.state.isTrans?v.default.sendSignllingSwitchLayout({nowLayout:"oneToOneDoubleDivision"}):v.default.sendSignllingSwitchLayout({nowLayout:"oneToOne"}),this.baseOffsetWidth=this.state.offsetWidth)}},{key:"switchHideShow",value:function(){var e="";switch(this.state.switchName){case"show":e="hide";break;case"hide":e="show"}this.setState({switchName:e})}},{key:"doubleVideo",value:function(){this.setState({isDoubleVideo:!0})}},{key:"render",value:function(){var e=this,t=(0,d.default)({},this.props.RightVesselSmartStyleJson),a=(0,d.default)({},this.props.RightContentVesselSmartStyleJson);t.top=0,a.top=0,t.position="relative",a.position="relative","skin_beyond_default"===S.default.skin?a.background="rgba(101,92,191,0.23)":"skin_black"===S.default.skin&&(a.background="#242428"),t.height&&(t.height=t.height.split("rem")[0]/2+"rem");var i={0:(0,d.default)({},a,{order:3}),1:(0,d.default)({},t,{order:2,className:"video_wrap1v1",isSmallVideo:!1}),2:(0,d.default)({},t,{order:1,className:"video_wrap1v1",isSmallVideo:!0})};if(b.default.doubleScreen&&(i[0]=(0,d.default)({},i[0],{top:"0.42rem",order:-1})),this.state.offsetWidth){var o=this.state.offsetWidth;i[0].width=this.delrem(i[0].width)-o+"rem",i[1].width=this.delrem(i[1].width)+o+"rem",i[2].width=this.delrem(i[2].width)+o+"rem"}var n=this.state.styleArr.map(function(t){var a=i[t];return e.state.isFullScreen?a.zIndex="":a.zIndex=1,a});return!this.state.isTrans||this.state.isFullScreen||this.state.isDoubleVideo||(n=this.transStyleFn(n)),this.state.isDoubleVideo&&this.doubleVideotransStyleFn(n),p.default.createElement(E,this.props,p.default.createElement(I,(0,d.default)({},n[0],{isDoubleVideo:this.state.isDoubleVideo}),p.default.createElement(k.default,{pureVideoMod:this.state.isDoubleVideo})),p.default.createElement(I,n[1],p.default.createElement(C.default,{isTeacher:!0,styleJson:n[1],isSmallVideo:n[1].isSmallVideo,RightContentVesselSmartStyleJson:a,isHasHideBtn:!(!this.state.isTrans||this.state.isFullScreen)&&2==this.state.styleArr[1],switchName:this.state.switchName,switchHideShow:this.switchHideShow.bind(this)})),p.default.createElement(I,n[2],p.default.createElement(C.default,{isTeacher:!1,isSmallVideo:n[2].isSmallVideo,styleJson:n[2],RightContentVesselSmartStyleJson:a,isHasHideBtn:!(!this.state.isTrans||this.state.isFullScreen)&&2==this.state.styleArr[2],switchName:this.state.switchName,switchHideShow:this.switchHideShow.bind(this)})),!y.default.handler.getAppPermissions("doubleDivision")||this.state.isFullScreen||this.state.isDoubleVideo?"":p.default.createElement(D,{width:n[0].width,opacity:this.state.isStartMove?1:void 0,className:"drag_btn_box"},p.default.createElement("button",{className:"drag_btn icon-btn_drag",onMouseDown:this.testMouseDown.bind(this),onMouseUp:this.testMouseUp.bind(this)}),this.state.isStartMove?p.default.createElement("div",{className:"drag_mask",style:{top:"-"+this.props.RightVesselSmartStyleJson.top,left:"-"+n[0].width},onMouseMove:this.testMouseMove.bind(this),onMouseUp:this.testMouseUp.bind(this)}):""),this.state.isDoubleVideo&&!this.state.isFullScreen?p.default.createElement(x,{width:n[0].width,opacity:this.state.isStartMove?1:void 0,className:"drag_btn_box"},p.default.createElement("button",{id:"exchange_btn",className:"exchange_btn icon-btn_change",onClick:this.doubleVideoExchang}),this.state.isStartMove?p.default.createElement("div",{className:"drag_mask",style:{top:"-"+this.props.RightVesselSmartStyleJson.top,left:"-"+n[0].width}}):""):"")}}]),t}(m.PureComponent);t.default=R},"4b5b":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(a("Yz+Y")),o=u(a("iCc5")),n=u(a("V7oC")),l=u(a("FYw3")),s=u(a("mRg0")),r=(0,u(a("CSPP")).default)(["\n  display: ",";\n"],["\n  display: ",";\n"]),d=u(a("q1tI"));function u(e){return e&&e.__esModule?e:{default:e}}var c=u(a("vOnD")).default.div(r,function(e){return e.stream?void 0:"none"}),f=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.stream,a=e.user;return d.default.createElement(c,{stream:t,className:"v-name "},d.default.createElement("label",null,a.nickname))}}]),t}(d.default.Component);t.default=f},"4rWi":function(e,t,a){},"4vYp":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={login:{language:{joinRoomHint:{text:""},preLoad:{text:"",pass:""},detection:{company:{text:"",normal:"",icoachu:""},selectOption:{noCam:"",noMicrophone:"",noEarphones:""},welAll:{one:"",two:"",three:" , ",four:""},deviceTestHeader:{device:{text:""},areaSwitch:{text:""},deviceSwitch:{text:""},optimalServer:{text:""},areaSelection:{text:""},videoinput:{text:""},audioouput:{text:""},audioinput:{text:""},detectionResult:{text:""},changeScreen:{text:""},MainMinorChange:{text:""},systemInfo:{text:""}},networkExtend:{title:{select:"",area:"",delay:"",text:""},testBtn:""},videoinputExtend:{cameraOptionAll:{cameraOption:{text:""},noticeRed:{text:""}},noticeCarmera:{one:":",two:"1.360",three:"2.",four:"3.",five:"4.",six:"5.",seven:"6."}},audioouputExtend:{cameraOptionAll:{cameraOption:{text:""},earphoneVolume:{text:""},clickmusic:{one:""},playMusic:""},noticeCarmera:{one:":",two:"1.360",three:"2.",four:"3.",five:"4.",six:"5.",seven:"6."}},audioinputExtend:{cameraOptionAll:{cameraOption:{text:""},noticeRed:{text:""},speakSound:{text:"110"}},noticeCarmera:{one:":",two:"1.360",three:"2.",four:"3.",five:"4.",six:"5.",seven:"6."}},browserDetection:{browserVersion:"",versionError:"Chrome",versionPass:"Chrome",prompt:{one:": ",two:"Chrome"}},systemInfo:{currentUser:"",operatingSystem:"",processor:"",RAM:"",serverName:"",IPAddress:"IP",LoginDevice:"",MediaServer:"",CoursewareServer:"",networkDelay:"",packetLoss:"",browser:"",uploadSpeed:"",downloadSpeed:"",roomNumber:"",versionNumber:""},CoursewareServer:{TkServer:"",DocServer:""},resultExtend:{head:{text:""},item1:{text:""},item2:{text:"",content:{abnormal:"",normal:""}},item3:{text:"",content:{video:"",listen:"",speak:""}},item4:{content:{video:"",listen:"",speak:""}}},button:{next:{text:""},join:{text:""},ok:{text:""},startNetworkTest:{text:""},canSee:{text:""},notSee:{text:""},canListen:{text:""},notListen:{text:""},canSpeak:{text:""},notSpeak:{text:""},checkBack:{text:""},joinRoom:{text:""}},mirrorMode:{text:""}}}},header:{tool:{allStepDown:{title:{yes:"",no:""}},allMute:{title:{yes:"",no:""}},capture:{title:{all:"",small:""}},qrCode:{title:{yes:""}},allGift:{title:{yes:"",giftText:""}},blackBoard:{title:{open:"",close:"",prev:"",next:"",shrink:""},content:{blackboardHeadTitle:""},toolBtn:{dispenseed:"",recycle:"",againDispenseed:"",commonTeacher:""},tip:{saveImage:""},boardTool:{pen:"",text:"",eraser:"",color:""},upload:{localUpload:"",scanCodeUpload:""}},sharing:{title:""},mouse:{title:""},pencil:{title:"",pen:{text:""},Highlighter:{text:""},linellae:{text:""},arrow:{text:""},laser:{title:"",text:""}},text:{title:"",Msyh:{text:""},Ming:{text:""},Arial:{text:"Arial"}},shape:{title:"",outlinedRectangle:{text:""},filledRectangle:{text:""},outlinedCircle:{text:""},filledCircle:{text:""}},eraser:{title:""},undo:{title:""},redo:{title:""},clear:{title:""},tool_zoom_big:{title:""},tool_zoom_small:{title:""},tool_rotate_left:{title:""},tool_rotate_right:{title:""},colorAndMeasure:{title:"",selectColorText:"",selectMeasure:""},VideoCapture:{title:""}},page:{prev:{text:""},next:{text:""},add:{text:""},lcFullBtn:{title:""},pptFullBtn:{title:"PPT"},h5FileFullBtn:{title:"h5"},skipPage:{text_one:"",text_two:""},ok:{text:""},coursewareRemarks:{title:""}},system:{attend:{text:" "},oneToOneFinsh:{text:" "},Raise:{hashand:"   ",text:" ",noText:"",yesText:"",raisingHand:""},finish:{text:" "},gift:{text:""},muteAll:{text:""},help:{title:""},network:{title:"",extend:{ChinaTelecom:"China Telecom",ChinaUnicom:"China Unicom",ChinaMobile:"China Mobile",InternationalNetwork:"International Network",ChinaSouthernTelecom:"China Southern Telecom"}},setting:{title:""}},volume:{title:""},ControlPanel:{operation:""}},toolContainer:{toolIcon:{whiteBoard:{title:""},courseList:{title:""},classFolder:{title:""},adminFolders:{title:""},documentList:{title:"",titleTop:"",titleSort:"",button:{addCourse:{text:" + "},fileName:{text:""},fileType:{text:""},uploadTime:{text:""},search:{name:"",text:""},close:{text:""}}},H5DocumentList:{title:"",titleTop:"",button:{addCourse:{text:" + H5"}}},addCourse:{relationCourse:{title:"",button:{addCourse:{text:" + "},pervPage:"",nextPage:"",relation:"",loadMore:""}},uploadCourse:{resourceLibrary:"",localUpload:"",uploadNotice:{one:"1. *.xls;*.xlsx;*.ppt;*.pptx;*.doc;*.docx;*.txt;*.pdf;*.jpg; *.gif;*.jpeg;*.png;*.bmp;",two:"2. 300M300;",three:"3. PPTPPT;",four:"4. WPSPDF;",five:"5. PPT ;"},button:{setLoaclFile:"",setLoaclAgain:"",upload:"",uploadAgain:""},fileInfo:"",h5Name:"",dynamicPpt:"ppt",dynamicPptSuccess:""}},mediaDocumentList:{title:"",titleTop:"",button:{addCourse:{text:" + "}}},moviesSharing:{title:""},resourceLibrary:{title:"",dynamicpptSuccess:"",dynamicpptFail:""},message:{title:""},full:{title:""},fullOff:{title:""},overallControl:{title:""},screenSharing:{title:""},messageList:{title:""},addDocument:{title:""},userList:{title:"",thead:{facility:"",nick:"",platform:"",camera:"",microphone:"",draw:"",raise:"",mute:"",remove:""},button:{Scrawl:{on:{title:""},off:{title:""}},answered:{on:{title:""},off:{title:""}},video:{on:{title:""},off:{title:""},disabled:{title:""}},update:{up:{title:""},down:{title:""}},audio:{on:{title:""},off:{title:""},disabled:{title:""}},mute:{on:{title:""},off:{title:""},patrol:{on:{title:""},off:{title:""}}},remove:{title:""}},input:{text:""},userStatus:{assistant:{text:""},student:{text:""}},groupModeStatus:{groupMode:{text:""},normalMode:{text:""}}},disableVideo:{yes:"",no:""},disableAudio:{yes:"",no:""},setting:{title:""},help:{title:""},guide:{title:""},seekHelp:{title:""},FileConversion:{text:""}}},videoContainer:{videoIcon:{camera:{title:""},microphone:{title:""}},sendMsg:{inputText:{placeholder:"",patrolPlaceholder:"",frequently:""},btn:{title:{banChat:"",allChat:"",sendImg:"",sendEmotion:""}},repeatSpeak:{text:""},sendBtn:{text:"",title:""},tap:{chat:"",question:"",users:"",doc:"",refresh:""},tips:{online:"",goback:"",pics:"",private:"TA",teacher:"",assistant:"",student:"",patrol:"",me:"",join:"",leave:"",beforeClass:"",afterClass:"",whiteBoard:"",openAllBans:"",closeAllBans:""},filter:{quizobj:"",seeQuiz:"",seeChat:"",seeAnswer:""},fontSize:{fontSize14:"",fontSize16:"",fontSize18:"",fontSize22:""}},download:{downloadFile:{title:""},downloadFailMessage:{title:""}}},otherVideoContainer:{videoIcon:{microphone:{title:""},userUpdate:{title:""},userPen:{title:""}},button:{scrawl:{yes:"",no:""},platform:{yes:"",no:""},audio:{yes:"",no:""},video:{yes:"",no:""},gift:{yes:"",no:""},close:{yes:""},restoreDrag:{text:""},allPlatformDown:{yes:""},allMute:{yes:""},videoStatusChairman:{yes:"",no:"",text:""},audioStatusChairman:{yes:"",no:"",text:""},areaExchange:{text:""},doubleDivision:{text:""},oneKeyReset:{text:""},onlyAudio:{no:"",yes:"",create:"",cancel:""},pointerReminder:{text:""}},prompt:{text:"home",userText:"home"}},alertWin:{login:{register:{roomEmpty:{text:""},eventListener:{accessDenied:{text:""},errorRoom:{text:""},errorMedia:{text:{one:",",two:""}},roomClosed:{text:{one:" '",two:"' "}},roomDelClassBegin:{text:""},lostConnection:{text:{one:"",two:""},ok:{text:""},title:{text:""}},participantEvicted:{roleConflict:{text:""},kick:{text:""},noJoin:{text:","}},broadcastClass:{roleChairman:{text:""}}}},func:{checkMeeting:{status_minus_1:{text:""},status_3001:{text:""},status_3002:{text:""},status_3003:{text:""},status_4007:{text:""},status_4008:{text:""},status_4110:{text:""},status_4109:{text:""},status_4103:{text:""},status_4112:{text:""},status_defalut:{text:""}}}},call:{prompt:{noLogin:{text:""},noAudioFacility:{text:""},chat:{literally:{yes:{text:""},no:{text:""}}},publishStatus:{stream:{yes_status_3:{text:""},no_status_0:{text:""},yes_status_0_to_2:{text:","},yes_status_3_to_2:{text:""},videooff:{text:""},audiooff:{text:""},audioon:{text:""},videoon:{text:""},allon:{text:""},alloff:{text:""},speakoff:{text:""},speakon:{text:""}},download:{success:{text:""},failed:{text:""}},allMute:{yes:{text:""},no:{text:""}}},joinRoom:{stream:{join:{text:""},leave:{text:""}}},allSilence:{yes:{text:""},no:{text:""}},homeBtnRemind:{join:{text:""},leave:{text:""},userBackgroundMode:{text:""}},streamConnectFailed:{onceSuccessed:{text:""},notSuccess:{text:"udpudp"}},remoteStreamFailure:{udpNotOnceSuccess:{one:"",two:"UDP"},udpMidwayDisconnected:{one:"",two:"UDP"},publishvideoFailure_notOverrun:{one:"",two:""},publishvideoFailure_overrun:{one:""},mobileHome:{one:"",two:""}},releaseFailed:{text:""}},fun:{uploadCourseFile:{fileTypeError:{text:{one:"'.",two:"'"}},fileSizeError:{text:{one:""}},fileUpload:{success:{text:"'"},failureCode:{text:""},failureNegativeOne:{text:""},failureNegativeTwo:{text:""},failureNegativeThree:{text:""},failureNegativeFour:{text:""},failureNegativeSeven:{text:""},failureNegativeEight:{text:""},failureNegativeTen:{text:""},failureFhree:{text:""},failureFour:{text:"index.html"}}},deleteCourseFile:{fileDelete:{failure:{text:""}},isDel:""},page:{pageInteger:{text:""},pageMax:{text:""},pageMin:{text:"1"}},file:{mediaFile:{text:""},pptFile:{text:"PPT"}},video:{max:{text:""}},audit:{title:{text:""},ended:{text:""}},UnreadMessage:{text:""}}},ok:{showError:{text:""},showPrompt:{text:""},showConfirm:{cancel:"",ok:""}},title:{showError:{text:""},showPrompt:{text:""},showConfirm:{text:""}},settingWin:{settingTitle:{text:""},default:{text:""},communications:{text:""},settingOk:{text:""},settingClose:{text:""},videoInput:{text:""},audioInput:{text:""},audioOutput:{text:""}},messageWin:{title:{closeWindow:{text:""},classBeginEnd:{text:""},allGift:{text:""}},winMessageText:{closeWindow:{ok:{text:""}},classBeginEnd:{text:""},removeStudent:{text:""},classBeginEndLocalRecord:{text:""},classBeginStartNotSelectRecord:{text:""},aloneGift:{before:"",after:""},allGift:{one:"",two:"",three:""}},messageOk:{text:""},messageClose:{text:""}}},remind:{time:{readyStart:{one:"",two:""},timeoutStart:{one:"",two:""},endNotBegin:{one:""},readyEnd:{one:"",two:"~"},timeoutReadyEnd:{one:"",two:"",three:""},timeoutEnd:{one:" (",two:")"},endBegin:{one:""},readyEndAiBanMa:{one:",",two:",",three:"",four:""}},button:{remindKnow:{text:""},raise:{yes:"",no:""}},raise:{content:{text:""}}},publish:{beyondMaxVideo:{text:"!"},reason401:{text:""},reason402:{text:""}},networkStatus:{rtt:{title:{text:""}},packetsLost:{title:{text:""}},network:{title:{text:""},value:{excellent:"",well:"",general:"",suck:""}}},toolCase:{toolBox:{text:""}},qrCode:{scan:{text:""},attention:{text:""}},timers:{timerSetInterval:{text:""},timerBegin:{text:""},timerStop:{text:""},again:{text:""},startNowBtn:{text:""}},dial:{turntable:{text:""}},answers:{headerTopLeft:{text:""},headerMiddel:{text:""},beginAnswer:{text:""},tureAccuracy:{text:""},add:{text:""},reduce:{text:""},people:{text:""},trueAnswer:{text:""},endAnswer:{text:""},restarting:{text:""},myAnswer:{text:""},changeAnswer:{text:""},selectAnswer:{text:""},submitAnswer:{text:""},numberOfAnswer:{text:""},PublishTheAnswer:{text:""},published:{text:""},details:{text:""},statistics:{text:""},student:{text:""},TheSelectedTheAnswer:{text:""},AnswerTime:{text:""},end:{text:""},selectedAnswer:{text:""}},responder:{responder:{text:""},begin:{text:""},restart:{text:""},clickTitle:{text:""},somebodyTeacher:{text:""},my:{text:""},other:{text:""},inAnswerTitle:{text:"..."},inAnswerBtn:{text:""},inAnswerStudent:{text:""},noContest:{text:""},noStart:{text:""}},shares:{shareSceen:{text:""},stopShare:{text:""},shareing:{text0:"......",text1:"......",text2:"......"},sharingMode:{text:""},programmShare:{text:""},shareArea:{text:""},startSharing:{text:""},selectProgramm:{text:""},programmShareArea:{text:"* "},screenWidthTip:{text:"1080P"}},layoutInfo:{layout:"",CoursewareDown:"",VideoDown:"",Encompassment:"",Bilateral:"",MainPeople:"",OnlyVideo:"",oneToOne:"",doubleDivision:"",doubleVideo:"",synStudent:""},phoneBroadcast:{chat:{notClassBegin:{text:","},face:{naughty:"",happy:"",complacent:"",curlOnesLips:"",grieved:"",shedTears:"",kiss:"",love:""}}},getUserMedia:{accessAccepted:{getUserMediaFailure_reGetAudio:"",getUserMediaFailure_reGetVideo:""},accessDenied:{streamFail:"/",notAudioAndVideo:"/"}},broadcast:{errorHintInfo:"~"},version:{clientDeviceVersionInfo:{key:"",client:"",pc:"PC",mobile:""},browserVersionInfo:{webpageApp:"",mobileApp:""},appVersionInfo:{key:""},ipInfo:{key:"IP"}},quiz:{ask:"",answer:"",pass:"",delete:"",studentAskRemind:{part1:"",part2:""},onlyTeacher:"",onlySelf:"",intervalTips:{part1:"",part2:""}},notice:{notice:"",broadcast:"",inform:"",content:"",href:"",publishNotice:"",publishBroadcast:"",publishInform:"",publish:"",cancel:""},welcomeClassroom:{text:"",roomId:""},loadSupernatantPrompt:{reconnecting:"",loadRooming:"",loadRoomingPlayback:"",refreshing:""},remoteControl:{remoteTitle:"",refresh:"",deviceManagement:"",optimalServer:"",kick:"",getDocAddress:"",line1:"",line2:""},localRecord:{recordState:{notStart:"",recording:"",recordPaused:""},title:{startRecord:"",stopRecord:"",pauseRecord:"",playRecord:""}},coursewareRemarks:{remarks:"",close:""},videLabel:{exit:""},captureImg:{StartUploading:"",UploadSuccess:"",uploadFailed:"",SaveSuccess:" "},moreUser:{text:""},reloadDoucumentHint:{one:"",two:""},qPanel:{answerPanel:"",tips:["",""],addOption:"",delOption:"",start:"",end:"",restart:"",rightOptionIs:"",hasPub:"",answerNum:"",people:"",commitAnswer:"",modifyAnswer:"",detail:"",statistics:"",useTime:"",choseAnswer:"",myAnswer:"",pubResult:"",loading:""},whiteboardSetSize:{lineWidth:"",eraserWidth:"",textWidth:""},fontSize:{number:""}}},"5gSR":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=g(a("Yz+Y")),o=g(a("iCc5")),n=g(a("V7oC")),l=g(a("FYw3")),s=g(a("mRg0")),r=g(a("q1tI")),d=g(a("JL1q")),u=g(a("aJKe")),c=g(a("HPAy")),f=g(a("uuqz")),h=g(a("eQYT")),m=g(a("HFXx")),p=g(a("uk1l"));g(a("mrNk")),g(a("1Ea7"));function g(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentWillMount",value:function(){c.default.playback=!1,c.default.routeName="login",$(document.body).removeClass("playback"),this._refreshHandler()}},{key:"componentDidMount",value:function(){if(!c.default.isReload&&!c.default.playback){var e=(new Date).getTime(),t=window.location.href;L.Utils.sessionStorage.setItem(e,f.default.encrypt(t)),this.props.history.push("/login?timestamp="+e+"&reset=true&tplId="+h.default.template.replace(/template_/g,"")+"&skinId="+h.default.skin.replace(/skin_/g,"")+"&layout="+h.default.layout.replace(/layout_/g,"")),88===c.default.logintype?d.default.handler.joinRoom():u.default.CoreController.dispatchEvent({type:"loadDetectionDevice",message:{check:!0,start:!0}})}}},{key:"componentWillUnmount",value:function(){u.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerOkCallback",value:function(e){var t=(e||{}).needDetection;c.default.needDetectioned=t,d.default.handler.joinRoom()}},{key:"_refreshHandler",value:function(){void 0!==c.default.loadVersion?(c.default.isReload=!0,c.default.loadVersion=void 0,window.location.reload(!0)):(c.default.isRenovate?(c.default.isReload=!0,window.location.reload(!0)):f.default.getUrlParams("reset",window.location.href)&&f.default.getUrlParams("timestamp",window.location.href)&&L.Utils.sessionStorage.getItem(f.default.getUrlParams("timestamp",window.location.href))&&(c.default.isReload=!0,c.default.isRenovate=!0,window.location.href=f.default.decrypt(L.Utils.sessionStorage.getItem(f.default.getUrlParams("timestamp",window.location.href))),window.location.reload(!0)),c.default.isRenovate=!1,c.default.loadVersion=h.default.VERSIONS),window.talk_window&&"function"==typeof window.talk_window.enableResizeWindow&&window.talk_window&&"function"==typeof window.talk_window.resizeWindow&&window.talk_window.enableResizeWindow()}},{key:"render",value:function(){return r.default.createElement("div",{className:"login-container"},c.default.playback?void 0:r.default.createElement(p.default,null),c.default.playback||88===c.default.logintype?void 0:r.default.createElement(m.default,{isEnter:!0,clearFinsh:!0,handlerOkCallback:this.handlerOkCallback.bind(this),backgroundColor:"#1D1D22",okText:c.default.language.languageData.login.language.detection.button.join.text,titleText:c.default.language.languageData.login.language.detection.deviceTestHeader.device.text}))}}]),t}(r.default.Component);t.default=v},"6QO7":function(e,t,a){},"6Tyi":function(e,t,a){},"6XG9":function(e,t,a){},"6trm":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=m(a("Yz+Y")),o=m(a("iCc5")),n=m(a("V7oC")),l=m(a("FYw3")),s=m(a("mRg0")),r=m(a("CSPP")),d=(0,r.default)(["\n   display : ",";\n"],["\n   display : ",";\n"]),u=(0,r.default)(["\n    display :",";\n"],["\n    display :",";\n"]),c=m(a("q1tI")),f=m(a("HPAy")),h=m(a("vOnD"));function m(e){return e&&e.__esModule?e:{default:e}}var p=h.default.button(d,function(e){return e.isClassOverLeave?"none":e.isEncompassment?"none":"block"}),g=h.default.span.attrs({className:function(e){return e.unReadMessages<100?"":"more-meg"}})(u,function(e){return 0===e.unReadMessages||e.chat||e.isClassOverLeave?"none":"block"}),v=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.chat,a=e.buttonClick,i=e.isClassOverLeave,o=e.unReadMessages,n=e.isEncompassment;return c.default.createElement("div",{className:"chat-icon-container"},c.default.createElement(p,{title:f.default.language.languageData.toolContainer.toolIcon.message.title,className:"Tk-header-icon icon-chat "+(t?"active":""),onClick:a,isEncompassment:n,isClassOverLeave:i}),c.default.createElement(g,{unReadMessages:o,chat:t,className:"icon-chat-unread",isClassOverLeave:i},o))}}]),t}(c.default.Component);t.default=v},"71F/":function(e,t,a){},"76iB":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(a("HPAy")),o=n(a("aJKe"));function n(e){return e&&e.__esModule?e:{default:e}}var l=function(e,t){o.default.CoreController.dispatchEvent({type:"showAlert",message:{data:{title:e.title,message:e.message,ok:e.ok,callback:function(e){t&&"function"==typeof t&&t(e)}}}})},s=function(e,t){o.default.CoreController.dispatchEvent({type:"showConfirm",message:{data:{title:e.title,message:e.message,isOk:{cancel:e.button.cancel,ok:e.button.ok},callback:function(e){t&&"function"==typeof t&&t(e)}}}})},r=function(e,t){o.default.CoreController.dispatchEvent({type:"showInputTooltip",data:{title:e.title.text,contentType:e.content.type,contentText:e.content.text,isOk:{cancel:e.bottom.button[1].text,ok:e.bottom.button[0].text},callback:function(e,a){t&&"function"==typeof t&&t(e,a)}}})},d={showError:function(e,t,a,o){var n={message:e,title:a||i.default.language.languageData.alertWin.title.showError.text,ok:o||i.default.language.languageData.alertWin.ok.showError.text};l(n,t)},showPrompt:function(e,t,a,o){var n={message:e,title:a||i.default.language.languageData.alertWin.title.showPrompt.text,ok:o||i.default.language.languageData.alertWin.ok.showPrompt.text};l(n,t)},showConfirm:function(e,t,a,o,n){var l={title:a||i.default.language.languageData.alertWin.title.showConfirm.text,button:{cancel:n||i.default.language.languageData.alertWin.ok.showConfirm.cancel,ok:o||i.default.language.languageData.alertWin.ok.showConfirm.ok},message:e};s(l,t)},showInputTooltip:function(e,t){e.bottom=e.bottom?e.bottom:{button:[{name:"confirm",text:i.default.language.languageData.notice.publish},{name:"cancel",text:i.default.language.languageData.notice.cancel}]},r(e,t)}};t.default=d},"7Ln7":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.videoService=void 0;var i,o,n,l,s,r,d,u,c,f,h,m,p,g=A(a("SEkw")),v=A(a("JO7F")),y=A(a("sk9p")),S=A(a("oF3Q")),b=A(a("QbLZ")),C=A(a("P2sY")),k=A(a("EJiy")),w=A(a("gDS+")),T=A(a("Yz+Y")),E=A(a("iCc5")),I=A(a("V7oC")),D=A(a("FYw3")),x=A(a("mRg0")),R=a("2vnA"),_=A(a("LSTa")),P=A(a("YW5m"));function A(e){return e&&e.__esModule?e:{default:e}}function L(e,t,a,i){a&&(0,g.default)(e,t,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(i):void 0})}function B(e,t,a,i,o){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),o&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(o):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}var M=new(i=function(e){function t(){var e,a,i,g;(0,E.default)(this,t);for(var v=arguments.length,y=Array(v),S=0;S<v;S++)y[S]=arguments[S];return a=i=(0,D.default)(this,(e=t.__proto__||(0,T.default)(t)).call.apply(e,[this].concat(y))),L(i,"streams",o,i),L(i,"videoDragData",n,i),L(i,"videoSizeData",l,i),L(i,"layoutName",s,i),L(i,"userChangedMsg",r,i),L(i,"oneKeyData",d,i),L(i,"changeStyleData",u,i),L(i,"videoScreenId",c,i),L(i,"exchangeVideoId",f,i),L(i,"pictureInPictureClassnameFromTeacherStream",h,i),L(i,"pictureInPictureClassnameFromStudentStream",m,i),L(i,"isHasCloseBtn",p,i),g=a,(0,D.default)(i,g)}return(0,x.default)(t,e),(0,I.default)(t,[{key:"setExchangeVideoId",value:function(e){this.exchangeVideoId=e}},{key:"setStreams",value:function(e){return void 0===e?this.streams=[]:e instanceof Array&&(this.streams=e),JSON.parse((0,w.default)(this.streams))}},{key:"updateStreams",value:function(e){if(null==e)throw new Error("stream is null or undefined!");if("string"==typeof e)this.streams=this.streams.filter(function(t){return t.extensionId!==e});else if(e&&"object"===(void 0===e?"undefined":(0,k.default)(e))){var t=this.streams.findIndex(function(t){return t.extensionId===e.extensionId});-1!==t?this.streams[t]=(0,C.default)({},this.streams[t],e):this.streams.push(e)}return JSON.parse((0,w.default)(this.streams))}},{key:"updateVideoDragData",value:function(e){this.videoDragData=e}},{key:"updateVideoSizeData",value:function(e){this.videoSizeData=e}},{key:"deleteVideoData",value:function(e){var t=(0,b.default)({},this.videoDragData.otherVideoStyle),a=(0,b.default)({},this.videoSizeData.otherVideoSize);delete t[e],delete a[e]}},{key:"updatelayout",value:function(e){this.layoutName=e,"MainPeople"!==e&&this.setExchangeVideoId(null)}},{key:"updateChangedMsg",value:function(e){this.userChangedMsg=e}},{key:"setVideoScreenId",value:function(e){this.videoScreenId=e}},{key:"setOneKey",value:function(e){this.oneKeyData=e}},{key:"setChangeStyle",value:function(e){this.changeStyleData=e}},{key:"setStateData",value:function(e){var t=this;(0,S.default)(e).forEach(function(e){var a=(0,y.default)(e,2),i=a[0],o=a[1];t[i]=o})}}]),t}(_.default),o=B(i.prototype,"streams",[R.observable],{enumerable:!0,initializer:function(){return[]}}),n=B(i.prototype,"videoDragData",[R.observable],{enumerable:!0,initializer:function(){return{}}}),l=B(i.prototype,"videoSizeData",[R.observable],{enumerable:!0,initializer:function(){return{}}}),s=B(i.prototype,"layoutName",[R.observable],{enumerable:!0,initializer:function(){return""}}),r=B(i.prototype,"userChangedMsg",[R.observable],{enumerable:!0,initializer:function(){return{}}}),d=B(i.prototype,"oneKeyData",[R.observable],{enumerable:!0,initializer:function(){return{}}}),u=B(i.prototype,"changeStyleData",[R.observable],{enumerable:!0,initializer:function(){return{}}}),c=B(i.prototype,"videoScreenId",[R.observable],{enumerable:!0,initializer:function(){}}),f=B(i.prototype,"exchangeVideoId",[R.observable],{enumerable:!0,initializer:function(){}}),h=B(i.prototype,"pictureInPictureClassnameFromTeacherStream",[R.observable],{enumerable:!0,initializer:function(){}}),m=B(i.prototype,"pictureInPictureClassnameFromStudentStream",[R.observable],{enumerable:!0,initializer:function(){}}),p=B(i.prototype,"isHasCloseBtn",[R.observable],{enumerable:!0,initializer:function(){return!1}}),B(i.prototype,"setExchangeVideoId",[R.action],(0,v.default)(i.prototype,"setExchangeVideoId"),i.prototype),B(i.prototype,"setStreams",[R.action],(0,v.default)(i.prototype,"setStreams"),i.prototype),B(i.prototype,"updateStreams",[R.action],(0,v.default)(i.prototype,"updateStreams"),i.prototype),B(i.prototype,"updateVideoDragData",[R.action],(0,v.default)(i.prototype,"updateVideoDragData"),i.prototype),B(i.prototype,"updateVideoSizeData",[R.action],(0,v.default)(i.prototype,"updateVideoSizeData"),i.prototype),B(i.prototype,"deleteVideoData",[R.action],(0,v.default)(i.prototype,"deleteVideoData"),i.prototype),B(i.prototype,"updatelayout",[R.action],(0,v.default)(i.prototype,"updatelayout"),i.prototype),B(i.prototype,"updateChangedMsg",[R.action],(0,v.default)(i.prototype,"updateChangedMsg"),i.prototype),B(i.prototype,"setVideoScreenId",[R.action],(0,v.default)(i.prototype,"setVideoScreenId"),i.prototype),B(i.prototype,"setOneKey",[R.action],(0,v.default)(i.prototype,"setOneKey"),i.prototype),B(i.prototype,"setChangeStyle",[R.action],(0,v.default)(i.prototype,"setChangeStyle"),i.prototype),B(i.prototype,"setStateData",[R.action],(0,v.default)(i.prototype,"setStateData"),i.prototype),i);t.videoService=new P.default(M);t.default=M},"8eJ7":function(e,t,a){},"921q":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=c(a("Yz+Y")),o=c(a("iCc5")),n=c(a("V7oC")),l=c(a("FYw3")),s=c(a("mRg0")),r=c(a("q1tI")),d=c(a("HPAy")),u=c(a("Fveh"));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.openToolEraser,a=e.changeEraser,i=e.mouseLeave,o=e.onAfterChangeEraserWidth;return r.default.createElement("li",{className:"tool-option tool_eraser "+(this.props.eraserDisabled?" disabled":"")+("tool_eraser"===this.props.isActive?" active":"")+(this.props.show?"":" hide"),onClick:t,title:d.default.language.languageData.header.tool.eraser.title},r.default.createElement("em",{className:"icon icon-xiangpi_sanjiao"}),r.default.createElement("div",{className:"tool-eraser-extend",style:{display:"tool_eraser"===this.props.isActive&&this.props.eraserShow?"block":"none"},onClick:a,onMouseLeave:i},r.default.createElement("div",{className:"tool-slider"},r.default.createElement(u.default,{onAfterChange:o,value:this.props.eraserWidth}),r.default.createElement("span",null,this.props.eraserWidth))))}}]),t}(r.default.Component);t.default=f},"9VTz":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindCourseService=t.addCourseService=void 0;var i=h(a("14Xm")),o=h(a("GQeE")),n=h(a("D3Ub")),l=h(a("4d7F")),s=h(a("m1cH")),r=h(a("iCc5")),d=h(a("V7oC")),u=h(a("mrNk")),c=h(a("3mpg")),f=h(a("HPAy"));function h(e){return e&&e.__esModule?e:{default:e}}var m=[".xls",".xlsx",".ppt",".pptx",".doc",".docx",".txt",".pdf",".jpg",".gif",".jpeg",".png",".zip",".bmp"],p=["ppt","pptx"],g=["zip"],v=["mp3","mp4"],y=["txt","doc","docx","ppt","pptx","xls","xlsx","pdf"],S=function(){function e(){var t=this;(0,r.default)(this,e),this.accept=m,this.fileUploadErrorCode=function(e){var t={"-1":f.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeOne.text,"-2":f.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeTwo.text,"-3":f.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeThree.text,"-4":f.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeFour.text,"-5":f.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeTwo.text+f.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureCode.text+e,"-6":f.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeTwo.text+f.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureCode.text+e,"-7":f.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeSeven.text,"-8":f.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeEight.text,"-10":f.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeTen.text,3:f.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureFhree.text,4:f.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureFour.text,111:f.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeTwo.text};return console.error("String(code)====>",String(e)),t[String(e)]?t[String(e)]:f.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeTwo.text},this.pptTypeArr=p,this.H5TypeArr=g,this.mediaTypeArr=v,this.general=y,this.isPpt=function(e){return t.pptTypeArr.includes(e)},this.isH5=function(e){return t.H5TypeArr.includes(e)},this.isOther=function(e){return![].concat((0,s.default)(t.pptTypeArr),(0,s.default)(t.H5TypeArr),(0,s.default)(t.mediaTypeArr),[""]).includes(e)},this.isGeneral=function(e){return[].concat((0,s.default)(t.general)).includes(e)},this.uploadCancel=null}return(0,d.default)(e,[{key:"uploadFileFn",value:function(e,t,a,i,o){if(e&&"function"==typeof e.set){if(this.isH5(a)){var n=t.H5Name||"";e.set("conversion",3),e.set("h5docname",n)}else this.isPpt(a)&&t.isDynamicPpt&&(e.set("conversion",1),e.set("dynamicppt",1),e.set("notshownow",Number(!t.isShowNow)));var l=Number(["txt","doc","docx","ppt","pptx","xls","xlsx"].includes(a)&&!t.isDynamicPpt);e.set("isAsynchrony",l),TkConstant.hasRole.roleStudent&&e.set("notshownow",1)}this.uploadCancel=u.default.getTkRoom().uploadFile(e,i,o)}},{key:"uploadCancelFn",value:function(){var e=this.uploadCancel&&this.uploadCancel.abort();return this.uploadCancel=null,e}}]),e}(),b=(t.addCourseService=new S,function(){function e(){(0,r.default)(this,e),this.allCourseTree={},this.currentCourseTree={},this.currentKeyword="",this.rootIndexArr=["first"],this.currentRootIndex="",this.checkAllObj={fileids:[],catalogs:[]}}var t,a,u,f;return(0,d.default)(e,[{key:"setCurrentKeyword",value:function(e){this.keyword!==e&&(this.keyword=e,this.getCatalog({index:"",pid:0}))}},{key:"getCatalog",value:function(e,t){var a=this,i=e.index,o=e.pid;"first"===i&&(i="");var n=t.split("_");n.shift();var s=this.currentCourseTree;n.forEach(function(e){s=s.children?s.children[e]:s[e]});var r=s.children?s.children.length:0,d=!!s.isCheck;return new l.default(function(e,n){var l=a.keyword;c.default.getCatalog({index:i,pid:o,keyword:l,pagesize:15},function(a){var i=a.index,o=a.data,n=a.isLastPage;o=o.map(function(e,a){return"catalog"===e.type?(e.name=e.title,delete e.title):(e.type=e.filetype,delete e.filetype,e.isCheck=d),e.path=t+"_"+(r+a),e.isUnfold=!1,e.children=[],e}),1==+n&&(o.isEnd=!0),e({index:i,data:o})})})}},{key:"getRootCatalog",value:(f=(0,n.default)(i.default.mark(function e(){var t,a,n,l,s,r,d,u,c=this,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next";return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("next"!==f){e.next=21;break}if(t=""===this.currentRootIndex?"first":this.currentRootIndex,!this.allCourseTree[t]){e.next=8;break}return a=this.rootIndexArr.findIndex(function(e){return e===t}),this.currentRootIndex=this.rootIndexArr[a+1],this.currentCourseTree=this.allCourseTree[t],this.cancelAllCheck(this.allCourseTree[t]),e.abrupt("return",this.allCourseTree[t]);case 8:return e.next=10,this.getCatalog({index:t,pid:0,keyword:this.currentKeyword},"root");case 10:return n=e.sent,l=n.index,s=n.data,"first"===t&&(s.isFirst=!0),this.rootIndexArr.push(l),this.allCourseTree[t]=s,this.currentCourseTree=s,this.currentRootIndex=l,e.abrupt("return",s);case 21:if("prev"!==f){e.next=35;break}if(r=this.rootIndexArr.findIndex(function(e){return e===c.currentRootIndex}),!((d=r-1)-1<0)){e.next=30;break}return this.currentRootIndex=this.rootIndexArr[1],this.currentCourseTree=this.allCourseTree.first,e.abrupt("return",this.currentCourseTree);case 30:return u=this.rootIndexArr[d-1],this.currentCourseTree=this.allCourseTree[u],this.currentRootIndex=this.rootIndexArr[d],this.cancelAllCheck(this.allCourseTree[u]),e.abrupt("return",this.allCourseTree[u]);case 35:if(!(0,o.default)(this.allCourseTree).includes(index)){e.next=38;break}return e.abrupt("return",this.allCourseTree[index]);case 38:case"end":return e.stop()}},e,this)})),function(){return f.apply(this,arguments)})},{key:"unfoldFn",value:(u=(0,n.default)(i.default.mark(function e(t){var a,o,n,l,r,d;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t.split("_")).shift(),o=this.currentCourseTree,a.forEach(function(e){o=o.children?o.children[e]:o[e]}),!o.isUnfold){e.next=9;break}return o.isUnfold=!o.isUnfold,e.abrupt("return",this.currentCourseTree);case 9:if(!o.children.length){e.next=14;break}return o.isUnfold=!o.isUnfold,e.abrupt("return",this.currentCourseTree);case 14:return e.next=16,this.getCatalog({index:"",pid:o.id,keyword:this.currentKeyword},t);case 16:return l=e.sent,r=l.index,d=l.data,o.children.isEnd=d.isEnd,(n=o.children).push.apply(n,(0,s.default)(d)),o.children.index=r,o.isUnfold=!o.isUnfold,e.abrupt("return",this.currentCourseTree);case 24:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"loadMoreFn",value:(a=(0,n.default)(i.default.mark(function e(t,a){var o,n,l,r,d,u;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.split("_")).shift(),l=this.currentCourseTree,n.forEach(function(e){l=l.children?l.children[e]:l[e]}),e.next=6,this.getCatalog({index:a,pid:l.id,keyword:this.currentKeyword},t);case 6:return r=e.sent,d=r.index,u=r.data,l.children.isEnd=u.isEnd,(o=l.children).push.apply(o,(0,s.default)(u)),l.children.index=d,e.abrupt("return",this.currentCourseTree);case 13:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"clearData",value:function(){this.allCourseTree={},this.currentCourseTree={},this.currentKeyword="",this.rootIndexArr=["first"],this.currentRootIndex="",this.keyword=""}},{key:"searchChange",value:(t=(0,n.default)(i.default.mark(function e(t){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.clearData(),this.keyword=t,e.next=4,this.getRootCatalog();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"checkFn",value:function(e){var t=e.path.split("_"),a=[];t.shift();var i=this.currentCourseTree;if(t.forEach(function(e){i=i.children?i.children[e]:i[e],a.push(i)}),i.isCheck=!i.isCheck,!i.isCheck&&"catalog"!==i.type){a.pop();var o=a.pop();o&&(o.isCheck=!1)}return i.children.length&&this._checkCatalogFn(i,i.isCheck),this.currentCourseTree}},{key:"_checkCatalogFn",value:function(e,t){var a=this;e.children&&e.children.forEach(function(e){"catalog"!==e.type&&(e.isCheck=t,e.children.length&&a._checkCatalogFn(e,t))})}},{key:"relationCourseFn",value:function(){var e=this;return new l.default(function(t,a){if(e.checkAllObj={fileids:[],catalogs:[]},e.getCheckAllItem(e.currentCourseTree),e.checkAllObj.fileids.length+e.checkAllObj.catalogs.length<1)return t([!1,""]);c.default.bandDucument(e.checkAllObj,function(e){0===e.code?t([!0,e]):a([!1,e])})})}},{key:"getCheckAllItem",value:function(e,t){var a=this;e.forEach(function(e){if("catalog"===e.type)return e.isCheck&&a.checkAllObj.catalogs.push(e.id),void(e.children.length&&a.getCheckAllItem(e.children,e.isCheck));e.isCheck&&!t&&a.checkAllObj.fileids.push(e.id)})}},{key:"cancelAllCheck",value:function(e){var t=this;e.forEach(function(e){e.isCheck=!1,"catalog"===e.type&&e.children.length&&t.cancelAllCheck(e.children)})}}]),e}());t.bindCourseService=new b},"9pnM":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=h(a("Yz+Y")),o=h(a("iCc5")),n=h(a("V7oC")),l=h(a("FYw3")),s=h(a("mRg0")),r=h(a("q1tI")),d=h(a("17x9")),u=a("QWsV"),c=a("b9ZJ"),f=a("69XA");function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.measureCache=new f.CellMeasurerCache({fixedWidth:!0}),a._renderItem=function(e){var t=e.index,i=e.key,o=e.parent,n=e.style,l=a.props,s=l.rowCount,d=l.loadListItem;if(s)return r.default.createElement(f.CellMeasurer,{cache:a.measureCache,columnIndex:0,key:i,parent:o,rowIndex:t},d(t,n,i))},a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){this.props.initVList&&"function"==typeof this.props.initVList&&this.props.initVList(this.measureCache,this.VList)}},{key:"shouldComponentUpdate",value:function(e){return e.rowCount!==this.props.rowCount}},{key:"render",value:function(){var e=this,t=this.props,a=t.overscanRowCount,i=void 0===a?10:a,o=t.rowCount,n=t.className,l=t.id,s=t.onScroll;return r.default.createElement(u.AutoSizer,null,function(t){var a=t.width,d=t.height;return r.default.createElement(c.List,{ref:function(t){return e.VList=t},width:a,height:d,overscanRowCount:i,rowCount:o,rowRenderer:e._renderItem.bind(e),className:n,id:l,deferredMeasurementCache:e.measureCache,rowHeight:e.measureCache.rowHeight,onScroll:s&&"function"==typeof s?s:void 0})})}}]),t}(r.default.Component);m.propTypes={rowCount:d.default.number,listItemArray:d.default.array,loadListItem:d.default.func,initVList:d.default.func},t.default=m},A5zr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=I(a("YEIV")),o=I(a("/f1G")),n=I(a("oF3Q")),l=I(a("sk9p")),s=I(a("EJiy")),r=I(a("GQeE")),d=I(a("FyfS")),u=I(a("Yz+Y")),c=I(a("iCc5")),f=I(a("V7oC")),h=I(a("FYw3")),m=I(a("mRg0")),p=I(a("q1tI")),g=I(a("HPAy")),v=I(a("aJKe")),y=I(a("fG3h")),S=I(a("Fveh")),b=I(a("mrNk")),C=I(a("uuqz")),k=I(a("d0FX")),w=I(a("kQrP")),T=I(a("XbJA")),E=I(a("eQYT"));function I(e){return e&&e.__esModule?e:{default:e}}var D={};(0,k.default)().then(function(e){D=e});var x=function(e){function t(e){(0,c.default)(this,t);var a=(0,h.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.state={isVideoMirror:!(!L.Utils.localStorage.getItem("isVideoMirror")||"false"===L.Utils.localStorage.getItem("isVideoMirror"))&&L.Utils.localStorage.getItem("isVideoMirror"),updateState:!1,show:!1,onlyAudioOutPut:!1,selectShow:{networkinput:!1,videoinput:!1,audioinput:!1,audiooutput:!1,systemInfo:!1,result:!1,changeScreen:!1},devicesDesc:{videoinput:{},audioinput:{},audiooutput:{}},selectDevice:{videoinput:void 0,audioinput:void 0,audiooutput:void 0},hasDetection:{videoinput:!1,audioinput:!1,audiooutput:!1},audiooutputVolume:100,testSystemInfo:{currentUser:"",operatingSystem:"",IPAddress:"----",LoginDevice:"----",networkDelay:"----",packetLoss:"----",browser:"----",roomNumber:"----",versionNumber:"----"},serverlist:{},switchScreen:!1},a.oldUseServerName="",a.useServerName="",a.useServerRealName="",a.systemInfoLanguage={currentUser:g.default.language.languageData.login.language.detection.systemInfo.currentUser,operatingSystem:g.default.language.languageData.login.language.detection.systemInfo.operatingSystem,LoginDevice:g.default.language.languageData.login.language.detection.systemInfo.LoginDevice,mediaServer:g.default.language.languageData.login.language.detection.systemInfo.MediaServer,coursewareServer:g.default.language.languageData.login.language.detection.systemInfo.CoursewareServer,packetLoss:g.default.language.languageData.login.language.detection.systemInfo.packetLoss,browser:g.default.language.languageData.login.language.detection.systemInfo.browser,roomNumber:g.default.language.languageData.login.language.detection.systemInfo.roomNumber,versionNumber:g.default.language.languageData.login.language.detection.systemInfo.versionNumber},a.detectionResult={whichServer:!1,canSee:!1,canListen:!1,canSpeak:!1},a.selectDevice={videoinput:void 0,audioinput:void 0,audiooutput:void 0},a.deviceLabelMap={videoinput:{default:g.default.language.languageData.alertWin.settingWin.default.text,defaultLabel:g.default.language.languageData.alertWin.settingWin.videoInput.text,notDevice:g.default.language.languageData.login.language.detection.selectOption.noCam},audioinput:{default:g.default.language.languageData.alertWin.settingWin.default.text,defaultLabel:g.default.language.languageData.alertWin.settingWin.audioInput.text,notDevice:g.default.language.languageData.login.language.detection.selectOption.noMicrophone},audiooutput:{default:g.default.language.languageData.alertWin.settingWin.default.text,defaultLabel:g.default.language.languageData.alertWin.settingWin.audioOutput.text,notDevice:g.default.language.languageData.login.language.detection.selectOption.noEarphones}},a.isVideoMirror=!1,a.isVolumeDraging=!1,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.browserInfo=null,a}return(0,m.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this._initVideoMirroring(),this.browserInfo=this.BrowserCheck(),v.default.CoreController.addEventListener("deviceChange",this.handlerDeviceChange.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("welcomeDetectionDevice",this.handlerWelcomeDetectionDevice.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(E.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(E.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(E.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("mainDetectionDevice",this.handlerMainDetectionDevice.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("handleTestSystemInfo",this.handleTestSystemInfo.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("remotecontrol_deviceManagement_changeDeviceInfo",this.handleRemotecontrol_deviceManagement_changeDeviceInfo.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(E.default.EVENTTYPE.RoomEvent.roomAudiovideostateSwitched,this.handlerRoomAudiovideostateSwitched.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){this._stepExecuteStopOrClear(3),v.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"_initVideoMirroring",value:function(){var e=document.getElementById("srever_mirroring");e&&(this.state.isVideoMirror&&"false"!==this.state.isVideoMirror?e.checked=!0:e.checked=!1)}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"RemoteControl":switch(t.data.action){case"changeLine":this.getSystemInfo(),this.systemInfoEleArr(this.systemInfoLanguage)}}}},{key:"handlerRoomAudiovideostateSwitched",value:function(e){g.default.isOnlyAudioRoom?this._loadSelectShow("audiooutput",!0):this._loadSelectShow("videoinput",!0)}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=e.user;if(t&&t.id===b.default.getTkRoom().getMySelf().id){var a=e.message,i=!0,o=!1,n=void 0;try{for(var l,s=(0,d.default)((0,r.default)(a));!(i=(l=s.next()).done);i=!0){var u=l.value;"servername"===u&&(this.changeServerClick(a[u]),this.getSystemInfo(),this.systemInfoEleArr(this.systemInfoLanguage))}}catch(e){o=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw n}}}}},{key:"handlerWelcomeDetectionDevice",value:function(){E.default.joinRoomInfo.isHasVideo||this._loadSelectShow("audiooutput",!0)}},{key:"handlerRoomConnected",value:function(){var e=this;b.default.getTkRoom().requestServerList(E.default.SERVICEINFO.webHostname,E.default.SERVICEINFO.sdkPort,function(t,a){var i=void 0;if(t&&"object"===(void 0===t?"undefined":(0,s.default)(t))){i={};var o=!0,r=!1,u=void 0;try{for(var c,f=(0,d.default)((0,n.default)(t));!(o=(c=f.next()).done);o=!0){var h=c.value,m=(0,l.default)(h,2),p=m[0],g=m[1];i[p]=Object.customAssign({},g)}}catch(e){r=!0,u=e}finally{try{!o&&f.return&&f.return()}finally{if(r)throw u}}}else i=t;e.setState({serverlist:i})})}},{key:"handleTestSystemInfo",value:function(e){var t=e.message.data.networkStatus;!0===e.message.data.show?(this.state.testSystemInfo.networkDelay=t.rtt+"ms",this.state.testSystemInfo.packetLoss=t.packetsLost+"%"):(this.state.testSystemInfo.networkDelay="----",this.state.testSystemInfo.packetLoss="----"),this.setState({testSystemInfo:this.state.testSystemInfo})}},{key:"handlerDeviceChange",value:function(){g.default.appConnected&&TK.DeviceMgr.getDevices(function(e){var t={action:"deviceManagement",type:"sendDeviceInfo",deviceData:{deviceInfo:e}},a=!0,i=!1,n=void 0;try{for(var l,s=(0,d.default)((0,o.default)(C.default.getSpecifyRoleList(E.default.role.roleTeachingAssistant,b.default.getTkRoom().getUsers())));!(a=(l=s.next()).done);a=!0){var r=l.value;T.default.sendSignallingFromRemoteControl(r.id,t)}}catch(e){i=!0,n=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}),this._enumerateDevices()}},{key:"changeServerClick",value:function(e){var t=!0,a=!1,i=void 0;try{for(var o,s=(0,d.default)((0,n.default)(this.state.serverlist));!(t=(o=s.next()).done);t=!0){var r=o.value,u=(0,l.default)(r,2),c=u[0],f=u[1];c===e?(f.isUseServer=!0,this.useServerName=f.serverareaname,this.useServerRealName="chinese"===g.default.language.name?f.chinesedesc:"japan"===g.default.language.name?f.japanesedesc:f.englishdesc):f.isUseServer=!1}}catch(e){a=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw i}}this.setState({serverlist:this.state.serverlist})}},{key:"handlerMainDetectionDevice",value:function(e){var t=this.props.isEnter,a=(e.message||{}).onlyAudioOutPut;this.isVideoMirror=!(!L.Utils.localStorage.getItem("isVideoMirror")||"false"===L.Utils.localStorage.getItem("isVideoMirror"))&&L.Utils.localStorage.getItem("isVideoMirror"),this.changeServerClick(b.default.getTkRoom().getMySelf().servername),this.getSystemInfo(),this.systemInfoEleArr(this.systemInfoLanguage),this.oldUseServerName=b.default.getTkRoom().getMySelf().servername,t||!E.default.hasRole.roleTeachingAssistant?g.default.isOnlyAudioRoom?this._loadSelectShow("audiooutput",!0):this._loadSelectShow("videoinput",!0):this._loadSelectShow("networkinput",!0),this.setState({show:!0}),this._enumerateDevices(),TK.isTkNative&&TK.subscribe_from_native&&TK.DeviceMgr&&TK.DeviceMgr.setSpeakerVolume&&TK.DeviceMgr.setSpeakerVolume(this.state.volume||100),a&&g.default.playback&&(this._loadSelectShow("audiooutput",!0),this.setState({onlyAudioOutPut:!0}))}},{key:"nextButtonOnClick",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments[2],i=arguments[3],o=arguments[4];if(this.state.onlyAudioOutPut&&g.default.playback&&"audioinput"==e)return this.okButtonOnClick(4),!1;var n=this;n._stepExecuteStopOrClear(a),n._loadSelectShow(e,t),n._detectionResultSave(i,o)}},{key:"_detectionResultSave",value:function(e,t){switch(e){case"video":this.detectionResult.canSee=t;break;case"telephone":this.detectionResult.canListen=t;break;case"voiceTube":this.detectionResult.canSpeak=t}}},{key:"okButtonOnClick",value:function(e){if(TK.isTkNative&&TK.subscribe_from_native){TK.DeviceMgr.setDevices();var t=b.default.getTkRoom()&&b.default.getTkRoom().getMySelf()&&void 0!==b.default.getTkRoom().getMySelf().volume?b.default.getTkRoom().getMySelf().volume:100;TK.DeviceMgr&&TK.DeviceMgr.setSpeakerVolume&&TK.DeviceMgr.setSpeakerVolume(t)}var a=this.props,i=a.handlerOkCallback,o=a.saveLocalStorage,s=void 0===o||o;if(this._stepExecuteStopOrClear(e),s){var r=!0,u=!1,c=void 0;try{for(var f,h=(0,d.default)((0,n.default)(this.selectDevice));!(r=(f=h.next()).done);r=!0){var m=f.value,p=(0,l.default)(m,2),y=p[0],S=p[1];L.Utils.localStorage.setItem(L.Constant.deviceStorage[y],S)}}catch(e){u=!0,c=e}finally{try{!r&&h.return&&h.return()}finally{if(u)throw c}}}v.default.CoreController.dispatchEvent({type:"detectionDeviceFinsh",message:{clearFinsh:this.props.clearFinsh}}),v.default.CoreController.dispatchEvent({type:"changeSettingBtn",message:{changeBtn:!0}}),i&&"function"==typeof i&&i({selectDeviceInfo:this.selectDevice}),this.oldUseServerName!==this.useServerName&&E.default.hasRole.roleTeachingAssistant&&(b.default.getTkRoom().switchServerByName(this.useServerName),L.Utils.localStorage.setItem("tkLocalstorageServerName",this.useServerName)),this.isClick=!1,g.default.isVideoMirror=this.isVideoMirror,L.Utils.localStorage.setItem("isVideoMirror",g.default.isVideoMirror),v.default.CoreController.dispatchEvent({type:"videoMirroring",message:{isVideoMirroring:g.default.isVideoMirror}}),this._resetDefaultStateAndData()}},{key:"closeButtonOnClick",value:function(e){if(TK.isTkNative&&TK.subscribe_from_native){TK.DeviceMgr.setDevices();var t=b.default.getTkRoom()&&b.default.getTkRoom().getMySelf()&&void 0!==b.default.getTkRoom().getMySelf().volume?b.default.getTkRoom().getMySelf().volume:100;TK.DeviceMgr&&TK.DeviceMgr.setSpeakerVolume&&TK.DeviceMgr.setSpeakerVolume(t)}if(this._stepExecuteStopOrClear(e),v.default.CoreController.dispatchEvent({type:"detectionDeviceFinsh",message:{clearFinsh:this.props.clearFinsh}}),v.default.CoreController.dispatchEvent({type:"changeSettingBtn",message:{changeBtn:!0}}),this._resetDefaultStateAndData(),this.isClick){var a=document.getElementById("srever_mirroring");g.default.isVideoMirror=!this.state.isVideoMirror,a.checked=g.default.isVideoMirror,this.setState({isVideoMirror:g.default.isVideoMirror}),this.isClick=!1}if(this.isSwitch){var i=document.querySelector("#mainMinorChange-btn");g.default.switchScreen=!g.default.switchScreen,this.state.switchScreen=g.default.switchScreen,i.checked=this.state.switchScreen,this.setState({switchScreen:g.default.switchScreen}),this.isSwitch=!1}}},{key:"playAudioToAudiooutput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"music_audio",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(g.default.isClient&&TK.subscribe_from_native){var a=g.default.projectPublishDirAddress+"music/detectionDevice_default.wav";this.state.selectDevice.audiooutput&&t&&TK.DeviceMgr.startSpeakerTest(this.state.selectDevice.audiooutput,a)}else{var i=$("#"+e);i&&i.length>0&&(t?(i[0].currentTime=0,L.Utils.mediaPause(i[0]),L.Utils.mediaPlay(i[0])):L.Utils.mediaPause(i[0]))}}},{key:"changeSelectDeviceOnChange",value:function(e,t,a,i){return this._changeStateSelectDevice(e,t),this._deviceSwitch(e),i&&(i.preventDefault(),i.stopPropagation()),!1}},{key:"handerVolumeOnAfterChange",value:function(e){this.isVolumeDraging=!1,this.audiooutputVolume=void 0,TK.isTkNative&&TK.subscribe_from_native?TK.DeviceMgr&&TK.DeviceMgr.setSpeakerVolume&&TK.DeviceMgr.setSpeakerVolume(e):document.getElementById("music_audio").volume=e/100,this.setState({audiooutputVolume:e})}},{key:"handerVolumeOnBeforeChange",value:function(e){this.isVolumeDraging=!0,this.audiooutputVolume=e}},{key:"handleRemotecontrol_deviceManagement_changeDeviceInfo",value:function(e){if(this.state.show){var t=e.message.selectDeviceInfo;this.selectDevice=t&&"object"===(void 0===t?"undefined":(0,s.default)(t))?Object.customAssign({},t):this.selectDevice,this._selectShowToDeviceSwitch(),this._checkSelectDevice()}}},{key:"_loadSelectShow",value:function(e,t){var a=!0,i=!1,o=void 0;try{for(var n,l=(0,d.default)((0,r.default)(this.state.selectShow));!(a=(n=l.next()).done);a=!0){var s=n.value;this.state.selectShow[s]=s===e&&t}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}this._checkSelectDevice(),this.setState({selectShow:this.state.selectShow}),this._deviceSwitch(e)}},{key:"_enumerateDevices",value:function(){var e=this;y.default.enumerateDevices(function(t){e._changeDeviceElementDesc(t),e._selectShowToDeviceSwitch(),e._checkSelectDevice()})}},{key:"_getServerListEle",value:function(){var e=this,t=[],a={},o=[],s=[];if(e.state.serverlist&&null!==e.state.serverlist&&void 0!==e.state.serverlist&&((0,r.default)(e.state.serverlist).sort().forEach(function(t,a){e.state.serverlist[t].chinesedesc.indexOf("")>=0?(s.push(t),s.sort()):o.push(t)}),(o=s.concat(o)).forEach(function(t){a[t]=e.state.serverlist[t]})),this.state.serverlist&&null!==this.state.serverlist&&void 0!==this.state.serverlist){var u=!0,c=!1,f=void 0;try{for(var h,m=(0,d.default)((0,n.default)(this.state.serverlist));!(u=(h=m.next()).done);u=!0){var v=h.value,y=(0,l.default)(v,2),S=y[0],b=y[1];t.push(p.default.createElement("li",{key:S,onClick:e.changeServerClick.bind(e,b.serverareaname)},p.default.createElement("span",(0,i.default)({className:"icon"},"className","icon "+(b.isUseServer?"icon-gouxuan":"icon-weigouxuan"))),p.default.createElement("span",{className:"name"},"chinese"===g.default.language.name?b.chinesedesc:"japan"===g.default.language.name?b.japanesedesc:b.englishdesc)))}}catch(e){c=!0,f=e}finally{try{!u&&m.return&&m.return()}finally{if(c)throw f}}}return t}},{key:"_changeDeviceElementDesc",value:function(e){var t=this,a=e.devices,i=e.useDevices,o=(e.hasdevice,{videoinput:{},audioinput:{},audiooutput:{}}),s={videoinput:0,audioinput:0,audiooutput:0},r=function(e,a){0===a.length?(t.state.hasDetection[e]=!1,g.default.isClient&&TK.subscribe_from_native&&TK.DeviceMgr.stopSpeakerTest(),TK.DeviceMgr.stopMicrophoneTest(),TK.DeviceMgr.stopCameraTest()):t.state.hasDetection[e]=!0,t.setState({hasDetection:t.state.hasDetection}),a.map(function(a,n){t.selectDevice[e]!==a.deviceId&&i[e]===a.deviceId&&(t.selectDevice[e]=a.deviceId),o[e][a.deviceId]={deviceId:a.deviceId,groupId:a.groupId,kind:a.kind,label:a.label||("default"===a.deviceId?t.deviceLabelMap[e].default:t.deviceLabelMap[e].defaultLabel+ ++s[e]),select:t.selectDevice[e]===a.deviceId}}),void 0===t.selectDevice[e]&&a.length&&(t.selectDevice[e]=a[0].deviceId)},u=!0,c=!1,f=void 0;try{for(var h,m=(0,d.default)((0,n.default)(a));!(u=(h=m.next()).done);u=!0){var p=h.value,v=(0,l.default)(p,2);r(v[0],v[1])}}catch(e){c=!0,f=e}finally{try{!u&&m.return&&m.return()}finally{if(c)throw f}}t.setState({devicesDesc:o})}},{key:"_loadDeviceElementByDeviceDescArray",value:function(e){var t={audioinputElementArray:[],audiooutputElementArray:[],videoinputElementArray:[]},a=!0,i=!1,s=void 0;try{for(var r,u=(0,d.default)((0,n.default)(e));!(a=(r=u.next()).done);a=!0){var c=r.value,f=(0,l.default)(c,2),h=f[0],m=f[1],p=!0,g=!1,v=void 0;try{for(var y,S=(0,d.default)((0,o.default)(m));!(p=(y=S.next()).done);p=!0){var b=y.value,C=b.deviceId,k=(b.groupId,b.kind,b.label);b.select;t[h+"ElementArray"].push({value:C,label:k})}}catch(e){g=!0,v=e}finally{try{!p&&S.return&&S.return()}finally{if(g)throw v}}}}catch(e){i=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(i)throw s}}var w=!0,T=!1,E=void 0;try{for(var I,D=(0,d.default)((0,n.default)(t));!(w=(I=D.next()).done);w=!0){var x=I.value,R=(0,l.default)(x,2),_=R[0];if(0===R[1].length){var P=_.replace(/ElementArray/g,""),A=this.deviceLabelMap[P].notDevice;switch(t[_].push({value:void 0,label:A}),_){case"videoinputElementArray":this.state.selectDevice.videoinput=t.videoinputElementArray[0].value;break;case"audiooutputElementArray":this.state.selectDevice.audiooutput=t.audiooutputElementArray[0].value;break;case"audioinputElementArray":this.state.selectDevice.audioinput=t.audioinputElementArray[0].value}}}}catch(e){T=!0,E=e}finally{try{!w&&D.return&&D.return()}finally{if(T)throw E}}return t}},{key:"_selectShowToDeviceSwitch",value:function(){var e=!0,t=!1,a=void 0;try{for(var i,o=(0,d.default)((0,n.default)(this.state.selectShow));!(e=(i=o.next()).done);e=!0){var s=i.value,r=(0,l.default)(s,2),u=r[0];r[1]&&this._deviceSwitch(u)}}catch(e){t=!0,a=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw a}}}},{key:"_deviceSwitch",value:function(e){if(this.selectDevice[e])if(this.state.selectShow[e])switch(e){case"videoinput":TK.DeviceMgr.stopCameraTest(),TK.DeviceMgr.startCameraTest(this.selectDevice[e],"videoinput_video_stream");break;case"audioinput":TK.DeviceMgr.stopMicrophoneTest(),y.default.audioSourceChangeHandlerFrom({deviceId:this.selectDevice[e],audioinputAudioElementId:"audioinput_audio_stream",audioinputVolumeContainerId:"volume_audioinput_container"});break;case"audiooutput":g.default.isClient&&TK.subscribe_from_native?TK.DeviceMgr.stopSpeakerTest():y.default.audioOutputChangeHandler({deviceId:this.selectDevice[e],setSinkIdParentElementId:"main_detection_device"})}else L.Logger.info("deviceSwitch deviceId is not exist from selectShow , deviceKind is "+e+"!");else L.Logger.info("deviceSwitch deviceId is not exist from selectDevice , deviceKind is "+e+"!")}},{key:"BrowserCheck",value:function(){var e,t=navigator.appName,a=navigator.userAgent,i=a.match(/(opera|chrome|safari|firefox|msie|trident)\/?\s*(\.?\d+(\.\d+)*)/i);return i&&null!=(e=a.match(/version\/([\.\d]+)/i))&&(i[2]=e[1]),i=i?[i[1],i[2]]:[t,navigator.appVersion,"-?"]}},{key:"_stepExecuteStopOrClear",value:function(e){if(null!=e)switch(e){case-1:E.default.joinRoomInfo.isDoubleScreenDisplay&&g.default.isClient&&this.setState({switchScreen:g.default.switchScreen});case 1:case 2:case 3:case 4:case 5:g.default.isClient&&TK.subscribe_from_native&&TK.DeviceMgr.stopSpeakerTest(),"Safari"==this.browserInfo[0]&&"11"==this.browserInfo[1].split(".")[0]||TK.DeviceMgr.stopMicrophoneTest(),TK.DeviceMgr.stopCameraTest(),this.playAudioToAudiooutput("music_audio",!1);break;case 6:E.default.joinRoomInfo.isDoubleScreenDisplay&&g.default.isClient&&g.default.switchScreen!==this.state.switchScreen&&(g.default.switchScreen=!g.default.switchScreen,this.setState({switchScreen:g.default.switchScreen}),b.default.getNativeInterface().switchMainViceMonitor())}}},{key:"_changeStateSelectDevice",value:function(e,t){if(this.state.selectDevice[e]!==t){this.selectDevice[e]=t,this.state.selectDevice[e]=t;var a=!0,i=!1,o=void 0;try{for(var s,r=(0,d.default)((0,n.default)(this.state.devicesDesc[e]));!(a=(s=r.next()).done);a=!0){var u=s.value,c=(0,l.default)(u,2),f=c[0],h=c[1];h.select=f===t}}catch(e){i=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}this.setState({selectDevice:this.state.selectDevice,devicesDesc:this.state.devicesDesc})}}},{key:"_checkSelectDevice",value:function(){var e=!0,t=!1,a=void 0;try{for(var i,o=(0,d.default)((0,r.default)(this.selectDevice));!(e=(i=o.next()).done);e=!0){var n=i.value;this.selectDevice[n]!==this.state.selectDevice[n]&&this._changeStateSelectDevice(n,this.selectDevice[n])}}catch(e){t=!0,a=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw a}}}},{key:"_cutDetectionItem",value:function(e,t,a){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=(arguments[4],this);if(e)return!1;o._stepExecuteStopOrClear(t),o._loadSelectShow(a,i)}},{key:"_resetDefaultStateAndData",value:function(){var e={show:!1,selectShow:{networkinput:!1,videoinput:!1,audioinput:!1,audiooutput:!1,systemInfo:!1,result:!1,changeScreen:!1},devicesDesc:{videoinput:{},audioinput:{},audiooutput:{}},selectDevice:{videoinput:void 0,audioinput:void 0,audiooutput:void 0},hasDetection:{videoinput:!1,audioinput:!1,audiooutput:!1},audiooutputVolume:100,isClient:g.default.isClient};this.selectDevice={videoinput:void 0,audioinput:void 0,audiooutput:void 0},this.oldUseServerName="",this.setState(e)}},{key:"getSystemInfo",value:function(){var e=b.default.getTkRoom().getMySelf(),t=g.default.osType;this.state.testSystemInfo.currentUser=e.nickname,this.state.testSystemInfo.operatingSystem=t,this.state.testSystemInfo.LoginDevice=e.devicetype,this.state.testSystemInfo.mediaServer=this.useServerRealName,this.state.testSystemInfo.coursewareServer=window.WBGlobal.docAddressKey,this.state.testSystemInfo.browser=C.default.getBrowserInfo().info.browserName+" "+C.default.getBrowserInfo().info.browserVersion,this.state.testSystemInfo.roomNumber=E.default.joinRoomInfo.serial,this.state.testSystemInfo.versionNumber=e.version,this.setState({testSystemInfo:this.state.testSystemInfo})}},{key:"systemInfoEleArr",value:function(e){var t=[];if((0,r.default)(e).length>0){var a=!0,i=!1,o=void 0;try{for(var s,u=(0,d.default)((0,n.default)(e));!(a=(s=u.next()).done);a=!0){var c=s.value,f=(0,l.default)(c,2),h=f[0],m=f[1];t.push(p.default.createElement("li",{key:t.length},p.default.createElement("span",{title:m},m),p.default.createElement("span",null,this.state.testSystemInfo[h])))}}catch(e){i=!0,o=e}finally{try{!a&&u.return&&u.return()}finally{if(i)throw o}}}return t}},{key:"videoMirroringHandle",value:function(){this.isClick=!0;var e=document.getElementById("srever_mirroring");this.isVideoMirror=!this.isVideoMirror,e.checked=this.isVideoMirror,this.setState({isVideoMirror:this.isVideoMirror})}},{key:"_mainMinorChange",value:function(){return this.setState({switchScreen:!this.state.switchScreen}),!1}},{key:"render",value:function(){for(var e=this.state,t=e.show,a=e.selectShow,i=e.devicesDesc,o=e.audiooutputVolume,n=e.onlyAudioOutPut,l=this.props,s=l.isEnter,r=l.titleText,d=l.okText,u=l.hasBgImg,c=this._loadDeviceElementByDeviceDescArray(i),f=c.audioinputElementArray,h=c.audiooutputElementArray,m=c.videoinputElementArray,v=this._getServerListEle(),y=[],b=0;b<16;b++)y.push(p.default.createElement("li",{key:b,className:"audiooutput-volume-item"}));var k="true"===this.state.isVideoMirror||!0===this.state.isVideoMirror,T=C.default.getBrowserInfo();return p.default.createElement("article",{id:"main_detection_device",className:"device-test",style:{display:t?"block":"none"}},u?p.default.createElement("div",{className:"testing-header"},p.default.createElement("span",{className:"device-test-header"},r||g.default.language.languageData.login.language.detection.deviceTestHeader.device.text),p.default.createElement("button",{className:"close-detection icon-close",onClick:this.closeButtonOnClick.bind(this,-1)})):void 0,p.default.createElement("ul",{className:u?" setting-device-tab ":"start-device-tab ",style:{display:n&&g.default.playback?"none":""}},p.default.createElement("li",{className:"testing-option"+(a.networkinput?" active":""),style:{display:s||!E.default.hasRole.roleTeachingAssistant?"none":"block"},onClick:this._cutDetectionItem.bind(this,s,1,"networkinput"),title:g.default.language.languageData.login.language.detection.deviceTestHeader.optimalServer.text},p.default.createElement("span",{className:"en-pic"},g.default.language.languageData.login.language.detection.deviceTestHeader.optimalServer.text)),
/*!this.props.isEnter && TkGlobal.isMacClient ? undefined :*/
p.default.createElement("li",{className:"testing-option"+(a.videoinput?" active":"")+(a.videoinput||!(a.audiooutput||a.audioinput||a.result)||u?"":" yes"),onClick:this._cutDetectionItem.bind(this,s,2,"videoinput"),style:{display:this.props.isEnter?"block":g.default.isOnlyAudioRoom||!E.default.joinRoomInfo.isHasVideo?"none":""},title:g.default.language.languageData.login.language.detection.deviceTestHeader.videoinput.text},u?void 0:p.default.createElement(p.default.Fragment,null,p.default.createElement("span",{className:"pic-item icon-user_camera"}),p.default.createElement("span",{className:"line "+(a.videoinput||!(a.audiooutput||a.audioinput||a.result)||u?"":" lineactive")})),p.default.createElement("span",{className:"en-pic"},g.default.language.languageData.login.language.detection.deviceTestHeader.videoinput.text)),"safari"!==T.info.browserName&&p.default.createElement("li",{className:"testing-option"+(a.audiooutput?" active":"")+(a.audiooutput||!a.audioinput&&!a.result||u?"":" yes"),onClick:this._cutDetectionItem.bind(this,s,3,"audiooutput"),title:g.default.language.languageData.login.language.detection.deviceTestHeader.audioouput.text},u?void 0:p.default.createElement(p.default.Fragment,null,p.default.createElement("span",{className:"pic-item icon-yangshengqi"}," "),p.default.createElement("span",{className:"line "+(a.videoinput||!a.audioinput&&!a.result||u?"":" lineactive")})),p.default.createElement("span",{className:"en-pic"},g.default.language.languageData.login.language.detection.deviceTestHeader.audioouput.text)),p.default.createElement("li",{className:"testing-option"+(a.audioinput?" active":"")+(a.audioinput||!a.result||u?"":" yes"),onClick:this._cutDetectionItem.bind(this,s,4,"audioinput"),title:g.default.language.languageData.login.language.detection.deviceTestHeader.audioinput.text},u?void 0:p.default.createElement(p.default.Fragment,null,p.default.createElement("span",{className:"pic-item icon-btn_audio"}," "),p.default.createElement("span",{className:"line "+(a.audioinput||!a.result||u?"":" lineactive")})),p.default.createElement("span",{className:"en-pic"},g.default.language.languageData.login.language.detection.deviceTestHeader.audioinput.text)),p.default.createElement("li",{className:"testing-option"+(a.result?" active":""),style:{display:s?"block":"none"},title:g.default.language.languageData.login.language.detection.deviceTestHeader.detectionResult.text},p.default.createElement("span",{className:"pic-item icon-jieguo"}),p.default.createElement("span",{className:"en-pic"},g.default.language.languageData.login.language.detection.deviceTestHeader.detectionResult.text)),p.default.createElement("li",{className:"testing-option"+(a.systemInfo?" active":""),style:{display:s?"none":"block"},onClick:this._cutDetectionItem.bind(this,s,5,"systemInfo"),title:g.default.language.languageData.login.language.detection.deviceTestHeader.systemInfo.text},p.default.createElement("span",{className:"en-pic"},g.default.language.languageData.login.language.detection.deviceTestHeader.systemInfo.text))),p.default.createElement("div",{className:"testing-right "},p.default.createElement("div",{className:"device-ops-wrapper",style:{display:s&&!E.default.hasRole.roleTeachingAssistant?"none":a.networkinput?"block":"none"}},p.default.createElement("div",{className:"ops-tip"},g.default.language.languageData.login.language.detection.networkExtend.title.text),p.default.createElement("ul",{className:"ops-list"},v),p.default.createElement("button",{className:"device-result-btn",onClick:this.okButtonOnClick.bind(this,4)},d)),
/*!this.props.isEnter && TkGlobal.isMacClient ? undefined :*/
p.default.createElement("div",{className:"video-right",style:{display:this.props.isEnter&&a.videoinput?"block":a.videoinput&&!g.default.isOnlyAudioRoom?"block":"none"}},p.default.createElement("div",{className:"device-opts"},p.default.createElement("span",{className:"option-name"},g.default.language.languageData.login.language.detection.videoinputExtend.cameraOptionAll.cameraOption.text),p.default.createElement("div",{className:"styled-select"},p.default.createElement(w.default,{id:"videoSource",className:"dropDownBox",selectOptions:m,currentValue:this.state.selectDevice.videoinput,disabled:!1,onChange:this.changeSelectDeviceOnChange.bind(this,"videoinput")}))),p.default.createElement("div",{className:"notice-red"},g.default.language.languageData.login.language.detection.videoinputExtend.cameraOptionAll.noticeRed.text),p.default.createElement("div",{className:"camera-black",id:"camera-black"},p.default.createElement("div",{className:"videoinput_video_stream "+(k?"video-mirror ":" "),id:"videoinput_video_stream"})),p.default.createElement("div",{className:"device-opts"},p.default.createElement("span",{className:"option-name"},g.default.language.languageData.login.language.detection.mirrorMode.text),p.default.createElement("div",{className:"styled-select"},p.default.createElement("input",{type:"radio",className:k?"icon-gouxuan":"icon-weigouxuan",id:"srever_mirroring",name:"selectMirroring",onClick:this.videoMirroringHandle.bind(this),value:"cn"}))),p.default.createElement("div",{className:"notice-text"},p.default.createElement("p",null,g.default.language.languageData.login.language.detection.videoinputExtend.noticeCarmera.one),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.videoinputExtend.noticeCarmera.two),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.videoinputExtend.noticeCarmera.three),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.videoinputExtend.noticeCarmera.four),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.videoinputExtend.noticeCarmera.five),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.videoinputExtend.noticeCarmera.six),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.videoinputExtend.noticeCarmera.seven)),s?p.default.createElement("div",{className:"detection-result"},"safari"!==T.info.browserName?p.default.createElement(p.default.Fragment,null,p.default.createElement("button",{className:"detection-btn",onClick:this.nextButtonOnClick.bind(this,"audiooutput",!0,2,"video",!1)},g.default.language.languageData.login.language.detection.button.notSee.text),p.default.createElement("button",{className:"detection-btn",style:{display:this.state.hasDetection.videoinput?"block":"none"},onClick:this.nextButtonOnClick.bind(this,"audiooutput",!0,2,"video",!0)},g.default.language.languageData.login.language.detection.button.canSee.text)):p.default.createElement(p.default.Fragment,null,p.default.createElement("button",{className:"detection-btn",onClick:this.nextButtonOnClick.bind(this,"audioinput",!0,3,"video",!1)},g.default.language.languageData.login.language.detection.button.notSee.text),p.default.createElement("button",{className:"detection-btn",style:{display:this.state.hasDetection.videoinput?"block":"none"},onClick:this.nextButtonOnClick.bind(this,"audioinput",!0,3,"video",!0)},g.default.language.languageData.login.language.detection.button.canSee.text))):p.default.createElement("button",{className:"device-result-btn",onClick:this.okButtonOnClick.bind(this,4)},d)),"safari"!==T.info.browserName&&p.default.createElement("div",{className:"listen-right",style:{display:a.audiooutput?"block":"none"}},p.default.createElement("div",{className:"device-opts"},p.default.createElement("span",{className:"option-name"},g.default.language.languageData.login.language.detection.audioouputExtend.cameraOptionAll.cameraOption.text),p.default.createElement("div",{className:"styled-select"},p.default.createElement(w.default,{id:"audioOutput",className:"dropDownBox",selectOptions:h,currentValue:this.state.selectDevice.audiooutput,disabled:!1,onChange:this.changeSelectDeviceOnChange.bind(this,"audiooutput")}))),p.default.createElement("div",{className:"click-music "},p.default.createElement("p",{className:"listen-sure"},g.default.language.languageData.login.language.detection.audioouputExtend.cameraOptionAll.clickmusic.one),p.default.createElement("div",{className:"musicplay device-opts"},p.default.createElement("button",{className:"play-music icon-timer_star option-name",onClick:this.playAudioToAudiooutput.bind(this,"music_audio",!0)}),TK.isTkNative&&TK.subscribe_from_native?void 0:p.default.createElement("audio",{id:"music_audio",src:"./music/detectionDevice_default.wav",className:"audio-play"}),p.default.createElement("div",{className:"sound-vol tool-slider styled-select"},p.default.createElement("div",{className:"icon_volume  icon-btn_yinliang"}),p.default.createElement(S.default,{className:"tk-slider tk-detection-device",value:void 0!==this.audiooutputVolume?this.audiooutputVolume:o,onBeforeChange:this.handerVolumeOnBeforeChange.bind(this),onAfterChange:this.handerVolumeOnAfterChange.bind(this)}),p.default.createElement("span",{className:"txtValue"},o)))),p.default.createElement("div",{className:"notice-text"},p.default.createElement("p",null,g.default.language.languageData.login.language.detection.audioouputExtend.noticeCarmera.one),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.audioouputExtend.noticeCarmera.two),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.audioouputExtend.noticeCarmera.three),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.audioouputExtend.noticeCarmera.four),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.audioouputExtend.noticeCarmera.five),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.audioouputExtend.noticeCarmera.six),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.audioouputExtend.noticeCarmera.seven)),s?p.default.createElement("div",{className:"detection-result"},p.default.createElement("button",{className:"detection-btn",onClick:this.nextButtonOnClick.bind(this,"audioinput",!0,3,"telephone",!1)},g.default.language.languageData.login.language.detection.button.notListen.text),p.default.createElement("button",{className:"detection-btn",style:{display:this.state.hasDetection.audiooutput?"block":"none"},onClick:this.nextButtonOnClick.bind(this,"audioinput",!0,3,"telephone",!0)},g.default.language.languageData.login.language.detection.button.canListen.text)):p.default.createElement("button",{className:"device-result-btn",onClick:this.okButtonOnClick.bind(this,4)},d)),p.default.createElement("div",{className:"speak-right",style:{display:a.audioinput?"block":"none"}},p.default.createElement("div",{className:"device-opts"},p.default.createElement("span",{className:"option-name"},g.default.language.languageData.login.language.detection.audioinputExtend.cameraOptionAll.cameraOption.text),p.default.createElement("div",{className:"styled-select"},p.default.createElement(w.default,{id:"audioSource",className:"dropDownBox",selectOptions:f,currentValue:this.state.selectDevice.audioinput,disabled:!1,onChange:this.changeSelectDeviceOnChange.bind(this,"audioinput")}))),p.default.createElement("div",{className:"notice-red"},g.default.language.languageData.login.language.detection.audioinputExtend.cameraOptionAll.noticeRed.text),p.default.createElement("div",{id:"audioinput_audio_stream",className:"audioinput-audio-detection add-display-none"}),p.default.createElement("div",{className:"speak-sound"},g.default.language.languageData.login.language.detection.audioinputExtend.cameraOptionAll.speakSound.text),p.default.createElement("div",{className:"sound-green"},p.default.createElement("ul",{id:"volume_audioinput_container"},y)),p.default.createElement("div",{className:"notice-text"},p.default.createElement("p",null,g.default.language.languageData.login.language.detection.audioinputExtend.noticeCarmera.one),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.audioinputExtend.noticeCarmera.two),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.audioinputExtend.noticeCarmera.three),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.audioinputExtend.noticeCarmera.four),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.audioinputExtend.noticeCarmera.five),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.audioinputExtend.noticeCarmera.six),p.default.createElement("p",null,g.default.language.languageData.login.language.detection.audioinputExtend.noticeCarmera.seven)),s?p.default.createElement("div",{className:"detection-result"},p.default.createElement("button",{className:"detection-btn",onClick:this.nextButtonOnClick.bind(this,"result",!0,4,"voiceTube",!1)},g.default.language.languageData.login.language.detection.button.notSpeak.text),p.default.createElement("button",{className:"detection-btn",style:{display:this.state.hasDetection.audioinput?"block":"none"},onClick:this.nextButtonOnClick.bind(this,"result",!0,4,"voiceTube",!0)},g.default.language.languageData.login.language.detection.button.canSpeak.text)):p.default.createElement("button",{className:"device-result-btn",onClick:this.okButtonOnClick.bind(this,4)},d)),p.default.createElement("div",{className:"systemInfo-right",style:{display:s?"none":a.systemInfo?"block":"none"}},p.default.createElement("ul",{className:"systemInfo-content"},this.systemInfoEleArr(this.systemInfoLanguage)),p.default.createElement("button",{className:"device-result-btn",onClick:this.okButtonOnClick.bind(this,4)},d)),p.default.createElement("div",{className:"result-right",style:{display:s&&a.result?"block":"none"}},p.default.createElement("dl",{className:"result-box"},p.default.createElement("dt",null,p.default.createElement("span",null,g.default.language.languageData.login.language.detection.resultExtend.item1.text),p.default.createElement("span",null,g.default.language.languageData.login.language.detection.resultExtend.item2.text),p.default.createElement("span",null,g.default.language.languageData.login.language.detection.resultExtend.item3.text)),p.default.createElement("dd",{className:this.detectionResult.canSee?"colorGreen":"colorRed"},p.default.createElement("span",null,g.default.language.languageData.login.language.detection.deviceTestHeader.videoinput.text),p.default.createElement("span",null,this.detectionResult.canSee?g.default.language.languageData.login.language.detection.resultExtend.item2.content.normal:g.default.language.languageData.login.language.detection.resultExtend.item2.content.abnormal),p.default.createElement("span",null,this.detectionResult.canSee?g.default.language.languageData.login.language.detection.resultExtend.item4.content.video:g.default.language.languageData.login.language.detection.resultExtend.item3.content.video)),"safari"!==T.info.browserName&&p.default.createElement("dd",{className:this.detectionResult.canListen?"colorGreen":"colorRed"},p.default.createElement("span",null,g.default.language.languageData.login.language.detection.deviceTestHeader.audioouput.text),p.default.createElement("span",null,this.detectionResult.canListen?g.default.language.languageData.login.language.detection.resultExtend.item2.content.normal:g.default.language.languageData.login.language.detection.resultExtend.item2.content.abnormal),p.default.createElement("span",null,this.detectionResult.canListen?g.default.language.languageData.login.language.detection.resultExtend.item4.content.listen:g.default.language.languageData.login.language.detection.resultExtend.item3.content.listen)),p.default.createElement("dd",{className:this.detectionResult.canSpeak?"colorGreen":"colorRed"},p.default.createElement("span",null,g.default.language.languageData.login.language.detection.deviceTestHeader.audioinput.text),p.default.createElement("span",null,this.detectionResult.canSpeak?g.default.language.languageData.login.language.detection.resultExtend.item2.content.normal:g.default.language.languageData.login.language.detection.resultExtend.item2.content.abnormal),p.default.createElement("span",null,this.detectionResult.canSpeak?g.default.language.languageData.login.language.detection.resultExtend.item4.content.speak:g.default.language.languageData.login.language.detection.resultExtend.item3.content.speak)),D.isSupport?p.default.createElement(p.default.Fragment,null,p.default.createElement("dd",{className:D.isLastest?"colorGreen":"colorRed"},p.default.createElement("span",null,g.default.language.languageData.login.language.detection.browserDetection.browserVersion),p.default.createElement("span",null,D.version),p.default.createElement("span",null,D.isLastest?g.default.language.languageData.login.language.detection.browserDetection.versionPass:g.default.language.languageData.login.language.detection.browserDetection.versionError)),D.isLastest?null:p.default.createElement("p",{className:"latest-prompt"},g.default.language.languageData.login.language.detection.browserDetection.prompt.one," ",p.default.createElement("a",{href:"https://www.google.cn/chrome"},"https://www.google.cn/chrome")," ",g.default.language.languageData.login.language.detection.browserDetection.prompt.two)):null),p.default.createElement("div",{className:"detection-result"},p.default.createElement("button",{className:"detection-btn",onClick:this.nextButtonOnClick.bind(this,"videoinput",!0,1)},g.default.language.languageData.login.language.detection.button.checkBack.text),p.default.createElement("button",{className:"detection-btn",onClick:this.okButtonOnClick.bind(this,4)},g.default.language.languageData.login.language.detection.button.joinRoom.text))),E.default.joinRoomInfo.isDoubleScreenDisplay&&g.default.isClient?p.default.createElement("div",{className:"changeScreen-content fixldy",style:{display:a.changeScreen?"block":"none"}},p.default.createElement("div",{className:"changeScreen-right"},p.default.createElement("span",{className:"switchScreen-desc"},g.default.language.languageData.login.language.detection.deviceTestHeader.MainMinorChange.text),p.default.createElement("input",{type:"checkbox",name:"switch-screen",id:"mainMinorChange-btn",onChange:this._mainMinorChange.bind(this),checked:this.state.switchScreen}),p.default.createElement("div",{className:g.default.switchScreen?"switch-content show":"switch-content "}," "),p.default.createElement("button",{className:"switch-screen detection-btn",onClick:this.okButtonOnClick.bind(this,6)},d))):void 0))}}]),t}(p.default.Component);t.default=x},AAUp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=M(a("oF3Q")),o=M(a("FyfS")),n=M(a("sk9p")),l=M(a("QbLZ")),s=M(a("YEIV")),r=M(a("Yz+Y")),d=M(a("iCc5")),u=M(a("V7oC")),c=M(a("FYw3")),f=M(a("mRg0")),h=M(a("q1tI")),m=M(a("HPAy")),p=(M(a("uuqz")),M(a("eQYT"))),g=M(a("aJKe")),v=M(a("JL1q")),y=M(a("XbJA")),S=M(a("cIq1")),b=M(a("ezS8")),C=M(a("NWGv")),k=M(a("DX4W")),w=M(a("hi7R")),T=M(a("BzI+")),E=M(a("rU/x")),I=M(a("kd7/")),D=M(a("Aj4T")),x=M(a("1rgB")),R=M(a("eebF")),_=M(a("m6uC")),P=M(a("ZRkH")),A=M(a("J7Xv")),L=M(a("I5MG"));a("+zfL");M(a("yGYm"));var B=a("LAQx");function M(e){return e&&e.__esModule?e:{default:e}}var N=function(e){function t(e){(0,d.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.state={loadTimeRemindSmart:!1,informPanel:{text:void 0,href:void 0},isVideoInFullscreenFile:!1,mainContentLayerIsShow:!1,selectMouse:!0,captureImgInfos:{},eleResizeInfos:{},useToolInfo:{useToolKey:"tool_mouse",useToolColor:"#FF0000",blackboardToolsInfo:{pencilWidth:5,fontSize:48,eraserWidth:30,shapeWidth:5}},updateState:!1},a.mainContentSize={width:0,height:0},a.listCaptureImgResizeArray=null,a.eleInitResizeInfos={},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.initDragData()}},{key:"componentDidMount",value:function(){g.default.Window.addEventListener(p.default.EVENTTYPE.WindowEvent.onResize,this.handlerOnResize.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("resizeHandler",this.handlerOnResize.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener(p.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener(p.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener(p.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener(p.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,this.handlerRoomPlaybackClearAll.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("receive-msglist-BlackBoardDrag",this.handlerMsglistBlackBoardDrag.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("receive-msglist-DialDrag",this.handlerMsglistDialDrag.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("receive-msglist-TimerDrag",this.handlerMsglistTimerDrag.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("receive-msglist-AnswerDrag",this.handlerMsglistAnswerDrag.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("receive-msglist-ResponderDrag",this.handlerMsglistResponderDrag.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("receive-msglist-CaptureImg",this.handlerMsglistCaptureImg.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("receive-msglist-CaptureImgDrag",this.handlerMsglistCaptureImgDrag.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("receive-msglist-CaptureImgResize",this.handlerMsglistCaptureImgResize.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("receive-msglist-FullScreen",this.handlerMsglistFullScreen.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("changeLayerIsShow",this.handleLayerIsShow.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("receiveWhiteboardSDKAction",this.receiveWhiteboardSDKAction.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("fullScreen",this.handlerFullScreen.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("SwitchLayoutAfter",this.handlerOnResize.bind(this),this.listernerBackupid),this.setContentVesselOffset()}},{key:"componentWillUnmount",value:function(){g.default.Window.removeBackupListerner(this.listernerBackupid),g.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){(Math.abs(this.mainContent.offsetWidth-this.mainContentSize.width)>.1||Math.abs(this.mainContent.offsetHeight-this.mainContentSize.height)>.1)&&(this.mainContentSize.width=this.mainContent.offsetWidth,this.mainContentSize.height=this.mainContent.offsetHeight,g.default.CoreController.dispatchEvent({type:"mainContentSizeChanged"}))}},{key:"handlerFullScreen",value:function(e){var t=e.message,a=t.isFullScreen,i=t.fullScreenType;"courseware_file"!==i&&"stream_media"!==i||(this.setState({isVideoInFullscreenFile:a}),g.default.CoreController.dispatchEvent({type:"resizeHandler"}))}},{key:"handlerOnResize",value:function(){this.setContentVesselOffset()}},{key:"setContentVesselOffset",value:function(){var e=m.default.windowInnerWidth/p.default.STANDARDSIZE,t=$("#lc-full-vessel").offset();Object.customAssign(m.default.dragRange,{left:t.left/e,top:t.top/e,bottom:(m.default.windowInnerHeight-$("#lc-full-vessel").height()-t.top)/e,right:(m.default.windowInnerWidth-$("#lc-full-vessel").width()-t.left)/e})}},{key:"handlerRoomConnected",value:function(){this.setState({loadTimeRemindSmart:v.default.handler.getAppPermissions("loadClassbeginRemind")})}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"ClassBegin":break;case"BlackBoardDrag":if(m.default.playback&&"0"===m.default.roomlayout)return;Object.customAssign(this.state.moreBlackboardDrag,t.data),this.setState({moreBlackboardDrag:this.state.moreBlackboardDrag});break;case"DialDrag":if(m.default.playback&&"0"===m.default.roomlayout)return;this.setState({dialDrag:Object.customAssign({},this.state.dialDrag,t.data)});break;case"TimerDrag":if(m.default.playback&&"0"===m.default.roomlayout)return;Object.customAssign(this.state.timerDrag,t.data),this.setState({timerDrag:this.state.timerDrag});break;case"AnswerDrag":if(m.default.playback&&"0"===m.default.roomlayout)return;Object.customAssign(this.state.answerDrag,t.data),Object.customAssign(this.state.answerDragS,t.data),this.setState({answerDrag:this.state.answerDrag,answerDragS:this.state.answerDragS});break;case"ResponderDrag":if(m.default.playback&&"0"===m.default.roomlayout)return;Object.customAssign(this.state.responderDrag,t.data),this.setState({responderDrag:this.state.responderDrag});break;case"CaptureImgDrag":if(m.default.playback&&"0"===m.default.roomlayout)return;t.data.position&&t.data.id&&this.state[t.data.id]&&(Object.customAssign(this.state[t.data.id],t.data.position),this.setState((0,s.default)({},t.data.id,this.state[t.data.id])));break;case"CaptureImgResize":if(t.data.scale&&t.data.id){var a=t.data.scale;if(this.state.eleResizeInfos&&this.eleInitResizeInfos){var i=this.eleInitResizeInfos[t.data.id],o=i.width*a,n=i.height*a;this.state.eleResizeInfos[t.data.id]={width:o,height:n},this.setState({eleResizeInfos:this.state.eleResizeInfos})}}break;case"CaptureImg":if(t.data.captureImgInfo&&t.data.remSize){var l=t.data.captureImgInfo;this.handleCaptureImg(l);var r=window.innerWidth/p.default.STANDARDSIZE,d=t.data.remSize,u="captureImg_"+t.data.captureImgInfo.fileid,c={width:d.width*r,height:d.height*r};this.setInitResize(u,c,.04)}break;case"FullScreen":"courseware_file"===t.data.fullScreenType||"stream_media"===t.data.fullScreenType?(this.setState({isVideoInFullscreenFile:!0}),g.default.CoreController.dispatchEvent({type:"resizeHandler"})):this.setState({isVideoInFullscreenFile:!1});break;case"switchLayout":var f={};for(var h in this.eleInitResizeInfos)f[h]={width:this.eleInitResizeInfos[h].width,height:this.eleInitResizeInfos[h].height};this.setState({eleResizeInfos:f})}}},{key:"handlerRoomDelmsg",value:function(e){var t=e.message;switch(t.name){case"FullScreen":this.state.isVideoInFullscreenFile&&(this.setState({isVideoInFullscreenFile:!1}),g.default.CoreController.dispatchEvent({type:"resizeHandler"}),(0,B.setContentVesselOffset)());break;case"CaptureImg":if(t.id.startsWith("CaptureImg_")){var a=t.id.split("_")[1],i=(0,l.default)({},this.state.captureImgInfos);delete i[a],this.setState({captureImgInfos:i})}break;case"ClassBegin":this.setState({captureImgInfos:{}})}}},{key:"handlerMsglistBlackBoardDrag",value:function(e){var t=this;e.message.BlackBoardDragArray.map(function(e,a){Object.customAssign(t.state.moreBlackboardDrag,e.data),t.setState({moreBlackboardDrag:t.state.moreBlackboardDrag})})}},{key:"handlerMsglistDialDrag",value:function(e){var t=this;e.message.DialDragArray.map(function(e,a){t.setState({dialDrag:Object.customAssign({},t.state.dialDrag,e.data)})})}},{key:"handlerMsglistTimerDrag",value:function(e){var t=this;e.message.TimerDragArray.map(function(e,a){Object.customAssign(t.state.timerDrag,e.data),t.setState({timerDrag:t.state.timerDrag})})}},{key:"handlerMsglistAnswerDrag",value:function(e){var t=this;e.message.AnswerDragArray.map(function(e,a){Object.customAssign(t.state.answerDragS,e.data),Object.customAssign(t.state.answerDrag,e.data),t.setState({answerDragS:t.state.answerDragS,answerDrag:t.state.answerDrag})})}},{key:"handlerMsglistResponderDrag",value:function(e){var t=this;e.message.ResponderDragArray.map(function(e,a){Object.customAssign(t.state.responderDrag,e.data),t.setState({responderDrag:t.state.responderDrag})})}},{key:"handlerMsglistFullScreen",value:function(e){var t=e.message.FullScreenArray[0].data;"courseware_file"!==t.fullScreenType&&"stream_media"!==t.fullScreenType||(this.setState({isVideoInFullscreenFile:!0}),g.default.CoreController.dispatchEvent({type:"resizeHandler"}))}},{key:"handlerMsglistCaptureImg",value:function(e){var t=this,a=e.message.CaptureImgArray,i={};a.map(function(e,a){if(e.data.captureImgInfo){var o=e.data.captureImgInfo,n=o.fileid;i[n]=o,t.setState({captureImgInfos:i});var l=window.innerWidth/p.default.STANDARDSIZE,s=e.data.remSize,r="captureImg_"+e.data.captureImgInfo.fileid,d={width:s.width*l,height:s.height*l};t.setInitResize(r,d,.04)}})}},{key:"handlerMsglistCaptureImgDrag",value:function(e){var t=this;e.message.CaptureImgDragArray.map(function(e,a){e.data.position&&e.data.id&&t.state[e.data.id]&&(Object.customAssign(t.state[e.data.id],e.data.position),t.setState((0,s.default)({},e.data.id,t.state[e.data.id])))})}},{key:"handlerMsglistCaptureImgResize",value:function(e){var t=this,a=e.message.CaptureImgResizeArray;if(a){window.innerWidth,p.default.STANDARDSIZE;a.map(function(e,a){if(e.data.scale&&e.data.id){var i=e.data.scale;if(t.state.eleResizeInfos&&t.eleInitResizeInfos){var o=t.eleInitResizeInfos[e.data.id],n=o.width*i,l=o.height*i;t.state.eleResizeInfos[e.data.id]={width:n,height:l},t.setState({eleResizeInfos:t.state.eleResizeInfos})}}})}}},{key:"receiveWhiteboardSDKAction",value:function(e){var t=e.message,a=t.action,s=t.cmd,r=void 0===s?{}:s,d=r.updateViewState,u=r.viewState;if(d&&u&&(!d||d.tool||d.action||d.other)){var c=(0,l.default)({},this.state.useToolInfo),f=!0;switch(a){case"viewStateUpdate":var h=r.viewState,m=h.tool,p=void 0===m?{}:m,g=h.other,v=void 0===g?{}:g;c.blackboardToolsInfo.pencilWidth=v.pencilWidth,c.blackboardToolsInfo.shapeWidth=v.shapeWidth,c.blackboardToolsInfo.eraserWidth=v.eraserWidth,c.blackboardToolsInfo.fontSize=v.fontSize,c.useToolColor=v.primaryColor;var y=!0,S=!1,b=void 0;try{for(var C,k=(0,o.default)((0,i.default)(p));!(y=(C=k.next()).done);y=!0){var w=C.value,T=(0,n.default)(w,2),E=T[0],I=T[1];"tool_mouse"===E&&(f=p[E].isUse),I.isUse&&(c.useToolKey=E)}}catch(e){S=!0,b=e}finally{try{!y&&k.return&&k.return()}finally{if(S)throw b}}this.setState({useToolInfo:c,selectMouse:f})}}}},{key:"handlerRoomPlaybackClearAll",value:function(){var e=!0,t=!1,a=void 0;try{for(var l,s=(0,o.default)((0,i.default)(this.state.captureImgInfos));!(e=(l=s.next()).done);e=!0){var r=l.value,d=(0,n.default)(r,2),u=d[0];d[1];this.state["captureImg_"+u]&&delete this.state["captureImg_"+u]}}catch(e){t=!0,a=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw a}}this.initDragData(!0),this.setState({captureImgInfos:{},dragPosition:{},eleResizeInfos:{}}),this.eleInitResizeInfos={}}},{key:"handleCaptureImg",value:function(e){var t=e.fileid,a=(0,l.default)({},this.state.captureImgInfos);a[t]=e,this.setState({captureImgInfos:a})}},{key:"_getCaptureImgEleArr",value:function(e){var t=[],a={onStopDrag:this.onStopDrag.bind(this),changePosition:this.changePosition.bind(this)},l=!0,s=!1,r=void 0;try{for(var d,u=(0,o.default)((0,i.default)(e));!(l=(d=u.next()).done);l=!0){var c=d.value,f=(0,n.default)(c,2),m=f[0],p=f[1];this.state["captureImg_"+m]||(this.state["captureImg_"+m]={left:0,top:0,percentLeft:.5,percentTop:.5,isDrag:!1}),this.state.eleResizeInfos&&!this.state.eleResizeInfos["captureImg_"+m]&&(this.state.eleResizeInfos["captureImg_"+m]={width:0,height:0}),this.eleInitResizeInfos&&!this.eleInitResizeInfos["captureImg_"+m]&&(this.eleInitResizeInfos["captureImg_"+m]={width:0,height:0,originalResizeScale:1}),t.push(h.default.createElement(w.default,{key:m,position:this.state["captureImg_"+m],id:"captureImg_"+m,captureImgInfo:p,draggableData:a,resizeInfo:this.state.eleResizeInfos["captureImg_"+m],useToolInfo:this.state.useToolInfo,sendSignallingOfResize:this.sendSignallingOfResize.bind(this),sendSignallingOfDrag:this.sendSignallingOfDrag.bind(this),changeEleReSize:this.changeEleReSize.bind(this),eleInitResizeInfos:this.eleInitResizeInfos["captureImg_"+m],changeLayerIsShow:this.changeLayerIsShow.bind(this),selectMouse:this.state.selectMouse}))}}catch(e){s=!0,r=e}finally{try{!l&&u.return&&u.return()}finally{if(s)throw r}}return t}},{key:"handleLayerIsShow",value:function(e){this.changeLayerIsShow(e.data.mainContentLayerIsShow)}},{key:"changeLayerIsShow",value:function(e){this.setState({mainContentLayerIsShow:e})}},{key:"setInitResize",value:function(e,t,a){var i=(0,l.default)({},t),o=i.width/i.height,n=window.innerWidth/p.default.STANDARDSIZE,s=void 0,r=void 0;return"pc"===TK.SDKTYPE?setTimeout(function(){var e=document.getElementById("lc-full-vessel");s=e.clientWidth,r=e.clientHeight},0):(s=m.default.windowInnerWidth,r=m.default.windowInnerHeight),(i.width>s-2*a*n||i.height>r-2*a*n)&&(o>s/r?(i.width=s-2*a*n,i.height=i.width/o):(i.height=r-2*a*n,i.width=i.height*o)),this.eleInitResizeInfos[e]={width:i.width/n,height:i.height/n,originalResizeScale:o},this.state.eleResizeInfos[e]={width:i.width/n,height:i.height/n},this.setState({eleResizeInfos:this.state.eleResizeInfos}),i}},{key:"sendSignallingOfResize",value:function(e){if(e.startsWith("captureImg_")){var t=e.split("_")[1],a={id:e,scale:this.state.eleResizeInfos[e].width/this.eleInitResizeInfos[e].width},i="CaptureImgResize_"+t,o="CaptureImg_"+t;y.default.sendSignallingFromCaptureImgResize(a,i,o)}}},{key:"changeEleReSize",value:function(e,t){this.state.eleResizeInfos[e]=t,this.setState({eleResizeInfos:this.state.eleResizeInfos})}},{key:"initDragData",value:function(e){var t={};if(["moreBlackboardDrag","timerDrag","dialDrag","answerDrag","answerDragS","responderDrag"].map(function(e,a){t[e]={left:0,top:0,percentLeft:0,percentTop:0,isDrag:!1}}),this.setState(t),!e){var a={};["page_wrap","lc_tool_container","coursewareRemarks","qrCodeDrag","customTrophy","programmShare"].map(function(e,t){a[e]={left:0,top:0,percentLeft:0,percentTop:0,isDrag:!1}}),this.setState(a)}}},{key:"onStartDrag",value:function(e,t){}},{key:"onStopDrag",value:function(e,t,a){var i=t.node.id;!i||""===i||this.state[i].left===t.x&&this.state[i].top===t.y||(this.state[i].left=t.x,this.state[i].top=t.y,this.state[i].isDrag=!0,Object.customAssign(this.state[i],a),this.setState((0,s.default)({},i,this.state[i])),this.sendSignallingOfDrag(i))}},{key:"changePosition",value:function(e,t,a){t&&e&&(Object.customAssign(this.state[e],t),this.setState((0,s.default)({},e,this.state[e])),a&&this.sendSignallingOfDrag(e))}},{key:"sendSignallingOfDrag",value:function(e){var t=this.state[e],a={percentLeft:t.percentLeft,percentTop:t.percentTop,isDrag:!0};if(e.startsWith("captureImg_")){var i=e.split("_")[1],o={id:e,position:a},n="CaptureImgDrag_"+i,l="CaptureImg_"+i;y.default.sendSignallingFromCaptureImgDrag(o,n,l)}else{if(m.default.playback&&"0"===m.default.roomlayout)return;switch(e){case"timerDrag":y.default.sendSignallingFromTimerDrag(a);break;case"moreBlackboardDrag":g.default.CoreController.dispatchEvent({type:"isSendSignallingFromBlackBoardDrag",message:{data:a}});break;case"dialDrag":y.default.sendSignallingFromDialDrag(a);break;case"responderDrag":y.default.sendSignallingFromResponderDrag(a);break;case"answerDrag":y.default.sendSignallingFromAnswerDrag(a)}}}},{key:"render",value:function(){var e=this,t=this.state,a=t.loadTimeRemindSmart,i=t.isVideoInFullscreenFile,o=t.captureImgInfos,n=t.mainContentLayerIsShow,l=(t.isPauseMedia,this.props),s=l.styleJson,r=l.pureVideoMod,d={bounds:"pc"===TK.SDKTYPE?"#lc-full-vessel":"#tk_app",onStartDrag:this.onStartDrag.bind(this),onStopDrag:this.onStopDrag.bind(this),changePosition:this.changePosition.bind(this),changeLayerIsShow:this.changeLayerIsShow.bind(this)},u=p.default.joinRoomInfo.roomtype===p.default.ROOMTYPE.oneToOne;return h.default.createElement("article",{id:"content",ref:function(t){e.mainContent=t},className:"lc-container add-fl "+(i?" zIndexBig":"")+(u?" one-to-one":""),style:s},h.default.createElement("div",{className:"lc-full-vessel "+(i?" pictureInPicture big":"")},h.default.createElement("div",{style:{width:"100%",height:"100%",position:"relative"},id:"lc-full-vessel"},h.default.createElement(S.default,{pureVideoMod:r})," ",h.default.createElement(T.default,null),h.default.createElement(k.default,{id:"moreBlackboardDrag",blackboardThumbnailImageId:"blackboardThumbnailImageId",blackboardCanvasBackgroundColor:"#ffffff",moreBlackboardDrag:this.state.moreBlackboardDrag,draggableData:d}),!m.default.playback&&a?h.default.createElement(C.default,{roomConnected:a}):void 0," ",h.default.createElement(x.default,{id:"timerDrag",timerDrag:this.state.timerDrag,draggableData:d}),h.default.createElement(R.default,{id:"qrCodeDrag",qrCodeDrag:this.state.qrCodeDrag,draggableData:d}),h.default.createElement(E.default,{id:"dialDrag",dialDrag:this.state.dialDrag,draggableData:d}),h.default.createElement(_.default,{id:"responderDrag",responderDrag:this.state.responderDrag,draggableData:d}),this._getCaptureImgEleArr(o),h.default.createElement("div",{id:"mainContentLayer",style:{display:n?"block":"none"},className:"main-content-layer"}),h.default.createElement(P.default,{id:"programmShare",programmShareDrag:this.state.programmShare,draggableData:d}),h.default.createElement(A.default,null),p.default.joinRoomInfo.pointerReminder&&p.default.hasRole.roleStudent?h.default.createElement(L.default,null):void 0,h.default.createElement(b.default,null),m.default.playback?void 0:h.default.createElement(I.default,{id:"answerDrag",answerDrag:this.state.answerDrag,draggableData:d}),m.default.playback?void 0:h.default.createElement(D.default,{id:"answerDragS",answerDragS:this.state.answerDragS,draggableData:d}))),h.default.createElement("div",{style:{position:"fixed",zIndex:"999999",top:"30%",left:0,color:"#999",background:"greenyellow",borderRadius:"5px"}}))}}]),t}(h.default.Component);N.defaultProps={systemHideTime:0},t.default=N},"Ahz+":function(e,t,a){},Aj4T:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=E(a("EJiy")),o=E(a("gDS+")),n=E(a("HaWR")),l=E(a("Yz+Y")),s=E(a("iCc5")),r=E(a("V7oC")),d=E(a("FYw3")),u=E(a("mRg0")),c=E(a("P2sY")),f=E(a("ODRq"));a("3of3");var h=E(a("q1tI")),m=E(a("pIe1")),p=E(a("mrNk")),g=E(a("aJKe")),v=E(a("XbJA")),y=E(a("HPAy")),S=E(a("3mpg")),b=E(a("s17s")),C=E(a("361B")),k=E(a("vPeN")),w=E(a("QpLg")),T=E(a("ylj9"));function E(e){return e&&e.__esModule?e:{default:e}}var I={on:g.default.CoreController.addEventListener,off:g.default.CoreController.removeBackupListerner,emit:g.default.CoreController.dispatchEvent},D={detail:"DETAIL",option:"OPTION",statistics:"STATISTICS",current:"CURRENT"},x=[TkConstant.EVENTTYPE.RoomEvent.roomPubmsg,TkConstant.EVENTTYPE.RoomEvent.roomDelmsg,TkConstant.EVENTTYPE.RoomEvent.roomDisconnected,"receive-msglist-question","receive-msglist-publishResult"],R=["UNCOMMIT","COMMITTED"],_=new f.default([[R[0],D.option],[R[1],D.current]]),P=["RUNNING","FINISHED"],A=new f.default([[P[0],D.option],[P[1],D.statistics]]),B={hasChose:!1},M=new Array(4).fill(void 0).map(function(e){return(0,c.default)({},B)}),N=function(e){function t(){(0,s.default)(this,t);var e=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this));return e.owner=p.default.getTkRoom().getMySelf(),e.role=e.owner.role,e.markID=(new Date).getTime()+"_"+Math.random(),e.historyOptions=[],e.quesID=void 0,e.rightOptions=[],e.state={show:!1,commitState:R[0],questionState:P[0],page:{index:D.option,data:null},options:M,resizeInfo:{width:0,height:0},rightOptions:[],detailPageInfo:{current:1,total:1},detailData:[],pubRight:!1},e}return(0,u.default)(t,e),(0,r.default)(t,[{key:"reset",value:function(){this.historyOptions=[],this.setState({rightOptions:[],commitState:"UNCOMMIT",detailData:[],detailPageInfo:{current:1,total:1}})}},{key:"componentDidMount",value:function(){var e=this;x.forEach(function(t,a){return I.on(t,e.handleEvent.bind(e),e.markID)})}},{key:"componentWillUnmount",value:function(){I.off(this.markID)}},{key:"componentDidUpdate",value:function(e,t){this.updateResize()}},{key:"updateResize",value:function(){var e=this.props.id,t=document.getElementById(e);if(t){var a=y.default.windowInnerWidth/TkConstant.STANDARDSIZE,i=t.offsetWidth/a,o=t.offsetHeight/a;!this.state.resizeInfo||(0,n.default)(this.state.resizeInfo.width,i)&&(0,n.default)(this.state.resizeInfo.height,o)||(this.state.resizeInfo={width:i,height:o},this.setState({resizeInfo:this.state.resizeInfo}))}}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,i=document.getElementById(t),o=document.querySelector(a.bounds);if(i&&o&&a.changePosition&&"function"==typeof a.changePosition){a.changePosition(t,{percentLeft:.5,percentTop:.5,isDrag:!1},!0)}}},{key:"dispose",value:function(e){var t=e.action,a=e.data,i=e.extra;if(null===t||null===a)return L.Logger.error("Incomplete parameter");this[t]&&"function"==typeof this[t]&&this[t]({action:t,data:a,extra:i})}},{key:"turn",value:function(e){var t=e.data,a=e.extra,i=e.extra.page;if(null===t||null===a||void 0===i)return L.Logger.error("Error parameter");i.index!==D.current&&this.setState({page:i})}},{key:"handleEvent",value:function(e){var t=e.type,a=e.message;t=/-/.test(t)&&t.replace(/\-/g,"")||t,this.dispose({action:t,data:a})}},{key:"changeQuestionState",value:function(e){var t=e.data,a=this.state.questionState,i=P.indexOf(a),o=A.get(P.length-1===i?P[0]:P[i+1]),n=o===D.current?this.state.page:{index:o,data:t};this.setState({questionState:P[P.length-1===i?0:i+1],page:n})}},{key:"changeCommitState",value:function(e){var t=e.data,a=this.state.commitState,i=R.indexOf(a),o=_.get(R.length-1===i?R[0]:R[i+1]),n=o===D.current?this.state.page:{index:o,data:t};("UNCOMMIT"!==a||this.state.options.some(function(e){return!0===e.hasChose}))&&(this["answerWill"+("UNCOMMIT"===a?"Commit":"Modify")](),this.setState({commitState:R[R.length-1===i?0:i+1],page:n}))}},{key:"answerWillCommit",value:function(){var e=this.state.options,t={};this.historyOptions.length>0&&this.historyOptions.forEach(function(e,a){e.hasChose&&(t[""+a]=-1)}),e.forEach(function(e,a){e.hasChose&&!t[""+a]?t[""+a]=1:e.hasChose&&-1===t[""+a]&&delete t[""+a]}),v.default.answerCommit({options:e,actions:t,modify:this.historyOptions.length>0?1:0,stuName:p.default.getTkRoom().getMySelf().nickname,quesID:this.quesID,isRight:this.equals(e,this.rightOptions)}),this.historyOptions=JSON.parse((0,o.default)(e))}},{key:"answerWillModify",value:function(){var e=this.state.options;e.forEach(function(e){e.hasChose=!1}),this.setState({options:e})}},{key:"roompubmsg",value:function(e){var t=e.data;if(t.data){var a=t.data,i=a.action,o=a.state,n=a.quesID;switch(t.name){case"Question":switch(i){case"start":var l=o.options;this.reset(),this.quesID=n,this.rightOptions=l,TkConstant.hasRole.roleStudent&&this.setState({show:!0,questionState:"RUNNING",page:{index:D.option,data:{}},options:new Array(l.length).fill(void 0).map(function(e){return(0,c.default)({},B)}),pubRight:!1});break;case"end":this.quesID=n,TkConstant.hasRole.roleStudent&&this.setState({show:!0})}break;case"PublishResult":var s=t.data,r=s.result,d=s.resultNum,u=s.ansTime,f=s.rightOptions,h=s.hasPub;TkConstant.hasRole.roleStudent&&this.setState({questionState:"FINISHED",page:{index:this.state.page.index===D.detail?D.detail:D.statistics,data:{}},show:!0,result:r,resultNum:d,ansTime:u,rightOptions:f,pubRight:h})}}}},{key:"roomdelmsg",value:function(e){switch(e.data.name){case"Question":case"ClassBegin":TkConstant.hasRole.roleStudent&&this.setState({show:!1})}}},{key:"roomdisconnected",value:function(e){e.data;this.state.show&&this.setState({show:!1})}},{key:"receivemsglistpublishResult",value:function(e){var t=e.data.data;this.state.show&&this.roompubmsg({data:t})}},{key:"receivemsglistquestion",value:function(e){var t=e.data.data;this.roompubmsg({data:t})}},{key:"equals",value:function(e,t){if(!e||!t)return 0;if(e.length!=t.length)return 0;for(var a=0,n=e.length;a<n;a++)if(e[a]instanceof Array&&t[a]instanceof Array){if(!this.equals(e[a],t[a]))return 0}else if("object"===(0,i.default)(e[a])&&"object"===(0,i.default)(t[a])){if((0,o.default)(e[a])!==(0,o.default)(t[a]))return 0}else if(e[a]!=t[a])return 0;return 1}},{key:"changeOptionLength",value:function(e){var t=e.data.num,a=this.state.options;t>0&&a.push((0,c.default)({},B))||a.pop(),this.setState({options:a})}},{key:"optionClick",value:function(e){var t=e.data.index;if("UNCOMMIT"===this.state.commitState){var a=this.state.options;a[t].hasChose=!a[t].hasChose,this.setState({options:a})}}},{key:"changeDetail",value:function(e){e.action;var t=e.data;1===this.state.detailPageInfo.current&&-1===t.action||this.state.detailPageInfo.current===this.state.detailPageInfo.total&&1===t.action||(-1===t.action?this.getDetailData(this.state.detailPageInfo.current-1):1===t.action&&this.getDetailData(this.state.detailPageInfo.current+1))}},{key:"changeDetailOrStatistics",value:function(){var e=this.state.page;this.getDetailData(1),this.setState({page:{index:e.index===D.statistics?D.detail:D.statistics}})}},{key:"getDetailData",value:function(e){var t=this;S.default.getSimplifyAnswer({id:this.quesID,page:e},{doneCallback:function(a){0===a.result&&t.setState({detailData:a.data,detailPageInfo:{total:a.pageinfo&&Math.ceil(a.pageinfo.count/20)||1,current:e}})}})}},{key:"close",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var e=this.state,t=e.show,a=e.questionState,i=e.commitState,o=e.resizeInfo,n=(0,c.default)(this.state,{role:this.role,owner:this.owner},{historyOptions:this.historyOptions}),l=this.props,s=l.id,r=l.answerDragS,d=l.draggableData,u=r.percentLeft,f=r.percentTop;0==u||u||(u=.5),0==f||f||(f=.5);var p={position:"absolute",zIndex:130,display:t?"":"none",left:0,top:0},g=Object.customAssign({id:s,size:o,percentPosition:{percentLeft:u,percentTop:f}},d);return h.default.createElement(m.default,g,h.default.createElement("div",{id:s,className:"question-panel student "+a.toLowerCase()+" "+i.toLowerCase()+" beyondDaTiQi",style:p},h.default.createElement(w.default,{parentState:n,dispose:this.dispose.bind(this),pageDict:D}),h.default.createElement("div",{className:"body"},this.state.page.index===D.option?h.default.createElement(b.default,{parentState:n,dispose:this.dispose.bind(this),pageDict:D}):void 0,this.state.page.index===D.detail?h.default.createElement(C.default,{parentState:n,dispose:this.dispose.bind(this),pageDict:D}):void 0,this.state.page.index===D.statistics?h.default.createElement(T.default,{parentState:n,dispose:this.dispose.bind(this),pageDict:D}):void 0),h.default.createElement(k.default,{parentState:n,dispose:this.dispose.bind(this),pageDict:D})))}}]),t}(h.default.Component);t.default=N},B1Ng:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=v(a("sk9p")),o=v(a("14Xm")),n=v(a("D3Ub")),l=v(a("Yz+Y")),s=v(a("iCc5")),r=v(a("V7oC")),d=v(a("FYw3")),u=v(a("mRg0")),c=v(a("q1tI")),f=v(a("uuqz")),h=v(a("HPAy")),m=v(a("yfjp"));a("CYlH");var p=a("9VTz"),g=v(a("HvdO"));function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){(0,s.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.prevPage=function(){a.setState({isButtonDisabled:!0}),p.bindCourseService.getRootCatalog("prev").then(function(e){a.setState({data:e,isFirst:e.isFirst,isEnd:e.isEnd,isButtonDisabled:!1})})},a.nextPage=function(){a.setState({isButtonDisabled:!0}),p.bindCourseService.getRootCatalog("next").then(function(e){a.setState({data:e,isFirst:e.isFirst,isEnd:e.isEnd,isButtonDisabled:!1})})},a.closeFn=function(){p.bindCourseService.clearData()},a.searchChangeDebounce=f.default.debounce(a.searchChange.bind(a),300),a.state={data:[],isFirst:!1,isEnd:!1,isButtonDisabled:!1,isRelationCourseDisabled:!1,searchVal:""},a}var a,v,y,S;return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=this;p.bindCourseService.getRootCatalog().then(function(t){e.setState({data:t,isFirst:t.isFirst,isEnd:t.isEnd})})}},{key:"componentWillUnmount",value:function(){this.closeFn()}},{key:"disableClick",value:function(e){return e.stopPropagation(),!1}},{key:"unfoldFn",value:(S=(0,n.default)(o.default.mark(function e(t){var a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.bindCourseService.unfoldFn(t);case 2:a=e.sent,this.setState({data:a});case 4:case"end":return e.stop()}},e,this)})),function(e){return S.apply(this,arguments)})},{key:"loadMoreFn",value:(y=(0,n.default)(o.default.mark(function e(t,a){var i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.bindCourseService.loadMoreFn(t,a);case 2:i=e.sent,this.setState({data:i});case 4:case"end":return e.stop()}},e,this)})),function(e,t){return y.apply(this,arguments)})},{key:"searchInputChange",value:function(e,t){this.setState({searchVal:t}),this.searchChangeDebounce(t)}},{key:"searchChange",value:(v=(0,n.default)(o.default.mark(function e(t){var a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.bindCourseService.searchChange(t);case 2:a=e.sent,this.setState({data:a});case 4:case"end":return e.stop()}},e,this)})),function(e){return v.apply(this,arguments)})},{key:"checkFn",value:function(e){var t=p.bindCourseService.checkFn(e);this.setState({data:t})}},{key:"relationCourseFn",value:(a=(0,n.default)(o.default.mark(function e(){var t,a,n,l;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isRelationCourseDisabled:!0}),e.next=3,p.bindCourseService.relationCourseFn();case 3:t=e.sent,a=(0,i.default)(t,2),n=a[0],l=a[1],this.setState({isRelationCourseDisabled:!1}),n?(this.props.close(),console.error("")):console.error("",l);case 9:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.data,a=e.isFirst,i=e.isEnd,o=e.isButtonDisabled,n=e.searchVal,l=e.isRelationCourseDisabled,s=c.default.createElement("i",{className:"icon-search"});return c.default.createElement("div",{onClick:this.disableClick,className:"relation-course-warp"},c.default.createElement("div",{className:"relation-course"},c.default.createElement("div",{className:"relation-course-content"},c.default.createElement("div",{className:"relation-course-search"},c.default.createElement(m.default.Input,{type:"text",classNames:"search-input",value:n,onChange:this.searchInputChange.bind(this),prefix:s})),c.default.createElement("div",{className:"relation-course-tree"},c.default.createElement(g.default,{data:t,unfoldFn:this.unfoldFn.bind(this),loadMoreFn:this.loadMoreFn.bind(this),checkFn:this.checkFn.bind(this)})),c.default.createElement("div",{className:"turn-page"},c.default.createElement(m.default.Button,{onClick:this.prevPage,disabled:a||o,classNames:"turn-page-button "+(a?"disabled":""),text:"< "+h.default.language.languageData.toolContainer.toolIcon.addCourse.relationCourse.button.pervPage}),c.default.createElement(m.default.Button,{onClick:this.nextPage,disabled:i||o,classNames:"turn-page-button "+(i?"disabled":""),text:h.default.language.languageData.toolContainer.toolIcon.addCourse.relationCourse.button.nextPage+" >"}))),c.default.createElement("div",{className:"relation-course-footer"},c.default.createElement(m.default.Button,{classNames:"relation-btn",text:h.default.language.languageData.toolContainer.toolIcon.addCourse.relationCourse.button.relation,onClick:this.relationCourseFn.bind(this),disabled:l}))))}}]),t}(c.default.Component);t.default=y},B9HA:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=h(a("Yz+Y")),o=h(a("iCc5")),n=h(a("V7oC")),l=h(a("FYw3")),s=h(a("mRg0")),r=h(a("q1tI")),d=h(a("HPAy")),u=h(a("M3nf")),c=h(a("Fveh")),f=h(a("eQYT"));function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.showPenList,a=e.changePen,i=e.mouseLeave,o=e.setLineColor,n=e.onAfterChangePenLineWidth;return r.default.createElement("li",{className:"tool-option pen-list "+this.props.pen+" "+(this.props.isActive===this.props.penActive(this.props.pen)?"active":"")+(this.props.show?"":" hide"),"data-current-pen":this.props.pen,onClick:t,title:d.default.language.languageData.header.tool.pencil.title},r.default.createElement("em",{className:"icon icon-pen_sanjiao"}),r.default.createElement("div",{className:"tool-pen-list-extend "+(f.default.joinRoomInfo.mouseoptions&&f.default.hasRole.roleStudent?" student":" "),style:{display:this.props.isShowPenList&&this.props.isActive===this.props.penActive(this.props.pen)?"block":"none"},onClick:a,onMouseLeave:i},r.default.createElement("ol",{className:"tool-pen-box"},r.default.createElement("li",{className:"pen-option tool_pencil "+("tool_pencil"===this.props.pen?"active":"")},r.default.createElement("em",{"data-type":"tool_pencil",className:"pen-icon icon-pen"})),r.default.createElement("li",{className:"pen-option tool_highlighter "+("tool_highlighter"===this.props.pen?"active":"")},r.default.createElement("em",{"data-type":"tool_highlighter",className:"pen-icon icon-yingguangbi"})),r.default.createElement("li",{className:"pen-option tool_line "+("tool_line"===this.props.pen?"active":"")},r.default.createElement("em",{"data-type":"tool_line",className:"pen-icon icon-line"})),r.default.createElement("li",{className:"pen-option tool_arrow "+("tool_arrow"===this.props.pen?"active":"")},r.default.createElement("em",{"data-type":"tool_arrow",className:"pen-icon icon-jiantou"}))),r.default.createElement("div",{style:{position:"relative"}},r.default.createElement(u.default,{setLineColor:o,selectColor:this.props.primaryColor})),r.default.createElement("div",{className:"tool-slider"},r.default.createElement(c.default,{value:this.props.penWidth,onAfterChange:n}),r.default.createElement("span",null,this.props.penWidth))))}}]),t}(r.default.Component);t.default=m},BMr9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=v(a("Yz+Y")),o=v(a("iCc5")),n=v(a("V7oC")),l=v(a("FYw3")),s=v(a("mRg0")),r=v(a("q1tI")),d=v(a("HPAy")),u=v(a("aJKe")),c=v(a("JL1q")),f=v(a("wtPx")),h=v(a("rTPC")),m=v(a("CDBZ")),p=v(a("290z")),g=v(a("eQYT"));function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={updateState:!1,roomLogoUrl:"",logoShow:!1},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){u.default.CoreController.addEventListener("initAppPermissions",this.handlerInitAppPermissions.bind(this),this.listernerBackupid),this.getClassRoomLogoUrl()}},{key:"componentWillUnmount",value:function(){u.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerInitAppPermissions",value:function(){this.setState({updateState:!this.state.updateState})}},{key:"getClassRoomLogoUrl",value:function(){var e=void 0;g.default.joinRoomInfo&&void 0!==g.default.joinRoomInfo.classRoomLogoUrl&&(e=window.WBGlobal.nowUseDocAddress+g.default.joinRoomInfo.classRoomLogoUrl);var t=sessionStorage.getItem("logoUrl");(e=t||e)&&this.setState({roomLogoUrl:e,logoShow:!0})}},{key:"logoError",value:function(){this.setState({logoShow:!1})}},{key:"logoLoad",value:function(){this.setState({logoShow:!0})}},{key:"render",value:function(){var e=this.state,t=e.roomLogoUrl,a=e.logoShow;return r.default.createElement("article",{className:"h-left-wrap",id:"header_left"},a?r.default.createElement(p.default,{logoLoad:this.logoLoad.bind(this),logoError:this.logoError.bind(this),roomLogoUrl:t}):null,d.default.isClient&&d.default.clientversion<2018072e3||d.default.playback?void 0:r.default.createElement(f.default,null),r.default.createElement("div",{className:"roomID"},d.default.language.languageData.login.language.detection.systemInfo.roomNumber,g.default.joinRoomInfo.serial),d.default.playback?void 0:r.default.createElement(h.default,null),d.default.clientversion&&d.default.clientversion>=2018010200&&d.default.isClient&&c.default.handler.getAppPermissions("localRecord")?r.default.createElement(m.default,null):void 0)}}]),t}(r.default.Component);t.default=y},By8T:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=p(a("QbLZ")),o=p(a("Yz+Y")),n=p(a("iCc5")),l=p(a("V7oC")),s=p(a("FYw3")),r=p(a("mRg0")),d=p(a("q1tI")),u=(p(a("i8i4")),p(a("aJKe"))),c=p(a("eQYT")),f=p(a("HPAy")),h=p(a("SkDs")),m=p(a("mrNk"));function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={updateState:!1,isVideoFullScreen:!1,isTeacherVideoFullScreen:!1,isStudentVideoFullScreen:!1,isStudentShowVideo:!1,isWhiteboardFullScreen:!1},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){u.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener("receive-msglist-FullScreen",this.handlerReceiveMsglistFullScreen.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener("fullScreen",this.handlerFullScreen.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener("playbackProgressChange",this.playbackProgressChange.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){u.default.Window.removeBackupListerner(this.listernerBackupid),u.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){(this.updateChairmanDefaultVideo||this.updateVideoFromPullUrl||this.updateVVideoContainerl)&&(this.updateChairmanDefaultVideo=!this.updateChairmanDefaultVideo&&this.updateChairmanDefaultVideo,this.updateVideoFromPullUrl=!this.updateVideoFromPullUrl&&this.updateVideoFromPullUrl,this.updateVVideoContainerl=!this.updateVVideoContainerl&&this.updateVVideoContainerl)}},{key:"handlerFullScreen",value:function(e){var t=e.message,a=t.isFullScreen,i=t.fullScreenType;if("courseware_file"===i||"stream_media"===i&&c.default.hasRoomtype.oneToOne)a?c.default.hasRole.roleStudent?(this.setState({isVideoFullScreen:!0,isTeacherVideoFullScreen:!0,isStudentVideoFullScreen:!1,isWhiteboardFullScreen:!0}),m.default.getTkRoom().getMySelf().role===c.default.role.roleStudent&&this.setState({isStudentShowVideo:!1})):this.setState({isVideoFullScreen:!0,isTeacherVideoFullScreen:!1,isStudentVideoFullScreen:!0,isWhiteboardFullScreen:!0}):this.setState({isVideoFullScreen:!1,isTeacherVideoFullScreen:!1,isStudentVideoFullScreen:!1,isWhiteboardFullScreen:!1});else if("stream_video"===i&&c.default.hasRoomtype.oneToOne){var o=e.message,n=o.needPictureInPictureSmall;o.isTeacher;n?(c.default.hasRole.roleStudent,e.message.isTeacher?this.setState({isTeacherVideoFullScreen:!0,isStudentVideoFullScreen:!1,isWhiteboardFullScreen:!1}):this.setState({isTeacherVideoFullScreen:!1,isStudentVideoFullScreen:!0,isWhiteboardFullScreen:!1})):this.setState({isTeacherVideoFullScreen:!1,isStudentVideoFullScreen:!1,isWhiteboardFullScreen:!1})}}},{key:"handlerReceiveMsglistFullScreen",value:function(e){var t=e.message.FullScreenArray[0],a=t.data.fullScreenType;"courseware_file"!==a&&"stream_media"!==a||!c.default.hasRoomtype.oneToOne?"stream_video"===a&&c.default.hasRoomtype.oneToOne&&(c.default.hasRole.roleStudent?t.data.isTeacher&&this.setState({isTeacherVideoFullScreen:!0,isStudentVideoFullScreen:!1}):t.data.isTeacher?this.setState({isTeacherVideoFullScreen:!0,isStudentVideoFullScreen:!1,isWhiteboardFullScreen:!1}):this.setState({isTeacherVideoFullScreen:!1,isStudentVideoFullScreen:!0,isWhiteboardFullScreen:!1})):(this.setState({isVideoFullScreen:!0}),c.default.hasRole.roleStudent?this.setState({isVideoFullScreen:!0,isTeacherVideoFullScreen:!0,isStudentVideoFullScreen:!1,isStudentShowVideo:!0}):this.setState({isVideoFullScreen:!0,isTeacherVideoFullScreen:!1,isStudentVideoFullScreen:!0}))}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"FullScreen":var a=t.data.fullScreenType;"courseware_file"!==a&&"stream_media"!==a||!c.default.hasRoomtype.oneToOne?"stream_video"===a&&c.default.hasRoomtype.oneToOne&&(c.default.hasRole.roleStudent?t.data.isTeacher&&this.setState({isTeacherVideoFullScreen:!0,isStudentVideoFullScreen:!1,isWhiteboardFullScreen:!1}):t.data.isTeacher?this.setState({isTeacherVideoFullScreen:!0,isStudentVideoFullScreen:!1,isWhiteboardFullScreen:!1}):this.setState({isTeacherVideoFullScreen:!1,isStudentVideoFullScreen:!0,isWhiteboardFullScreen:!1})):(this.setState({isVideoFullScreen:!0}),c.default.hasRole.roleStudent?this.setState({isVideoFullScreen:!0,isTeacherVideoFullScreen:!0,isStudentVideoFullScreen:!1,isStudentShowVideo:!0}):this.setState({isVideoFullScreen:!0,isTeacherVideoFullScreen:!1,isStudentVideoFullScreen:!0}))}}},{key:"playbackProgressChange",value:function(){this.handlerRoomDelmsg({message:{name:"FullScreen"}})}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"FullScreen":(this.state.isVideoFullScreen||this.state.isTeacherVideoFullScreen||this.state.isStudentVideoFullScreen)&&this.setState({isVideoFullScreen:!1,isTeacherVideoFullScreen:!1,isStudentVideoFullScreen:!1,isStudentShowVideo:!1})}}},{key:"_loadVideoComponent",value:function(){var e;return e=d.default.createElement(h.default,{ref:"rightVVideoContainerElement",id:"participants",isTeacher:this.props.isTeacher,isSmallVideo:this.props.isSmallVideo,isHasHideBtn:this.props.isHasHideBtn,switchName:this.props.switchName,switchHideShow:this.props.switchHideShow}),null==this.updateVVideoContainerl&&(this.updateVVideoContainerl=!0),{videoComponent:e}}},{key:"render",value:function(){var e=this._loadVideoComponent().videoComponent,t=this.props.styleJson;return t=(0,i.default)({},t),this.state.isVideoFullScreen&&(this.state.isTeacherVideoFullScreen&&(m.default.getTkRoom().getMySelf().role!==c.default.role.roleStudent?(t.zIndex=900,t.width=0,t.height=0):!this.state.isStudentShowVideo&&this.state.isWhiteboardFullScreen&&(t.zIndex=0)),this.state.isStudentVideoFullScreen&&(this.props.isTeacher||(t.zIndex=900,t.width=0,t.height=0))),!this.state.isTeacherVideoFullScreen||this.state.isStudentVideoFullScreen||this.state.isVideoFullScreen||(m.default.getTkRoom().getMySelf().role!==c.default.role.roleStudent?(t.zIndex=900,t.width=0,t.height=0,this.props.isTeacher||c.default.joinRoomInfo.pictureInPicture||(t.zIndex=0)):this.props.isTeacher&&(t.zIndex=900,t.width=0,t.height=0)),this.state.isTeacherVideoFullScreen||!this.state.isStudentVideoFullScreen||this.state.isVideoFullScreen||this.props.isTeacher||(t.zIndex=900,t.width=0,t.height=0),d.default.createElement("div",{id:"verticalVideoContainer",ref:"verticalVideoContainerRef",style:c.default.hasRoomtype.oneToOne?t:{width:"100%",height:"2.25rem"},className:f.default.isVideoInFullscreen?"videoInFullscreen":""},e)}}]),t}(d.default.Component);t.default=g},"BzI+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=C(a("gDS+")),o=C(a("EJiy")),n=C(a("QbLZ")),l=C(a("Yz+Y")),s=C(a("iCc5")),r=C(a("V7oC")),d=C(a("FYw3")),u=C(a("mRg0")),c=C(a("q1tI")),f=C(a("HPAy")),h=C(a("eQYT")),m=C(a("WXZs")),p=C(a("aJKe")),g=C(a("JL1q")),v=C(a("mrNk")),y=C(a("XbJA")),S=C(a("Fveh")),b=C(a("M3nf"));function C(e){return e&&e.__esModule?e:{default:e}}a("0Dtr");var k=function(e){function t(e,a){(0,s.default)(this,t);var i=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,a));return i.state={eraserShow:!1,penShow:!1,videoDrawBoardInfo:{containerWidthAndHeight:{width:0,height:0},watermarkImageScalc:16/9,isShow:!1,backgroundColor:"transparent",instanceId:i.props.videoDrawingBoardInstanceId||"videoDrawBoard",saveImage:!1,nickname:i.props.videoDrawingBoardInstanceId||"videoDrawBoard",deawPermission:!1,associatedMsgID:"VideoWhiteboard"},useToolInfo:{useToolKey:"tool_pencil",useToolColor:i._changeWhiteboardConfig(),blackboardToolsInfo:"mobile"!==TK.SDKTYPE?{pencil:5,text:30,eraser:30}:{pencil:5,text:45,eraser:150},selectBlackboardToolSizeId:"blackboard_size_small"},useColorsTool:!1,BlackboardSmartIsShow:!1,stream:void 0,eraserIsDisabled:!0},i.streamType=void 0,i.userid=void 0,i.watermarkImageScalc=void 0,i.listernerBackupid=(new Date).getTime()+"_"+Math.random(),i}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){p.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomDisconnected,this.handlerRoomDisconnected.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener(h.default.EVENTTYPE.DocumentEvent.onKeydown,this.onKeydown.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,this.handlerRoomPlaybackClearAll.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener("receive-msglist-VideoWhiteboard",this.receiveMsglistVideoWhiteboard.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener("receiveWhiteboardSDKAction",this.receiveWhiteboardSDKAction.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener("receivePauseMedia",this.receivePauseMedia.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){p.default.CoreController.removeBackupListerner(this.listernerBackupid),v.default.getTkWhiteBoardManager().destroyExtendWhiteboard(this.state.videoDrawBoardInfo.instanceId),v.default.getTkWhiteBoardManager().resetWhiteboardData(this.state.videoDrawBoardInfo.instanceId)}},{key:"componentDidUpdate",value:function(e,t){t.videoDrawBoardInfo.isShow!==this.state.videoDrawBoardInfo.isShow&&this.setState({BlackboardSmartIsShow:this.state.videoDrawBoardInfo.isShow})}},{key:"handlerRoomPlaybackClearAll",value:function(){var e=(0,n.default)({},this.state.videoDrawBoardInfo);e.isShow=!1,this.setState({videoDrawBoardInfo:e})}},{key:"handlerRoomDisconnected",value:function(){var e=(0,n.default)({},this.state.videoDrawBoardInfo);e.isShow=!1,this.setState({videoDrawBoardInfo:e}),v.default.getTkWhiteBoardManager().destroyExtendWhiteboard(e.instanceId),v.default.getTkWhiteBoardManager().resetWhiteboardData(e.instanceId)}},{key:"receiveWhiteboardSDKAction",value:function(e){var t=e.message,a=t.action,i=t.cmd,o=void 0;if("mediaPlayerNotice"===a&&(this.watermarkImageScalc=i.attributes.width/i.attributes.height,this.streamType=i.streamType,this.userid=i.userid,"end"===i.type)){o=!0,y.default.sendSignallingFromVideoWhiteboard(o);var l=(0,n.default)({},this.state.videoDrawBoardInfo);l.isShow=!1,this.setState({videoDrawBoardInfo:l})}}},{key:"onKeydown",value:function(e){32===e.message.keyCode&&this.playMediaHandle()}},{key:"receiveVideoWhiteboardSDKAction",value:function(e){var t=e.action,a=e.cmd;if("viewStateUpdate"===t){var i=a.viewState.tool.tool_eraser.disabled;this.setState({eraserIsDisabled:i})}}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"VideoWhiteboard":"mobile"===TK.SDKTYPE&&(document.getElementById("all_root").style.background=this.state.videoDrawBoardInfo.backgroundColor,document.getElementById("tk_app").getElementsByClassName("all-container")[0].style.background=this.state.videoDrawBoardInfo.backgroundColor);var a=(0,n.default)({},this.state.videoDrawBoardInfo);a.isShow=!0,a.deawPermission=g.default.handler.getAppPermissions("isShowVideoDrawTool"),t.data&&"object"===(0,o.default)(t.data)&&t.data.videoRatio&&(a.watermarkImageScalc=t.data.videoRatio),this.setState({videoDrawBoardInfo:a}),this.setState({penShow:!1,eraserShow:!1})}}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"VideoWhiteboard":case"ClassBegin":var t=(0,n.default)({},this.state.videoDrawBoardInfo),a=(0,n.default)({},this.state.useToolInfo);t.isShow=!1,t.deawPermission=!1,a.useToolKey="tool_pencil",a.useToolColor=this._changeWhiteboardConfig(),a.blackboardToolsInfo="mobile"!==TK.SDKTYPE?{pencil:5,text:30,eraser:30}:{pencil:5,text:45,eraser:150},a.selectBlackboardToolSizeId="blackboard_size_small",this.setState({eraserIsDisabled:!0,videoDrawBoardInfo:t,useToolInfo:a}),f.default.isClient&&"file"===this.streamType?v.default.getNativeInterface().pauseShareMediaFile(!1):"media"===this.streamType&&v.default.getTkRoom().pauseShareMedia(!1),v.default.getTkWhiteBoardManager().destroyExtendWhiteboard(t.instanceId)}}},{key:"receiveMsglistVideoWhiteboard",value:function(e){var t=e.message.VideoWhiteboardArray[0].data,a=(0,n.default)({},this.state.videoDrawBoardInfo);a.isShow=!0,a.deawPermission=g.default.handler.getAppPermissions("isShowVideoDrawTool"),t&&"object"===(void 0===t?"undefined":(0,o.default)(t))&&t.videoRatio&&(a.watermarkImageScalc=t.videoRatio),this.setState({videoDrawBoardInfo:a})}},{key:"_colorFilter",value:function(e){return e.replace(/#/g,"")}},{key:"changeStrokeColorClick",value:function(e){this.state.useToolInfo.useToolColor=e,this.setState({useToolInfo:this.state.useToolInfo,useColorsTool:!1})}},{key:"_changeWhiteboardConfig",value:function(){if(h.default.joinRoomInfo.customWhiteboardBackground){var e=h.default.joinRoomInfo.whiteboardcolor,t=void 0;return(h.default.hasRole.roleChairman||h.default.hasRole.roleTeachingAssistant)&&(t="#"+("ffffff"===f.default.customWhiteboardColorArry[e]?"FF0000":"EDEDED")),t}return"#FF0000"}},{key:"_loadToolColorsElementArray",value:function(){var e=this,t=[];return["#5AC9FA","#FFCC00","#FF0000","#4740D2","#007BFF","#09C62B","#000000","#EDEDED"].forEach(function(a,i){var o=c.default.createElement("li",{className:"color-option color_"+e._colorFilter(a)+" "+(e.state.useToolInfo.useToolColor===a?" active":""),key:i,onClick:e.changeStrokeColorClick.bind(e,a),id:"video_drawBoard_color_"+e._colorFilter(a)});t.push(o)}),{toolColorsArray:t}}},{key:"handleToolClick",value:function(e){"tool_pencil"!==e&&"tool_text"!==e&&"tool_eraser"!==e||(this.state.useToolInfo.useToolKey=e,"tool_pencil"===e?this.setState({eraserShow:!1,penShow:!this.state.penShow}):"tool_eraser"===e&&this.setState({eraserShow:!this.state.eraserShow,penShow:!1}),this.setState({useToolInfo:this.state.useToolInfo,useColorsTool:!1}))}},{key:"_changeStrokeSizeClick",value:function(e,t){this.state.useToolInfo.selectBlackboardToolSizeId=e,this.state.useToolInfo.blackboardToolsInfo=t,this.setState({useToolInfo:this.state.useToolInfo})}},{key:"receivePauseMedia",value:function(){var e={videoRatio:this.watermarkImageScalc};y.default.sendSignallingFromVideoWhiteboard(!1,e)}},{key:"playMediaHandle",value:function(){this.setState({useColorsTool:!1,penShow:!1,eraserShow:!1}),y.default.sendSignallingFromVideoWhiteboard(!0)}},{key:"handleToolColorsClick",value:function(){this.setState({useColorsTool:!this.state.useColorsTool})}},{key:"closeMediaVideoOnClick",value:function(){f.default.isClient&&"file"===this.streamType?v.default.getTkRoom().stopShareLocalMedia():"media"===this.streamType&&v.default.getTkRoom().stopShareMedia()}},{key:"onAfterChangeEraserWidth",value:function(e){var t=(0,n.default)({},this.state.useToolInfo);0===e&&(e=1),t.blackboardToolsInfo.eraser=e,this.setState({useToolInfo:t})}},{key:"onAfterChangePencilWidth",value:function(e){var t=(0,n.default)({},this.state.useToolInfo);0===e&&(e=1),t.blackboardToolsInfo.pencil=e,this.setState({useToolInfo:t})}},{key:"setLineColor",value:function(e){if(e){var t=JSON.parse((0,i.default)(this.state.useToolInfo));t.useToolColor=e,this.setState({useToolInfo:t})}}},{key:"_mouseLeave",value:function(){this.setState({eraserShow:!1,penShow:!1})}},{key:"render",value:function(){var e=this.state,t=e.videoDrawBoardInfo,a=e.useToolInfo,i=(e.useColorsTool,e.eraserIsDisabled),o=a.useToolKey;this._loadToolColorsElementArray().toolColorsArray;return c.default.createElement("div",{className:"video-drawing-board-box",style:{display:t.isShow?"block":"none"}},c.default.createElement("div",{className:"video-drawing-board"},this.state.BlackboardSmartIsShow?c.default.createElement(m.default,{isBaseboard:!1,containerWidthAndHeight:t.containerWidthAndHeight,instanceId:t.instanceId,nickname:t.nickname,show:this.state.BlackboardSmartIsShow,backgroundColor:t.backgroundColor,useToolKey:o,fontSize:a.blackboardToolsInfo.text,useToolColor:a.useToolColor,pencilWidth:a.blackboardToolsInfo.pencil,eraserWidth:a.blackboardToolsInfo.eraser,showShapeAuthor:!1,deawPermission:t.deawPermission,watermarkImageScalc:t.watermarkImageScalc,associatedMsgID:t.associatedMsgID,receiveVideoWhiteboardSDKAction:this.receiveVideoWhiteboardSDKAction.bind(this)}):void 0),h.default.hasRole.roleStudent||h.default.hasRole.rolePatrol||h.default.hasRole.roleRecord||h.default.hasRole.rolePlayback||!h.default.joinRoomInfo.videoWhiteboardDraw?void 0:c.default.createElement("ul",{id:"video-drawing-tool",className:"blackboard-tool clear-float"},c.default.createElement("li",{className:"blackboard-tool-option"+("tool_pencil"===o?" active":"")},c.default.createElement("button",{id:"video_blackboard_tool_pencil",className:"tool-btn pencil-icon icon-pen "+("tool_pencil"===o?" active":""),title:f.default.language.languageData.header.tool.blackBoard.boardTool.pen,onClick:this.handleToolClick.bind(this,"tool_pencil")}),c.default.createElement("div",{className:"tool-pen-list-extend",style:{display:this.state.penShow?"block":"none"},onMouseLeave:this._mouseLeave.bind(this)},c.default.createElement("div",{style:{position:"relative"}},c.default.createElement(b.default,{setLineColor:this.setLineColor.bind(this),selectColor:this.state.useToolInfo.useToolColor})),c.default.createElement("div",{className:"tool-slider"},c.default.createElement(S.default,{onAfterChange:this.onAfterChangePencilWidth.bind(this),value:this.state.useToolInfo.blackboardToolsInfo.pencil}),c.default.createElement("span",null,this.state.useToolInfo.blackboardToolsInfo.pencil)))),c.default.createElement("li",{className:"blackboard-tool-option"+("tool_text"===o?" active":""),style:{display:"none"}}," ",c.default.createElement("button",{id:"video_blackboard_tool_text",className:"tool-btn text-icon"+("tool_text"===o?" active":""),title:f.default.language.languageData.header.tool.blackBoard.boardTool.text,onClick:this.handleToolClick.bind(this,"tool_text")})),c.default.createElement("li",{className:"blackboard-tool-option"+("tool_eraser"===o?" active":"")},c.default.createElement("button",{id:"video_blackboard_tool_eraser",className:"tool-btn eraser-icon icon-xiangpi "+("tool_eraser"===o?" active":"")+(i?" disable":""),disabled:i,title:f.default.language.languageData.header.tool.blackBoard.boardTool.eraser,onClick:this.handleToolClick.bind(this,"tool_eraser")}),c.default.createElement("div",{className:"tool-eraser-extend",style:{display:this.state.eraserShow?"block":"none"},onMouseLeave:this._mouseLeave.bind(this)},c.default.createElement("div",{className:"tool-slider"},c.default.createElement(S.default,{onAfterChange:this.onAfterChangeEraserWidth.bind(this),value:this.state.useToolInfo.blackboardToolsInfo.eraser}),c.default.createElement("span",null,this.state.useToolInfo.blackboardToolsInfo.eraser)))),c.default.createElement("li",{className:"blackboard-tool-option"},c.default.createElement("button",{id:"video_blackboard_tool_exit",className:"tool-btn exit-icon icon-tuichu",title:f.default.language.languageData.videLabel.exit,onClick:this.playMediaHandle.bind(this)}))),this.userid===v.default.getTkRoom().getMySelf().id&&"file"===this.streamType||"media"===this.streamType&&(h.default.hasRole.roleChairman||h.default.hasRole.roleTeachingAssistant)?c.default.createElement("button",{className:"tk-mp4-player-close-btn",onClick:this.closeMediaVideoOnClick.bind(this)}):void 0)}}]),t}(c.default.Component);t.default=k},"C/fv":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(a("q1tI")),o=n(a("17x9"));function n(e){return e&&e.__esModule?e:{default:e}}a("HsAS");var l=function(e){var t=e.status,a=e.change;return i.default.createElement("span",{className:"base-checkbox "+(t?"on":""),onClick:function(){a(!t)}})};l.propTypes={status:o.default.bool,change:o.default.func},t.default=l},CDBZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=m(a("Yz+Y")),o=m(a("iCc5")),n=m(a("V7oC")),l=m(a("FYw3")),s=m(a("mRg0")),r=m(a("q1tI")),d=m(a("HPAy")),u=m(a("JL1q")),c=m(a("aJKe")),f=m(a("mrNk")),h=m(a("uuqz"));function m(e){return e&&e.__esModule?e:{default:e}}a("wsTX");var p=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={show:u.default.handler.getAppPermissions("localRecord"),recordState:"notStart",selectedRecord:!L.Utils.localStorage.getItem("notSelectedRecord")},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){c.default.Window.addEventListener(TkConstant.EVENTTYPE.WindowEvent.onBeforeUnload,this.handlerOnBeforeUnload.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener(TkConstant.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener(TkConstant.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("receive-msglist-ClassBegin",this.handlerReceiveMsglistClassBegin.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("initAppPermissions",this.handlerInitAppPermissions.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("receive-msglist-not-ClassBegin",this.handlerReceiveMsglistNotClassBegin.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){c.default.Window.removeBackupListerner(this.listernerBackupid),c.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerInitAppPermissions",value:function(){this.setState({show:u.default.handler.getAppPermissions("localRecord")})}},{key:"handlerOnBeforeUnload",value:function(){"notStart"!==this.state.recordState&&this._stopLocalRecord(),this._setNotSelectedRecordToLocalStorage()}},{key:"handlerReceiveMsglistNotClassBegin",value:function(){this._setNotSelectedRecordToLocalStorage(),this.setState({selectedRecord:!L.Utils.localStorage.getItem("notSelectedRecord")})}},{key:"handlerRoomPubmsg",value:function(e){"ClassBegin"===e.message.name&&this.state.selectedRecord&&"notStart"===this.state.recordState&&this._startLocalRecord()}},{key:"handlerRoomDelmsg",value:function(e){"ClassBegin"===e.message.name&&"notStart"!==this.state.recordState&&(this._stopLocalRecord(),this._setNotSelectedRecordToLocalStorage())}},{key:"handlerReceiveMsglistClassBegin",value:function(e){"room-msglist"===e.source&&e.message&&this.state.selectedRecord&&"notStart"===this.state.recordState&&this._startLocalRecord()}},{key:"selectRecordOnChange",value:function(e){return this.setState({selectedRecord:!this.state.selectedRecord}),!1}},{key:"startOrStopRecordOnClick",value:function(e){return"notStart"===this.state.recordState?this._startLocalRecord():this._stopLocalRecord(),e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"playOrPauseRecordOnClick",value:function(e){return"notStart"!==this.state.recordState&&("recordPaused"===this.state.recordState?this._pauseOrPlayLocalRecord(!1):this._pauseOrPlayLocalRecord(!0)),e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"_startLocalRecord",value:function(){var e=this;if(u.default.handler.getAppPermissions("localRecord")&&!d.default.isMacClient&&f.default.getNativeInterface()){var t="TK_"+TkConstant.joinRoomInfo.serial+"_"+TkConstant.joinRoomInfo.localRecordInfo.localrecordtype+"_"+h.default.dateFormat(new Date,"yyyy-MM-dd_HH_mm_ss_S");"mp3"===TkConstant.joinRoomInfo.localRecordInfo.localrecordtype?f.default.getNativeInterface().startRecordAudio({forcepath:!1,filename:t},function(t){"Recording"===t.action&&(d.default.localRecording=!0,d.default.localRecordPath=t.filename,e.setState({recordState:"recording"}))}):f.default.getNativeInterface().startRecordScreen({forcepath:!1,filename:t},function(t){"Recording"===t.action&&(d.default.localRecording=!0,d.default.localRecordPath=t.filename,e.setState({recordState:"recording"}))})}}},{key:"_stopLocalRecord",value:function(){u.default.handler.getAppPermissions("localRecord")&&!d.default.isMacClient&&f.default.getNativeInterface()&&("mp3"===TkConstant.joinRoomInfo.localRecordInfo.localrecordtype?f.default.getNativeInterface().stopRecordAudio():f.default.getNativeInterface().stopRecordScreen(),d.default.localRecording=!1,this.setState({recordState:"notStart"}))}},{key:"_pauseOrPlayLocalRecord",value:function(e){var t=this;u.default.handler.getAppPermissions("localRecord")&&!d.default.isMacClient&&f.default.getNativeInterface()&&("mp3"===TkConstant.joinRoomInfo.localRecordInfo.localrecordtype?f.default.getNativeInterface().pauseRecordAudio(e,function(e){"Recording"===e.action?t.setState({recordState:"recording"}):"Paused"===e.action&&t.setState({recordState:"recordPaused"})}):f.default.getNativeInterface().pauseRecordScreen(e,function(e){"Recording"===e.action?t.setState({recordState:"recording"}):"Paused"===e.action&&t.setState({recordState:"recordPaused"})}))}},{key:"_setNotSelectedRecordToLocalStorage",value:function(){u.default.handler.getAppPermissions("localRecord")&&(!this.state.selectedRecord&&d.default.classBegin?L.Utils.localStorage.setItem("notSelectedRecord",!0):L.Utils.localStorage.setItem("notSelectedRecord",""))}},{key:"render",value:function(){return d.default.selectedRecord=this.state.selectedRecord,r.default.createElement("div",{className:"local-recording-container",style:{display:this.state.show?"":"none"}},r.default.createElement("button",{style:{display:d.default.classBegin?"none":void 0},className:"checkbox "+(this.state.selectedRecord?"icon-gouxuan":"icon-weigouxuan"),onClick:this.selectRecordOnChange.bind(this)}),r.default.createElement("button",{disabled:!d.default.classBegin,style:{display:"notStart"===this.state.recordState?"none":"block"},title:d.default.language.languageData.localRecord.title["recordPaused"===this.state.recordState?"playRecord":"pauseRecord"],onClick:this.playOrPauseRecordOnClick.bind(this),className:"play-pause-record "+("recording"===this.state.recordState?"icon-luzhi_pause":"icon-btn_luzhi_play")+" "+("recordPaused"===this.state.recordState?"icon-btn_luzhi_play":"")}),r.default.createElement("button",{disabled:!d.default.classBegin,title:d.default.language.languageData.localRecord.title["notStart"===this.state.recordState?"startRecord":"stopRecord"],onClick:this.startOrStopRecordOnClick.bind(this),className:"start-stop-record icon-luzhi_stop "+this.state.recordState}),r.default.createElement("span",{className:"text "+this.state.recordState},d.default.language.languageData.localRecord.recordState[this.state.recordState]))}}]),t}(r.default.Component);t.default=p},CTxj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=y(a("sk9p")),n=y(a("oF3Q")),l=y(a("Yz+Y")),s=y(a("iCc5")),r=y(a("V7oC")),d=y(a("FYw3")),u=y(a("mRg0")),c=y(a("q1tI")),f=y(a("HPAy")),h=y(a("eQYT")),m=y(a("XbJA")),p=y(a("mrNk")),g=y(a("1Ea7")),v=a("okNM");function y(e){return e&&e.__esModule?e:{default:e}}var S=(0,v.inject)("userListDataStore","userListStatusStore","globalStore")(i=(0,v.observer)(i=function(e){function t(){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,r.default)(t,[{key:"isBeyondMaxVideo",value:function(e){var t=this.props.globalStore;if(e.role===h.default.role.roleChairman)return!1;var a=(0,n.default)(p.default.getTkRoom().getUsers());return t.canDivided&&!h.default.hasRoomtype.oneToOne&&t.isGroup?e.role!==h.default.role.roleClassTeacher&&(e.group&&"defaultGroup"===e.group[0]?a.filter(function(t){var a=(0,o.default)(t,2),i=(a[0],a[1]),n=i.publishstate,l=i.role,s=i.group;return l!==h.default.role.roleChairman&&l!==h.default.role.roleClassTeacher&&s&&e.group&&s[0]===e.group[0]&&n!==TK.PUBLISH_STATE_NONE}).length>=h.default.joinRoomInfo.maxvideo-2:a.filter(function(t){var a=(0,o.default)(t,2),i=(a[0],a[1]),n=i.publishstate,l=i.role,s=i.group;return l!==h.default.role.roleClassTeacher&&s&&e.group&&s[0]===e.group[0]&&n!==TK.PUBLISH_STATE_NONE}).length>=h.default.joinRoomInfo.maxvideo-1):a.filter(function(e){var t=(0,o.default)(e,2),a=(t[0],t[1]),i=a.publishstate;return a.role!==h.default.role.roleChairman&&i!==TK.PUBLISH_STATE_NONE}).length>=h.default.joinRoomInfo.maxvideo-1}},{key:"upDataMaxVideoUI",value:function(e){var t=this.props.userListStatusStore;t.changeOversizeAllUserId(e,"add");var a=setTimeout(function(){t.changeOversizeAllUserId(e,"del"),clearTimeout(a)},3e3)}},{key:"handlerUserListItemOnClick",value:function(e){var t=this.props.userListStatusStore;e.isInBackGround&&!0===e.isInBackGround&&e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_NONE?g.default.showPrompt(e.nickname+f.default.language.languageData.alertWin.call.prompt.remoteStreamFailure.mobileHome.two):(f.default.specificUsers[e.id]=!0,this.isBeyondMaxVideo(e)&&e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_NONE&&0===e.publishstate?(t.changeIsMaxVideo(!0),this.upDataMaxVideoUI(e.id)):(f.default.classBegin||p.default.getTkRoom().getMySelf().id!==e.id?f.default.classBegin&&m.default.userPlatformUpOrDown(e):m.default.userPlatformUpOrDown(e),t.changeIsMaxVideo(!1)))}},{key:"userVideoOpenOrClose",value:function(e){var t=this.props,a=t.userListStatusStore;t.userListDataStore,t.type,t.index;e?this.isBeyondMaxVideo(e)&&e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_NONE?(a.changeIsMaxVideo(!0),this.upDataMaxVideoUI(e.id)):(m.default.userVideoOpenOrClose(e),a.changeIsMaxVideo(!1)):L.Logger.error("user is not exist , userid is "+e.id+"!")}},{key:"userAudioOpenOrClose",value:function(e){var t=this.props.userListStatusStore;e?this.isBeyondMaxVideo(e)&&e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_NONE?(t.changeIsMaxVideo(!0),this.upDataMaxVideoUI(e.id)):(m.default.userAudioOpenOrClose(e),t.changeIsMaxVideo(!1)):L.Logger.error("user is not exist , userid is "+e.id+"!")}},{key:"changeUserCandraw",value:function(e,t){var a=this.props.userListStatusStore;e?this.isBeyondMaxVideo(e)&&e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_NONE?(a.changeIsMaxVideo(!0),this.upDataMaxVideoUI(e.id)):(m.default.changeUserCandraw(e),a.changeIsMaxVideo(!1)):L.Logger.error("user is not exist , userid is "+e.id+"!")}},{key:"handlerAloneUserBanSpeak",value:function(e,t){if(!h.default.hasRole.rolePatrol)if(t.disablechat=!t.disablechat,f.default.HeightConcurrence)p.default.getTkRoom().getRoomUser(e,function(t){if(!t)return L.Logger.error("user is not exist , userid is "+e+"!");if(t.role===h.default.role.roleTeachingAssistant||t.role===h.default.role.roleChairman)return!1;var a={disablechat:!t.disablechat};m.default.setParticipantPropertyToAll(e,a)},function(e){L.Logger.error("error:"+e)});else{var a=p.default.getTkRoom().getUser(e);if(!a)return L.Logger.error("user is not exist , userid is "+e+"!");if(p.default.getTkRoom().getUser(e).role===h.default.role.roleTeachingAssistant||p.default.getTkRoom().getUser(e).role===h.default.role.roleChairman)return!1;var i={disablechat:!a.disablechat};m.default.setParticipantPropertyToAll(e,i)}}},{key:"handlerRemoveClick",value:function(e){h.default.hasRole.rolePatrol||g.default.showConfirm(f.default.language.languageData.alertWin.messageWin.winMessageText.removeStudent.text,function(t){if(t){p.default.getTkRoom().evictUser(e,{reason:1})}})}},{key:"render",value:function(){var e=this.props,t=e.user,a=(e.globalStore,!1),i=!1,o=!1,n=!1;if(f.default.classBegin){var l=!t.hasvideo&&!t.hasaudio&&t.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_NONE,s=t.disableaudio&&t.disablevideo&&t.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_NONE,r=(t.role===h.default.role.roleTeachingAssistant||t.role===h.default.role.rolePatrol)&&!h.default.joinRoomInfo.assistantOpenMyseftAV;a=l||s||r,i=!(t.role===h.default.role.roleTeachingAssistant?h.default.joinRoomInfo.assistantOpenMyseftAV&&t.hasvideo:t.hasvideo)||h.default.joinRoomInfo.createOnlyAudioRoom&&f.default.isOnlyAudioRoom,o=!(t.role===h.default.role.roleTeachingAssistant?h.default.joinRoomInfo.assistantOpenMyseftAV&&t.hasaudio:t.hasaudio),n=!(t.role===h.default.role.roleStudent||t.role===h.default.role.roleClassTeacher)}else h.default.hasRole.roleTeachingAssistant&&t.id===p.default.getTkRoom().getMySelf().id&&h.default.joinRoomInfo.isBeforeClassReleaseVideo&&h.default.joinRoomInfo.assistantOpenMyseftAV?(a=!1,i=!1,o=!1,n=!0):(a=!0,i=!0,o=!0,n=!0);var d=t.role===h.default.role.roleTeachingAssistant||t.role===h.default.role.roleChairman,u=t.role===h.default.role.roleTeachingAssistant||t.role===h.default.role.roleChairman,m=t.role===h.default.role.roleChairman?"roleChairman":t.role===h.default.role.roleTeachingAssistant?"roleTeachingAssistant":t.role===h.default.role.roleStudent?"roleStudent":"",g=h.default.joinRoomInfo.hideRemoveStudentBtn;return c.default.createElement("div",{className:"tk-icon-after-container "},c.default.createElement("span",{className:"tk-icon-after hand-icon "+(t.raisehand?"icon-user_handup":"")+" ",title:t.raisehand?f.default.language.languageData.header.system.Raise.yesText:f.default.language.languageData.header.system.Raise.noText}),c.default.createElement("span",{className:"tk-icon-after "+m+" "+(t.publishstate!==h.default.PUBLISHSTATE.PUBLISH_STATE_NONE?"icon-user_shangjiangtai":"icon-user_xiajiangtai")+" "+(a?"disabled":"")+" ",onClick:this.handlerUserListItemOnClick.bind(this,t),title:t.publishstate!==h.default.PUBLISHSTATE.PUBLISH_STATE_NONE?f.default.language.languageData.toolContainer.toolIcon.userList.button.update.up.title:f.default.language.languageData.toolContainer.toolIcon.userList.button.update.down.title}),c.default.createElement("span",{className:"tk-icon-after "+(i?"disabled":"")+" "+(t.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY||t.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_BOTH?"icon-user_camera":"icon-user_close_camera"),onClick:this.userVideoOpenOrClose.bind(this,t),title:t.disablevideo?f.default.language.languageData.toolContainer.toolIcon.userList.button.video.disabled.title:t.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY||t.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_BOTH?f.default.language.languageData.toolContainer.toolIcon.userList.button.video.on.title:f.default.language.languageData.toolContainer.toolIcon.userList.button.video.off.title}),c.default.createElement("span",{className:"tk-icon-after "+(o?"disabled":"")+" "+(t.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY||t.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_BOTH?"icon-user_maikefeng":"icon-user_close_maikefeng"),onClick:this.userAudioOpenOrClose.bind(this,t),title:t.disableaudio?f.default.language.languageData.toolContainer.toolIcon.userList.button.audio.disabled.title:t.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY||t.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_BOTH?f.default.language.languageData.toolContainer.toolIcon.userList.button.audio.on.title:f.default.language.languageData.toolContainer.toolIcon.userList.button.audio.off.title}),c.default.createElement("span",{className:"tk-icon-after "+(n?"disabled":"")+" "+(t.candraw?"icon-user_shouquan":"icon-user_close_shouquan")+" ",onClick:this.changeUserCandraw.bind(this,t),title:t.candraw?f.default.language.languageData.toolContainer.toolIcon.userList.button.Scrawl.on.title:f.default.language.languageData.toolContainer.toolIcon.userList.button.Scrawl.off.title}),c.default.createElement("span",{className:"tk-icon-after "+(d?"disabled":"")+" "+(t.disablechat?"icon-user_close_jinyan":"icon-user_jinyan")+" ",onClick:this.handlerAloneUserBanSpeak.bind(this,t.id,t),title:t.disablechat?f.default.language.languageData.toolContainer.toolIcon.userList.button.mute.on.title:f.default.language.languageData.toolContainer.toolIcon.userList.button.mute.off.title}),c.default.createElement("span",{className:"tk-icon-after icon-user_remove "+(u?"disabled":""),onClick:this.handlerRemoveClick.bind(this,t.id),title:f.default.language.languageData.toolContainer.toolIcon.userList.button.remove.title,style:{display:g?"none":""}}))}}]),t}(c.default.Component))||i)||i;t.default=S},CYlH:function(e,t,a){},Cbuf:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=p(a("GQeE")),o=p(a("FyfS")),n=p(a("Yz+Y")),l=p(a("iCc5")),s=p(a("V7oC")),r=p(a("FYw3")),d=p(a("mRg0")),u=p(a("av60")),c=p(a("eQYT")),f=p(a("HPAy")),h=(p(a("mrNk")),p(a("yGYm"))),m=p(a("LvrH"));p(a("XbJA"));function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){(0,l.default)(this,t);var a=(0,r.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));a.store=e;var i=c.default.EVENTTYPE.RoomEvent;return a.on(i.roomConnected,a.handlerRoomConnected),a.on(i.roomParticipantJoin,a.handlerRoomParticipantJoin),a.on(i.roomParticipantLeave,a.handlerRoomParticipantLeave),a.on(i.roomUserpropertyChanged,a.handlerRoomUserpropertyChanged),a.on(i.roomDisconnected,a.handlerRoomDisconnected),a.on(i.roomPlaybackClearAllFromPlaybackController,a.handlerRoomPlaybackClearAll),a.on(i.roomUservideostateChanged,a._controlRemoteStreamChange),a.on(i.roomUseraudiostateChanged,a._controlRemoteStreamChange),a.on(i.roomPubmsg,a.handlerRoomPubmsg),a.on(i.roomModeChanged,a.handlerRoomMoreChanged),a.on("receive-msglist-ClassBegin",a.handlerReceiveMsglistClassBegin),a.on("receive-msglist-isGroup",a.handlerReceiveMsglistIsGroup),a.on("initAppPermissions",a.handlerInitAppPermissions),a.on("CloseUserListPanel",a.closeUserListPanel),a.on("userListClose",a.closeUserListPanel),a.on("CloseALLPanel",a.closeUserListPanel),a.on("recoverPanelBeforeStarting",a.closeUserListPanel),a.on("triggerUserListPanel",a.triggerUserListPanel),a.on("beyondTmplEvent",a.beyondTmplHandler),a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"handlerRoomConnected",value:function(){f.default.HeightConcurrence||this.store.handlerSmallRoomUsers()}},{key:"handlerRoomParticipantJoin",value:function(e){f.default.HeightConcurrence||this.store.handlerSmallRoomUsers()}},{key:"handlerRoomParticipantLeave",value:function(e){f.default.HeightConcurrence||this.store.handlerSmallRoomUsers()}},{key:"handlerRoomUserpropertyChanged",value:function(e){if(f.default.HeightConcurrence);else{var t=e.message,a=!0,n=!1,l=void 0;try{for(var s,r=(0,o.default)((0,i.default)(t));!(a=(s=r.next()).done);a=!0){var d=s.value;"giftnumber"===d&&"disablechat"!==d||this.updateAllUserToList()}}catch(e){n=!0,l=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw l}}}}},{key:"handlerRoomDisconnected",value:function(e){this.store.setUserListItemData(new Array)}},{key:"handlerRoomPlaybackClearAll",value:function(){this.store.setUserListItemData(new Array)}},{key:"_controlRemoteStreamChange",value:function(e){var t=e.message;f.default.specificUsers[t.userId]&&delete f.default.specificUsers[t.userId]}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;({ClassBegin:function(){return t.updateAllUserToList()},StreamFailure:function(){var e=a.data.studentId;f.default.specificUsers[e]&&delete f.default.specificUsers[e]},isGroup:function(){h.default.canDivided&&!c.default.hasRoomtype.oneToOne&&(c.default.hasRole.roleTeachingAssistant||c.default.hasRole.roleClassTeacher)&&(h.default.changeGroup(a.data.isGroup),t.updateAllUserToList())}}[a.name]||function(){})()}},{key:"handlerRoomMoreChanged",value:function(e){var t=this;"normalRoom"!==e.message.roomMode&&this.store.isUserListShow&&(this.getUserTimer=setInterval(function(){t.store.getBigRoomUsers()},2e3))}},{key:"handlerReceiveMsglistClassBegin",value:function(e){this.updateAllUserToList()}},{key:"handlerReceiveMsglistIsGroup",value:function(e){this.updateAllUserToList()}},{key:"handlerInitAppPermissions",value:function(){this.updateAllUserToList()}},{key:"closeUserListPanel",value:function(e){this.getUserTimer&&clearInterval(this.getUserTimer),this.store.updateIsUserListShow(!1),this.emit("triggerUserListPanelRecover"),"CloseALLPanel"===e.type&&this.emit("userListClose")}},{key:"triggerUserListPanel",value:function(){var e=this;if(h.default.canDivided&&!c.default.hasRoomtype.oneToOne&&(c.default.hasRole.roleChairman||c.default.hasRole.roleTeachingAssistant||c.default.hasRole.rolePatrol)){var t="";if(!this.store.userListGroupData[""])for(var a in this.store.userListGroupData){t=a;break}m.default.changeAllShowGroup(t,!0)}this.store.updateIsUserListShow(!0),f.default.HeightConcurrence&&(this.store.getBigRoomUsers(),this.getUserTimer&&clearInterval(this.getUserTimer),this.getUserTimer=setInterval(function(){e.store.getBigRoomUsers()},2e3))}},{key:"beyondTmplHandler",value:function(e){e.message&&"userList"===e.message.key&&this.store.updateIsUserListShow(!this.store.isUserListShow)}},{key:"updateAllUserToList",value:function(){f.default.HeightConcurrence?this.store.getBigRoomUsers():this.store.handlerSmallRoomUsers()}}]),t}(u.default);t.default=g},DHeB:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(0,o(a("CSPP")).default)(["\n    ","\n    background-size: 80% 80%;\n"],["\n    ","\n    background-size: 80% 80%;\n"]);function o(e){return e&&e.__esModule?e:{default:e}}var n=o(a("vOnD")).default.li.attrs({className:"customTrophysItem",title:function(e){return e.trophyname}})(i,function(e){var t=e.trophyIcon;return t?"background: url("+window.WBGlobal.nowUseDocAddress+t+") no-repeat center center;":""});t.default=n},DX4W:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=I(a("QbLZ")),o=I(a("EJiy")),n=I(a("oF3Q")),l=I(a("sk9p")),s=I(a("GQeE")),r=I(a("/f1G")),d=I(a("FyfS")),u=I(a("HaWR")),c=I(a("Yz+Y")),f=I(a("iCc5")),h=I(a("V7oC")),m=I(a("FYw3")),p=I(a("mRg0"));a("vLgZ");var g=I(a("q1tI")),v=I(a("aJKe")),y=I(a("eQYT")),S=I(a("HPAy")),b=(I(a("JL1q")),I(a("XbJA"))),C=I(a("mrNk")),k=I(a("WXZs")),w=(I(a("pIe1")),I(a("Fveh"))),T=I(a("M3nf")),E=I(a("zrT5"));function I(e){return e&&e.__esModule?e:{default:e}}a("p5Yn");var D=function(e){function t(e){(0,f.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.state=Object.customAssign({},a._getDefaultState(),{show:!1,moreBlackboardDrag:{pagingToolLeft:"",pagingToolTop:""},isClickSetButton:!1,useToolColor:void 0,resizeInfo:{width:0,height:0},selectBlackboardFontSizeId:"font-36",isColorPickerShow:!1,isTextColorPickerShow:!1,isEraserShow:!1,isTextShow:!1,isUploadShow:!1,eraserIsDisabled:!0,num:0,flag:1,size:1048576,isShowQrCode:!1,qrCodeDrag:{left:0,top:0,percentLeft:0,percentTop:0,isDrag:!1},uploadQrCode:!1,isShowUploadPic:!1}),a.containerWidthAndHeight={},a.isSetDefaultPosition=!1,a.isMsglist=!1,a.countNotice=0,a.msglist_BlackBoard_recvEventData={},a.blackboardCanvasBackgroundColor=a.props.blackboardCanvasBackgroundColor||"#ffffff",a.blackboardThumbnailImageId=a.props.blackboardThumbnailImageId||"blackboardThumbnailImageId",a.associatedMsgID="BlackBoard_new",a.currentTapKey=void 0,a.whiteboardMagnification=16/9,a.maxBlackboardNumber=8,a.studentBlackboardList={},a.hasNewBlackBoard=!1,a.hasUserNewBlackBoard=!1,a.titleContainerHeight=void 0,a.blackboardToolContainerHeight=void 0,a.accept=y.default.FILETYPE.imgFileListAccpet,a.MiniWhiteUrl="",a}return(0,p.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){v.default.Window.addEventListener(y.default.EVENTTYPE.WindowEvent.onResize,this.handlerOnResize.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(y.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(y.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(y.default.EVENTTYPE.RoomEvent.roomParticipantJoin,this.handlerRoomParticipantJoin.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(y.default.EVENTTYPE.RoomEvent.roomParticipantLeave,this.handlerRoomParticipantLeave.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(y.default.EVENTTYPE.RoomEvent.roomDisconnected,this.handlerRoomDisconnected.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(y.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("handleQrCodeShow",this.handleqrCodeShow.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(y.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,this.handlerRoomPlaybackClearAll.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("receive-msglist-NewBlackBoard",this.handlerReceive_msglist_NewBlackBoard.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("receive-msglist-MoreUsers",this.handlerReceive_msglist_MoreUsers.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("resizeHandler",this.handlerOnResize.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("isSendSignallingFromBlackBoardDrag",this.handlerBlackBoardDrag.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("receive-msglist-UserHasNewBlackBoard",this.handlerReceive_msglist_UserHasNewBlackBoard.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(y.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("callAllWrapOnClick",this.handlerCallAllWrapOnClick.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("SwitchLayout",this.handlerSwitchLayout.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("changeSize",this.handlerSwitchLayout.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("videoBoxSizeChanged",this.handlerOnResize.bind(this),this.listernerBackupid),this._init()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.disabledBlackboardToolBtnTimer),v.default.Window.removeBackupListerner(this.listernerBackupid),v.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.show!==this.state.show&&this.state.show&&(this._updateContainerWidthAndHeight(),this.isSetDefaultPosition&&(this.isSetDefaultPosition=!1,this.setDefaultPosition())),t.blackBoardState!==this.state.blackBoardState&&(this._updateBlackBoardDescListByBlackBoardState(),this._updateContainerWidthAndHeight()),this.updateResize()}},{key:"updateResize",value:function(){var e=this.props.id,t=document.getElementById(e);if(t){var a=S.default.windowInnerWidth/y.default.STANDARDSIZE,i=t.offsetWidth/a,o=t.offsetHeight/a;!this.state.resizeInfo||(0,u.default)(this.state.resizeInfo.width,i)&&(0,u.default)(this.state.resizeInfo.height,o)||(this.state.resizeInfo={width:i,height:o},this.setState({resizeInfo:this.state.resizeInfo}))}}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,i=document.getElementById(t),o=document.querySelector(a.bounds);if(i&&o&&a.changePosition&&"function"==typeof a.changePosition){a.changePosition(t,{percentLeft:.5,percentTop:.5,isDrag:!1},!1)}}},{key:"handlerSwitchLayout",value:function(e){var t=this;if(!e||"MainPeople"!==e.nowLayout)var a=setTimeout(function(){t&&t._updateContainerWidthAndHeight(),clearTimeout(a)},100)}},{key:"handlerRoomPlaybackClearAll",value:function(){S.default.isMoreUsers=!1,this._recoverDedaultState()}},{key:"handlerRoomDisconnected",value:function(){this._recoverDedaultState()}},{key:"handlerRoomParticipantJoin",value:function(){this._updateBlackBoardDescListByBlackBoardState()}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=e.message,a=e.user;if(t.publishstate&&this.hasNewBlackBoard&&0!==t.publishstate&&2===a.role&&a.id===C.default.getTkRoom().getMySelf().id&&!S.default.playback&&!this.hasUserNewBlackBoard&&y.default.hasRole.roleStudent&&(!S.default.isMoreUsers&&!S.default.HeightConcurrence||0!==t.publishstate&&(S.default.isMoreUsers||S.default.HeightConcurrence))){var i={id:C.default.getTkRoom().getMySelf().id,nickname:C.default.getTkRoom().getMySelf().nickname,role:C.default.getTkRoom().getMySelf().role};b.default.sendSignallingFromUserHasNewBlackBoard(i)}}},{key:"handlerRoomParticipantLeave",value:function(){this._updateBlackBoardDescListByBlackBoardState()}},{key:"handlerOnResize",value:function(e){this._updateContainerWidthAndHeight()}},{key:"handlerReceive_msglist_NewBlackBoard",value:function(e){this.isMsglist=!0,this.handlerRoomPubmsg(e)}},{key:"handlerReceive_msglist_MoreUsers",value:function(e){this.handlerRoomPubmsg(e)}},{key:"handlerReceive_msglist_UserHasNewBlackBoard",value:function(e){var t=e.message,a=!0,i=!1,o=void 0;try{for(var n,l=(0,d.default)(t);!(a=(n=l.next()).done);a=!0){var s=n.value,r={};r.message=s,this.handlerRoomPubmsg(r)}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}}},{key:"handleCloseWhiteBoardNotice",value:function(){this.setState({show:!1})}},{key:"handlerRoomConnected",value:function(e){for(var t=this,a=0;a<(0,r.default)(e.message).length;a++)if("MiniBlackBoard_upload"===(0,r.default)(e.message)[a].name)!function(){var i=(0,r.default)(e.message)[a].data.swfpath,o=i.lastIndexOf("."),n=i.substring(o),l=i.replace(n,"-1"+n),d=window.WBGlobal.nowUseDocAddress+l;t.MiniWhiteUrl=d;var u=document.getElementsByClassName("custom-canvas-background"),c=setTimeout(function(){"blackBoardCommon"===u[1].parentNode.parentNode.id.substring(0,16)&&(u[1].style.backgroundImage="url("+t.MiniWhiteUrl+")",u[1].style.backgroundSize="contain"),(0,s.default)(t.studentBlackboardList).forEach(function(e){document.getElementById(e+"TalkcloudWhiteboard_whiteboardInstance")&&document.getElementById(e+"TalkcloudWhiteboard_whiteboardInstance").childNodes[0]&&document.getElementById(e+"TalkcloudWhiteboard_whiteboardInstance").childNodes[0].childNodes[0]&&(document.getElementById(e+"TalkcloudWhiteboard_whiteboardInstance").childNodes[0].childNodes[0].style.backgroundImage="url("+t.MiniWhiteUrl+")",document.getElementById(e+"TalkcloudWhiteboard_whiteboardInstance").childNodes[0].childNodes[0].style.backgroundSize="contain")}),clearTimeout(c)},500)}();else if("BlackBoard_new"===(0,r.default)(e.message)[a].name){var i=(0,r.default)(e.message)[a].data.blackBoardState,o=(0,r.default)(e.message)[a].data.currentTapKey;"_dispenseed"!==i&&"_recycle"!==i||"blackBoardCommon"!==o||this.setState({isShowUploadPic:!0})}}},{key:"receiveVideoWhiteboardSDKAction",value:function(e){var t=this,a=e.action,i=e.cmd;if("viewStateUpdate"===a){var o=i.viewState.tool.tool_eraser.disabled;this.setState({eraserIsDisabled:o}),(0,s.default)(this.studentBlackboardList).forEach(function(e){document.getElementById(e+"TalkcloudWhiteboard_whiteboardInstance")&&document.getElementById(e+"TalkcloudWhiteboard_whiteboardInstance").childNodes[0]&&document.getElementById(e+"TalkcloudWhiteboard_whiteboardInstance").childNodes[0].childNodes[0]&&(document.getElementById(e+"TalkcloudWhiteboard_whiteboardInstance").childNodes[0].childNodes[0].style.backgroundImage="url("+t.MiniWhiteUrl+")",document.getElementById(e+"TalkcloudWhiteboard_whiteboardInstance").childNodes[0].childNodes[0].style.backgroundSize="contain")})}}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"DocumentChange":0===C.default.getTkRoom().getMySelf().role&&a.data&&"extendWhiteBoard"===a.data.whiteboardType&&b.default.sendMiniWhiteBoardShowPage(a);break;case"ShowPage_extendWhiteBoard":if(a.data&&a.data.filedata&&a.data.filedata.swfpath&&"extendWhiteBoard"===a.data.whiteboardType){var i=a.data.filedata.swfpath.lastIndexOf("."),o=a.data.filedata.swfpath.substring(i),n=a.data.filedata.swfpath.replace(o,"-1"+o),l=window.WBGlobal.nowUseDocAddress+n;this.MiniWhiteUrl=l,0===C.default.getTkRoom().getMySelf().role&&(b.default.sendMiniWhiteBoardImgMessage({swfpath:a.data.filedata.swfpath},"__all"),v.default.CoreController.dispatchEvent({type:"handleQrCodeShow",data:{isShow:!1}}),v.default.CoreController.dispatchEvent({type:"colse-holdAll-item",message:{type:"qrCode"}}))}break;case"switchLayout":this.handlerSwitchLayout();break;case"UserHasNewBlackBoard":a.data.id===C.default.getTkRoom().getMySelf().id&&(this.hasUserNewBlackBoard=!0),this._getstudentBlackboardList(a.data,"add"),this._updateBlackBoardDescListByBlackBoardState();break;case"MoreUsers":a.data.hasMoreUser?S.default.isMoreUsers=!0:S.default.playback&&(S.default.isMoreUsers=!1),this._updateBlackBoardDescListByBlackBoardState();break;case"MiniBlackBoard_upload":var r=document.getElementsByClassName("custom-canvas-background");if(r[1]&&"blackBoardCommon"===r[1].parentNode.parentNode.id.substring(0,16)){var d=a.data.swfpath.lastIndexOf("."),u=a.data.swfpath.substring(d),c=a.data.swfpath.replace(u,"-1"+u),f=window.WBGlobal.nowUseDocAddress+c;r[1].style.backgroundImage="url("+f+")",r[1].style.backgroundSize="contain",this.MiniWhiteUrl=f}(0,s.default)(this.studentBlackboardList).forEach(function(e){document.getElementById(e+"TalkcloudWhiteboard_whiteboardInstance")&&document.getElementById(e+"TalkcloudWhiteboard_whiteboardInstance").childNodes[0]&&document.getElementById(e+"TalkcloudWhiteboard_whiteboardInstance").childNodes[0].childNodes[0]&&(document.getElementById(e+"TalkcloudWhiteboard_whiteboardInstance").childNodes[0].childNodes[0].style.backgroundImage="url("+t.MiniWhiteUrl+")",document.getElementById(e+"TalkcloudWhiteboard_whiteboardInstance").childNodes[0].childNodes[0].style.backgroundSize="contain")});break;case"BlackBoard_new":if("_dispenseed"===a.data.blackBoardState&&this.setState({useToolKey:"tool_pencil",isShowUploadPic:!1}),"_prepareing"!==a.data.blackBoardState&&"_recycle"!==a.data.blackBoardState||"blackBoardCommon"!==a.data.currentTapKey?this.setState({isShowUploadPic:!1}):this.setState({isShowUploadPic:!0}),S.default.HeightConcurrence&&S.default.isMoreUsers?this.hasNewBlackBoard=!1:this.hasNewBlackBoard=!0,this.hasUserNewBlackBoard||!y.default.hasRole.roleStudent||0!==C.default.getTkRoom().getMySelf().publishstate||!S.default.isMoreUsers&&!S.default.HeightConcurrence||"_dispenseed"!==a.data.blackBoardState&&"_againDispenseed"!==a.data.blackBoardState&&"_recycle"!==a.data.blackBoardState){if((y.default.hasRole.roleChairman||y.default.hasRole.roleTeachingAssistant)&&void 0===this.state.useToolColor?this.setState({useToolColor:"#FF0000"}):y.default.hasRole.roleChairman||y.default.hasRole.roleTeachingAssistant||void 0!==this.state.useToolColor||this.setState({useToolColor:"#000000"}),(y.default.hasRole.roleChairman||y.default.hasRole.roleTeachingAssistant||y.default.hasRole.rolePatrol||y.default.hasRole.roleRecord||y.default.hasRole.rolePlayback)&&"_none"!==a.data.blackBoardState||"_dispenseed"===a.data.blackBoardState||"_recycle"===a.data.blackBoardState||"_againDispenseed"===a.data.blackBoardState){if(!1!==this.isMsglist&&"_prepareing"!==a.data.blackBoardState||(this.isSetDefaultPosition=!0),!S.default.playback&&y.default.hasRole.roleStudent&&!this.hasUserNewBlackBoard&&(!S.default.isMoreUsers&&!S.default.HeightConcurrence||0!==C.default.getTkRoom().getMySelf().publishstate&&(S.default.isMoreUsers||S.default.HeightConcurrence))){var h={id:C.default.getTkRoom().getMySelf().id,nickname:C.default.getTkRoom().getMySelf().nickname,role:C.default.getTkRoom().getMySelf().role,publishstate:C.default.getTkRoom().getMySelf().publishstate};b.default.sendSignallingFromUserHasNewBlackBoard(h)}this.setState({show:!0})}var m=this.currentTapKey,p=this.state.blackBoardState;void 0!==a.data.currentTapKey&&(this.currentTapKey=a.data.currentTapKey),void 0!==a.data.currentTapPage&&this.state.currentTapPage!==a.data.currentTapPage&&(this.state.currentTapPage=a.data.currentTapPage),this.setState({blackBoardState:a.data.blackBoardState,updateState:!this.state.updateState,currentTapPage:this.state.currentTapPage}),p===a.data.blackBoardState&&m!==a.data.currentTapKey&&(!y.default.hasRole.roleStudent||"_dispenseed"!==a.data.blackBoardState&&"_againDispenseed"!==a.data.blackBoardState)&&this._updateBlackBoardDescListByBlackBoardState()}else this.handleCloseWhiteBoardNotice()}}},{key:"handlerRoomDelmsg",value:function(e){var t=e.message;switch(t.name){case"BlackBoard_new":case"ClassBegin":this._recoverDedaultState();break;case"UserHasNewBlackBoard":this._getstudentBlackboardList(t.data,"delete"),this._updateBlackBoardDescListByBlackBoardState()}}},{key:"handlerBlackBoardDrag",value:function(e){if(!S.default.playback||"0"!==S.default.roomlayout){var t=e.message.data;"_recycle"===this.state.blackBoardState&&b.default.sendSignallingFromBlackBoardDrag(t)}}},{key:"handlerCloseClick",value:function(){var e=this.props.id;b.default.sendSignallingFromNewBlackBoard({},!0),b.default.sendDelMiniWhiteBoardImgMessage("__all"),b.default.sendDelMiniWhiteBoardShowPage("__all"),v.default.CoreController.dispatchEvent({type:"colse-holdAll-item",message:{type:"blackboard"}});var t=!0,a=!1,i=void 0;try{for(var o,s=(0,d.default)((0,n.default)(S.default.minimizedDragAndDropArry));!(t=(o=s.next()).done);t=!0){var r=o.value,u=(0,l.default)(r,2),c=u[0],f=u[1],h=!0,m=!1,p=void 0;try{for(var g,y=(0,d.default)((0,n.default)(f));!(h=(g=y.next()).done);h=!0){var C=g.value,k=(0,l.default)(C,2),w=k[0];k[1];w===e&&S.default.minimizedDragAndDropArry.splice(c,1)}}catch(e){m=!0,p=e}finally{try{!h&&y.return&&y.return()}finally{if(m)throw p}}}}catch(e){a=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw i}}}},{key:"handlerBlackBoardDispatchClick",value:function(){var e=this,t=void 0,a=this.props,i=(a.id,a.moreBlackboardDrag),o={percentLeft:i.percentLeft,percentTop:i.percentTop,isDrag:!0};if("_prepareing"===this.state.blackBoardState)b.default.sendSignallingFromBlackBoardDrag(o),t="_dispenseed";else if("_dispenseed"===this.state.blackBoardState)b.default.sendSignallingFromBlackBoardDrag(o),t="_recycle";else if("_recycle"===this.state.blackBoardState)t="_againDispenseed";else if("_againDispenseed"===this.state.blackBoardState)b.default.sendSignallingFromBlackBoardDrag(o),t="_recycle";else if("_none"===this.state.blackBoardState)return void L.Logger.error("current blackBoardState is _none , can't execute blackBoardDispatchClick!");if(t){var n={blackBoardState:t,currentTapKey:this.currentTapKey,currentTapPage:this.state.currentTapPage};b.default.sendSignallingFromNewBlackBoard(n,!1)}this.setState({disabledBlackboardToolBtn:!0}),clearTimeout(this.disabledBlackboardToolBtnTimer),this.disabledBlackboardToolBtnTimer=setTimeout(function(){e.setState({disabledBlackboardToolBtn:!1})},300)}},{key:"handlerTabClick",value:function(e){if(void 0!==e){var t={blackBoardState:this.state.blackBoardState,currentTapKey:e,currentTapPage:this.state.currentTapPage};b.default.sendSignallingFromNewBlackBoard(t,!1)}}},{key:"handleToolClick",value:function(e){if("tool_pencil"===e&&this.setState({useToolKey:e,isClickSetButton:!1,isColorPickerShow:!this.state.isColorPickerShow,isTextShow:!1,isEraserShow:!1,isUploadShow:!1}),"tool_text"===e&&this.setState({useToolKey:e,isClickSetButton:!1,isTextShow:!this.state.isTextShow,isColorPickerShow:!1,isEraserShow:!1,isUploadShow:!1}),"tool_eraser"===e){if(this.state.eraserIsDisabled)return;this.setState({useToolKey:e,isClickSetButton:!1,isEraserShow:!this.state.isEraserShow,isColorPickerShow:!1,isTextShow:!1,isUploadShow:!1})}"tool_upload"==e&&this.setState({useToolKey:e,isClickSetButton:!1,isEraserShow:!1,isColorPickerShow:!1,isTextShow:!1,isUploadShow:!this.state.isUploadShow})}},{key:"changeStrokeColorClick",value:function(e){this.setState({useToolColor:e,isClickSetButton:!1})}},{key:"onTapPrevOrNextClick",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(0,s.default)(this.state.blackBoardDescList).length,i=Math.ceil(a/(this.maxBlackboardNumber-1));switch(e){case"prev":this.state.currentTapPage--;break;case"next":this.state.currentTapPage++}if(this.state.currentTapPage<1?this.state.currentTapPage=1:this.state.currentTapPage>i&&(this.state.currentTapPage=i),t)this.state.blackBoardState,this.currentTapKey,this.state.currentTapPage;this.setState({currentTapPage:this.state.currentTapPage})}},{key:"_init",value:function(){this._updateContainerWidthAndHeight()}},{key:"_updateContainerWidthAndHeight",value:function(){var e=document.getElementById("big_literally_wrap"),t=document.getElementsByClassName("title-container")[0],a=document.getElementById("blackboard-tool-container"),i=t&&0!==t.clientHeight?t.clientHeight:this.titleContainerHeight,o=a&&0===a.clientHeight?this.blackboardToolContainerHeight:a.clientHeight;if(e){var n=Math.floor(.9*e.clientHeight),l=Math.floor(16*(n-i-o)/9+16);l<e.clientWidth&&n<e.clientHeight?(this.state.containerWidthAndHeight.height=n,this.state.containerWidthAndHeight.width=l,this.setState({containerWidthAndHeight:this.state.containerWidthAndHeight}),this.containerWidthAndHeight.height=Math.floor(.9*e.clientHeight-i-o),this.containerWidthAndHeight.width=Math.floor(16*this.containerWidthAndHeight.height/9)):l>e.clientWidth&&n<e.clientHeight&&(this.containerWidthAndHeight.height=Math.floor(9*(e.clientWidth-16)/16),this.containerWidthAndHeight.width=Math.floor(e.clientWidth-16),this.state.containerWidthAndHeight.width=Math.floor(e.clientWidth),this.state.containerWidthAndHeight.height=Math.floor(9*(e.clientWidth-16)/16+i+o),this.setState({containerWidthAndHeight:this.state.containerWidthAndHeight}))}this.forceUpdate()}},{key:"_getUser",value:function(e){var t=!1,a=!0,i=!1,o=void 0;try{for(var s,r=(0,d.default)((0,n.default)(this.studentBlackboardList));!(a=(s=r.next()).done);a=!0){var u=s.value,c=(0,l.default)(u,2),f=c[0],h=c[1];if(f===e){t={},t=h;break}}}catch(e){i=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}return t}},{key:"_updateBlackBoardDescListByBlackBoardState",value:function(){if(C.default.getTkRoom()){var e=this.state.blackBoardDescList;"blackBoardCommon"===this.currentTapKey||this._getUser(this.currentTapKey)||"_recycle"==this.state.blackBoardState||(this.currentTapKey="blackBoardCommon"),"_prepareing"===this.state.blackBoardState?((y.default.hasRole.roleChairman||y.default.hasRole.roleTeachingAssistant||y.default.hasRole.rolePatrol||y.default.hasRole.roleRecord||y.default.hasRole.rolePlayback)&&(this.currentTapKey="blackBoardCommon"),e=Object.customAssign({},this._getBlackBoardCommon())):"_dispenseed"===this.state.blackBoardState||"_againDispenseed"===this.state.blackBoardState?(y.default.hasRole.roleStudent&&(this.currentTapKey=C.default.getTkRoom().getMySelf().id),e=Object.customAssign({},this._getBlackBoardCommon(),this._getStudentBlackboard())):"_recycle"===this.state.blackBoardState?e=Object.customAssign({},this._getBlackBoardCommon(),this._getStudentBlackboard()):"_none"===this.state.blackBoardState&&(e={});var t=(0,s.default)(e).length,a=Math.ceil(t/(this.maxBlackboardNumber-1));this.state.currentTapPage<1?this.state.currentTapPage=1:this.state.currentTapPage>a&&(this.state.currentTapPage=a),this.setState({blackBoardDescList:e,currentTapPage:this.state.currentTapPage})}}},{key:"_getstudentBlackboardList",value:function(e,t){"add"===t?2===e.role&&(this.studentBlackboardList[e.id]=e):delete this.studentBlackboardList[e.id]}},{key:"_getStudentBlackboard",value:function(){var e={},t=!0,a=!1,i=void 0;try{for(var o,s=(0,d.default)((0,n.default)(this.studentBlackboardList));!(t=(o=s.next()).done);t=!0){var r=o.value,u=(0,l.default)(r,2),c=u[0],f=u[1];e[c]={instanceId:c,show:this.currentTapKey===c,isBaseboard:!1,deawPermission:!1,dependenceBaseboardWhiteboardID:"blackBoardCommon",needLooadBaseboard:!0,saveImage:!1,nickname:f.nickname},!y.default.role.roleStudent||"_dispenseed"!==this.state.blackBoardState&&"_againDispenseed"!==this.state.blackBoardState||C.default.getTkRoom().getMySelf().id!==c||(e[c].deawPermission=!0),"_recycle"===this.state.blackBoardState&&(y.default.hasRole.roleChairman||y.default.hasRole.roleTeachingAssistant)&&(e[c].deawPermission=!0)}}catch(e){a=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw i}}return e}},{key:"_getBlackBoardCommon",value:function(e){var t={blackBoardCommon:{instanceId:"blackBoardCommon",show:"blackBoardCommon"===this.currentTapKey,isBaseboard:"_prepareing"===this.state.blackBoardState,deawPermission:y.default.hasRole.roleChairman||y.default.hasRole.roleTeachingAssistant,dependenceBaseboardWhiteboardID:void 0,needLooadBaseboard:!1,saveImage:!1,nickname:"blackBoardCommon"}};return e&&"object"===(void 0===e?"undefined":(0,o.default)(e))&&Object.customAssign(t.blackBoardCommon,e),t}},{key:"_getDefaultState",value:function(){return{blackBoardState:"_none",disabledBlackboardToolBtn:!1,blackBoardDescList:{},useToolKey:"tool_pencil",useToolColor:void 0===y.default.hasRole.roleChairman?void 0:y.default.hasRole.roleChairman||y.default.hasRole.roleTeachingAssistant?"#FF0000":"#000000",containerWidthAndHeight:{width:0,height:0},updateState:!1,currentTapPage:1,blackboardToolsInfo:"mobile"!==TK.SDKTYPE?{pencil:5,text:48,eraser:30}:{pencil:5,text:45,eraser:150},selectBlackboardToolSizeId:"blackboard_size_small",blackboardThumbnailImage:void 0}}},{key:"_loadBlackBoardElementArray",value:function(e){var t=this,a=[],i=[],o=this.state.blackboardToolsInfo.text,n=[],l=void 0,u=!0,c=!1,f=void 0;try{for(var h,m=(0,d.default)((0,r.default)(e));!(u=(h=m.next()).done);u=!0){var p=h.value;"blackBoardCommon"!==p.instanceId?n.push(p):l=p}}catch(e){c=!0,f=e}finally{try{!u&&m.return&&m.return()}finally{if(c)throw f}}n.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("instanceId")&&void 0!==t&&t.hasOwnProperty("instanceId")?e.instanceId<t.instanceId?-1:e.instanceId>t.instanceId?1:0:0}),l&&n.unshift(l);var v=(0,s.default)(e).length,b=void 0,w=void 0,T=Math.ceil(v/(this.maxBlackboardNumber-1));if(T>1)if(b=100/(this.maxBlackboardNumber-1),1===T||this.state.currentTapPage<T)w=(this.state.currentTapPage-1)*(this.maxBlackboardNumber-1)*b;else{var E=T*(this.maxBlackboardNumber-1)-v;w=((this.state.currentTapPage-1)*(this.maxBlackboardNumber-1)-E)*b}return n.forEach(function(e,n){if("blackBoardCommon"===e.instanceId||"blackBoardCommon"!==e.instanceId&&C.default.getTkRoom()&&t._getUser(e.instanceId)){a.push(g.default.createElement("li",{className:"tab-content-option ",key:e.instanceId,style:{display:e.show?"block":"none"}},g.default.createElement(k.default,{containerWidthAndHeight:t.containerWidthAndHeight,instanceId:e.instanceId,show:e.show,isBaseboard:e.isBaseboard,deawPermission:e.deawPermission,dependenceBaseboardWhiteboardID:e.dependenceBaseboardWhiteboardID,MiniWhiteUrl:t.MiniWhiteUrl,associatedMsgID:t.associatedMsgID,associatedUserID:void 0,needLooadBaseboard:e.needLooadBaseboard,saveImage:e.saveImage,nickname:e.nickname,useToolKey:t.state.useToolKey,fontSize:o,useToolColor:t.state.useToolColor,pencilWidth:t.state.blackboardToolsInfo.pencil,eraserWidth:t.state.blackboardToolsInfo.eraser,saveRedoStack:y.default.hasRole.roleChairman||y.default.joinRoomInfo.shapeUndoRedoClear,undoRedoClearToMySelf:y.default.hasRole.roleStudent&&y.default.joinRoomInfo.shapeUndoRedoClear,imageThumbnailId:e.show?t.state.blackboardThumbnailImage:void 0,backgroundColor:t.blackboardCanvasBackgroundColor,imageThumbnailTipContent:S.default.language.languageData.header.tool.blackBoard.content.blackboardHeadTitle,showShapeAuthor:!1,receiveVideoWhiteboardSDKAction:t.receiveVideoWhiteboardSDKAction.bind(t)}))),i.push(g.default.createElement("li",{style:{marginLeft:0===n&&void 0!==w?-w+"%":void 0,width:void 0!==b?b+"%":void 0,maxWidth:void 0!==b?b+"%":void 0,minWidth:void 0!==b?b+"%":void 0},className:"tap-option add-nowrap "+(e.show?"active":"")+(y.default.hasRole.roleChairman||y.default.hasRole.roleTeachingAssistant?" ":" disabled"),key:e.instanceId,onClick:"mobile"!==TK.SDKTYPE&&(y.default.hasRole.roleChairman||y.default.hasRole.roleTeachingAssistant)?t.handlerTabClick.bind(t,e.instanceId):void 0,onTouchStart:"mobile"===TK.SDKTYPE&&(y.default.hasRole.roleChairman||y.default.hasRole.roleTeachingAssistant)?t.handlerTabClick.bind(t,e.instanceId):void 0},g.default.createElement("span",{className:"text add-nowrap"},"blackBoardCommon"===e.instanceId?S.default.language.languageData.header.tool.blackBoard.toolBtn.commonTeacher:t._getUser(e.instanceId).nickname)," "))}}),{tabContentBlackBoardElementArray:a,tabBlackBoardElementArray:i}}},{key:"_loadToolColorsElementArray",value:function(){var e=this,t=[];return["#5AC9FA","#FFCC00","#FF0000","#4740D2","#007BFF","#09C62B","#000000","#EDEDED"].forEach(function(a,i){var o="mobile"!==TK.SDKTYPE?g.default.createElement("li",{className:"color-option color_"+e._colorFilter(a)+" "+(e.state.useToolColor===a?" active":""),key:i,onClick:e.changeStrokeColorClick.bind(e,a),id:"blackboard_color_"+e._colorFilter(a)}):g.default.createElement("li",{key:i,className:"blackboard-tool-option-mobile"},g.default.createElement("button",{id:"blackboard_color_"+e._colorFilter(a),className:"color-option color_"+e._colorFilter(a)+" "+(e.state.useToolColor===a?" active":""),onTouchStart:e.changeStrokeColorClick.bind(e,a)}));t.push(o)}),{toolColorsArray:t}}},{key:"_colorFilter",value:function(e){return e.replace(/#/g,"")}},{key:"_recoverDedaultState",value:function(){this.studentBlackboardList={},this.hasNewBlackBoard=!1,this.hasUserNewBlackBoard=!1,this.MiniWhiteUrl="",clearTimeout(this.disabledBlackboardToolBtnTimer);var e=this._getDefaultState();this.currentTapKey=void 0,this.setState(Object.customAssign({},e,{show:!1,selectBlackboardFontSizeId:"font-36"}))}},{key:"_changeStrokeSizeClick",value:function(e,t){this.setState({selectBlackboardToolSizeId:e,blackboardToolsInfo:Object.customAssign(this.state.blackboardToolsInfo,t)})}},{key:"handleToolClickSet",value:function(){var e=this.state.isClickSetButton;e=!e,this.setState({isClickSetButton:e})}},{key:"_colorsContainerMouseOver",value:function(){this.setState({isClickSetButton:!0})}},{key:"_colorsContainerMouseLeave",value:function(){this.setState({isClickSetButton:!1})}},{key:"mouseLeave",value:function(){this.setState({isColorPickerShow:!1,isEraserShow:!1,isTextShow:!1,isUploadShow:!1})}},{key:"_changeFontSizeClick",value:function(e,t){this.setState({selectBlackboardFontSizeId:e,blackboardToolsInfo:Object.customAssign(this.state.blackboardToolsInfo,t)})}},{key:"changeFontSize",value:function(e){0===e&&(e=1);var t=Math.ceil(Number(e)),a={pencil:this.state.blackboardToolsInfo.pencil,text:t,eraser:this.state.blackboardToolsInfo.eraser};this.setState({blackboardToolsInfo:a})}},{key:"onAfterChangeEraserWidth",value:function(e){0===e&&(e=1);var t=Math.ceil(Number(e)),a={pencil:this.state.blackboardToolsInfo.pencil,text:this.state.blackboardToolsInfo.text,eraser:t};this.setState({blackboardToolsInfo:a})}},{key:"onAfterChangePencilWidth",value:function(e){this.setState({num:e});var t=(0,i.default)({},this.state.blackboardToolsInfo);0===e&&(e=1),t.pencil=e,this.setState({blackboardToolsInfo:t})}},{key:"afterChange",value:function(e){e&&this.setState({useToolColor:e})}},{key:"handlerCallAllWrapOnClick",value:function(e){var t=e.message.event;"blackboard-tool-option"!==t.target.className&&this.state.isColorPickerShow&&this.setState({isColorPickerShow:!1}),"blackboard-tool-option"!==t.target.className&&this.state.isTextShow&&this.setState({isTextShow:!1}),"blackboard-tool-option"!==t.target.className&&this.state.isEraserShow&&this.setState({isEraserShow:!1})}},{key:"stop",value:function(e){e.stopPropagation()}},{key:"uploadSuccess",value:function(e){e&&e.swfpath&&(b.default.sendMiniWhiteBoardImgMessage({swfpath:e.swfpath},"__all"),v.default.CoreController.dispatchEvent({type:"handleQrCodeShow",data:{isShow:!1}}))}},{key:"upLoadImg",value:function(){this.setState({flag:this.state.flag+1})}},{key:"QRcodeUpLoad",value:function(){this.state.uploadQrCode||v.default.CoreController.dispatchEvent({type:"handleQrCodeShow",data:{isShow:!0,isMiniWhite:!0,whiteboardType:"extendWhiteBoard"}})}},{key:"handleqrCodeShow",value:function(e){e.isShow?this.setState({uploadQrCode:!0}):this.setState({uploadQrCode:!1})}},{key:"render",value:function(){var e=this.state,t=e.blackBoardState,a=e.show,i=e.blackBoardDescList,o=(e.containerWidthAndHeight,e.useToolKey),n=e.blackboardThumbnailImage,l=e.resizeInfo,r=(e.isClickSetButton,e.selectBlackboardFontSizeId,this.props),d=r.id,u=r.draggableData,c=r.moreBlackboardDrag,f=c.percentLeft,h=c.percentTop;0==f||f||(f=.5),0==h||h||(h=.5);Object.customAssign({id:d,handle:".title-container",disabled:!(y.default.hasRole.roleChairman||y.default.hasRole.roleTeachingAssistant||(y.default.hasRole.roleStudent||y.default.hasRole.rolePatrol||y.default.hasRole.roleRecord)&&"_recycle"!==t),size:l,percentPosition:{percentLeft:f,percentTop:h}},u);var m,p=S.default.language.languageData.header.tool.blackBoard.toolBtn;m={_prepareing:p.dispenseed,_dispenseed:p.recycle,_recycle:p.againDispenseed,_againDispenseed:p.recycle}[t]||"";var v=this._loadBlackBoardElementArray(i),b=v.tabContentBlackBoardElementArray,C=v.tabBlackBoardElementArray,k=(this._loadToolColorsElementArray().toolColorsArray,(0,s.default)(i).length),I=Math.ceil(k/(this.maxBlackboardNumber-1)),D=!("_recycle"===t||("_dispenseed"===t||"_againDispenseed"===t)&&(y.default.hasRole.roleChairman||y.default.hasRole.roleTeachingAssistant||y.default.hasRole.rolePatrol||y.default.hasRole.roleRecord||y.default.hasRole.rolePlayback)),x="mobile"===TK.SDKTYPE&&"phone"===S.default.mobileDeviceType?!(y.default.hasRole.roleChairman||y.default.hasRole.roleTeachingAssistant||y.default.hasRole.rolePatrol)&&(y.default.hasRole.rolePlayback||y.default.hasRole.rolePatrol||y.default.hasRole.roleStudent&&!("_dispenseed"===t||"_againDispenseed"===t)):y.default.hasRole.rolePlayback||y.default.hasRole.rolePatrol||y.default.hasRole.roleStudent&&!("_dispenseed"===t||"_againDispenseed"===t),R="mobile"===TK.SDKTYPE&&"phone"===S.default.mobileDeviceType;if("mobile"===TK.SDKTYPE){"pad"===S.default.mobileDeviceType?(R||.8,D||.8,x||1.15):"phone"===S.default.mobileDeviceType&&(D||.8)}var _={width:"100%",height:this.containerWidthAndHeight.height};return g.default.createElement("div",{id:d,style:{display:a?"block":"none",position:"absolute",left:"50%",top:"50%",marginTop:-this.state.containerWidthAndHeight.height/2,marginLeft:-this.state.containerWidthAndHeight.width/2,width:this.state.containerWidthAndHeight.width,height:this.state.containerWidthAndHeight.height,zIndex:112}},g.default.createElement("section",{className:"black-board-container "+(x?" hideBottom":" ")+(D?" hideTap":" ")+(R?" hideTitle":" "),style:{display:"block",opacity:void 0===n?void 0:0,zIndex:void 0===n?void 0:-999,width:this.state.containerWidthAndHeight.width,height:this.state.containerWidthAndHeight.height}},g.default.createElement("article",{className:"title-container",style:{cursor:(y.default.hasRole.roleStudent||y.default.hasRole.rolePatrol)&&"_recycle"===t?"default":"move",width:"100%"}},g.default.createElement("article",{className:"tap-container clear-float",style:{display:D?"none":""}},g.default.createElement("ul",{className:"tap add-fl clear-float"},C),g.default.createElement("button",{className:"prev add-fl "+(this.state.currentTapPage<=1?"disabled":""),disabled:this.state.currentTapPage<=1,style:{display:k<this.maxBlackboardNumber?"none":""},title:S.default.language.languageData.header.tool.blackBoard.title.prev,onClick:this.state.currentTapPage<=1?void 0:this.onTapPrevOrNextClick.bind(this,"prev",!0)}),g.default.createElement("button",{className:"next add-fr "+(this.state.currentTapPage>=I?"disabled":""),disabled:this.state.currentTapPage>=I,style:{display:k<this.maxBlackboardNumber?"none":""},title:S.default.language.languageData.header.tool.blackBoard.title.next,onClick:this.state.currentTapPage>=I?void 0:this.onTapPrevOrNextClick.bind(this,"next",!0)})),g.default.createElement("button",{style:{display:y.default.hasRole.roleChairman||y.default.hasRole.roleTeachingAssistant?"":"none"},className:"blackboard-close-image icon-close",disabled:this.state.disabledBlackboardToolBtn,onClick:this.handlerCloseClick.bind(this),title:S.default.language.languageData.header.tool.blackBoard.title.close})),g.default.createElement("article",{className:"tab-content-container",id:"blackboardContentBox",style:_,onMouseDown:function(e){e.stopPropagation()}},g.default.createElement("ul",{className:"tab-content clear-float overflow-hidden",style:{width:"100%",height:"100%"}},b)),g.default.createElement("article",{id:"blackboard-tool-container",className:"blackboard-tool-container clear-float",style:{marginLeft:_.marginLeft}},g.default.createElement("ul",{className:"blackboard-tool clear-float",style:{display:y.default.hasRole.rolePlayback||y.default.hasRole.rolePatrol||y.default.hasRole.roleStudent&&"_dispenseed"!==t&&"_againDispenseed"!==t?"none":""}},g.default.createElement("li",{className:"blackboard-tool-option"},g.default.createElement("button",{id:"blackboard_tool_vessel_pencil",className:"tool-btn pencil-icon icon-pen_sanjiao "+("tool_pencil"===o?" active":""),title:S.default.language.languageData.header.tool.blackBoard.boardTool.pen,onClick:this.handleToolClick.bind(this,"tool_pencil")}),g.default.createElement("div",{style:{display:this.state.isColorPickerShow?"block":"none"},className:"pen_colorPicker",onClick:this.stop.bind(this),onMouseLeave:this.mouseLeave.bind(this)},g.default.createElement(T.default,{setLineColor:this.afterChange.bind(this),selectColor:this.state.useToolColor}),g.default.createElement("div",{className:"tool-slider"},g.default.createElement("div",{style:{width:"2rem"},onMouseMove:this.stop.bind(this),onMouseDown:this.stop.bind(this)},g.default.createElement(w.default,{onAfterChange:this.onAfterChangePencilWidth.bind(this),value:this.state.blackboardToolsInfo.pencil})),g.default.createElement("span",null,this.state.blackboardToolsInfo.pencil)),g.default.createElement("div",{className:"pencil_sharp_corner icon-down"}))),g.default.createElement("li",{className:"blackboard-tool-option"},g.default.createElement("button",{id:"blackboard_tool_vessel_text",className:"tool-btn text-icon icon-text_sanjiao "+("tool_text"===o?" active":""),title:S.default.language.languageData.header.tool.blackBoard.boardTool.text,onClick:this.handleToolClick.bind(this,"tool_text")}),g.default.createElement("div",{style:{display:this.state.isTextShow?"block":"none"},className:"text_size",onClick:this.stop.bind(this),onMouseLeave:this.mouseLeave.bind(this)},g.default.createElement(T.default,{setLineColor:this.afterChange.bind(this),selectColor:this.state.useToolColor}),g.default.createElement("div",{className:"tool-slider"},g.default.createElement("div",{style:{width:"2rem"},onMouseMove:this.stop.bind(this),onMouseDown:this.stop.bind(this)},g.default.createElement(w.default,{onAfterChange:this.changeFontSize.bind(this),value:this.state.blackboardToolsInfo.text})),g.default.createElement("span",null,this.state.blackboardToolsInfo.text),g.default.createElement("div",{className:"text_sharp_corner icon-down"})))),g.default.createElement("li",{className:"blackboard-tool-option"},g.default.createElement("button",{id:"blackboard_tool_vessel_eraser",className:"tool-btn eraser-icon icon-xiangpi_sanjiao "+("tool_eraser"===o?" active":"")+(this.state.eraserIsDisabled?" disable":""),title:S.default.language.languageData.header.tool.blackBoard.boardTool.eraser,onClick:this.handleToolClick.bind(this,"tool_eraser")}),g.default.createElement("div",{style:{display:this.state.isEraserShow?"block":"none"},className:"tool-eraser-extend",onClick:this.stop.bind(this),onMouseLeave:this.mouseLeave.bind(this)},g.default.createElement("div",{className:"tool-slider"},g.default.createElement("div",{style:{width:"2rem"},onMouseMove:this.stop.bind(this),onMouseDown:this.stop.bind(this)},g.default.createElement(w.default,{onAfterChange:this.onAfterChangeEraserWidth.bind(this),value:this.state.blackboardToolsInfo.eraser})),g.default.createElement("span",null,this.state.blackboardToolsInfo.eraser),g.default.createElement("div",{className:"eraser_sharp_corner icon-down"})))),g.default.createElement("li",{className:"blackboard-tool-option",style:{display:this.state.isShowUploadPic&&y.default.hasRole.roleChairman?"block":"none"}},g.default.createElement("button",{id:"blackboard_tool_vessel_eraser",className:"tool-btn text-icon icon-image_default "+("tool_upload"===o?" active":""),title:S.default.language.languageData.header.tool.blackBoard.boardTool.upload,onClick:this.handleToolClick.bind(this,"tool_upload")}),g.default.createElement("div",{className:"upload_pic_tool",style:{display:this.state.isUploadShow?"block":"none"},onMouseLeave:this.mouseLeave.bind(this)},g.default.createElement("div",{className:"local_upload"},g.default.createElement("span",{onClick:this.upLoadImg.bind(this)},S.default.language.languageData.header.tool.blackBoard.upload.localUpload),g.default.createElement(E.default,{size:this.state.size,flag:this.state.flag,uploadSuccessCallback:this.uploadSuccess,accept:this.accept})),g.default.createElement("div",{onClick:this.QRcodeUpLoad.bind(this),className:this.state.uploadQrCode?"disabled":""},S.default.language.languageData.header.tool.blackBoard.upload.scanCodeUpload)))),g.default.createElement("button",{style:{display:y.default.hasRole.roleChairman||y.default.hasRole.roleTeachingAssistant?"":"none"},className:"blackboard-send-btn "+(this.state.disabledBlackboardToolBtn?"disabled":""),disabled:this.state.disabledBlackboardToolBtn,onClick:this.handlerBlackBoardDispatchClick.bind(this)},m))))}}]),t}(g.default.Component);t.default=D},Dn0Y:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=h(a("Yz+Y")),n=h(a("iCc5")),l=h(a("V7oC")),s=h(a("FYw3")),r=h(a("mRg0")),d=h(a("q1tI")),u=h(a("HPAy")),c=h(a("bmQc")),f=a("okNM");function h(e){return e&&e.__esModule?e:{default:e}}var m=(0,f.inject)("userListDataStore")(i=(0,f.observer)(i=function(e){function t(){var e,a,i,l;(0,n.default)(this,t);for(var r=arguments.length,d=Array(r),u=0;u<r;u++)d[u]=arguments[u];return a=i=(0,s.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(d))),i.state={inputValue:""},l=a,(0,s.default)(i,l)}return(0,r.default)(t,e),(0,l.default)(t,[{key:"handleInputChange",value:function(e){var t=c.default.nowPage,a=e.target.value,i=e.target.value.replace(/&nbsp;/g," "),o=u.default.HeightConcurrence?"big":"small";this.setState({inputValue:a}),i?(c.default.updateSearchInfo(!0,i),c.default.updatePageInfo(1,1,o)):(c.default.updateSearchInfo(!1,""),c.default.updatePageInfo(t,t,o))}},{key:"render",value:function(){return d.default.createElement("div",{className:"userlist-search"},d.default.createElement("span",{className:"searchBtn icon-search",title:u.default.language.languageData.toolContainer.toolIcon.documentList.button.search.name}),d.default.createElement("input",{className:"searchInput",type:"text",onChange:this.handleInputChange.bind(this),onMouseDown:function(e){e.stopPropagation()},value:this.state.inputValue,placeholder:u.default.language.languageData.toolContainer.toolIcon.documentList.button.search.text}))}}]),t}(d.default.Component))||i)||i;t.default=m},DnfC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(a("q1tI"));a("Ahz+");var o=n(a("17x9"));function n(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.classNames,a=e.placeholder,o=e.value,n=e.type,l=e.disabled,s=e.maxLength,r=e.prefix,d=e.suffix,u=e.onChange,c=e.onEnter,f=e.onClick,h=(r?" prefix":"")+(d?"suffix":""),m={width:e.width+"px",height:e.height+"px"};return i.default.createElement("div",{className:"base-input "+t+" "+h,onClick:f,style:m},r?i.default.createElement("span",{className:"base-input-left"},r):null,i.default.createElement("input",{className:"base-input-itself",type:n,value:o,placeholder:a,disabled:l,maxLength:s,onChange:function(e){u(e,e.target.value)},onKeyDown:function(e){"function"===c&&13==+e.keyCode&&c(e)}}),d?i.default.createElement("span",{className:"base-input-right"},d):null)};l.propTypes={classNames:o.default.string,width:o.default.number,height:o.default.number,placeholder:o.default.string,value:o.default.string,type:o.default.string,disabled:o.default.bool,maxLength:o.default.number||null,prefix:o.default.node,suffix:o.default.node,onChange:o.default.func,onEnter:o.default.func,onClick:o.default.func},l.defaultProps={classNames:"",placeholder:"",value:"",type:"text",disabled:!1,maxLength:null,prefix:"",suffix:"",onChange:function(){},onEnter:function(){},onClick:function(){}},t.default=l},Dryh:function(e,t,a){},E0DN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=h(a("FyfS")),o=h(a("Yz+Y")),n=h(a("iCc5")),l=h(a("V7oC")),s=h(a("FYw3")),r=h(a("mRg0")),d=h(a("q1tI")),u=h(a("XbJA")),c=h(a("aJKe")),f=(h(a("JL1q")),h(a("1Nl6")));function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){c.default.CoreController.addEventListener("receive-msglist-answer",this.handlerMsglistAnswerShow.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("receive-msglist-question",this.handlerMsglistQuestionShow.bind(this),this.listernerBackupid)}},{key:"handlerMsglistAnswerShow",value:function(e){var t=!0,a=!1,o=void 0;try{for(var n,l=(0,i.default)(e.message.answerShowArr);!(t=(n=l.next()).done);t=!0){n.value;this.props.isDisabledHoldItem("answer",!0)}}catch(e){a=!0,o=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw o}}}},{key:"handlerMsglistQuestionShow",value:function(e){this.props.isDisabledHoldItem("answer",!0)}},{key:"answerAssemblyShowHandel",value:function(e){u.default.sendQuestion(!1,{action:"open"}),c.default.CoreController.dispatchEvent({type:"handleAnswerShow",className:"answer-implement-bg",isShow:!0}),this.props.isDisabledHoldItem("answer",!0),this.props.close()}},{key:"render",value:function(){return d.default.createElement("li",{className:"holdAllitem "+(this.props.isDisabled?" disabled":"")},d.default.createElement("div",{onClick:this.answerAssemblyShowHandel.bind(this)},d.default.createElement("em",{className:"icon "+this.props.bgName}),d.default.createElement("span",null,this.props.name)))}}]),t}(d.default.Component);m=(0,f.default)(m),t.default=m},EfqC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=y(a("sk9p")),o=y(a("oF3Q")),n=y(a("Yz+Y")),l=y(a("iCc5")),s=y(a("V7oC")),r=y(a("FYw3")),d=y(a("mRg0")),u=y(a("q1tI")),c=y(a("HPAy")),f=y(a("eQYT")),h=y(a("mrNk")),m=y(a("Qxvg")),p=y(a("1Ea7")),g=y(a("aJKe")),v=(y(a("JL1q")),y(a("1Nl6")));function y(e){return e&&e.__esModule?e:{default:e}}var S=function(e){function t(e){(0,l.default)(this,t);var a=(0,r.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){g.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){g.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerRoomPubmsg",value:function(e){switch(e.message.name){case"doubleClickVideo":m.default.stopAllMediaShare()}}},{key:"handleMovieShareClick",value:function(){var e=(0,o.default)(h.default.getTkRoom().getUsers()),t=e.filter(function(e){var t=(0,i.default)(e,2);t[0];return t[1].publishstate>0}),a=e.filter(function(e){var t=(0,i.default)(e,2),a=(t[0],t[1]);return a.publishstate>0&&(a.role===f.default.role.roleStudent||a.role===f.default.role.roleTeachingAssistant)});(t.length>=f.default.joinRoomInfo.maxvideo||a.length>=f.default.joinRoomInfo.maxvideo-1)&&(f.default.hasRole.roleStudent||f.default.hasRole.roleTeachingAssistant)?p.default.showPrompt(""):c.default.isClient&&(c.default.isMovieSharePlay=!0,c.default.movieShareStatus=!0,h.default.getNativeInterface().getOpenFileName({caption:"Media File Selector",filter:{"Media File":"*.mp4;*.3gp;*.avi;*.flv;*.mkv;*.mov;*.mpg;*.rmvb;*.vob;*.wmv"}},function(e){"Complete"===e.action&&(m.default.stopAllMediaShare(),h.default.getNativeInterface().startShareMediaFile(e.filename,void 0,void 0,{IgnoreElementId:!0,attrs:{pauseWhenOver:f.default.joinRoomInfo.pauseWhenOver}}))})),this.props.close()}},{key:"render",value:function(){return u.default.createElement("li",{className:"holdAllitem "+(this.props.isDisabled?" disabled":"")},u.default.createElement("div",{onClick:this.handleMovieShareClick.bind(this)},u.default.createElement("em",{className:"icon "+this.props.bgName}),u.default.createElement("span",null,this.props.name)))}}]),t}(u.default.Component);S=(0,v.default)(S),t.default=S},Enau:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(a("Yz+Y")),o=u(a("iCc5")),n=u(a("V7oC")),l=u(a("FYw3")),s=u(a("mRg0")),r=u(a("q1tI")),d=u(a("HPAy"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props.buttonClick;return r.default.createElement("button",{title:d.default.language.languageData.toolContainer.toolIcon.seekHelp.title,className:"Tk-header-icon icon-help",onClick:e})}}]),t}(r.default.Component);t.default=c},EtRj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={login:{language:{joinRoomHint:{text:"",remind:""},preLoad:{text:"",pass:""},detection:{company:{text:"",normal:"",icoachu:""},selectOption:{noCam:"",noMicrophone:"",noEarphones:""},welAll:{one:"",two:"",three:" , ",four:""},deviceTestHeader:{device:{text:""},areaSwitch:{text:""},deviceSwitch:{text:""},optimalServer:{text:""},areaSelection:{text:""},videoinput:{text:""},audioouput:{text:""},audioinput:{text:""},detectionResult:{text:""},changeScreen:{text:""},MainMinorChange:{text:""},systemInfo:{text:""}},networkExtend:{title:{select:"",area:"",delay:"",text:""},testBtn:""},videoinputExtend:{cameraOptionAll:{cameraOption:{text:""},noticeRed:{text:""}},noticeCarmera:{one:":",two:"1.360",three:"2.",four:"3.",five:"4.",six:"5.",seven:"6."}},audioouputExtend:{cameraOptionAll:{cameraOption:{text:""},earphoneVolume:{text:""},clickmusic:{one:""},playMusic:""},noticeCarmera:{one:":",two:"1.360",three:"2.",four:"3.",five:"4.",six:"5.",seven:"6."}},audioinputExtend:{cameraOptionAll:{cameraOption:{text:""},noticeRed:{text:""},speakSound:{text:"110"}},noticeCarmera:{one:":",two:"1.360",three:"2.",four:"3.",five:"4.",six:"5.",seven:"6."}},systemInfo:{currentUser:"",operatingSystem:"",processor:"",RAM:"",serverName:"",IPAddress:"IP",LoginDevice:"",MediaServer:"",CoursewareServer:"",networkDelay:"",packetLoss:"",browser:"",uploadSpeed:"",downloadSpeed:"",roomNumber:"ID",versionNumber:""},CoursewareServer:{TkServer:"",DocServer:""},resultExtend:{head:{text:""},item1:{text:""},item2:{text:"",content:{abnormal:"",normal:""}},item3:{text:"",content:{video:"",listen:"",speak:""}},item4:{content:{video:"",listen:"",speak:""}}},button:{next:{text:""},join:{text:""},ok:{text:""},startNetworkTest:{text:""},canSee:{text:""},notSee:{text:""},canListen:{text:""},notListen:{text:""},canSpeak:{text:""},notSpeak:{text:""},checkBack:{text:""},joinRoom:{text:""}},mirrorMode:{text:""}}}},header:{tool:{allMute:{title:{yes:"",no:""}},capture:{title:{all:"",small:""}},qrCode:{title:{yes:""}},allGift:{title:{yes:"",giftText:""}},blackBoard:{title:{open:"",close:"",prev:"",next:"",shrink:""},content:{blackboardHeadTitle:""},toolBtn:{dispenseed:"",recycle:"",againDispenseed:"",commonTeacher:""},tip:{saveImage:""},boardTool:{pen:"",text:"",eraser:"",color:""},upload:{localUpload:"",scanCodeUpload:""}},sharing:{title:""},mouse:{title:""},pencil:{title:"",pen:{text:""},Highlighter:{text:""},linellae:{text:""},arrow:{text:""},laser:{title:"",text:""}},text:{title:"",Msyh:{text:""},Ming:{text:""},Arial:{text:"Arial"}},shape:{title:"",outlinedRectangle:{text:""},filledRectangle:{text:""},outlinedCircle:{text:""},filledCircle:{text:""}},eraser:{title:""},undo:{title:""},redo:{title:""},clear:{title:""},tool_zoom_big:{title:""},tool_zoom_small:{title:""},VideoCapture:{title:""}},page:{prev:{text:""},next:{text:""},add:{text:""},lcFullBtn:{title:""},pptFullBtn:{title:"PPT"},h5FileFullBtn:{title:"h5"},skipPage:{text_one:"",text_two:""},ok:{text:""},coursewareRemarks:{title:""}},system:{attend:{text:""},oneToOneFinsh:{text:""},Raise:{hashand:"   ",text:" ",noText:"",yesText:"",raisingHand:""},finish:{text:""},gift:{text:""},muteAll:{text:""},help:{title:""},network:{title:"",extend:{ChinaTelecom:"China Telecom",ChinaUnicom:"China Unicom",ChinaMobile:"China Mobile",InternationalNetwork:"International Network",ChinaSouthernTelecom:"China Southern Telecom"}},setting:{title:""}},volume:{title:""}},toolContainer:{toolIcon:{whiteBoard:{title:""},courseList:{title:""},classFolder:{title:""},adminFolders:{title:""},documentList:{title:"",titleTop:"",titleSort:"",button:{addCourse:{text:" + "},fileName:{text:""},fileType:{text:""},uploadTime:{text:""},search:{name:"",text:""},close:{text:""}}},H5DocumentList:{title:"",titleTop:"",button:{addCourse:{text:" + H5"}}},relationCourse:{title:"",button:{addCourse:{text:" + "},pervPage:"",nextPage:"",relation:"",loadMore:""}},mediaDocumentList:{title:"",titleTop:"",button:{addCourse:{text:" + "}}},moviesSharing:{title:""},resourceLibrary:{title:""},message:{title:""},full:{title:""},fullOff:{title:""},overallControl:{title:""},screenSharing:{title:""},messageList:{title:""},addDocument:{title:""},userList:{title:"",thead:{facility:"",nick:"",platform:"",camera:"",microphone:"",draw:"",raise:"",mute:"",remove:""},button:{Scrawl:{on:{title:""},off:{title:""}},answered:{on:{title:""},off:{title:""}},video:{on:{title:""},off:{title:""},disabled:{title:""}},update:{up:{title:""},down:{title:""}},audio:{on:{title:""},off:{title:""},disabled:{title:""}},mute:{on:{title:""},off:{title:""},patrol:{on:{title:""},off:{title:""}}},remove:{title:""}},input:{text:""},userStatus:{assistant:{text:""},student:{text:""}},groupModeStatus:{groupMode:{text:""},normalMode:{text:""}}},disableVideo:{yes:"",no:""},disableAudio:{yes:"",no:""},setting:{title:""},help:{title:""},guide:{title:""},seekHelp:{title:""},FileConversion:{text:""}}},videoContainer:{videoIcon:{camera:{title:""},microphone:{title:""}},sendMsg:{inputText:{placeholder:"",patrolPlaceholder:"",frequently:""},btn:{title:{banChat:"",allChat:"",sendImg:"",sendEmotion:""}},repeatSpeak:{text:""},sendBtn:{text:"",title:""},tap:{chat:"",question:"",users:"",doc:"",refresh:""},tips:{online:"",goback:"",pics:"",private:"TA",teacher:"",assistant:"",student:"",patrol:"",me:"",join:"",leave:"",beforeClass:"",afterClass:"",whiteBoard:"",openAllBans:"",closeAllBans:""},filter:{quizobj:"",seeQuiz:"",seeChat:"",seeAnswer:""},fontSize:{fontSize14:"",fontSize16:"",fontSize18:"",fontSize22:""}},download:{downloadFile:{title:""},downloadFailMessage:{title:""}}},otherVideoContainer:{videoIcon:{microphone:{title:""},userPen:{title:""}},button:{scrawl:{yes:"",no:""},platform:{yes:"",no:""},audio:{yes:"",no:""},video:{yes:"",no:""},gift:{yes:"",no:""},close:{yes:""},restoreDrag:{text:""},allMute:{yes:""},videoStatusChairman:{yes:"",no:"",text:""},audioStatusChairman:{yes:"",no:"",text:""},areaExchange:{text:""},doubleDivision:{text:""},oneKeyReset:{text:""},onlyAudio:{no:"",yes:"",create:"",cancel:""},pointerReminder:{text:""}},prompt:{text:"home",userText:"home"}},alertWin:{login:{register:{eventListener:{roomDelClassBegin:{text:""},participantEvicted:{roleConflict:{text:""},kick:{text:""},noJoin:{text:","}}}},func:{checkMeeting:{status_minus_1:{text:""},status_3001:{text:""},status_3002:{text:""},status_3003:{text:""},status_4007:{text:""},status_4008:{text:""},status_4110:{text:""},status_4109:{text:""},status_4103:{text:""},status_4112:{text:""},status_4113:{text:""},status_defalut:{text:""}}}},call:{prompt:{chat:{literally:{yes:{text:""},no:{text:""}}},publishStatus:{stream:{yes_status_3:{text:""},no_status_0:{text:""},yes_status_0_to_2:{text:","},yes_status_3_to_2:{text:""},videooff:{text:""},audiooff:{text:""},audioon:{text:""},videoon:{text:""},allon:{text:""},alloff:{text:""},speakoff:{text:""},speakon:{text:""}},download:{success:{text:""},failed:{text:""}},allMute:{yes:{text:""},no:{text:""}}},joinRoom:{stream:{join:{text:""},leave:{text:""}}},allSilence:{yes:{text:""},no:{text:""}},homeBtnRemind:{join:{text:""},leave:{text:""},userBackgroundMode:{text:""}},streamConnectFailed:{onceSuccessed:{text:""},notSuccess:{text:"udpudp"}},remoteStreamFailure:{udpNotOnceSuccess:{one:"",two:"UDP"},udpMidwayDisconnected:{one:"",two:"UDP"},publishvideoFailure_notOverrun:{one:"",two:""},publishvideoFailure_overrun:{one:""},mobileHome:{one:"",two:""}}},fun:{uploadCourseFile:{fileTypeError:{text:{one:"'.",two:"'"}},fileSizeError:{text:{one:""}},fileUpload:{success:{text:"'"},failureCode:{text:""},failureNegativeOne:{text:""},failureNegativeTwo:{text:""},failureNegativeThree:{text:""},failureNegativeFour:{text:""},failureNegativeSeven:{text:""},failureNegativeEight:{text:""},failureNegativeTen:{text:""},failureFhree:{text:""},failureFour:{text:"index.html"}}},deleteCourseFile:{fileDelete:{failure:{text:""}},isDel:""},page:{pageInteger:{text:""},pageMax:{text:""},pageMin:{text:"1"}},UnreadMessage:{text:""}}},ok:{showError:{text:""},showPrompt:{text:""},showConfirm:{cancel:"",ok:""}},title:{showError:{text:""},showPrompt:{text:""},showConfirm:{text:""}},settingWin:{settingTitle:{text:""},default:{text:""},communications:{text:""},settingOk:{text:""},settingClose:{text:""},videoInput:{text:""},audioInput:{text:""},audioOutput:{text:""}},messageWin:{title:{closeWindow:{text:""},classBeginEnd:{text:""},allGift:{text:""}},winMessageText:{closeWindow:{ok:{text:""}},classBeginEnd:{text:""},removeStudent:{text:""},classBeginEndLocalRecord:{text:""},classBeginStartNotSelectRecord:{text:""},aloneGift:{before:"",after:""},allGift:{one:"",two:"",three:""}},messageOk:{text:""},messageClose:{text:""}}},remind:{time:{readyStart:{one:"",two:""},timeoutStart:{one:"",two:""},endNotBegin:{one:""},readyEnd:{one:"",two:"~"},timeoutReadyEnd:{one:"",two:"",three:""},timeoutEnd:{one:" (",two:")"},endBegin:{one:""},readyEndAiBanMa:{one:",",two:",",three:"",four:""}},button:{remindKnow:{text:""},raise:{yes:"",no:""}},raise:{content:{text:""}}},networkStatus:{rtt:{title:{text:""}},packetsLost:{title:{text:""}},network:{title:{text:""},value:{excellent:"",well:"",general:"",suck:""}}},toolCase:{toolBox:{text:""}},qrCode:{scan:{text:""},attention:{text:""}},timers:{timerSetInterval:{text:""},timerBegin:{text:""},timerStop:{text:""},again:{text:""},startNowBtn:{text:""}},dial:{turntable:{text:""}},answers:{headerTopLeft:{text:""},headerMiddel:{text:""},beginAnswer:{text:""},tureAccuracy:{text:""},add:{text:""},reduce:{text:""},people:{text:""},trueAnswer:{text:""},endAnswer:{text:""},restarting:{text:""},myAnswer:{text:""},changeAnswer:{text:""},selectAnswer:{text:""},submitAnswer:{text:""},numberOfAnswer:{text:""},PublishTheAnswer:{text:""},published:{text:""},details:{text:""},statistics:{text:""},student:{text:""},TheSelectedTheAnswer:{text:""},AnswerTime:{text:""},end:{text:""},selectedAnswer:{text:""}},responder:{responder:{text:""},begin:{text:""},restart:{text:""},clickTitle:{text:""},somebodyTeacher:{text:""},my:{text:""},other:{text:""},inAnswerTitle:{text:"..."},inAnswerBtn:{text:""},inAnswerStudent:{text:""},noContest:{text:""},noStart:{text:""}},shares:{shareSceen:{text:""},stopShare:{text:""},shareing:{text0:"......",text1:"......",text2:"......"},sharingMode:{text:""},programmShare:{text:""},shareArea:{text:""},startSharing:{text:""},selectProgramm:{text:""},programmShareArea:{text:"* "},screenWidthTip:{text:"1080P"}},layoutInfo:{layout:"",CoursewareDown:"",VideoDown:"",Encompassment:"",Bilateral:"",MainPeople:"",OnlyVideo:"",oneToOne:"",doubleDivision:"",doubleVideo:"",synStudent:""},phoneBroadcast:{chat:{face:{naughty:"",happy:"",complacent:"",curlOnesLips:"",grieved:"",shedTears:"",kiss:"",love:""}}},getUserMedia:{accessAccepted:{getUserMediaFailure_reGetAudio:"",getUserMediaFailure_reGetVideo:""},accessDenied:{streamFail:"/",notAudioAndVideo:"/"},deviceError:""},version:{clientDeviceVersionInfo:{key:"",client:"",pc:"PC",mobile:""},browserVersionInfo:{webpageApp:"",mobileApp:""},appVersionInfo:{key:""},ipInfo:{key:"IP"}},notice:{content:"",href:"",publish:"",cancel:""},loadSupernatantPrompt:{reconnecting:"",loadRooming:"",loadRoomingPlayback:"",refreshing:""},remoteControl:{remoteTitle:"",refresh:"",deviceManagement:"",optimalServer:"",kick:"",getDocAddress:"",line1:"",line2:""},localRecord:{recordState:{notStart:"",recording:"",recordPaused:""},title:{startRecord:"",stopRecord:"",pauseRecord:"",playRecord:""}},coursewareRemarks:{remarks:"",close:""},videLabel:{exit:""},captureImg:{StartUploading:"",UploadSuccess:"",uploadFailed:"",SaveSuccess:" "},moreUser:{text:""},reloadDoucumentHint:{one:"",two:""},qPanel:{answerPanel:"",tips:["",""],addOption:"",delOption:"",start:"",end:"",restart:"",rightOptionIs:"",hasPub:"",answerNum:"",people:"",commitAnswer:"",modifyAnswer:"",detail:"",statistics:"",useTime:"",choseAnswer:"",myAnswer:"",pubResult:"",loading:""},whiteboardSetSize:{lineWidth:"",eraserWidth:"",textWidth:""},fontSize:{number:""}}},F8X7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=c(a("Yz+Y")),o=c(a("iCc5")),n=c(a("V7oC")),l=c(a("FYw3")),s=c(a("mRg0")),r=c(a("q1tI")),d=c(a("HPAy")),u=c(a("aJKe"));c(a("3mpg"));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={show:!1},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){u.default.CoreController.addEventListener("welcomeDetectionDevice",this.handlerWelcomeDetectionDevice.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){u.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerWelcomeDetectionDevice",value:function(e){this.setState({show:!0})}},{key:"startDetectionOnClick",value:function(e){this.setState({show:!1}),u.default.CoreController.dispatchEvent({type:"mainDetectionDevice"})}},{key:"render",value:function(){var e=this.state.show;return r.default.createElement("article",{className:"startdetection-container",style:{display:e?"block":"none"}},r.default.createElement("div",{className:"wel-all"},r.default.createElement("p",{className:"welcome-to-use"},d.default.language.languageData.login.language.detection.welAll.one,d.default.language.languageData.login.language.detection.welAll.two," "),r.default.createElement("p",{className:"ensure"},d.default.language.languageData.login.language.detection.welAll.three)),r.default.createElement("button",{className:"start-detection add-cursor-pointer",onClick:this.startDetectionOnClick.bind(this),id:"start-detection"},d.default.language.languageData.login.language.detection.welAll.four))}}]),t}(r.default.Component);t.default=f},FH86:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=g(a("sk9p")),o=g(a("oF3Q")),n=g(a("gDS+")),l=g(a("Yz+Y")),s=g(a("iCc5")),r=g(a("V7oC")),d=g(a("FYw3")),u=g(a("mRg0")),c=g(a("q1tI")),f=g(a("HPAy")),h=g(a("oHfo")),m=g(a("aJKe")),p=g(a("mrNk"));function g(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){(0,s.default)(this,t);var e=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this));return e.state={streams:[]},e.listernerBackupid=(new Date).getTime()+"_"+Math.random(),e}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){m.default.CoreController.addEventListener(TkConstant.EVENTTYPE.RoomEvent.roomUseraudiostateChanged,this._controlRemoteStreamFlag.bind(this,"Video"),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){m.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"_controlRemoteStreamFlag",value:function(e,t){var a=t.message,i=JSON.parse((0,n.default)(this.state.streams)),o=i.findIndex(function(e){return e.userId===a.userId});"video"===a.type&&(a.published?-1===o&&i.push({userId:a.userId}):a.published||-1===o||(i=i.filter(function(e,t){return o!==t})),this.setState({streams:i}))}},{key:"render",value:function(){var e=this.props,t=e.buttonClick,a=e.layoutActive,n=(this.state.streams,f.default.systemStyleJson.HeaderVesselSmartStyleJson),l=void 0===n?{}:n,s="calc("+window.innerHeight+"px - "+l.height+")";return c.default.createElement("div",null,c.default.createElement("div",{className:"Tk-header-icon icon-switchLayout "+(a?"active":"")+" ",onClick:t,title:f.default.language.languageData.layoutInfo.layout},c.default.createElement(h.default,{streamLen:(0,o.default)(p.default.getTkRoom().getUsers()).filter(function(e){var t=(0,i.default)(e,2);t[0];return t[1].publishstate>0}).length}),"   "),c.default.createElement("div",{className:"mask2",onClick:t,style:{display:a?"block":"none",height:s}}))}}]),t}(c.default.Component);t.default=v},FYSC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={isFunction:function(e){return!(!e||"[object Function]"!=={}.toString.call(e))},isArray:function(e){return Array.isArray?!!Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},compose:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}};t.default=i},Fv6x:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=p(a("Yz+Y")),o=p(a("iCc5")),n=p(a("V7oC")),l=p(a("FYw3")),s=p(a("mRg0")),r=p(a("q1tI")),d=p(a("JL1q")),u=p(a("uuqz")),c=p(a("HPAy")),f=p(a("aJKe")),h=p(a("mrNk")),m=p(a("eQYT"));function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.programmShare=!1,a.programmArray=[],a.selectProgramm=void 0,a.state={shareType:a.props.shareType,liveStreamState:void 0},a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentWillUnmount",value:function(){this.props.isPlayFlag&&this.props.stream&&this.props.stream.extensionId&&h.default.getTkRoom().unplayRemoteScreen(this.props.stream.extensionId),f.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"componentDidMount",value:function(){this.props.isPlayFlag&&this.props.stream&&this.props.stream.extensionId&&h.default.getTkRoom().playRemoteScreen(this.props.stream.extensionId,"screen"+this.props.stream.extensionId,{loader:!0}),f.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.closeEmpowerCancelShare.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid)}},{key:"stopScreenShare",value:function(){this.props.unScreenSharing()}},{key:"closeEmpowerCancelShare",value:function(e){var t=e.user;if(!1===e.message.candraw&&t.id===h.default.getTkRoom().getMySelf().id&&this.props.isMe&&this.props.isPlayFlag){this.props.unScreenSharing()}}},{key:"handleShareStreamEnd",value:function(){this.setState({liveStreamState:!1})}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"LiveShareStream":this.handleShareStreamEnd();break;case"ClassBegin":if(this.state.liveStreamState)break}}},{key:"handlerRoomPubmsg",value:function(e){var t=h.default.getTkRoom().getMySelf(),a=e.message;switch(a.name){case"OnlyAudioRoom":this.stopScreenShare();break;case"LiveShareStream":this.handleShareStreamStart(),t.role,m.default.role.roleChairman,this.selectProgramm=parseInt(a.data.selectProgramm);break;case"doubleClickVideo":a.data.isScreen&&this.stopScreenShare()}}},{key:"handlerOnDoubleClick",value:function(e){if(d.default.handler.getAppPermissions("dblclickDeviceVideoFullScreenRight")){var t=this.refs.destTopPlayer;t&&(u.default.tool.isFullScreenStatus(t)?u.default.tool.exitFullscreen(t):u.default.tool.launchFullscreen(t))}}},{key:"_loadComponent",value:function(e){var t=void 0;h.default.getTkRoom().getMySelf();if(e){c.default.language.languageData.shares.shareing.text2;if(this.props.shareType||0===this.props.shareType)switch(this.props.shareType){case 0:c.default.language.languageData.shares.shareing.text0;break;case 1:c.default.language.languageData.shares.shareing.text1;break;case 2:c.default.language.languageData.shares.shareing.text2}t=r.default.createElement("div",{className:"screen-share-"+(this.props.isPlayFlag?"all":"unall")+" screen-share-wrap"},r.default.createElement("div",{className:"screen-share-wrap-box"},r.default.createElement("div",{className:"screen-share-wrap-bg"}),r.default.createElement("select",{ref:"programmShareSelect",className:"programm-share-select-stop",style:{display:0===this.props.shareType?"block":"none"}}),r.default.createElement("button",{className:"screen-share-wrap_button",onClick:this.stopScreenShare.bind(this)},c.default.language.languageData.shares.stopShare.text)))}else t=r.default.createElement("div",{ref:"destTopPlayer",className:"screen-share-"+(this.props.isPlayFlag?"all":"unall"),id:void 0!==this.props.stream?"screen"+this.props.stream.extensionId:"",onDoubleClick:this.handlerOnDoubleClick.bind(this)});return{destTopComponents:t}}},{key:"render",value:function(){var e=this.props.isMe,t=this._loadComponent(e).destTopComponents;return r.default.createElement("div",{className:"add-fl clear-float tool-and-literally-wrap add-position-relative ",id:"screenStreamContainer"},t)}}]),t}(r.default.Component);t.default=g},Fveh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(a("Yz+Y")),o=u(a("iCc5")),n=u(a("V7oC")),l=u(a("FYw3")),s=u(a("mRg0")),r=u(a("q1tI")),d=u(a("siax"));function u(e){return e&&e.__esModule?e:{default:e}}a("k7z5");var c=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={updateState:!1},a.isSlidering=!1,a.changeValue=void 0,a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"onChange",value:function(e){this.isSlidering&&(this.changeValue=e,this.setState({updateState:!this.state.updateState})),this.props.onChange&&"function"==typeof this.props.onChange&&this.props.onChange(e)}},{key:"onBeforeChange",value:function(e){this.isSlidering=!0,this.changeValue=e,this.props.onBeforeChange&&"function"==typeof this.props.onBeforeChange&&this.props.onBeforeChange(e)}},{key:"onAfterChange",value:function(e){this.isSlidering=!1,this.changeValue=void 0,this.props.onAfterChange&&"function"==typeof this.props.onAfterChange&&this.props.onAfterChange(e)}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.disabled,i=e.vertical,o=e.style;return r.default.createElement(d.default,{style:o,vertical:i,className:t,disabled:a,value:void 0!==this.changeValue?this.changeValue:this.props.value,onChange:this.onChange.bind(this),onBeforeChange:this.onBeforeChange.bind(this),onAfterChange:this.onAfterChange.bind(this)})}}]),t}(r.default.Component);t.default=c},FzLZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(a("Yz+Y")),o=u(a("iCc5")),n=u(a("V7oC")),l=u(a("FYw3")),s=u(a("mRg0")),r=u(a("q1tI")),d=(u(a("XbJA")),u(a("aJKe")),u(a("JL1q")),u(a("1Nl6")));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"allCpatureClick",value:function(){this.props.takeSnapshot({isHideClassroom:!1}),this.props.close()}},{key:"render",value:function(){return r.default.createElement("li",{className:"holdAllitem "+(this.props.isDisabled?" disabled":"")},r.default.createElement("div",{onClick:this.allCpatureClick.bind(this)},r.default.createElement("em",{className:"icon "+this.props.bgName}),r.default.createElement("span",null,this.props.name)))}}]),t}(r.default.Component);c=(0,d.default)(c),t.default=c},GCUw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=v(a("Yz+Y")),n=v(a("iCc5")),l=v(a("V7oC")),s=v(a("FYw3")),r=v(a("mRg0")),d=v(a("q1tI")),u=v(a("CTxj")),c=v(a("HZbN")),f=v(a("mrNk")),h=v(a("HPAy")),m=a("okNM"),p=v(a("YF9X")),g=v(a("eQYT"));function v(e){return e&&e.__esModule?e:{default:e}}var y=(0,m.inject)("userListStatusStore")(i=(0,m.observer)(i=function(e){function t(e){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,r.default)(t,e),(0,l.default)(t,[{key:"onClickDeviceIcon",value:function(e,t,a,i,o){var n=this.props,l=n.userListStatusStore,s=n.itemLen;if(t){e===l.nowOperationUserId?l.setNowOperationUserId(""):l.setNowOperationUserId(e);var r=o.target;this.operationList=r.getElementsByClassName("user-extend-list")[0],this.operationList&&this.operationList.getBoundingClientRect&&(0===a?(this.operationList.style.top="0",this.operationList.style.transform="translate(0%)"):1===a?this.operationList.style.top="110%":a===s-2&&(this.operationList.style.top="0"))}return o&&(o.preventDefault(),o.stopPropagation()),!1}},{key:"onMouseLeaveDeviceIcon",value:function(){this.props.userListStatusStore.setNowOperationUserId("")}},{key:"render",value:function(){var e=this.props,t=e.value,a=e.index,i=e.userListStatusStore,o=e.type,n=(e.end,t=t||{}),l=n.nickname,s=n.devicetype,r=n.id,m=n.codeVersion,v=p.default.deviceTypeClassNameInfo(s),y=g.default.hasRole.roleTeachingAssistant&&r!==f.default.getTkRoom().getMySelf().id;return d.default.createElement("li",{disabled:g.default.hasRole.rolePatrol,key:a,className:"tk-list-item user-container user-list-li-"+a+" "+("default"===o?"li-padding-left":""),id:"user_"+r},d.default.createElement("div",{className:"icon-device "+v+(y?"":" disabled"),onClick:this.onClickDeviceIcon.bind(this,r,y,a,m),onMouseLeave:this.onMouseLeaveDeviceIcon.bind(this)},y?d.default.createElement(c.default,{id:r,user:t}):null),d.default.createElement("span",{title:l,className:"tk-listitem-context user-name add-fl add-nowrap"},l),i.oversizeAllUserId.indexOf(r)>-1?d.default.createElement("span",{className:"beyond-max-video"}," ",h.default.language.languageData.alertWin.call.prompt.remoteStreamFailure.publishvideoFailure_overrun.one," "):null,!g.default.hasRole.rolePatrol&&d.default.createElement(u.default,{user:t,index:a,type:o}))}}]),t}(d.default.Component))||i)||i;t.default=y},GIAE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.videoService1v1=void 0;var i,o,n,l,s,r,d,u,c,f,h=D(a("SEkw")),m=D(a("JO7F")),p=D(a("P2sY")),g=D(a("EJiy")),v=D(a("sk9p")),y=D(a("oF3Q")),S=D(a("Yz+Y")),b=D(a("iCc5")),C=D(a("V7oC")),k=D(a("FYw3")),w=D(a("mRg0")),T=a("2vnA"),E=D(a("LSTa")),I=D(a("3UvJ"));function D(e){return e&&e.__esModule?e:{default:e}}function x(e,t,a,i){a&&(0,h.default)(e,t,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(i):void 0})}function R(e,t,a,i,o){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),o&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(o):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}var _=new(i=function(e){function t(){var e,a,i,h;(0,b.default)(this,t);for(var m=arguments.length,p=Array(m),g=0;g<m;g++)p[g]=arguments[g];return a=i=(0,k.default)(this,(e=t.__proto__||(0,S.default)(t)).call.apply(e,[this].concat(p))),x(i,"streams1v1",o,i),x(i,"pictureInPictureClassnameFromTeacherStream",n,i),x(i,"pictureInPictureClassnameFromStudentStream",l,i),x(i,"isHasCloseBtn",s,i),x(i,"isVideoSCreen",r,i),x(i,"whoIsBigVideo",d,i),x(i,"isSignallingScreen",u,i),x(i,"foregroundpicUrl",c,i),x(i,"userChangedMsg",f,i),h=a,(0,k.default)(i,h)}return(0,w.default)(t,e),(0,C.default)(t,[{key:"setStreams",value:function(e){var t=this;(0,y.default)(e).forEach(function(e){var a=(0,v.default)(e,2),i=a[0],o=a[1],n={};void 0===o?n={}:o&&"object"===(void 0===o?"undefined":(0,g.default)(o))&&(n=o),t.streams1v1[i]=(0,p.default)({},n)})}},{key:"setStateData",value:function(e){var t=this;(0,y.default)(e).forEach(function(e){var a=(0,v.default)(e,2),i=a[0],o=a[1];t[i]=o})}},{key:"updateChangedMsg",value:function(e){this.userChangedMsg=e}}]),t}(E.default),o=R(i.prototype,"streams1v1",[T.observable],{enumerable:!0,initializer:function(){return{}}}),n=R(i.prototype,"pictureInPictureClassnameFromTeacherStream",[T.observable],{enumerable:!0,initializer:function(){}}),l=R(i.prototype,"pictureInPictureClassnameFromStudentStream",[T.observable],{enumerable:!0,initializer:function(){}}),s=R(i.prototype,"isHasCloseBtn",[T.observable],{enumerable:!0,initializer:function(){return!1}}),r=R(i.prototype,"isVideoSCreen",[T.observable],{enumerable:!0,initializer:function(){return!1}}),d=R(i.prototype,"whoIsBigVideo",[T.observable],{enumerable:!0,initializer:function(){}}),u=R(i.prototype,"isSignallingScreen",[T.observable],{enumerable:!0,initializer:function(){return!1}}),c=R(i.prototype,"foregroundpicUrl",[T.observable],{enumerable:!0,initializer:function(){}}),f=R(i.prototype,"userChangedMsg",[T.observable],{enumerable:!0,initializer:function(){return{}}}),R(i.prototype,"setStreams",[T.action],(0,m.default)(i.prototype,"setStreams"),i.prototype),R(i.prototype,"setStateData",[T.action],(0,m.default)(i.prototype,"setStateData"),i.prototype),R(i.prototype,"updateChangedMsg",[T.action],(0,m.default)(i.prototype,"updateChangedMsg"),i.prototype),i);t.videoService1v1=new I.default(_);t.default=_},GXiF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(a("Yz+Y")),o=d(a("iCc5")),n=d(a("V7oC")),l=d(a("FYw3")),s=d(a("mRg0")),r=d(a("q1tI"));function d(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=null;switch(this.props.file.filetype){case"png":case"jpeg":case"bmp":case"gif":case"jpg":e="png";break;case"whiteboard":e="whiteboard";break;case"pptx":case"ppt":e="pptx";break;case"word":case"doc":case"docx":e="word";break;case"html":e="html";break;case"pdf":e="pdf";break;case"excle":e="excle";break;case"txt":e="txt";break;case"zip":e="zip";break;case"mp3":e="mp3";break;case"mp4":e="mp4";break;default:e=void 0}return r.default.createElement(r.default.Fragment,null,r.default.createElement("span",{onClick:this.props.openDocuemnt.bind(this,this.props.file),className:"fileListIcon "+e}),r.default.createElement("span",{onClick:this.props.openDocuemnt.bind(this,this.props.file),className:"fileListTest"},this.props.file.filename))}}]),t}(r.default.Component);t.default=u},GZZl:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=W(a("YEIV")),o=W(a("/f1G")),n=W(a("FyfS")),l=W(a("GQeE")),s=W(a("Yz+Y")),r=W(a("iCc5")),d=W(a("V7oC")),u=W(a("FYw3")),c=W(a("mRg0")),f=W(a("q1tI")),h=W(a("sZWH")),m=a("P9b8"),p=W(a("aJKe")),g=W(a("HPAy")),v=W(a("uuqz")),y=W(a("mrNk")),S=W(a("XbJA")),b=W(a("eQYT")),C=W(a("JL1q")),k=W(a("76iB")),w=W(a("HFXx")),T=W(a("JqG7")),E=W(a("Z2dm")),I=W(a("KUns")),D=W(a("tZp5")),x=W(a("4M0Q")),R=W(a("z3Fu")),_=W(a("bJkr")),P=W(a("1CIW")),A=W(a("zS2F")),B=W(a("K49K")),M=W(a("12+s")),N=W(a("Kaxb")),O=W(a("NTrz")),F=W(a("Y0V4")),V=W(a("VrUU")),U=W(a("VIZt")),H=W(a("iDD2")),j=W(a("v3i/"));function W(e){return e&&e.__esModule?e:{default:e}}var z=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.state={updateState:!1,isLoadIconShow:!0,coursewarePreload:!1,defaultFileInfo:{},layoutToChat:!0},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,c.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){g.default.playback=!1,g.default.routeName="call",$(document.body).removeClass("playback"),this._refreshHandler(),this.initDragData()}},{key:"componentDidMount",value:function(){var e=this;p.default.CoreController.addEventListener(b.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener("updateSystemStyleJson",this.handlerUpdateSystemStyleJson.bind(this)),p.default.CoreController.dispatchEvent({type:"loadSupernatantPrompt",message:{show:!0,content:g.default.language.languageData.loadSupernatantPrompt.loadRooming}}),p.default.CoreController.addEventListener("leave_room",this.handlerLeaveRoom.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener(b.default.EVENTTYPE.RoomEvent.roomDisconnected,this.handlerRoomDisconnected.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener(b.default.EVENTTYPE.RoomEvent.roomParticipantJoin,this.handlerRoomParticipantJoin.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener(b.default.EVENTTYPE.RoomEvent.roomParticipantLeave,this.handlerRoomParticipantLeave.bind(this),this.listernerBackupid),g.default.isClient&&(p.default.CoreController.addEventListener(b.default.EVENTTYPE.RoomEvent.roomFiles,this.handlerReceiveFileInfo.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener("coursewarePreloaded",function(){e.setState({coursewarePreload:!1})},this.listernerBackupid)),TK.DeviceMgrImpl.addEventListener(TK.EVENT_TYPE.deviceMgr,function(e){k.default.showError(g.default.language.languageData.getUserMedia.deviceError)},this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){p.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerRoomParticipantJoin",value:function(e){e&&e.user&&1!=+e.user.tk_version&&g.default.studentOnDuty.push(e.user.id)}},{key:"handlerRoomParticipantLeave",value:function(e){var t=e.user.id;e&&e.user&&1==+e.user.tk_version||(g.default.studentOnDuty=g.default.studentOnDuty.filter(function(e){return e!==t}))}},{key:"handlerRoomConnected",value:function(){this.setState({updateState:!this.state.updateState});var e=y.default.getTkRoom().getUsers();e&&(0,l.default)(e).map(function(t){e[t]&&1!=+e[t].tk_version&&g.default.studentOnDuty.push(t)})}},{key:"handlerUpdateSystemStyleJson",value:function(){this.setState({updateState:!this.state.updateState})}},{key:"handlerLeaveRoom",value:function(){this.setState({isLoadIconShow:!1})}},{key:"handlerRoomDisconnected",value:function(){this.setState({isLoadIconShow:!0})}},{key:"handlerReceiveFileInfo",value:function(e){var t=e.message;if(!g.default.isClient||this.state.defaultFileInfo.preloadingzip)return!1;if(!window.talk_window||!window.talk_window.preloadFile)return!1;var a=t.filter(function(e){return 1===parseInt(e.type)&&!!e.preloadingzip})[0];if(localStorage.removeItem("preloadFile"),!a)return!1;this.setState({defaultFileInfo:a,coursewarePreload:!0});var i=a.swfpath.split("/"),o=a.preloadingzip,n="h5.zip";[1,2].includes(Number(a.fileprop))&&(n="newppt.zip");var l=i.filter(function(e){return e&&!["index.html","newppt.html"].includes(e)}).reduce(function(e,t){return e?e+"/"+t:t});window.talk_window.preloadFile(o,n,l)}},{key:"handlerOkCallback",value:function(e){var t=(e||{}).selectDeviceInfo;if(TK.DeviceMgr.setDevices(t,function(){L.Logger.error("set devices failed")}),g.default.appConnected){TK.DeviceMgr.getDevices(function(e){var t={action:"deviceManagement",type:"sendDeviceInfo",deviceData:{deviceInfo:e}},a=!0,i=!1,l=void 0;try{for(var s,r=(0,n.default)((0,o.default)(v.default.getSpecifyRoleList(b.default.role.roleTeachingAssistant,y.default.getTkRoom().getUsers())));!(a=(s=r.next()).done);a=!0){var d=s.value;S.default.sendSignallingFromRemoteControl(d.id,t)}}catch(e){i=!0,l=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw l}}},{isSetlocalStorage:!1})}}},{key:"callAllWrapOnClick",value:function(e){p.default.CoreController.dispatchEvent({type:"callAllWrapOnClick",message:{event:e}})}},{key:"_refreshHandler",value:function(){if(!1!==g.default.isRenovate){g.default.isRenovate=!0;var e=v.default.getUrlParams("timestamp",window.location.href),t=L.Utils.sessionStorage.getItem(e);t&&(window.location.href=v.default.decrypt(t))}}},{key:"mouseLeave",value:function(e){(C.default.handler.getAppPermissions("isChangeVideoSize")||C.default.handler.getAppPermissions("canResizeCaptureImg")||C.default.handler.getAppPermissions("doubleDivision"))&&!0===g.default.isVideoStretch&&g.default.changeVideoSizeMouseUpEventName&&null!==g.default.changeVideoSizeMouseUpEventName&&p.default.CoreController.dispatchEvent({type:g.default.changeVideoSizeMouseUpEventName,message:{data:{event:e}}})}},{key:"mouseMove",value:function(e){(C.default.handler.getAppPermissions("isChangeVideoSize")||C.default.handler.getAppPermissions("canResizeCaptureImg"))&&g.default.changeVideoSizeEventName&&null!==g.default.changeVideoSizeEventName&&p.default.CoreController.dispatchEvent({type:g.default.changeVideoSizeEventName,message:{data:{event:e}}},!1)}},{key:"mouseUp",value:function(e){(C.default.handler.getAppPermissions("isChangeVideoSize")||C.default.handler.getAppPermissions("canResizeCaptureImg"))&&(e.persist(),g.default.changeVideoSizeMouseUpEventName&&null!==g.default.changeVideoSizeMouseUpEventName&&p.default.CoreController.dispatchEvent({type:g.default.changeVideoSizeMouseUpEventName,message:{data:{event:e}}}))}},{key:"initDragData",value:function(e){var t=this;[].map(function(e,a){t.state[e]={left:0,top:0,percentLeft:0,percentTop:0,isDrag:!1}}),e||["toolExtendContainer","userListSmart","holdAllBox","controlPanelMain","customTrophy","chatbox"].map(function(e,a){t.state[e]={left:0,top:0,percentLeft:0,percentTop:0,isDrag:!1}})}},{key:"onStartDrag",value:function(e,t){}},{key:"onStopDrag",value:function(e,t,a){var o=t.node.id;!o||""===o||this.state[o].left===t.x&&this.state[o].top===t.y||(this.state[o].left=t.x,this.state[o].top=t.y,this.state[o].isDrag=!0,Object.customAssign(this.state[o],a),this.setState((0,i.default)({},o,this.state[o])))}},{key:"changePosition",value:function(e,t,a){t&&e&&(Object.customAssign(this.state[e],t),this.setState((0,i.default)({},e,this.state[e])))}},{key:"changeLayerIsShow",value:function(e){p.default.CoreController.dispatchEvent({type:"changeLayerIsShow",data:{mainContentLayerIsShow:e}})}},{key:"render",value:function(){var e=this.state,t=e.coursewarePreload,a=e.defaultFileInfo,i=this.props.connectDropTarget,o=g.default.systemStyleJson,n=o.HeaderVesselSmartStyleJson,l=void 0===n?{}:n,s=o.RightVesselSmartStyleJson,r=void 0===s?{}:s,d=o.RightContentVesselSmartStyleJson,u=void 0===d?{}:d;C.default.handler.updateLoadModuleJson("LeftToolBarVesselSmart",!g.default.playback);var c={bounds:"pc"===TK.SDKTYPE?"#all_wrap":"#tk_app",onStartDrag:this.onStartDrag.bind(this),onStopDrag:this.onStopDrag.bind(this),changePosition:this.changePosition.bind(this),changeLayerIsShow:this.changeLayerIsShow.bind(this)};return i(f.default.createElement("section",{onMouseUp:this.mouseUp.bind(this),onMouseMove:this.mouseMove.bind(this),onMouseLeave:this.mouseLeave.bind(this),className:"add-position-relative",id:"room",style:{width:"100%",height:"100%"}},f.default.createElement("article",{className:"all-wrap clear-float",id:"all_wrap",onClick:this.callAllWrapOnClick.bind(this)},f.default.createElement(U.default,null),f.default.createElement(O.default,{styleJson:l}),"   ",f.default.createElement(R.default,null)," ",C.default.handler.getAppPermissions("loadUserlist")?f.default.createElement(P.default,{id:"userListSmart"}):null,f.default.createElement(V.default,null),f.default.createElement(B.default,{id:"chatbox",dragInfo:this.state.chatbox,draggableData:c}),f.default.createElement(A.default,{id:"customTrophy",customTrophyDrag:this.state.customTrophy,draggableData:c}),f.default.createElement(D.default,null),f.default.createElement(E.default,{isLoadIconShow:this.state.isLoadIconShow})," ",f.default.createElement(I.default,{isLoadIconShow:this.state.isLoadIconShow})," ",f.default.createElement(_.default,null),f.default.createElement(T.default,{isEnter:!1,clearFinsh:!0,handlerOkCallback:void 0,backgroundColor:"rgba(0,0,0,0.5)",okText:g.default.language.languageData.login.language.detection.button.ok.text,titleText:g.default.language.languageData.login.language.detection.deviceTestHeader.deviceSwitch.text,saveLocalStorage:!0}),b.default.hasRole.roleTeachingAssistant?f.default.createElement(M.default,null):null,f.default.createElement(w.default,{isEnter:!1,saveLocalStorage:!0,clearFinsh:!0,handlerOkCallback:this.handlerOkCallback.bind(this),backgroundColor:"rgba(0,0,0,0.5)",okText:g.default.language.languageData.login.language.detection.button.ok.text,titleText:g.default.language.languageData.login.language.detection.deviceTestHeader.deviceSwitch.text}),t&&f.default.createElement(N.default,{fileInfo:a}),b.default.hasRoomtype.oneToOne?f.default.createElement(x.default,{RightContentVesselSmartStyleJson:u,RightVesselSmartStyleJson:r}):b.default.joinRoomInfo.isStuHideOtherVideo&&b.default.hasRole.roleStudent?f.default.createElement(j.default,{RightContentVesselSmartStyleJson:u,RightVesselSmartStyleJson:r}):f.default.createElement(F.default,null))))}}]),t}(f.default.Component),Y=(0,m.DropTarget)("talkDrag",H.default,function(e){return{connectDropTarget:e.dropTarget()}})(z);t.default=(0,m.DragDropContext)(h.default)(Y)},HFXx:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=m(a("Yz+Y")),o=m(a("iCc5")),n=m(a("V7oC")),l=m(a("FYw3")),s=m(a("mRg0")),r=m(a("q1tI")),d=m(a("HPAy")),u=m(a("aJKe")),c=m(a("fG3h")),f=m(a("F8X7")),h=m(a("A5zr"));function m(e){return e&&e.__esModule?e:{default:e}}a("tqC3"),a("lmaM");var p=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={show:!1,hasBgImg:!1},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){u.default.CoreController.addEventListener("loadDetectionDevice",this.handlerLoadDeviceDetection.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener("detectionDeviceFinsh",this.handlerDetectionDeviceFinsh.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){u.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerLoadDeviceDetection",value:function(e){var t=this,a=e.message||{},i=a.start,o=a.main,n=a.check,l=a.bgImg;if(a.onlyAudioOutPut&&d.default.playback)return t.setState({show:!0}),u.default.CoreController.dispatchEvent({type:"mainDetectionDevice",message:{onlyAudioOutPut:!0}}),!1;n?c.default.checkNeedDetectionDevice(function(e){if(e)t.setState({show:!0}),i?u.default.CoreController.dispatchEvent({type:"welcomeDetectionDevice"}):o&&u.default.CoreController.dispatchEvent({type:"mainDetectionDevice"});else{var a=t.props.handlerOkCallback;a&&"function"==typeof a&&a({needDetection:e})}}):(l&&t.setState({hasBgImg:!0}),i?(t.setState({show:!0}),u.default.CoreController.dispatchEvent({type:"welcomeDetectionDevice"})):o&&(t.setState({show:!0}),u.default.CoreController.dispatchEvent({type:"mainDetectionDevice"})))}},{key:"handlerDetectionDeviceFinsh",value:function(e){(e.message||{}).clearFinsh&&this.setState({show:!1})}},{key:"render",value:function(){var e=this,t=e.state,a=t.show,i=t.hasBgImg,o=e.props,n=o.isEnter,l=o.handlerOkCallback,s=o.clearFinsh,d=(o.backgroundColor,o.okText),u=o.titleText,c=o.saveLocalStorage;return r.default.createElement("section",{id:"all_start",className:"startdetection-device"+(i?" opcityBg":""),style:{display:a?"block":"none"}},r.default.createElement(f.default,null),r.default.createElement(h.default,{hasBgImg:i,isEnter:n,clearFinsh:s,closeDetectionCallback:function(t){e.setState({show:t})},handlerOkCallback:l,okText:d,titleText:u,saveLocalStorage:c}))}}]),t}(r.default.Component);t.default=p},HPAy:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(a("QbLZ")),o=r(a("gDS+")),n=r(a("EJiy")),l=r(a("uuqz")),s=r(a("mrNk"));r(a("eQYT"));function r(e){return e&&e.__esModule?e:{default:e}}window.GLOBAL=window.GLOBAL||{};var d=window.GLOBAL;d.participantGiftNumberJson=d.participantGiftNumberJson||{},d.classBegin=!1,d.endClassBegin=!1,d.routeName=void 0,d.playback=/index.html#\/(replay|playback)/g.test(window.location.href),d.playPptVideoing=!1,d.playMediaFileing=!1,d.isVideoDrag=!1,d.serviceTime=void 0,d.firstGetServiceTime=!1,d.isHandleMsglist=!1,d.remindServiceTime=void 0,d.classBeginTime=void 0,d.isSkipPageing=!1,d.roomChange=!1,d.projectPublishDirAddress=window.location.protocol+"//"+window.location.host+window.location.pathname;var u=d.projectPublishDirAddress.indexOf("index.html");-1!==u&&(d.projectPublishDirAddress=d.projectPublishDirAddress.substring(0,u)),d.osType=l.default.detectOS();var c=l.default.getUrlParams("endtype"),f=void 0,h=void 0;if(TK.NativeInfo){var m=TK.NativeInfo();m&&"object"===(void 0===m?"undefined":(0,n.default)(m))?(f=Number(m.endtype),h=Number(m.clientversion)):""!==c&&(f=Number(c),h=""!==l.default.getUrlParams("clientversion")?Number(l.default.getUrlParams("clientversion")):l.default.getUrlParams("clientversion"))}else""!==c&&(f=Number(c),h=""!==l.default.getUrlParams("clientversion")?Number(l.default.getUrlParams("clientversion")):l.default.getUrlParams("clientversion"));d.isClient=!d.playback&&(1===f||2===f),d.isMacClient=!d.playback&&2===f,d.clientversion=d.playback?void 0:h;var p=l.default.getBrowserInfo();if(d.isMobile=p.versions.mobile||p.versions.ios||p.versions.android||p.versions.iPhone||p.versions.iPad,L.Logger.info(" browserInfo:"+(0,o.default)(p)," isClient is "+d.isClient+" , isMacClient is "+d.isMacClient+"  , isBroadcast is "+d.isBroadcast+" , isMobile is "+d.isMobile+" , osType is"+d.osType+(d.isClient?" , clientVersion is "+d.clientversion:"")),d.languageName=p.language&&(p.language.toLowerCase().match(/zh-cn/g)?"chinese":p.language.toLowerCase().match(/ja/g)?"japan":p.language.toLowerCase().match(/id/g)?"indonesia":p.language.toLowerCase().match(/zh-tw/g)?"taiwan":p.language.toLowerCase().match(/zh/g)?"chinese":"english"),d.isVideoStretch=!1,d.changeVideoSizeEventName=null,d.changeVideoSizeMouseUpEventName=null,d.needDetectioned=void 0,d.videoScale=4/3,d.HeightConcurrence=!1,d.isVideoInTop=!0,d.studentOnDuty=[],d.videoNum=d.isVideoInTop?7:6,d.specificUsers={},d.isOnlyAudioRoom=!1,d.isBanSpeakFromButton=!0,d.isAllBanSpeak=!1,d.defaultFileInfo={fileid:0,companyid:"",filename:"White Board",uploaduserid:"",uploadusername:"",downloadpath:"",swfpath:"",isContentDocument:0,filetype:"whiteboard",currpage:1,pagenum:1,dynamicppt:0,filecategory:0,fileprop:0},d.numAA=0,d.msglist={videoDragArray:null,videoChangeSize:null,VideoSplitScreenArray:null},d.isSplitScreen=!1,d.systemStyleJson={},d.dragRange={left:0,top:0},d.windowInnerWidth=window.innerWidth,d.windowInnerHeight=window.innerHeight,d.loadModuleJson={LeftToolBarVesselSmart:!0},d.doubleScreen=!1,d.showShapeAuthor=!1,d.playbackControllerHeight="0rem",d.mainContainerFull=!1,d.isVideoInFullscreen=!1,d.isVideoPlayerInFullscreen=!1,d.localRecording=!1,d.selectedRecord=!1,d.localRecordPath="",d.extradata=l.default.getUrlParams("extradata"),d.logintype=l.default.getUrlParams("logintype")&&Number(l.default.getUrlParams("logintype")),d.isVideoMirror=!1,d.switchScreen=!1,d.isLeaveRoom=!1,d.clientComponent=!1,d.appConnected=!1,d.isMoreUsers=!1,d.userCount=50,d.reduceGift=!0,d.customWhiteboardColorArry=["ffffff","000000","415646","ffc973","5d4245","9ad0ea","756691","558289"],d.reloadFileShowReloadNumber=!0,d.isStartRtml=!1,d.minimizedDragAndDropArry=[],d.roomlayout=void 0,d.isAutoGetCandraw=!1,d.hasPrivateFile=!1,d.isMovieSharePlay=!1,d.movieShareStatus=!1,d.shareToolsBarShow=!0,d.currentPageBeforeClass=null,d.isPlaybackJioned=!1,d.extradata=l.default.getUrlParams("extradata"),d.extradata)try{var g=d.extradata.replace(/(\\'|')/g,'"'),v=JSON.parse(g),y=new RegExp(/[(\ )(\~)(\!)(\@)(\#)(\$)(\%)(\^)(\&)(\*)(\()(\))(\-)(\_)(\+)(\=)(\[)(\])(\{)(\})(\|)(\\)(\;)(\:)(\')(\")(\,)(\.)(\/)(\<)(\>)(\?)(\)]+/g);v.group=v.group.replace(y,""),d.myGroup=v.group||"defaultGroup",L.Logger.info("my group info:",d.myGroup)}catch(e){d.myGroup="defaultGroup",L.Logger.error("extradata to parse json error :",e)}else d.myGroup="defaultGroup";d.openUrl=function(e){d.isClient&&s.default.getNativeInterface().clientOpenBrowserUrl(e)},d.videoCaptureBoxId="",d.lastCourseInfo=(0,i.default)({},d.defaultFileInfo),d.companyidentify=l.default.getUrlParams("companyidentify"),t.default=d},HZbN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=p(a("Yz+Y")),n=p(a("iCc5")),l=p(a("V7oC")),s=p(a("FYw3")),r=p(a("mRg0")),d=p(a("q1tI")),u=p(a("HPAy")),c=p(a("XbJA")),f=p(a("aJKe")),h=p(a("mrNk")),m=a("okNM");function p(e){return e&&e.__esModule?e:{default:e}}var g=(0,m.inject)("userListStatusStore")(i=(0,m.observer)(i=function(e){function t(){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this))}return(0,r.default)(t,e),(0,l.default)(t,[{key:"handlerUserRefresh",value:function(e,t){c.default.sendSignallingFromRemoteControl(e,{action:"refresh"});var a=this.props,i=a.userListStatusStore;a.id;return i.setNowOperationUserId(""),t&&(t.preventDefault(),t.stopPropagation()),!1}},{key:"handlerUserDeviceManagement",value:function(e,t){return f.default.CoreController.dispatchEvent({type:"remoteControl_deviceManagement",message:{user:e}}),t&&(t.preventDefault(),t.stopPropagation()),!1}},{key:"handlerUserAreaSelection",value:function(e,t){return f.default.CoreController.dispatchEvent({type:"remoteControl_userAreaSelection",message:{user:e}}),t&&(t.preventDefault(),t.stopPropagation()),!1}},{key:"handlerUseCndLine",value:function(e,t){return e.codeVersion<2?c.default.sendSignallingFromRemoteControl(e.id,{action:"getDocServer"}):c.default.sendSignallingFromRemoteControl(e.id,{action:"nowSomeoneCdnIp"}),t&&(t.preventDefault(),t.stopPropagation()),!1}},{key:"handlerUserKick",value:function(e,t){return h.default.getTkRoom().evictUser(e,{reason:1}),t&&(t.preventDefault(),t.stopPropagation()),!1}},{key:"onExtendListMouseEnter",value:function(){var e=this.props,t=e.userListStatusStore,a=e.id;t.setNowOperationUserId(a)}},{key:"onExtendListMouseOut",value:function(){var e=this.props,t=e.userListStatusStore;e.id;t.setNowOperationUserId("")}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.userListStatusStore,i=e.id,o="webpageApp"===t.appType&&(("MacClient"===t.devicetype||"WindowClient"===t.devicetype)&&Number(t.systemversion)>=2018010200||!("MacClient"===t.devicetype||"WindowClient"===t.devicetype)),n="webpageApp"===t.appType,l=t.role!==TkConstant.role.roleChairman,s=t.codeVersion>=1;return d.default.createElement("div",{key:"userExtendList",className:"user-remote-list-container",onMouseEnter:this.onExtendListMouseEnter.bind(this),style:{display:i==a.nowOperationUserId?"block":"none"}},d.default.createElement("button",{className:"triangle"}),d.default.createElement("div",{className:"user-extend-list add-position-absolute-top0-right0",onMouseLeave:this.onExtendListMouseOut.bind(this),key:"userExtendList",style:{display:"table"}},d.default.createElement("span",{className:"extend-container all-children-user-select-none ",style:{display:"block"}},o?d.default.createElement("button",{className:"extend-option refresh",onClick:this.handlerUserRefresh.bind(this,t.id)},d.default.createElement("span",{className:"add-nowrap",style:{width:"100%"},title:u.default.language.languageData.remoteControl.refresh},u.default.language.languageData.remoteControl.refresh)):void 0,n?d.default.createElement("button",{className:"extend-option device-management",onClick:this.handlerUserDeviceManagement.bind(this,t)},d.default.createElement("span",{className:"add-nowrap",style:{width:"100%"},title:u.default.language.languageData.remoteControl.deviceManagement},u.default.language.languageData.remoteControl.deviceManagement)):void 0,d.default.createElement("button",{className:"extend-option area-selection",onClick:this.handlerUserAreaSelection.bind(this,t)},d.default.createElement("span",{className:"add-nowrap",style:{width:"100%"},title:u.default.language.languageData.remoteControl.optimalServer},u.default.language.languageData.remoteControl.optimalServer)),l?d.default.createElement("button",{className:"extend-option kick",onClick:this.handlerUserKick.bind(this,t.id)},d.default.createElement("span",{className:"add-nowrap",style:{width:"100%"},title:u.default.language.languageData.remoteControl.kick},u.default.language.languageData.remoteControl.kick)):void 0,s?d.default.createElement("button",{className:"extend-option get-doc-address"},d.default.createElement("span",{className:"add-nowrap",style:{width:"90%"},title:u.default.language.languageData.remoteControl.getDocAddress,onClick:this.handlerUseCndLine.bind(this,t)},u.default.language.languageData.remoteControl.getDocAddress)):void 0)))}}]),t}(d.default.Component))||i)||i;t.default=g},HsAS:function(e,t,a){},HvdO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(a("q1tI")),o=n(a("Sujp"));function n(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.data,a=void 0===t?[]:t,n=e.unfoldFn,l=e.loadMoreFn,s=e.checkFn;return i.default.createElement("ul",null,a.map(function(e){return i.default.createElement(o.default,{data:e,unfoldFn:n,loadMoreFn:l,checkFn:s,key:e.id})}))}},HzlR:function(e,t,a){},I5MG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=h(a("Yz+Y")),o=h(a("iCc5")),n=h(a("V7oC")),l=h(a("FYw3")),s=h(a("mRg0")),r=h(a("q1tI")),d=h(a("mrNk")),u=h(a("eQYT")),c=h(a("XbJA")),f=h(a("aJKe"));function h(e){return e&&e.__esModule?e:{default:e}}a("71F/");var m=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={show:!1},a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){f.default.CoreController.addEventListener(u.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=d.default.getTkRoom().getMySelf().id,a=e.message;e.userid===t&&a.hasOwnProperty("pointerstate")&&this.setState({show:a.pointerstate})}},{key:"requestToCancelPointer",value:function(){var e=d.default.getTkRoom().getMySelf().id;c.default.setParticipantPropertyToAll(e,{pointerstate:!1})}},{key:"render",value:function(){var e=d.default.getTkRoom().getMySelf().pointerstate;return r.default.createElement("div",{className:"pointer-modal",style:{display:e?"block":"none"}},r.default.createElement("button",{onClick:this.requestToCancelPointer.bind(this),className:"request-close-pointer"}," "))}}]),t}(r.default.Component);t.default=m},J7Xv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=p(a("Yz+Y")),o=p(a("iCc5")),n=p(a("V7oC")),l=p(a("FYw3")),s=p(a("mRg0")),r=a("q1tI"),d=p(r),u=p(a("eQYT")),c=p(a("HPAy")),f=p(a("aJKe")),h=p(a("mrNk")),m=p(a("Fv6x"));function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={isPlayFlag:!1,isMe:!1,screenStream:void 0,shareType:1},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){f.default.CoreController.addEventListener(u.default.EVENTTYPE.RoomEvent.roomUserscreenstateChanged,this.roomUserscreenstateChanged.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener(u.default.EVENTTYPE.RoomEvent.roomDisconnected,this.handlerRoomDisconnectedScreen.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener(u.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener(u.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){f.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"roomUserscreenstateChanged",value:function(e){var t=e.message;"screen"===t.type&&(t.published?t.userId===h.default.getTkRoom().getMySelf().id?this.setState({isPlayFlag:!0,screenStream:void 0,isMe:t.userId===h.default.getTkRoom().getMySelf().id}):this.setState({isPlayFlag:!0,screenStream:{extensionId:t.userId,type:t.type},isMe:t.userId===h.default.getTkRoom().getMySelf().id}):(this.setState({isPlayFlag:!1,screenStream:void 0,isMe:t.userId===h.default.getTkRoom().getMySelf().id}),f.default.CoreController.dispatchEvent({type:"colse-holdAll-item",message:{type:"sharing"}})))}},{key:"handlerRoomDisconnectedScreen",value:function(e){this.setState({isPlayFlag:!1}),f.default.CoreController.dispatchEvent({type:"DisconnectionRoom"}),f.default.CoreController.dispatchEvent({type:"disabledSharing"}),this.setState({screenStream:void 0})}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"ClassBegin":this.state.isPlayFlag&&this._unScreenSharing()}}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=e.message,a=e.user;u.default.hasRole.roleChairman&&0===a.role&&0===t.publishstate&&this._unScreenSharing()}},{key:"_unScreenSharing",value:function(){this.setState({isPlayFlag:!1}),this.state.isMe&&h.default.getNativeInterface()?h.default.getNativeInterface().stopShareScreen(this.shareFailure):c.default.isClient||c.default.isMobile||h.default.getTkRoom().stopShareScreen(),f.default.CoreController.dispatchEvent({type:"colse-holdAll-item",message:{type:"sharing"}}),f.default.CoreController.dispatchEvent({type:"hasToolBox",message:{isHasToolBox:!0}})}},{key:"shareFailure",value:function(e){L.Logger.error("Share the failure"+e)}},{key:"render",value:function(){return d.default.createElement("article",{style:this.state.isPlayFlag||c.default.isOnlyAudioRoom?{display:"block"}:{display:"none"},className:"desktop-share-container "},this.state.isPlayFlag&&(this.state.isMe||void 0!==this.state.screenStream)?d.default.createElement(m.default,{isMe:this.state.isMe,isPlayFlag:this.state.isPlayFlag,unScreenSharing:this._unScreenSharing.bind(this),shareType:this.state.shareType,stream:this.state.isMe?void 0:this.state.screenStream}):void 0)}}]),t}(r.Component);t.default=g},JL1q:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=p(a("aJKe")),o=p(a("eN5N")),n=p(a("3l8K")),l=p(a("eQYT")),s=p(a("HPAy")),r=p(a("uuqz")),d=p(a("UstG")),u=p(a("Qxvg")),c=p(a("mrNk")),f=p(a("XbJA")),h=p(a("yXoj")),m=p(a("kXfj"));function p(e){return e&&e.__esModule?e:{default:e}}var g=TK.EventDispatcher({});i.default.CoreController=g,g.handler={},g.handler.loadSystemRequiredInfo=function(){u.default.getAppLanguageInfo(function(e){s.default.language=e}),TK.Initialize&&(s.default.isClient&&s.default.isMacClient?TK.Initialize(s.default.isClient,!s.default.isMacClient):TK.Initialize(s.default.isClient,s.default.isMacClient)),TK.notStopVideoTrack=!s.default.playback&&88!==s.default.logintype,TK.notStopAudioTrack=!s.default.playback&&88!==s.default.logintype,c.default.setTkRoom(TK.Room()),c.default.getTkRoom()&&c.default.getTkRoom().setLogIsDebug&&c.default.getTkRoom().setLogIsDebug(l.default.DEV),s.default.playback?c.default.getTkRoom().setAutoProcessDeviceChangeEvent(!1):c.default.getTkRoom().setAutoProcessDeviceChangeEvent(!0),o.default.registerEventToRoom();var e=new window.TKWhiteBoardManager(void 0,void 0,!0);c.default.setTkWhiteBoardManager(e),c.default.getTkRoom().registerRoomWhiteBoardDelegate(e),s.default.isClient||s.default.playback||TK.DeviceMgr.addDeviceChangeListener&&TK.DeviceMgr.addDeviceChangeListener(function(){i.default.CoreController.dispatchEvent({type:"deviceChange"})})},g.handler.joinRoom=function(){o.default.joinRoom()},g.handler.joinPlaybackRoom=function(){s.default.playback?(88===l.default.logintype&&L.Logger.warning("!"),o.default.joinPlaybackRoom()):L.Logger.error("No playback environment!")},g.handler.setAppPermissions=function(e,t){d.default.setAppPermissions(e,t)},g.handler.getAppPermissions=function(e){return d.default.getAppPermissions(e)},g.handler.initAppPermissions=function(e){d.default.initAppPermissions(e)},g.handler.checkRoleConflict=function(e,t){return n.default.checkRoleConflict(e,t)},g.handler.handlerOnMessage=function(e){return m.default.handlerOnMessage(e)},g.handler.updateSystemStyleJsonValueByInnerKey=function(e,t,a){h.default.updateSystemStyleJsonValueByInnerKey(e,t,a)},g.handler.updateSystemStyleJson=function(e,t){h.default.updateSystemStyleJson(e,t)},g.handler.refreshSystemStyleJson=function(){h.default.refreshSystemStyleJson()},g.handler.updateLoadModuleJson=function(e,t){s.default.loadModuleJson[e]!==t&&(s.default.loadModuleJson[e]=t,h.default.refreshSystemStyleJson())},g.handler.addEventListenerOnCoreController=function(){m.default.addEventListener(),window.onbeforeunload=null,window.onbeforeunload=function(){c.default.getTkRoom()&&(l.default.hasRole.roleChairman&&o.default.rtmpStopBroadcast(),i.default.Window.dispatchEvent({type:l.default.EVENTTYPE.WindowEvent.onBeforeUnload}),c.default.getTkRoom().leaveroom(!0),c.default.getTkRoom().uninit())};var e=function(){document.getElementById("tk_app")?(s.default.windowInnerWidth=document.getElementById("tk_app").clientWidth,s.default.windowInnerHeight=document.getElementById("tk_app").clientHeight):(s.default.windowInnerWidth=window.innerWidth,s.default.windowInnerHeight=window.innerHeight);var e=s.default.windowInnerWidth/l.default.STANDARDSIZE,t=document.getElementById("all_root")||document.getElementsByTagName("html");if(t){var a=r.default.isArray(t)?t[0]:t;a&&a.style&&(a.style.fontSize=e+"px")}i.default.Window.dispatchEvent({type:l.default.EVENTTYPE.WindowEvent.onResize,message:{defalutFontSize:e}})};$(window).off("resize"),$(window).resize(function(){e()}),$(window).resize();var t=r.default.handleVisibilityChangeCompatibility(),a=t.state,n=t.visibilityChange;r.default.tool.addEvent(document,n,function(){"visible"===document[a]&&setTimeout(function(){e()},50)},!1);var d=function(e){if(g.handler.handlerOnMessage&&g.handler.handlerOnMessage(e))return;i.default.Window.dispatchEvent({type:l.default.EVENTTYPE.WindowEvent.onMessage,message:{event:e}})};r.default.tool.removeEvent(window,"message",d),r.default.tool.addEvent(window,"message",d,!1),$(document).off("keydown"),$(document).keydown(function(e){switch((e=e||window.event).keyCode){case 27:if((g.handler.getAppPermissions("pictureInPicture")||g.handler.getAppPermissions("isHandleVideoInFullScreen"))&&s.default.isVideoInFullscreen)if(s.default.isVideoPlayerInFullscreen){s.default.isVideoPlayerInFullscreen=!1,f.default.sendSignallingFromFullScreen({fullScreenType:"stream_media",needPictureInPictureSmall:!1},!0)}else f.default.sendSignallingFromFullScreen({},!0);r.default.tool.isFullScreenStatus()&&r.default.tool.exitFullscreen()}i.default.Document.dispatchEvent({type:l.default.EVENTTYPE.DocumentEvent.onKeydown,message:{keyCode:e.keyCode}}),i.default.CoreController.dispatchEvent({type:l.default.EVENTTYPE.DocumentEvent.onKeydown,message:{keyCode:e.keyCode}})});var u=function(e){i.default.CoreController.dispatchEvent({type:"resizeHandler"}),s.default.mainContainerFull=r.default.tool.getFullscreenElement()&&"lc-full-vessel"==r.default.tool.getFullscreenElement().id,i.default.Document.dispatchEvent({type:l.default.EVENTTYPE.DocumentEvent.onFullscreenchange,message:{event:e}})};r.default.tool.removeFullscreenchange(u),r.default.tool.addFullscreenchange(u),i.default.CoreController.addEventListener(l.default.EVENTTYPE.OtherEvent.initSystemStyleJson,function(){h.default.initSystemStyleJson()})},g.handler.addEventListenerOnCoreController(),t.default=g},JgAh:function(e,t,a){},JqG7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=w(a("YEIV")),o=w(a("/f1G")),n=w(a("oF3Q")),l=w(a("sk9p")),s=w(a("EJiy")),r=w(a("GQeE")),d=w(a("FyfS")),u=w(a("Yz+Y")),c=w(a("iCc5")),f=w(a("V7oC")),h=w(a("FYw3")),m=w(a("mRg0")),p=w(a("q1tI")),g=w(a("HPAy")),v=w(a("aJKe")),y=w(a("mrNk")),S=w(a("XbJA")),b=w(a("Fveh")),C=w(a("kQrP")),k=w(a("3mpg"));function w(e){return e&&e.__esModule?e:{default:e}}var T=function(e){function t(e){(0,c.default)(this,t);var a=(0,h.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.state={updateState:!1,show:!1,loading:!1,loadShowOptionJson:{userAreaSelection:!1,deviceManagement:!1,userAreaAndDeviceManagement:!1},titleText:{title:void 0,userName:void 0},devicesDesc:{videoinput:{},audioinput:{},audiooutput:{}},selectDevice:{videoinput:void 0,audioinput:void 0,audiooutput:void 0},hasDetection:{videoinput:!1,audioinput:!1,audiooutput:!1},isClient:g.default.isClient,serverlist:[],audiooutputVolume:100},a.cacheServerlist={},a.useServerName={},a.backupServerList=[],a.backupDeviceInfo={},a.oldUseServerName="",a.selectDevice={videoinput:void 0,audioinput:void 0,audiooutput:void 0},a.deviceLabelMap={videoinput:{default:g.default.language.languageData.alertWin.settingWin.default.text,defaultLabel:g.default.language.languageData.alertWin.settingWin.videoInput.text,notDevice:g.default.language.languageData.login.language.detection.selectOption.noCam},audioinput:{default:g.default.language.languageData.alertWin.settingWin.default.text,defaultLabel:g.default.language.languageData.alertWin.settingWin.audioInput.text,notDevice:g.default.language.languageData.login.language.detection.selectOption.noMicrophone},audiooutput:{default:g.default.language.languageData.alertWin.settingWin.default.text,defaultLabel:g.default.language.languageData.alertWin.settingWin.audioOutput.text,notDevice:g.default.language.languageData.login.language.detection.selectOption.noEarphones}},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.nowUserName="",a.userid="",a.serviceUserId="",a}return(0,m.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){v.default.CoreController.addEventListener("remoteControl_userAreaSelection",this.handleRemoteControl_userAreaSelection.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("remoteControl_deviceManagement",this.handleRemoteControl_deviceManagement.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(TkConstant.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(TkConstant.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(TkConstant.EVENTTYPE.RoomEvent.roomParticipantJoin,this.handlerRoomParticipantJoin.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){v.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerRoomParticipantJoin",value:function(e){if(this.state.loadShowOptionJson.userAreaSelection){var t=e.user;t&&t.id&&this.cacheServerlist[t.id]&&this.changeServerClick(t.servername)}}},{key:"handlerRoomUserpropertyChanged",value:function(e){if(this.state.loadShowOptionJson.userAreaSelection){var t=e.user;if(t&&t.id&&this.cacheServerlist[t.id]){var a=e.message,i=!0,o=!1,n=void 0;try{for(var l,s=(0,d.default)((0,r.default)(a));!(i=(l=s.next()).done);i=!0){var u=l.value;"servername"!==u&&this.changeServerClick(a[u])}}catch(e){o=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw n}}}}}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message,a=t.fromID;switch(t.name){case"RemoteControl":switch(t.data.action){case"areaSelection":if("sendServerListInfo"===t.data.type&&a){var i=t.data.serverData,o=i.serverList,n=i.serverName;this.useServerName[a]=n,this.cacheServerlist[a]=o,this.backupServerList=o,this.setState({serverlist:o,loading:!1})}break;case"deviceManagement":if(this.state.loadShowOptionJson.deviceManagement&&"sendDeviceInfo"===t.data.type&&a===this.userid){var l=t.data.deviceData.deviceInfo;this.selectDevice=l.useDevices&&"object"===(0,s.default)(l.useDevices)?Object.customAssign({},l.useDevices):this.selectDevice,this.setState({selectDevice:l.useDevices&&"object"===(0,s.default)(l.useDevices)?Object.customAssign({},l.useDevices):this.state.selectDevice}),this._changeDeviceElementDesc(l),this.backupDeviceInfo=l&&"object"===(void 0===l?"undefined":(0,s.default)(l))?Object.customAssign({},l):{},this.setState({loading:!1})}else if(this.state.loadShowOptionJson.userAreaAndDeviceManagement&&"sendDeviceInfo"===t.data.type&&a===this.userid){var r=t.data.deviceData.deviceInfo;this.selectDevice=r.useDevices&&"object"===(0,s.default)(r.useDevices)?Object.customAssign({},r.useDevices):this.selectDevice,this.setState({selectDevice:r.useDevices&&"object"===(0,s.default)(r.useDevices)?Object.customAssign({},r.useDevices):this.state.selectDevice}),this._changeDeviceElementDesc(r),this.backupDeviceInfo=r&&"object"===(void 0===r?"undefined":(0,s.default)(r))?Object.customAssign({},r):{},this.setState({loading:!1})}}}}},{key:"handleRemoteControl_deviceManagement",value:function(e){if(e){var t=e.message.user;if(t){this.userid=t.id;var a=!0,i=!1,o=void 0;try{for(var n,l=(0,d.default)((0,r.default)(this.state.loadShowOptionJson));!(a=(n=l.next()).done);a=!0){var s=n.value;this.state.loadShowOptionJson[s]="deviceManagement"===s}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}var u={title:g.default.language.languageData.login.language.detection.deviceTestHeader.deviceSwitch.text,userName:t.nickname};this.setState({show:!0,loadShowOptionJson:this.state.loadShowOptionJson,loading:!1,titleText:u,audiooutputVolume:void 0!==t.volume?t.volume:100}),this._getRemoteDeviceInfo(t.id)}else L.Logger.error("remoteControl_deviceManagement:user is not exist , user id is "+t.id+"!")}}},{key:"handleRemoteControl_userAreaSelection",value:function(e){var t=this,a=e.message.user;if(a){this.serviceUserId=a.id;var i=!0,o=!1,n=void 0;try{for(var l,s=(0,d.default)((0,r.default)(this.state.loadShowOptionJson));!(i=(l=s.next()).done);i=!0){var u=l.value;this.state.loadShowOptionJson[u]="userAreaSelection"===u}}catch(e){o=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw n}}var c={title:g.default.language.languageData.login.language.detection.deviceTestHeader.optimalServer.text,userName:a.nickname};this.setState({show:!1,loadShowOptionJson:this.state.loadShowOptionJson,loading:!0,titleText:c}),this.serviceUserId=a.id,this._getRemoteServerList(a.id,function(e){t.setState({serverlist:e,show:!0,loading:!1},function(){t.cacheServerlist[a.id]=t.state.serverlist})})}else L.Logger.error("remoteControl_userAreaSelection:user is not exist , user id is "+a.id+"!")}},{key:"changeServerClick",value:function(e){var t=this.state.serverlist;t.forEach(function(t){t.serverareaname===e?t.isUseServer=!0:t.isUseServer=!1}),this.useServerName[this.serviceUserId]=e,this.setState({serverlist:t})}},{key:"okButtonOnClick",value:function(e,t){var a=this;if(g.default.HeightConcurrence)this.state.loadShowOptionJson.userAreaSelection?y.default.getTkRoom().getRoomUser(t,function(e){e&&e.servername!==a.useServerName[t]&&S.default.setParticipantPropertyToAll(t,{servername:a.useServerName[t]})},function(e){L.Logger.error("error:"+e)}):this.state.loadShowOptionJson.deviceManagement&&this._changeUserDeviceManagement(this.userid),this._resetDefaultStateAndData();else{if(this.state.loadShowOptionJson.userAreaSelection){var i=y.default.getTkRoom().getUser(t);i&&i.servername!==this.useServerName[t]&&S.default.setParticipantPropertyToAll(t,{servername:this.useServerName[t]})}else this.state.loadShowOptionJson.deviceManagement&&this._changeUserDeviceManagement(this.userid);this._resetDefaultStateAndData()}}},{key:"closeButtonOnClick",value:function(e){this._resetDefaultStateAndData()}},{key:"changeSelectDeviceOnChange",value:function(e,t,a,i){this._changeStateSelectDevice(e,t)}},{key:"handerVolumeOnAfterChange",value:function(e){this.isVolumeDraging=!1,this.audiooutputVolume=void 0,this.setState({audiooutputVolume:e})}},{key:"handerVolumeOnBeforeChange",value:function(e){this.isVolumeDraging=!0,this.audiooutputVolume=e}},{key:"_changeDeviceElementDesc",value:function(e){var t=this,a=e.devices,i=e.useDevices,o=(e.hasdevice,{videoinput:{},audioinput:{},audiooutput:{}}),s={videoinput:0,audioinput:0,audiooutput:0},r=function(e,a){0===a.length?t.state.hasDetection[e]=!1:t.state.hasDetection[e]=!0,t.setState({hasDetection:t.state.hasDetection}),a.map(function(a,n){o[e][a.deviceId]={deviceId:a.deviceId,groupId:a.groupId,kind:a.kind,label:a.label||("default"===a.deviceId?t.deviceLabelMap[e].default:t.deviceLabelMap[e].defaultLabel+ ++s[e]),select:t.selectDevice[e]===a.deviceId||i[e]===a.deviceId}})},u=!0,c=!1,f=void 0;try{for(var h,m=(0,d.default)((0,n.default)(a));!(u=(h=m.next()).done);u=!0){var p=h.value,g=(0,l.default)(p,2);r(g[0],g[1])}}catch(e){c=!0,f=e}finally{try{!u&&m.return&&m.return()}finally{if(c)throw f}}t.setState({devicesDesc:o})}},{key:"_loadDeviceElementByDeviceDescArray",value:function(e){var t={audioinputElementArray:[],audiooutputElementArray:[],videoinputElementArray:[]},a=!0,i=!1,s=void 0;try{for(var r,u=(0,d.default)((0,n.default)(e));!(a=(r=u.next()).done);a=!0){var c=r.value,f=(0,l.default)(c,2),h=f[0],m=f[1],p=!0,g=!1,v=void 0;try{for(var y,S=(0,d.default)((0,o.default)(m));!(p=(y=S.next()).done);p=!0){var b=y.value,C=b.deviceId,k=(b.groupId,b.kind,b.label);b.select;t[h+"ElementArray"].push({value:C,label:k})}}catch(e){g=!0,v=e}finally{try{!p&&S.return&&S.return()}finally{if(g)throw v}}}}catch(e){i=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(i)throw s}}var w=!0,T=!1,E=void 0;try{for(var I,D=(0,d.default)((0,n.default)(t));!(w=(I=D.next()).done);w=!0){var x=I.value,R=(0,l.default)(x,2),_=R[0];if(0===R[1].length){var P=_.replace(/ElementArray/g,""),A=this.deviceLabelMap[P].notDevice;switch(t[_].push({value:void 0,label:A}),_){case"videoinputElementArray":this.state.selectDevice.videoinput=t.videoinputElementArray[0].value;break;case"audiooutputElementArray":this.state.selectDevice.audiooutput=t.audiooutputElementArray[0].value;break;case"audioinputElementArray":this.state.selectDevice.audioinput=t.audioinputElementArray[0].value}}else switch(_){case"videoinputElementArray":this.state.selectDevice.videoinput=this.selectDevice.videoinput;break;case"audiooutputElementArray":this.state.selectDevice.audiooutput=this.selectDevice.audiooutput;break;case"audioinputElementArray":this.state.selectDevice.audioinput=this.selectDevice.audioinput}}}catch(e){T=!0,E=e}finally{try{!w&&D.return&&D.return()}finally{if(T)throw E}}return t}},{key:"_changeStateSelectDevice",value:function(e,t){if(this.state.selectDevice[e]!==t){this.selectDevice[e]=t,this.state.selectDevice[e]=t;var a=!0,i=!1,o=void 0;try{for(var s,r=(0,d.default)((0,n.default)(this.state.devicesDesc[e]));!(a=(s=r.next()).done);a=!0){var u=s.value,c=(0,l.default)(u,2),f=c[0],h=c[1];h.select=f===t}}catch(e){i=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}this.setState({selectDevice:this.state.selectDevice,devicesDesc:this.state.devicesDesc})}}},{key:"_resetDefaultStateAndData",value:function(){this.backupServerList=[],this.backupDeviceInfo={},this.oldUseServerName="",this.serviceUserId="",this.useServerName={},this.selectDevice={videoinput:void 0,audioinput:void 0,audiooutput:void 0};var e={show:!1,loading:!1,loadShowOptionJson:{userAreaSelection:!1,deviceManagement:!1},titleText:{},devicesDesc:{videoinput:{},audioinput:{},audiooutput:{}},selectDevice:{videoinput:void 0,audioinput:void 0,audiooutput:void 0},hasDetection:{videoinput:!1,audioinput:!1,audiooutput:!1},audiooutputVolume:100,isClient:g.default.isClient,serverlist:[]};this.setState(e)}},{key:"_getRemoteServerList",value:function(e,t){function a(e,t,a){k.default.getServiceList(e,function(e){if(0==e.result){var i=e.serverarealist;return i.forEach(function(e){e.serverareaname===t?e.isUseServer=!0:e.isUseServer=!1}),a(i)}return a([])})}if(!g.default.HeightConcurrence){var i=y.default.getTkRoom().getUser(e);return a(i.tk_ip,i.servername,function(e){t(e)})}y.default.getTkRoom().getRoomUser(e,function(e){var i=e;return a(i.tk_ip,i.servername,function(e){t(e)})})}},{key:"_getRemoteDeviceInfo",value:function(e){S.default.sendSignallingFromRemoteControl(e,{action:"deviceManagement",type:"getDeviceInfo"})}},{key:"_changeUserDeviceManagement",value:function(e){if(this.selectDevice&&"object"===(0,s.default)(this.selectDevice)){var t={action:"deviceManagement",type:"changeDeviceInfo",changeData:{selectDeviceInfo:this.selectDevice}};S.default.sendSignallingFromRemoteControl(e,t),S.default.setParticipantPropertyToAll(e,{volume:this.state.audiooutputVolume})}}},{key:"zhikeRemoteClick",value:function(e,t){1===e?(this.state.loadShowOptionJson.deviceManagement=!1,this.state.loadShowOptionJson.userAreaSelection=!0):0===e&&(this.state.loadShowOptionJson.deviceManagement=!0,this.state.loadShowOptionJson.userAreaSelection=!1),this.setState({loadShowOptionJson:this.state.loadShowOptionJson}),t&&(t.stopPropagation(),t.preventDefault())}},{key:"render",value:function(){var e=this,t=e.state,a=t.show,o=t.devicesDesc,n=t.loading,l=t.loadShowOptionJson,s=t.titleText,r=t.audiooutputVolume,d=t.serverlist,u=e.props,c=u.okText,f=u.backgroundColor,h=e._loadDeviceElementByDeviceDescArray(o),m=h.audioinputElementArray,v=h.audiooutputElementArray,y=h.videoinputElementArray;return p.default.createElement("section",{className:"user-device-container",style:{display:a?"block":"none",backgroundColor:f}},p.default.createElement("article",{className:"device-control"},p.default.createElement("div",{className:"control-header"},l.deviceManagement?p.default.createElement("span",{className:"text"}," ",s.title&&s.userName?g.default.language.languageData.remoteControl.deviceManagement+"("+s.userName+")":g.default.language.languageData.login.language.detection.deviceTestHeader.device.text," "):void 0,l.userAreaSelection?p.default.createElement("span",{className:"text"}," ",s.title&&s.userName?g.default.language.languageData.login.language.detection.deviceTestHeader.optimalServer.text+"("+s.userName+")":g.default.language.languageData.login.language.detection.deviceTestHeader.device.text," "):void 0,p.default.createElement("button",{className:" close-detection icon-close",onClick:e.closeButtonOnClick.bind(e,-1)})),p.default.createElement("div",{className:"control-body"},p.default.createElement("div",{className:"device-ops-wrapper",style:{display:l.userAreaSelection?"block ":" none"}},p.default.createElement("div",{className:"ops-tip"},g.default.language.languageData.login.language.detection.networkExtend.title.text),p.default.createElement("ul",{className:"ops-list"},d.map(function(t,a){return p.default.createElement("li",{key:a,onClick:e.changeServerClick.bind(e,t.serverareaname)},p.default.createElement("span",(0,i.default)({className:"icon"},"className","icon "+(t.isUseServer?"icon-gouxuan":"icon-weigouxuan"))),p.default.createElement("span",{className:"name"},"chinese"===g.default.language.name?t.chinesedesc:"japan"===g.default.language.name?t.japanesedesc:t.englishdesc))})),p.default.createElement("button",{className:"device-result-btn",onClick:e.okButtonOnClick.bind(e,4,this.serviceUserId)},c)),p.default.createElement("div",{className:"user-device",style:{display:l.deviceManagement?"block ":" none "}},p.default.createElement("div",{className:"device-option"},p.default.createElement("span",{className:"option-name"},g.default.language.languageData.login.language.detection.videoinputExtend.cameraOptionAll.cameraOption.text),p.default.createElement("div",{className:"option-select",style:{zIndex:30}},p.default.createElement(C.default,{maxH:!0,id:"remote_control_videoSource",className:"selectBox",selectOptions:y,currentValue:e.state.selectDevice.videoinput,disabled:!1,onChange:e.changeSelectDeviceOnChange.bind(e,"videoinput")}))),p.default.createElement("div",{className:"device-option"},p.default.createElement("span",{className:"option-name"},g.default.language.languageData.login.language.detection.audioinputExtend.cameraOptionAll.cameraOption.text),p.default.createElement("div",{className:"option-select",style:{zIndex:20}},p.default.createElement(C.default,{maxH:!0,id:"remote_control_audioSource",className:"selectBox",selectOptions:m,currentValue:e.state.selectDevice.audioinput,disabled:!1,onChange:e.changeSelectDeviceOnChange.bind(e,"audioinput")}))),p.default.createElement("div",{className:"device-option"},p.default.createElement("span",{className:"option-name"},g.default.language.languageData.login.language.detection.audioouputExtend.cameraOptionAll.cameraOption.text),p.default.createElement("div",{className:"option-select"},p.default.createElement(C.default,{maxH:!0,id:"remote_control_audioOutput",className:"selectBox",selectOptions:v,currentValue:e.state.selectDevice.audiooutput,disabled:!1,onChange:e.changeSelectDeviceOnChange.bind(e,"audiooutput")}))),p.default.createElement("div",{className:"device-option"},p.default.createElement("span",{className:"option-name"},g.default.language.languageData.login.language.detection.audioouputExtend.cameraOptionAll.earphoneVolume.text),p.default.createElement("div",{className:"option-select"},p.default.createElement("div",{className:"sound-vol tool-slider"},p.default.createElement("div",{className:"icon_volume icon-btn_yinliang"}),p.default.createElement(b.default,{className:"tk-slider tk-detection-device",value:void 0!==this.audiooutputVolume?this.audiooutputVolume:r,onBeforeChange:e.handerVolumeOnBeforeChange.bind(e),onAfterChange:e.handerVolumeOnAfterChange.bind(e)}),p.default.createElement("span",{className:"txtValue"},r)))),p.default.createElement("button",{className:"device-result-btn",onClick:e.okButtonOnClick.bind(e,4)},c))),p.default.createElement("div",{className:"device-control-loading",style:{display:n?"block":"none"}})))}}]),t}(p.default.Component);t.default=T},K49K:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=b(a("QbLZ")),o=b(a("Yz+Y")),n=b(a("iCc5")),l=b(a("V7oC")),s=b(a("FYw3")),r=b(a("tfYw")),d=b(a("mRg0")),u=b(a("q1tI")),c=b(a("HPAy")),f=b(a("JL1q")),h=b(a("aJKe")),m=b(a("eQYT")),p=b(a("mrNk")),g=b(a("XbJA"));a("RHxx");var v=b(a("tIin")),y=b(a("iHFX")),S=b(a("wB2e"));function b(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){function t(e,a){(0,n.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,a));return i.state={selectChat:"allChat",chatUnread:0,show:!1,isPatrol:!1,isAllBanSpeak:!1,textDisable:!1,HeightConcurrenceInputText:c.default.language.languageData.videoContainer.sendMsg.inputText.placeholder,chatFontSize:16,isFontSizeShow:!1,layoutToChat:!0},i.chatType={allChat:"allChat"},i.inittime=0,i.listernerBackupid=(new Date).getTime()+"_"+Math.random(),i}return(0,d.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){h.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomTextMessage,this.handlerRoomTextMessage.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,this.handlerRoomPlaybackClearAll.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener("SwitchLayout",this.handleSwitchLayout.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener("beyondTmplEvent",this.beyondTmplHandler.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener("CloseALLPanel",this.close.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener("receive-msglist-EveryoneBanChat",this.handlerEveryoneBanChat.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener("receive-msglist-SwitchLayout",this.handleMsgListSwitchLayout.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener("togo_layout",this.handlerTogoLayout.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){h.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"beyondTmplHandler",value:function(e){if(e.message)switch(e.message.key){case"chat":var t=(new Date).getTime();t-this.inittime>1e3&&(this.inittime=t,this.setState({show:!this.state.show}),this.changeIsFontSize(!1))}}},{key:"handlerTogoLayout",value:function(e){"Encompassment"===e.message.nowLayout&&(this.setState({show:!1}),this.changeIsFontSize(!1))}},{key:"handleMsgListSwitchLayout",value:function(e){"Encompassment"===e.message.nowLayout&&(this.setState({show:!1}),this.changeIsFontSize(!1))}},{key:"handlerRoomPlaybackClearAll",value:function(){this.setState({selectChat:this.chatType.allChat})}},{key:"handlerRoomConnected",value:function(e){for(var t=e.message,a=0;a<t.length;a++)switch(t[a].data.nowLayout){case"Encompassment":this.setState({layoutToChat:!1});break;case"CoursewareDown":case"VideoDown":case"Bilateral":case"MainPeople":case"OnlyVideo":this.setState({layoutToChat:!0})}}},{key:"handlerRoomTextMessage",value:function(e){if(!this.state.show)return!1;0==e.message.type&&this.state.selectChat!=this.chatType.allChat&&this.setState({chatUnread:parseInt(this.state.chatUnread)<99?++this.state.chatUnread:"99+"})}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"EveryoneBanChat":var a=t.data.isAllBanSpeak;m.default.hasRole.roleStudent?this.setState({textDisable:a,isAllBanSpeak:a}):this.setState({isAllBanSpeak:a}),c.default.isAllBanSpeak=a;break;case"switchLayout":var i=document.getElementById("chatListBox");if("Encompassment"===t.data.nowLayout){this.setState({show:!1,layoutToChat:!1}),this.changeIsFontSize(!1);var o=setTimeout(function(){i.scrollTop=i.scrollHeight,clearTimeout(o)})}else this.setState({layoutToChat:!0})}}},{key:"handlerRoomDelmsg",value:function(e){var t=this;switch(e.message.name){case"ClassBegin":!m.default.joinRoomInfo.isClassOverNotLeave&&f.default.handler.getAppPermissions("endClassbeginRevertToStartupLayout")&&setTimeout(function(){t._resetChatList()},250);break;case"EveryoneBanChat":this.setState({isAllBanSpeak:!1,textDisable:!1}),c.default.isAllBanSpeak=!1}}},{key:"handlerRoomUserpropertyChanged",value:function(e){if(e.userid!==p.default.getTkRoom().getMySelf().id||!m.default.hasRole.roleStudent)return!1;var t=e.message.disablechat;if(void 0===t)return!1;c.default.isAllBanSpeak=t,this.setState({textDisable:t})}},{key:"handlerEveryoneBanChat",value:function(e){var t=e.message.EveryoneBanChatArr[0].data;m.default.hasRole.roleStudent?this.setState({textDisable:t,isAllBanSpeak:t}):this.setState({isAllBanSpeak:t}),c.default.isAllBanSpeak=t}},{key:"changeTextDisable",value:function(e){this.setState({textDisable:e,HeightConcurrenceInputText:e?c.default.language.languageData.videoContainer.sendMsg.inputText.frequently:c.default.language.languageData.videoContainer.sendMsg.inputText.placeholder})}},{key:"_resetChatList",value:function(){this.setState({selectChat:this.chatType.allChat,chatUnread:0})}},{key:"setStateShow",value:function(){this.setState({show:!this.state.show})}},{key:"close",value:function(){this.setState({show:!1}),this.changeIsFontSize(!1),h.default.CoreController.dispatchEvent({type:"closeChatBox"})}},{key:"handleSwitchLayout",value:function(e){var t=document.getElementById("chatListBox");switch(e.nowLayout){case"Encompassment":this.setState({layoutToChat:!1});var a=setTimeout(function(){t.scrollTop=t.scrollHeight,clearTimeout(a)});break;case"CoursewareDown":case"VideoDown":case"Bilateral":case"MainPeople":case"OnlyVideo":this.setState({layoutToChat:!0}),setTimeout(function(){t.scrollTop=t.scrollHeight})}}},{key:"chatToggle",value:function(){var e=this.state.isAllBanSpeak;g.default.sendSignllingEveryoneBanChat({isAllBanSpeak:!e},e),m.default.hasRole.roleStudent&&(this.setState({textDisable:e,isAllBanSpeak:e}),c.default.isAllBanSpeak=!e)}},{key:"changeChatFontSize",value:function(e){this.setState({chatFontSize:e,isFontSizeShow:!1})}},{key:"changeIsFontSize",value:function(e){this.setState({isFontSizeShow:e})}},{key:"render",value:function(){var e=this,a=this.state.isAllBanSpeak?c.default.language.languageData.videoContainer.sendMsg.btn.title.allChat:c.default.language.languageData.videoContainer.sendMsg.btn.title.banChat,n=function(){return{changeChatFontSize:e.changeChatFontSize.bind(e),changeIsFontSize:e.changeIsFontSize.bind(e)}},l=(0,r.default)(t.prototype.__proto__||(0,o.default)(t.prototype),"render",this).call(this);return u.default.createElement(u.default.Fragment,null,this.state.layoutToChat?u.default.createElement("div",{className:"mask",onClick:this.close.bind(this),style:{display:this.state.show?"block":"none"}},u.default.createElement("div",{id:"chatbox",onClick:function(e){e.stopPropagation()},className:"chat-all-container  "+(c.default.playback?"playback":""),style:{display:this.state.show?"block":"none"}},u.default.createElement(v.default,(0,i.default)({banChatTitle:a,chatToggle:this.chatToggle.bind(this),close:this.close.bind(this)},this.state,{chatFontSize:this.state.chatFontSize,isFontSizeShow:this.state.isFontSizeShow},n())),l,u.default.createElement(S.default,{selectChat:this.state.selectChat,isShow:this.state.show,changeTextDisable:this.changeTextDisable.bind(this),textDisable:this.state.textDisable,chatFontSize:this.state.chatFontSize}))):u.default.createElement("div",{id:"rightchat"},u.default.createElement("div",{style:this.props.isChrome49?{width:"100%",height:"100%",position:"absolute"}:null,id:"rightchatbox",className:"chat-all-container  "+(c.default.playback?"playback":"")},u.default.createElement(v.default,(0,i.default)({banChatTitle:a,chatToggle:this.chatToggle.bind(this),close:this.close.bind(this)},this.state,{chatFontSize:this.state.chatFontSize,isFontSizeShow:this.state.isFontSizeShow},n())),l,u.default.createElement(S.default,{selectChat:this.state.selectChat,changeTextDisable:this.changeTextDisable.bind(this),textDisable:this.state.textDisable,chatFontSize:this.state.chatFontSize}))))}}]),t}(y.default)},KUns:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(a("QbLZ")),o=f(a("Yz+Y")),n=f(a("iCc5")),l=f(a("V7oC")),s=f(a("FYw3")),r=f(a("mRg0")),d=f(a("q1tI")),u=f(a("aJKe")),c=f(a("daUe"));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={show:!1,content:void 0},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){u.default.CoreController.addEventListener("loadSupernatantPrompt",this.handlerLoadSupernatantPrompt.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){u.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerLoadSupernatantPrompt",value:function(e){var t=e.message,a=t.show,i=t.content;this.setState({show:a,content:i})}},{key:"render",value:function(){var e=this.state,t=e.show,a=e.content;return d.default.createElement(c.default,(0,i.default)({show:t,content:a},this.props))}}]),t}(d.default.Component);t.default=h},Kaxb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(a("gDS+")),o=f(a("Yz+Y")),n=f(a("iCc5")),l=f(a("V7oC")),s=f(a("FYw3")),r=f(a("mRg0")),d=f(a("q1tI")),u=(f(a("i8i4")),f(a("aJKe"))),c=(f(a("eQYT")),f(a("HPAy")));function f(e){return e&&e.__esModule?e:{default:e}}a("OAAT");var h=function(e){function t(){(0,n.default)(this,t);var e=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return e.listernerBackupid=(new Date).getTime()+"_"+Math.random(),e.state={progress:"0%",skipPreload:!1},window.preloadProgress=e.preloadProgress.bind(e),window.preloadResult=e.preloadResult.bind(e),e}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){u.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"preloadProgress",value:function(e,t){this.setState({progress:(parseInt(e/t*100)||0)+"%"})}},{key:"preloadResult",value:function(e,t){if(200===Number(e)){var a=this.props.fileInfo,o=t+"/"+(3===parseInt(a.fileprop)?"index":"newppt")+".html";a.baseurl=o,a.preload=!0,localStorage.setItem("preloadFile",(0,i.default)(a)),this.dispatchPreloadEvent()}else this.skipPreload()}},{key:"skipPreload",value:function(){this.setState({skipPreload:!0}),this.dispatchPreloadEvent(),this.dispatchPreloadEvent=function(){}}},{key:"dispatchPreloadEvent",value:function(){u.default.CoreController.dispatchEvent({type:"coursewarePreloaded",message:{coursePath:"coursePath"}}),u.default.CoreController.dispatchEvent({type:"room_noPreload"})}},{key:"render",value:function(){var e=this.state,t=e.progress,a=e.skipPreload;return d.default.createElement("div",{id:"PreLoading_box",className:"PreLoading_box",style:{display:a?"none":"block"}},d.default.createElement("div",{className:"bg"}),d.default.createElement("div",{className:"container"},d.default.createElement("div",{className:"PreLoad"},d.default.createElement("div",{className:"PreLoading",style:{width:t}})),d.default.createElement("span",{className:"skip",onClick:this.skipPreload.bind(this)},c.default.language.languageData.login.language.preLoad.pass)),d.default.createElement("div",{className:"load"},c.default.language.languageData.login.language.preLoad.text,"(",t,")"))}}]),t}(d.default.Component);t.default=h},Khmk:function(e,t,a){},LAQx:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcTeacherVideoStyle=t.getWarpStyle=t.calcVideoStyle=void 0;var i=s(a("4d7F"));t.keySort=function(e){return function(t,a){var i=t[e],o=a[e];return i<o?-1:i>o?1:0}},t.getInitVideoSize=u,t.getVideoSize=c,t.coursewareDownOrVideoDown=f,t.encompassmentVideo=h,t.bilateralVideoWidth=m,t.mainPeopleVideoWidth=p,t.limitVideoSize=function(e,t,a,i,l){var s=window.innerWidth/o.default.STANDARDSIZE,r=document.getElementById("lc-full-vessel"),d=r.clientWidth,c=r.clientHeight,f=u(a,i,l),h=f.initVideoWidth,m=f.initVideoHeight;(e<h||t<m)&&(e=h,t=m);(e>=d/s||t>=c/s)&&(n.default.videoScale>d/c?t=(e=d/s)/n.default.videoScale:e=(t=c/s)*n.default.videoScale);return{videoWidth:e,videoHeight:t}},t.SwitchLayout=function(e){return{CoursewareDown:{column:!0,blackBroadOrder:1,videoOrder:0,videoWidth:1,blackBroadWidth:1,videoWrap:!1,teacherVideoWidth:r,showChatVessel:!1,pureVideoMod:!1,layoutName:"CoursewareDown"},VideoDown:{column:!0,blackBroadOrder:0,videoOrder:1,videoWidth:1,blackBroadWidth:1,videoWrap:!1,teacherVideoWidth:r,showChatVessel:!1,pureVideoMod:!1,layoutName:"VideoDown"},Encompassment:{column:!1,blackBroadOrder:0,videoOrder:1,videoWidth:d,blackBroadWidth:1-d,videoWrap:!0,teacherVideoWidth:1,showChatVessel:!0,pureVideoMod:!1,layoutName:"Encompassment"},Bilateral:{column:!1,blackBroadOrder:0,videoOrder:1,videoWidth:d,blackBroadWidth:1-d,videoWrap:!0,teacherVideoWidth:1,showChatVessel:!1,pureVideoMod:!1,layoutName:"Bilateral"},MainPeople:{column:!1,blackBroadOrder:0,videoOrder:1,videoWidth:d,blackBroadWidth:1-d,videoWrap:!0,teacherVideoWidth:.5,showChatVessel:!1,pureVideoMod:!0,layoutName:"MainPeople"},OnlyVideo:{column:!0,blackBroadOrder:0,videoOrder:1,videoWidth:1,blackBroadWidth:1,videoWrap:!1,teacherVideoWidth:r,showChatVessel:!1,pureVideoMod:!0,layoutName:"OnlyVideo"}}[e]||{}},t.getUser=g,t.isTeacher=function(e){var t=g(e);if(t&&t.role===o.default.role.roleChairman)return!0;return!1},t.isTeachingAssistant=function(e){var t=g(e);if(t&&t.role===o.default.role.roleTeachingAssistant)return!0;return!1},t.isClassTeacher=function(e){var t=g(e);if(t&&t.role===o.default.role.roleClassTeacher)return!0;return!1},t.calcVideoSize=function(e){return new i.default(function(e,t){var a=document.querySelector("#lc-full-vessel");if(!a)return t();var i=n.default.windowInnerWidth/o.default.STANDARDSIZE,l=a.offsetWidth,s=a.offsetHeight,r=setTimeout(function(){var t=a.offsetWidth,o=a.offsetHeight,n=v(a),d=n.top,u=n.left;l!=t&&s!=o||(clearTimeout(r),e({position:"absolute",top:d/i+"rem",left:u/i+"rem",width:t/i+"rem",height:o/i+"rem",zIndex:"349"}))},100)})},t.setContentVesselOffset=function(){var e=document.querySelector("#lc-full-vessel");if(!e)return;var t=n.default.windowInnerWidth/o.default.STANDARDSIZE,a=e.offsetWidth,i=e.offsetHeight,l=v(e),s=l.top,r=l.left;Object.customAssign(n.default.dragRange,{left:r/t,top:s/t,bottom:(n.default.windowInnerHeight-a-s)/t,right:(n.default.windowInnerWidth-i-r)/t})};var o=s(a("eQYT")),n=s(a("HPAy")),l=s(a("mrNk"));function s(e){return e&&e.__esModule?e:{default:e}}var r=1/7,d=.25;function u(e,t,a){var i=n.default.windowInnerWidth/o.default.STANDARDSIZE,l=c(e,t,a,t),s=l.videoWidth,r=l.videoHeight;return{initVideoWidth:s*window.GLOBAL.windowInnerWidth/100/i,initVideoHeight:r*window.GLOBAL.windowInnerWidth/100/i}}function c(e,t,a,i){var n=null,l=o.default.joinRoomInfo.roomVideoHeight/o.default.joinRoomInfo.roomVideoWidth;switch(e){case"CoursewareDown":case"VideoDown":n=f(i,a,t>i);break;case"Encompassment":n=a?25:h(i);break;case"MorePeople":case"Bilateral":n=m(i,a);break;case"MainPeople":n=p(i)}return{videoWidth:n,videoHeight:n*l}}function f(e,t,a){var i=100/7;t?i=100/7:i=e<=(a?6:7)?100/7.02:e>(a?12:14)?100/14.02:(a?100-100/7:100)/(e+.02);return i}function h(e){return e<=6?12.5:e>12?75/12.02:75/(e+.02)}function m(e,t){var a=100/8.08;if(t)a=25;else{var i=o.default.joinRoomInfo.roomVideoHeight/o.default.joinRoomInfo.roomVideoWidth,n=2,l=document.body.clientWidth,s=(document.body.clientHeight-.021775*l-.25*i*l)*l/4;a=100/(4.04*(n=(n=Math.ceil(Math.sqrt(e*i/s)*l/4.04))>2?n:2))}return a}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=100/(4.04*t),i=a*(o.default.joinRoomInfo.roomVideoHeight/o.default.joinRoomInfo.roomVideoWidth),n=document.body.clientWidth,l=document.body.clientHeight/n*100;return i*Math.ceil(e/t)>l?t>7?a:p(e,++t):a}function g(e){if(l.default.getTkRoom())return l.default.getTkRoom().getUser(e)}function v(e){for(var t=0,a=0;e.offsetParent;)t+=e.offsetTop,a+=e.offsetLeft,e=e.offsetParent;return{top:t,left:a}}t.calcVideoStyle=function(e,t,a){var i=o.default.joinRoomInfo.roomVideoHeight/o.default.joinRoomInfo.roomVideoWidth||.75,n=y(),l=n.warpClientWidth,s=n.warpClientHeight,r=void 0,d=void 0;return a?(d=(r=l/e)*i)*t>s&&(r=(d=s/t)/i):(r=(d=s/t)/i)*e>l&&(d=(r=l/e)*i),{clientWidth:r,clientHeight:d}};var y=t.getWarpStyle=function(){var e=document.getElementsByTagName("body")[0]||{clientWidth:100,clientHeight:100},t=document.getElementById("header_container")||{clientWidth:e.clientWidth,clientHeight:e.clientHeight};return{warpClientWidth:100,warpClientHeight:100*((e.clientHeight-t.clientHeight)/e.clientWidth).toFixed(4)}};t.calcTeacherVideoStyle=function(e){var t=document.getElementsByTagName("body")[0]||{clientWidth:100,clientHeight:100},a=document.getElementById("header_container")||{clientWidth:t.clientWidth,clientHeight:t.clientHeight},i=e?{clientWidth:.25*t.clientWidth}:{clientWidth:0},n=100*((t.clientWidth-i.clientWidth)/t.clientWidth).toFixed(4),l=100*((t.clientHeight-a.clientHeight)/t.clientWidth).toFixed(4),s=o.default.joinRoomInfo.roomVideoHeight/o.default.joinRoomInfo.roomVideoWidth||.75,r=n<79?74.8:n,d=r*s;return d>l&&(r=(d=l)/s),{clientWidth:r,clientHeight:d}}},LSTa:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,n=u(a("SEkw")),l=u(a("JO7F")),s=u(a("iCc5")),r=u(a("V7oC")),d=a("2vnA");function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,a,i,o){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),o&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(o):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}var f=(i=function(){function e(){var t,a,i,l;(0,s.default)(this,e),t=this,a="isDistroy",l=this,(i=o)&&(0,n.default)(t,a,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(l):void 0})}return(0,r.default)(e,[{key:"distroy",value:function(){this.isDistroy=!0}}]),e}(),o=c(i.prototype,"isDistroy",[d.observable],{enumerable:!0,initializer:function(){return!1}}),c(i.prototype,"distroy",[d.action],(0,l.default)(i.prototype,"distroy"),i.prototype),i);t.default=f},LUxo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=f(a("QbLZ")),o=f(a("Yz+Y")),n=f(a("iCc5")),l=f(a("V7oC")),s=f(a("FYw3")),r=f(a("mRg0")),d=a("q1tI"),u=f(d),c=f(a("i8i4"));f(a("HPAy")),a("RCvR");function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={initX:a.props.initX||0,initY:a.props.initY||0,x:a.props.x||0,y:a.props.y||0},a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidUpdate",value:function(e,t){this.props.x===e.x&&this.props.y===e.y||this.setState({x:e.x,y:e.y})}},{key:"componentDidMount",value:function(){var e=c.default.findDOMNode(this);e.style.zIndex=300,this.self=e}},{key:"fixDragEnd",value:function(e){this.props.fixDragEnd(e)}},{key:"render",value:function(){var e=this.props.children,t=this.state,a=t.x,o=t.y,n=t.initX,l=t.initY,s=(this.props.isDrag,this.props.isDrag,{backgroundColor:"#eee",touchAction:"none!important",transform:"translate3d("+(a-n)+"px,"+(o-l)+"px,0)",opacity:.7});return u.default.cloneElement(e,{onMouseLeave:this.fixDragEnd.bind(this),onMouseDown:this.fixDragEnd.bind(this),style:(0,i.default)({},s,e.props.style)})}}]),t}(d.Component);t.default=h},LbeR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryFileId=t.FileEventObserver=t.FileListEvent=t.FileItemEvent=void 0;var i=p(a("/f1G")),o=p(a("gDS+")),n=p(a("FyfS")),l=p(a("QbLZ")),s=p(a("GQeE")),r=p(a("FYSC")),d=p(a("HPAy")),u=p(a("1Ea7")),c=p(a("mrNk")),f=p(a("eQYT")),h=p(a("aJKe")),m=p(a("3mpg"));function p(e){return e&&e.__esModule?e:{default:e}}var g={media:"",course:"",mediaPlaying:null},v={deleteDocuemnt:function(e,t){d.default.isLeaveRoom||(t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0),u.default.showConfirm(d.default.language.languageData.alertWin.call.fun.deleteCourseFile.isDel,function(t){t&&((0,s.default)(g).map(function(t){g[t]==e&&(g[t]="")}),c.default.getTkRoom().deleteFile(e,function(t,a){0===t&&a?h.default.CoreController.dispatchEvent({type:"fileListEvent",message:{delId:e}}):u.default.showError(d.default.language.languageData.alertWin.call.fun.deleteCourseFile.fileDelete.failure.text)}))}))},deletePublicDocuemnt:function(e,t){d.default.isLeaveRoom||(t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0),u.default.showConfirm(d.default.language.languageData.alertWin.call.fun.deleteCourseFile.isDel,function(t){t&&((0,s.default)(g).map(function(t){g[t]==e&&(g[t]="")}),m.default.delBandDucument({fileid:e},function(e){0!=+e.code&&u.default.showError(d.default.language.languageData.alertWin.call.fun.deleteCourseFile.fileDelete.failure.text)}))}))},openDocuemnt:function(e,t){t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0),e&&(d.default.playMediaFileing&&(c.default.getTkRoom().stopShareMedia(),c.default.getTkRoom().stopShareLocalMedia()),"mp3"!==e.filetype&&"mp4"!==e.filetype?g.course=e.fileid:g.media=e.fileid,c.default.getTkWhiteBoardManager().changeDocument(e.fileid,e.currpage))},cancelFileUpload:function(e,t){t&&t.abort&&"function"==typeof t.abort&&t.abort();var a=(0,l.default)({},this.state.tempfileList);a[e]=null;var i=(0,l.default)({},this.state.fileList);delete i[e],this.setState({tempfileList:a,fileList:i})},fileUploadErrorCode:function(e){var t={"-1":d.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeOne.text,"-2":d.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeTwo.text,"-3":d.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeThree.text,"-4":d.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeFour.text,"-5":d.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeTwo.text+d.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureCode.text+e,"-6":d.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeTwo.text+d.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureCode.text+e,"-7":d.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeSeven.text,"-8":d.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeEight.text,"-10":d.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeTen.text,3:d.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureFhree.text,4:d.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureFour.text,111:" "};return t[String(e)]?t[String(e)]:d.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileUpload.failureNegativeTwo.text},addWhiteBoardInfo:function(e){return{fileid:0,companyid:"",filename:d.default.language.languageData.toolContainer.toolIcon.whiteBoard.title,uploadusername:"",downloadpath:"",swfpath:"",isContentDocument:!1,filetype:"whiteboard",currpage:1,pagenum:1,dynamicppt:0,filecategory:0,fileprop:0}}},y={handlerRoomAddFile:function(e){var t=e.message,a=t.fileid;t.fromID;return c.default.getTkRoom().getFileinfo&&c.default.getTkRoom().getFileinfo(a)},handlerRoomDeleteFile:function(e){var t=e.message;return{fileid:t.fileid,fromID:t.fromID}}},S={_filterList:function(e){var t=[],a=[],i=[],o=[];return e.map(function(e){"mp3"===e.filetype||"mp4"===e.filetype?f.default.joinRoomInfo.isDocumentClassification&&e.filecategory?t.push(e):a.push(e):f.default.joinRoomInfo.isDocumentClassification&&e.filecategory?i.push(e):o.push(e)}),{mediaPublicFiles:t,mediaPrivateFiles:a,coursePublicFiles:i,coursePrivateFiles:o}},_filterFileBySearch:function(e,t){var a=[];if(t){var i=!0,o=!1,l=void 0;try{for(var s,r=(0,n.default)(e);!(i=(s=r.next()).done);i=!0){var d=s.value;-1!=d.filename.indexOf(t.replace(/&nbsp;/g," "))&&a.push(d)}}catch(e){o=!0,l=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw l}}}else a=e;return a},_sortFileList:function(e,t){var a=t.fileSortType,i=t.isAec,n=void 0;if(e=JSON.parse((0,o.default)(e)),r.default.isArray(e)){if(e.length&&e[0]&&0!=e[0].fileid)for(var l=0,s=e.length;l<s;l++){var d=e[l];if(d&&0==d.fileid){n=d,e.splice(l,1);break}}return e.sort(function(e,t){if(void 0===e||void 0===t||!e.hasOwnProperty(a)||!t.hasOwnProperty(a))return 0;if(0==e.fileid||0==t.fileid)return e-t;var o=e[a],n=t[a];"fileid"===a&&(o=Number(o),n=Number(n));var l=i?1:-1;return o>n?1*l:o<n?-1*l:0}),n&&e.unshift(n),e}},_getFilterAndSortFileArr:function(e,t,a){var i=a.fileSortType,o=a.isAec,n=this._filterFileBySearch(e,t);return this._sortFileList(n,{fileSortType:i,isAec:o})},_openDefaultDocument:function(){var e=d.default.defaultFileInfo.fileid,t=this.state.fileList[e];t&&c.default.getTkWhiteBoardManager().changeDocument(d.default.defaultFileInfo.fileid,t.currpage)},_initDocumentDefaultState:function(){var e=(0,l.default)({},this.state.fileList),t=!0,a=!1,o=void 0;try{for(var s,r=(0,n.default)((0,i.default)(e));!(t=(s=r.next()).done);t=!0){var d=s.value;0==d.fileid&&c.default.getTkWhiteBoardManager().resetPureWhiteboardTotalPage(),d.currpage=1}}catch(e){a=!0,o=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw o}}this.setState({fileList:e})}};t.FileItemEvent=v,t.FileListEvent=S,t.FileEventObserver=y,t.HistoryFileId=g},LvrH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o,n,l,s,r,d=m(a("SEkw")),u=m(a("JO7F")),c=m(a("iCc5")),f=m(a("V7oC")),h=a("2vnA");function m(e){return e&&e.__esModule?e:{default:e}}function p(e,t,a,i){a&&(0,d.default)(e,t,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(i):void 0})}function g(e,t,a,i,o){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),o&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(o):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}var v=new(i=function(){function e(){(0,c.default)(this,e),p(this,"isMaxVideo",o,this),p(this,"nowOperationUserId",n,this),p(this,"oversizeAllUserId",l,this),p(this,"patrolGroupId",s,this),p(this,"allShowGroup",r,this)}return(0,f.default)(e,[{key:"changeIsMaxVideo",value:function(e){this.isMaxVideo=e}},{key:"setNowOperationUserId",value:function(e){this.nowOperationUserId=e}},{key:"changeOversizeAllUserId",value:function(e,t){var a=this.oversizeAllUserId;if("add"===t)a.push(e);else if("del"===t){var i=a.indexOf(e);i>-1&&a.splice(i,1)}this.oversizeAllUserId=a}},{key:"changeAllShowGroup",value:function(e,t){if(t)this.allShowGroup=[e];else{var a=this.allShowGroup,i=a.indexOf(e);i>-1?a.splice(i,1):a.push(e),this.allShowGroup=a}}}]),e}(),o=g(i.prototype,"isMaxVideo",[h.observable],{enumerable:!0,initializer:function(){return!1}}),n=g(i.prototype,"nowOperationUserId",[h.observable],{enumerable:!0,initializer:function(){return""}}),l=g(i.prototype,"oversizeAllUserId",[h.observable],{enumerable:!0,initializer:function(){return[]}}),s=g(i.prototype,"patrolGroupId",[h.observable],{enumerable:!0,initializer:function(){return""}}),r=g(i.prototype,"allShowGroup",[h.observable],{enumerable:!0,initializer:function(){return[]}}),g(i.prototype,"changeIsMaxVideo",[h.action],(0,u.default)(i.prototype,"changeIsMaxVideo"),i.prototype),g(i.prototype,"setNowOperationUserId",[h.action],(0,u.default)(i.prototype,"setNowOperationUserId"),i.prototype),g(i.prototype,"changeOversizeAllUserId",[h.action],(0,u.default)(i.prototype,"changeOversizeAllUserId"),i.prototype),g(i.prototype,"changeAllShowGroup",[h.action],(0,u.default)(i.prototype,"changeAllShowGroup"),i.prototype),i);t.default=v},M3nf:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(a("Yz+Y")),o=d(a("iCc5")),n=d(a("V7oC")),l=d(a("FYw3")),s=d(a("mRg0")),r=d(a("q1tI"));function d(e){return e&&e.__esModule?e:{default:e}}a("QiFC");var u=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.colorArr=["#000000","#9B9B9B","#FFFFFF","#FF7EA1","#FF3B58","#FF0000","#F08218","#B66700","#8F4200","#FF7500","#FFD100","#FFF600","#ABD500","#78BC24","#2EA937","#16B4A4","#40C3FF","#008DEB","#0043FF","#BFC7FF","#E352FF","#76288B","#412088","#0F2378"],a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"handleClickSelectColor",value:function(e){"function"==typeof this.props.setLineColor&&this.props.setLineColor(e)}},{key:"render",value:function(){var e=this,t=this.props.selectColor;return r.default.createElement("ul",{className:"color-picker"},this.colorArr.map(function(a,i){return r.default.createElement("li",{key:i,className:"select-color "+(t===a?"active":""),style:{backgroundColor:a},onClick:e.handleClickSelectColor.bind(e,a)})}))}}]),t}(r.default.Component);t.default=u},MFcB:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=h(a("14Xm")),o=h(a("D3Ub")),n=h(a("Yz+Y")),l=h(a("iCc5")),s=h(a("V7oC")),r=h(a("FYw3")),d=h(a("mRg0"));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.importComponent,a=e.asyncLoadComponentID,h=e.isNecessaryAwit,m=void 0===h||h,p=e.loadedCallback,g=e.destroyCallback,v=e.componentName;return function(e){function u(e){(0,l.default)(this,u);var t=(0,r.default)(this,(u.__proto__||(0,n.default)(u)).call(this,e));return t.state={component:void 0},t.isNecessaryAwit=m,t.asyncLoadComponentID=null!=a?a:(v&&"string"==typeof v?v+"_":"AsyncComponent_")+(new Date).getTime()+"_"+Math.random(),t}var h;return(0,d.default)(u,e),(0,s.default)(u,[{key:"componentDidMount",value:(h=(0,o.default)(i.default.mark(function e(){var a,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._setComponentLoadState(!1),e.next=3,t(this.asyncLoadComponentID);case 3:a=e.sent,o=a.default,this.setState({component:o});case 6:case"end":return e.stop()}},e,this)})),function(){return h.apply(this,arguments)})},{key:"componentDidUpdate",value:function(e,t){void 0===t.component&&this.state.component&&(this._setComponentLoadState(!0),p&&"function"==typeof p&&p(this.asyncLoadComponentID))}},{key:"componentWillUnmount",value:function(){this._setComponentLoadState(void 0,!0),g&&"function"==typeof g&&g(this.asyncLoadComponentID)}},{key:"_setComponentLoadState",value:function(e,t){window.asyncLoadComponentList=window.asyncLoadComponentList||{},window.asyncLoadComponentList.necessaryAwit=window.asyncLoadComponentList.necessaryAwit||{},window.asyncLoadComponentList.notAwit=window.asyncLoadComponentList.notAwit||{},t?(L.Logger.info("AsyncComponent lift is destroy , asyncLoadComponentID is "+this.asyncLoadComponentID+" , isNecessaryAwit is "+this.isNecessaryAwit),this.isNecessaryAwit?delete window.asyncLoadComponentList.necessaryAwit[this.asyncLoadComponentID]:delete window.asyncLoadComponentList.notAwit[this.asyncLoadComponentID]):(L.Logger.info("AsyncComponent lift is "+(e?"living":"create")+" , asyncLoadComponentID is "+this.asyncLoadComponentID+" , isNecessaryAwit is "+this.isNecessaryAwit),this.isNecessaryAwit?window.asyncLoadComponentList.necessaryAwit[this.asyncLoadComponentID]=e:window.asyncLoadComponentList.notAwit[this.asyncLoadComponentID]=e)}},{key:"render",value:function(){var e=this.state.component;return e?c.default.createElement(e,this.props):c.default.createElement(f.default,null)}}]),u}(u.Component)};var u=a("q1tI"),c=h(u),f=h(a("fNWt"));function h(e){return e&&e.__esModule?e:{default:e}}},MKj4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o,n=y(a("QbLZ")),l=y(a("Yz+Y")),s=y(a("iCc5")),r=y(a("V7oC")),d=y(a("FYw3")),u=y(a("mRg0")),c=a("q1tI"),f=y(c),h=y(a("i8i4")),m=y(a("17x9")),p=y(a("LUxo")),g=y(a("HPAy")),v=a("RCvR");function y(e){return e&&e.__esModule?e:{default:e}}var S=document,b=0,C=(o=i=function(e){function t(e){(0,s.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.getBox=function(e){e&&(a.box=S.querySelector(e))},a.move=function(e){if(e.stopPropagation(),e.preventDefault(),!0!==a.props.disable&&!g.default.isVideoStretch){S.body.style.userSelect="none",a.setState({dragging:!0});var t=a.state,i=t.lastX,o=t.lastY,n=void 0,l=void 0;if(e.type&&"touchmove"===e.type?(n=e.touches[0].clientX-a.state.originX+i,l=e.touches[0].clientY-a.state.originY+o):(n=e.clientX-a.state.originX+i,l=e.clientY-a.state.originY+o),a.props.dnd){var s={id:a.props.id,node:a.self,x:n,y:n,lastX:a.state.lastX,lastY:a.state.lastY,dragging:!0};a.props.onStart(e,s),a.props.onDrag&&a.props.onDrag(e,s)}else{var r=a.props.bounds;if(r){var d=!0===r?r:(0,v.parseBounds)(r),u=void 0,c=void 0;if(a.box){var f=a.props.BorderWidth?a.props.BorderWidth:0;d={left:(0,v.int)(a.box.style.paddingLeft)+(0,v.int)(a.self.style.marginLeft)-(0,v.int)(a.self.offsetLeft),top:(0,v.int)(a.box.style.paddingTop)+(0,v.int)(a.self.style.marginTop),right:(0,v.innerWidth)(a.box)-(0,v.outerWidth)(a.self)+(0,v.int)(a.box.style.paddingRight)-(0,v.int)(a.self.style.marginRight)- -(0,v.int)(a.self.offsetLeft)-2*f,bottom:(0,v.innerHeight)(a.box)-(0,v.outerHeight)(a.self)+(0,v.int)(a.box.style.paddingBottom)+(0,v.int)(a.self.style.marginBottom)-2*f},u=function(e){return e>=d.left&&e<=d.right},c=function(e){return e>=d.top&&e<=d.bottom}}u(a.state.x)&&c(a.state.y)&&((0,v.isNumber)(d.right)&&(n=Math.min(n,d.right)),(0,v.isNumber)(d.bottom)&&(l=Math.min(l,d.bottom)),(0,v.isNumber)(d.left)&&(n=Math.max(n,d.left)),(0,v.isNumber)(d.top)&&(l=Math.max(l,d.top)))}}a.setState({x:n,y:l})}},a.onDragStart=function(e){if(a.props.isDrag||(a.flag=!1),!0!==a.props.disable&&!g.default.isVideoStretch){if(a.props.onMouseDown(e),a.self=e.currentTarget,a.self.style.cursor="move",S.addEventListener("mouseup",a.onDragEnd),S.addEventListener("touchend",a.onDragEnd),S.addEventListener("mousemove",a.move),S.addEventListener("touchmove",a.move),a.props.dnd&&!a.props.isDrag)b=(0,v.int)(a.self.offsetLeft),(0,v.int)(a.self.offsetTop),a.setState({x:0,y:0});else{var t={id:a.props.id,node:a.self,x:e.pageX,y:e.pageY,lastX:e.pageX,lastY:e.pageX};a.props.onStart(e,t),a.props.onDrag&&a.props.onDrag(e,t)}var i=void 0,o=void 0;"touchstart"===e.type?(i=e.touches[0].clientX,o=e.touches[0].clientY):(i=e.clientX,o=e.clientY),a.props.dnd?a.setState({originX:i,originY:o,lastX:a.props.isDrag?a.state.x:0,lastY:a.props.isDrag?a.state.y:0,x:a.state.lastX,y:a.state.lastY},function(){}):a.setState(function(e,t){return{originX:i,originY:o,lastX:e.x,lastY:e.y}})}},a.onDragEnd=function(e){if(!0!==a.props.disable&&!g.default.isVideoStretch){a.setState({dragging:!1}),S.removeEventListener("mousemove",a.move),S.removeEventListener("touchmove",a.move),S.removeEventListener("mouseup",a.onDragEnd),S.removeEventListener("touchend",a.onDragEnd),a.self&&a.self.style&&a.self.style.cursor&&(a.self.style.cursor="");var t=a.props,i=t.dnd,o=t.isDrag,n=void 0;if(i){if(n={id:a.props.id,node:a.self,x:a.state.x,y:a.state.y,lastX:a.flag?a.state.lastX:0,lastY:a.flag?a.state.lastY:0,dragging:!1},!o){var l=h.default.findDOMNode(a).parentNode.clientHeight;n.x+=b,n.y-=l}a.setState({x:n.x,y:n.y,lastX:n.x,lastY:n.y},function(){this.flag=!!n.lastX})}else n={id:a.props.id,node:a.self,x:a.state.x,y:a.state.y,lastX:a.state.lastX,lastY:a.state.lastY};a.props.onStop(e,n),a.self=null,S.body.style.userSelect=""}},a.state={x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,originX:0,originY:0,lastX:null,lastY:null,dragging:!1},a.flag=!0,a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillUpdate",value:function(e){var t=this.props.position;!e.position||e.position.x===t.x&&e.position.y===t.y||this.setState({x:e.position.x,y:e.position.y})}},{key:"componentDidMount",value:function(){this.props.bounds&&this.getBox(this.props.bounds)}},{key:"render",value:function(){var e=this,t=this.state,a=t.x,i=t.y,o=t.dragging,l=this.props,s=l.children,r=l.dnd,d=(l.isDrag,l.isResize),u=a,c=i,h=function(){return!g.default.isVideoStretch&&{onMouseDown:e.onDragStart.bind(e),onMouseUp:e.onDragEnd.bind(e),onTouchStart:e.onDragStart.bind(e),onTouchEnd:e.onDragEnd.bind(e),onDragStart:e.onDragStart.bind(e),onDragEnd:e.onDragEnd.bind(e)}},m=!g.default.isVideoStretch||d?{touchAction:"none!important",transform:"translate3d("+u+"px,"+c+"px,0)"}:null;if(r&&!g.default.isVideoStretch){var v={initX:this.state.lastX?this.state.lastX:0,initY:this.state.lastY?this.state.lastY:0,x:this.state.x,y:this.state.y,isDrag:this.props.isDrag,fixDragEnd:this.onDragEnd.bind(this)};return o?f.default.createElement(p.default,v,f.default.cloneElement(s,{style:(0,n.default)({},s.props.style)})):f.default.cloneElement(s,(0,n.default)({},h(),{style:(0,n.default)({},s.props.style)}))}return f.default.cloneElement(s,(0,n.default)({},h(),{style:(0,n.default)({},m,s.props.style)}))}}]),t}(c.Component),i.defaultProps={x:void 0,y:void 0},o);C.propTypes={x:m.default.number,y:m.default.number,isUserMove:m.default.bool,disable:m.default.bool,onDragStart:m.default.func,onDragMove:m.default.func,onDragEnd:m.default.func},t.default=C},MnM8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(a("QbLZ")),o=s(a("q1tI")),n=s(a("17x9")),l=s(a("HPAy"));function s(e){return e&&e.__esModule?e:{default:e}}var r=function(e){var t=e.uploadStatus,a=e.uploadCancel,i=e.selectFileFn,n=e.fileName,s=e.progress,r=e.errorMsg,d=null;switch(t){case"selecting":d=o.default.createElement("div",{className:"select-file",onClick:i},o.default.createElement("span",{className:"uploas-icon select-file-icon"}),o.default.createElement("p",null),o.default.createElement("p",{className:"select-loacl-file"},l.default.language.languageData.toolContainer.toolIcon.addCourse.uploadCourse.button.setLoaclFile));break;case"selected":d=o.default.createElement("div",{className:"selected-file"},o.default.createElement("p",{className:"file-name"},n),o.default.createElement("p",null),o.default.createElement("p",{className:"select-loacl-file",onClick:i},l.default.language.languageData.toolContainer.toolIcon.addCourse.uploadCourse.button.setLoaclAgain));break;case"loading":d=o.default.createElement("div",{className:"file-loading"},o.default.createElement("div",{className:"file-loading-tiao"},o.default.createElement("p",{className:"file-loading-status"},o.default.createElement("span",{className:"file-loading-progress"},o.default.createElement("span",{className:"file-loading-progress-heart",style:{width:s+"%"}}))),o.default.createElement("span",{className:"file-load-close",onClick:a},"X")),o.default.createElement("p",null),o.default.createElement("p",{className:"file-name"},n));break;case"success":d=o.default.createElement("div",{className:"file-load-success"},o.default.createElement("span",{className:"uploas-icon load-success-icon"}),o.default.createElement("p",null),o.default.createElement("p",{className:"file-name"},n));break;case"fail":d=o.default.createElement("div",{className:"file-load-fail"},o.default.createElement("span",{className:"uploas-icon load-fail-icon"}),o.default.createElement("p",null),o.default.createElement("p",{className:"error-msg"},r))}return d},d=function(e){return o.default.createElement("div",{className:"select-file-warp"},o.default.createElement("div",{className:"upload-status"},o.default.createElement(r,(0,i.default)({status:"selecting"},e))),o.default.createElement("div",{className:"instructions"},o.default.createElement("p",null,l.default.language.languageData.toolContainer.toolIcon.addCourse.uploadCourse.uploadNotice.one," "),o.default.createElement("p",null,l.default.language.languageData.toolContainer.toolIcon.addCourse.uploadCourse.uploadNotice.two," "),o.default.createElement("p",null,l.default.language.languageData.toolContainer.toolIcon.addCourse.uploadCourse.uploadNotice.three," "),o.default.createElement("p",null,l.default.language.languageData.toolContainer.toolIcon.addCourse.uploadCourse.uploadNotice.four," "),o.default.createElement("p",null,l.default.language.languageData.toolContainer.toolIcon.addCourse.uploadCourse.uploadNotice.five," ")))};d.propTypes={selectFileFn:n.default.func,uploadCancel:n.default.func,uploadStatus:n.default.oneOf(["selecting","selected","loading","success","fail"]),progress:n.default.number,errorMsg:n.default.string,fileName:n.default.string,fileType:n.default.string},t.default=d},"N+lb":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=m(a("GQeE")),o=m(a("FyfS"));t.loadActionButtonArray=function(e,t){var a=[],u=[];if(s.default.playback)return a;var c=d.default.handler.getAppPermissions("isShowTrophy"),f=e.id===r.default.getTkRoom().getMySelf().id,h=d.default.handler.getAppPermissions("closeMyseftAV"),m=(d.default.handler.getAppPermissions("controlOtherVideo"),{});if(s.default.classBegin)l.default.hasRole.roleStudent?m={scrawl:!1,platform:!1,audio:h&&f,video:h&&f,gift:!1,giftReduce:!1,restoreDrag:!1,oneKeyReset:!1,doubleDivision:e.role!==l.default.role.roleChairman&&t.isDoubleDivisionOver}:l.default.hasRole.roleChairman?m={scrawl:!f,platform:!f,audio:!0,video:!0,gift:!f,giftReduce:!f,restoreDrag:d.default.handler.getAppPermissions("isCanDragVideo"),oneKeyReset:f,onlyAudio:f,pointerReminder:l.default.joinRoomInfo.pointerReminder&&e.role!==l.default.role.roleChairman&&e.role!==l.default.role.roleTeachingAssistant,doubleDivision:t.isDoubleDivisionOver}:l.default.hasRole.roleTeachingAssistant?m={scrawl:!f&&e.role!==l.default.role.roleChairman,platform:!f&&e.role!==l.default.role.roleChairman,audio:!!f||e.role!==l.default.role.roleChairman,video:!!f||e.role!==l.default.role.roleChairman,gift:!1,giftReduce:!1,restoreDrag:d.default.handler.getAppPermissions("isCanDragVideo"),oneKeyReset:!1,onlyAudio:!1,pointerReminder:l.default.joinRoomInfo.pointerReminder&&e.role!==l.default.role.roleChairman&&e.role!==l.default.role.roleTeachingAssistant,doubleDivision:t.isDoubleDivisionOver}:l.default.hasRole.roleClassTeacher?m={scrawl:!f,platform:!f,audio:!0,video:!0,gift:!f,giftReduce:!f,restoreDrag:d.default.handler.getAppPermissions("isCanDragVideo"),oneKeyReset:f,onlyAudio:f,pointerReminder:l.default.joinRoomInfo.pointerReminder&&e.role!==l.default.role.roleChairman&&e.role!==l.default.role.roleTeachingAssistant,doubleDivision:t.isDoubleDivisionOver}:l.default.hasRole.rolePatrol&&(m={scrawl:!1,platform:!1,audio:!1,video:!1,gift:!1,giftReduce:!1,restoreDrag:!1,oneKeyReset:!1});else{if(!l.default.joinRoomInfo.isBeforeClassReleaseVideo)return a;m={scrawl:!1,platform:!1,audio:h&&f,video:h&&f,gift:!1,giftReduce:!1,restoreDrag:!1,oneKeyReset:!1,onlyAudio:!1}}var I={scrawl:{disabled:!1,languageKeyText:e.candraw?"no":"yes",className:"scrawl-btn "+(e.candraw?"icon-btn_shouquan":"icon-btn_close-shouquan"),onClick:p.bind(this,e),title:e.candraw?s.default.language.languageData.toolContainer.toolIcon.userList.button.Scrawl.on.title:s.default.language.languageData.toolContainer.toolIcon.userList.button.Scrawl.off.title,isShow:!t.isSplitScreenFromStream&&!f&&e.role===l.default.role.roleStudent&&!t.isOnlyVideo},platform:{disabled:!1,languageKeyText:e.publishstate!==l.default.PUBLISHSTATE.PUBLISH_STATE_NONE?"yes":"no",className:"platform-btn "+(e.publishstate!==l.default.PUBLISHSTATE.PUBLISH_STATE_NONE?"icon-btn_shangtai":"icon-btn_xiatai"),onClick:g.bind(this,e),title:e.publishstate!==l.default.PUBLISHSTATE.PUBLISH_STATE_NONE?s.default.language.languageData.toolContainer.toolIcon.userList.button.update.up.title:s.default.language.languageData.toolContainer.toolIcon.userList.button.update.down.title,isShow:!f&&(e.role===l.default.role.roleStudent||e.role===l.default.role.roleTeachingAssistant||!t.isDrag)},audio:{disabled:!1,languageKeyText:e.publishstate===l.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY||e.publishstate===l.default.PUBLISHSTATE.PUBLISH_STATE_BOTH?"yes":"no",className:"audio-btn "+(e.publishstate===l.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY||e.publishstate===l.default.PUBLISHSTATE.PUBLISH_STATE_BOTH?"icon-btn_audio":"icon-btn_mute"),onClick:v.bind(this,e),title:e.disableaudio?s.default.language.languageData.toolContainer.toolIcon.userList.button.audio.disabled.title:e.publishstate===l.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY||e.publishstate===l.default.PUBLISHSTATE.PUBLISH_STATE_BOTH?s.default.language.languageData.toolContainer.toolIcon.userList.button.audio.on.title:s.default.language.languageData.toolContainer.toolIcon.userList.button.audio.off.title,isShow:e.hasaudio},video:{disabled:!1,languageKeyText:e.publishstate===l.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY||e.publishstate===l.default.PUBLISHSTATE.PUBLISH_STATE_BOTH?"yes":"no",className:"video-btn "+(e.publishstate===l.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY||e.publishstate===l.default.PUBLISHSTATE.PUBLISH_STATE_BOTH?"icon-btn_camera":"icon-btn_close-camera"),onClick:y.bind(this,e),title:e.disablevideo?s.default.language.languageData.toolContainer.toolIcon.userList.button.video.disabled.title:e.publishstate===l.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY||e.publishstate===l.default.PUBLISHSTATE.PUBLISH_STATE_BOTH?s.default.language.languageData.toolContainer.toolIcon.userList.button.video.on.title:s.default.language.languageData.toolContainer.toolIcon.userList.button.video.off.title,isShow:!s.default.isOnlyAudioRoom&&e.hasvideo},gift:{disabled:!1,languageKeyText:"yes",className:"gift-btn icon-btn_send-trophy_default",onClick:S.bind(this,e),title:s.default.language.languageData.otherVideoContainer.button.gift.yes,isShow:!(f||!c)&&(e.role===l.default.role.roleStudent&&(l.default.hasRole.roleChairman||l.default.hasRole.roleClassTeacher))},giftReduce:{disabled:!!(e&&e.giftnumber<=0),languageKeyText:"no",className:"gift-btn icon-btn_delete-trophy_default",onClick:b.bind(this,e),title:s.default.language.languageData.otherVideoContainer.button.gift.no,isShow:!(f||!c||s.default.studentOnDuty.length>0)&&(e.role===l.default.role.roleStudent&&(l.default.hasRole.roleChairman||l.default.hasRole.roleClassTeacher))},restoreDrag:{disabled:!1,languageKeyText:"text",className:"restoreDrag-btn icon-btn_fuwei_student",onClick:C.bind(this,t),title:s.default.language.languageData.otherVideoContainer.button.restoreDrag.text,isShow:!s.default.isSplitScreen&&t.isDrag&&!s.default.isVideoInFullscreen},oneKeyReset:{disabled:!1,languageKeyText:"text",className:"oneKeyReset-btn icon-btn_fuwei",onClick:w.bind(this),title:void 0,isShow:(l.default.hasRole.roleChairman||l.default.hasRole.roleClassTeacher)&&f&&!l.default.isBaseboard&&!l.default.hasRoomtype.oneToOne&&!s.default.isVideoInFullscreen},onlyAudio:{disabled:!1,languageKeyText:s.default.isOnlyAudioRoom?"yes":"no",className:"onlyAudio-btn"+(s.default.isOnlyAudioRoom?" icon-btn_yinpin_close":" icon-btn_yinpin"),onClick:T.bind(this),title:void 0,isShow:l.default.hasRole.roleChairman&&l.default.joinRoomInfo.isHasVideo&&l.default.joinRoomInfo.createOnlyAudioRoom},pointerReminder:{disabled:!1,languageKeyText:"text",className:"pointerReminder-btn "+(e.pointerstate?"icon-btn_close_jiaobian":"icon-btn_jiaobian"),onClick:E.bind(this,e),title:s.default.language.languageData.otherVideoContainer.button.pointerReminder.text,isShow:(l.default.hasRole.roleChairman||l.default.hasRole.roleTeachingAssistant||l.default.hasRole.roleClassTeacher)&&!l.default.hasRoomtype.oneToOne&&l.default.joinRoomInfo.pointerReminder&&e.role!==l.default.role.roleChairman&&e.role!==l.default.role.roleTeachingAssistant},doubleDivision:{disabled:!1,languageKeyText:"text",className:"doubleDivision-btn icon-btn_change",onClick:k.bind(this,e),title:s.default.language.languageData.otherVideoContainer.button.areaExchange.text,isShow:t.isDoubleDivisionOver}},D=!0,x=!1,R=void 0;try{for(var _,P=(0,o.default)((0,i.default)(I));!(D=(_=P.next()).done);D=!0){var A=_.value;m[A]&&u.push(I[A])}}catch(e){x=!0,R=e}finally{try{!D&&P.return&&P.return()}finally{if(x)throw R}}s.default.isVideoInFullscreen?a.length=0:u.map(function(e,t){var i=e.disabled,o=e.languageKeyText,l=e.className,r=e.onClick,d=(e.title,e.isShow);if(d){var u=l.split("-");a.push(n.default.createElement("p",{key:t},n.default.createElement("button",{className:(l||"")+" "+(i?" disabled ":" "),onClick:r&&"function"==typeof r?r:void 0,disabled:i||void 0,onDoubleClick:function(e){e.stopPropagation(),e.preventDefault()},style:{display:d?"block":"none"},title:s.default.language.languageData.otherVideoContainer.button[u[0]][o]?s.default.language.languageData.otherVideoContainer.button[u[0]][o]:void 0})))}});return a};var n=m(a("q1tI")),l=m(a("eQYT")),s=m(a("HPAy")),r=m(a("mrNk")),d=m(a("JL1q")),u=m(a("XbJA")),c=m(a("3mpg")),f=m(a("aJKe")),h=m(a("1Ea7"));function m(e){return e&&e.__esModule?e:{default:e}}function p(e){u.default.changeUserCandraw(e)}function g(e){u.default.userPlatformUpOrDown(e)}function v(e){u.default.userAudioOpenOrClose(e)}function y(e){u.default.userVideoOpenOrClose(e)}function S(e){if(e&&d.default.handler.getAppPermissions("giveAloneUserSendGift")){var t={};if(e.role===l.default.role.roleStudent){var a=e.id,i=e.nickname;if(t[a]=i,l.default.joinRoomInfo.customTrophys&&l.default.joinRoomInfo.customTrophys.length>1&&l.default.joinRoomInfo.customTrophysVoice)f.default.CoreController.dispatchEvent({type:"loadCustomTrophyItem",message:{type:"one",userIdJson:t}});else if(l.default.joinRoomInfo.customTrophys&&1==l.default.joinRoomInfo.customTrophys.length){var o={trophyname:l.default.joinRoomInfo.customTrophys[0].trophyname,trophyeffect:l.default.joinRoomInfo.customTrophys[0].trophyeffect,trophyimg:l.default.joinRoomInfo.customTrophys[0].trophyimg,trophyvoice:l.default.joinRoomInfo.customTrophys[0].trophyvoice};c.default.sendGift(t,o)}else c.default.sendGift(t)}}}function b(e){if(e&&d.default.handler.getAppPermissions("giveAloneUserSendGift")){var t={};if(e.role===l.default.role.roleStudent){var a=e.id,i=e.nickname;if(t[a]=i,0===e.giftnumber)return;s.default.reduceGift&&(c.default.reduceGift(t),s.default.reduceGift=!1)}}}function C(e){var t=e.videoId;e.isDrag&&e.initOtherVideoDragByUserid&&"function"==typeof e.initOtherVideoDragByUserid&&e.initOtherVideoDragByUserid(t)}function k(){f.default.CoreController.dispatchEvent({type:"doubleDivisionExchange",message:!0})}function w(){f.default.CoreController.dispatchEvent({type:"oneKeyRecovery",message:{}})}function T(){!s.default.isOnlyAudioRoom?h.default.showConfirm(s.default.language.languageData.otherVideoContainer.button.onlyAudio.create,function(e){e&&r.default.getTkRoom().switchOnlyAudioRoom(!0)}):h.default.showConfirm(s.default.language.languageData.otherVideoContainer.button.onlyAudio.cancel,function(e){e&&r.default.getTkRoom().switchOnlyAudioRoom(!1)})}function E(e){if(e){var t={pointerstate:!e.pointerstate};u.default.setParticipantPropertyToAll(e.id,t)}}},NBDQ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=h(a("FyfS")),o=h(a("Yz+Y")),n=h(a("iCc5")),l=h(a("V7oC")),s=h(a("FYw3")),r=h(a("mRg0")),d=h(a("q1tI")),u=h(a("XbJA")),c=h(a("aJKe")),f=(h(a("JL1q")),h(a("1Nl6")));function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.turntableAssemblyShowHandel=a.turntableAssemblyShowHandel.bind(a),a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){c.default.CoreController.addEventListener("receive-msglist-dial",this.handlerMsglistDialShow.bind(this),this.listernerBackupid)}},{key:"handlerMsglistDialShow",value:function(e){var t=!0,a=!1,o=void 0;try{for(var n,l=(0,i.default)(e.message.dialShowArr);!(t=(n=l.next()).done);t=!0){n.value;this.props.isDisabledHoldItem("turnplate",!0)}}catch(e){a=!0,o=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw o}}}},{key:"turntableAssemblyShowHandel",value:function(){u.default.sendSignallingDialToStudent({rotationAngle:"rotate(0deg)",isShow:!0},!1),this.props.isDisabledHoldItem("turnplate",!0),this.props.close()}},{key:"render",value:function(){return d.default.createElement("li",{className:"holdAllitem "+(this.props.isDisabled?" disabled":"")},d.default.createElement("div",{onClick:this.turntableAssemblyShowHandel},d.default.createElement("em",{className:"icon "+this.props.bgName}),d.default.createElement("span",null,this.props.name)))}}]),t}(d.default.Component);m=(0,f.default)(m),t.default=m},NHlZ:function(e,t,a){},NTrz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(a("Yz+Y")),o=f(a("iCc5")),n=f(a("V7oC")),l=f(a("FYw3")),s=f(a("mRg0")),r=f(a("q1tI")),d=(f(a("HPAy")),f(a("BMr9"))),u=f(a("kpjk")),c=f(a("aJKe"));function f(e){return e&&e.__esModule?e:{default:e}}a("1AM9");var h=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={isShow:!0},a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){c.default.CoreController.addEventListener(TkConstant.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener(TkConstant.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("fullScreen",this.handlerFullScreen.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("receive-msglist-FullScreen",this.handlerReceiveMsglistFullScreen.bind(this),this.listernerBackupid)}},{key:"handlerRoomPubmsg",value:function(e){switch(e.message.name){case"FullScreen":this.setState({isShow:!1})}}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"FullScreen":this.setState({isShow:!0})}}},{key:"handlerFullScreen",value:function(e){var t=e.message,a=t.isFullScreen;t.fullScreenType;this.setState({isShow:!a})}},{key:"handlerReceiveMsglistFullScreen",value:function(e){this.setState({isShow:!1})}},{key:"render",value:function(){var e={display:this.state.isShow?"flex":"none"};return r.default.createElement("header",{className:"header-wrap clear-float",id:"header_container",style:e},r.default.createElement(d.default,null)," ",r.default.createElement(u.default,null))}}]),t}(r.default.Component);t.default=h},NWGv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=v(a("Yz+Y")),o=v(a("iCc5")),n=v(a("V7oC")),l=v(a("FYw3")),s=v(a("mRg0")),r=v(a("q1tI")),d=v(a("HPAy")),u=v(a("eQYT")),c=v(a("XbJA")),f=v(a("mrNk")),h=v(a("3mpg")),m=v(a("aJKe")),p=v(a("UstG")),g=v(a("JL1q"));function v(e){return e&&e.__esModule?e:{default:e}}a("tqkD");var y=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.start={status_lt_minute_1:!1,status_gt_minute_1:!1,status_gt_minute_0:!1},a.end={status_gt_minute_0:!1,status_gt_minute_3:!1,status_lt_minute_1:!1,status_end_second_10:!1,status_end:!1,status_end_minute_0:!1},a.timeContainer=null,a.state={isShowTimeRemind:!1,ableStartClass:!1,ableEndClass:!1,isShowRemindBtn:!0,remindType:null,timeDifference:null,timeOfTen:10,timeOfFive:5},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){this._handlerRoomConnected()}},{key:"componentWillUnmount",value:function(){m.default.CoreController.removeBackupListerner(this.listernerBackupid),clearInterval(this.notClassBeginTimer),clearInterval(this.systemTimeRemind),clearInterval(this.timerCloseRoom),this.timerCloseRoom=null,this.systemTimeRemind=null,this.notClassBeginTimer=null}},{key:"_handlerRoomConnected",value:function(){if(this.props.roomConnected)if(u.default.joinRoomInfo.endOfClassHoursIsClassOver){c.default.sendSignallingFromUpdateTime(f.default.getTkRoom().getMySelf().id);var e=1e3*u.default.joinRoomInfo.starttime,t=1e3*u.default.joinRoomInfo.endtime;this.listeningNotClassBeginTime(e,t,1e3,0)}else if(u.default.hasRole.roleChairman){c.default.sendSignallingFromUpdateTime(f.default.getTkRoom().getMySelf().id);var a=1e3*u.default.joinRoomInfo.starttime,i=1e3*u.default.joinRoomInfo.endtime;this.listeningNotClassBeginTime(a,i,1e3,0)}}},{key:"listeningNotClassBeginTime",value:function(e,t,a,i){var o=this;clearInterval(this.notClassBeginTimer),this.notClassBeginTimer=setInterval(function(){if(d.default.remindServiceTime){d.default.remindServiceTime+=1e3;var a=d.default.remindServiceTime-e,n=d.default.remindServiceTime-t;if(a<0)u.default.joinRoomInfo.endOfClassHoursIsClassOver||(!1===d.default.classBegin?(p.default.setAppPermissions("classBtnIsDisableOfRemind",!0),a>-6e4&&(!1===o.start.status_lt_minute_1&&(o.start.status_lt_minute_1=!0,o.setState({isShowTimeRemind:!0,ableStartClass:!0,ableEndClass:!1,isShowRemindBtn:!0,remindType:"distanceOneMinute",timeDifference:a}),p.default.setAppPermissions("classBtnIsDisableOfRemind",!1),o.fiveIntervalTime()),0==f.default.getTkRoom().getMySelf().hasaudio?p.default.setAppPermissions("classBtnIsDisableOfRemind",!0):p.default.setAppPermissions("classBtnIsDisableOfRemind",!1))):g.default.handler.getAppPermissions("classBtnIsDisableOfRemind")||p.default.setAppPermissions("classBtnIsDisableOfRemind",!0));else if(!1===d.default.classBegin){if(n>0){if(u.default.joinRoomInfo.endOfClassHoursIsClassOver){if(!1===o.end.status_gt_minute_0)return o.end.end_gt_minute_0=!0,o.setState({isShowTimeRemind:!1,ableStartClass:!1,ableEndClass:!1,isShowRemindBtn:!0,remindType:"noClassInTime",timeDifference:a}),clearInterval(o.notClassBeginTimer),o.notClassBeginTimer=null,f.default.getTkRoom().leaveroom(),m.default.Room.dispatchEvent({type:u.default.EVENTTYPE.RoomEvent.roomDelmsg,message:{name:"ClassBegin"}}),void setTimeout(function(){f.default.getTkRoom().uninit()},300)}else if(!1===o.end.status_gt_minute_0){o.end.end_gt_minute_0=!0,o.setState({isShowTimeRemind:!0,ableStartClass:!1,ableEndClass:!1,isShowRemindBtn:!0,remindType:"noClassInTime",timeDifference:a}),p.default.setAppPermissions("classBtnIsDisableOfRemind",!0);return o.fiveIntervalTime(!0),clearInterval(o.notClassBeginTimer),void(o.notClassBeginTimer=null)}return}if(n>-3e5&&u.default.joinRoomInfo.endOfClassHoursIsClassOver)return!1===o.end.status_lt_minute_1&&(o.end.status_lt_minute_1=!0,o.setState({isShowTimeRemind:!0,ableStartClass:!1,ableEndClass:!0,isShowRemindBtn:!0}),o.fiveIntervalTime()),void(1==o.state.isShowTimeRemind&&o.setState({remindType:"oneBeforeClass",timeDifference:n}));a>6e4&&!u.default.joinRoomInfo.endOfClassHoursIsClassOver?(!1===o.start.status_gt_minute_1&&(o.start.status_gt_minute_1=!0,o.setState({isShowTimeRemind:!0,ableStartClass:!0,ableEndClass:!1,isShowRemindBtn:!0}),o.fiveIntervalTime(),p.default.setAppPermissions("classBtnIsDisableOfRemind",!1)),0==f.default.getTkRoom().getMySelf().hasaudio?p.default.setAppPermissions("classBtnIsDisableOfRemind",!0):p.default.setAppPermissions("classBtnIsDisableOfRemind",!1),1==o.state.isShowTimeRemind&&o.setState({remindType:"exceedOneMinuteOfClass",timeDifference:a})):u.default.joinRoomInfo.endOfClassHoursIsClassOver||(!1===o.start.status_gt_minute_0&&(o.start.status_gt_minute_0=!0,o.setState({isShowTimeRemind:!1,ableStartClass:!0,ableEndClass:!1}),p.default.setAppPermissions("classBtnIsDisableOfRemind",!1)),0==f.default.getTkRoom().getMySelf().hasaudio?p.default.setAppPermissions("classBtnIsDisableOfRemind",!0):p.default.setAppPermissions("classBtnIsDisableOfRemind",!1))}else if(n<0)n<-6e4&&!g.default.handler.getAppPermissions("classBtnIsDisableOfRemind")&&!u.default.joinRoomInfo.endOfClassHoursIsClassOver&&p.default.setAppPermissions("classBtnIsDisableOfRemind",!0),u.default.joinRoomInfo.endOfClassHoursIsClassOver&&n>-3e5&&(!1===o.end.status_lt_minute_1&&(o.end.status_lt_minute_1=!0,o.setState({isShowTimeRemind:!0,ableStartClass:!1,ableEndClass:!0,isShowRemindBtn:!0}),o.fiveIntervalTime(),"ready-end"!==o.timeContainer&&(o.timeContainer="ready-end",m.default.CoreController.dispatchEvent({type:"backTimecolorOfRemind",message:{source:"timeRemind",data:{timeColor:o.timeContainer}}}))),o.state.isShowTimeRemind&&o.setState({remindType:"oneBeforeClass",timeDifference:n})),n>-6e4&&(!1===o.end.status_lt_minute_1&&(o.end.status_lt_minute_1=!0,o.setState({isShowTimeRemind:!0,ableStartClass:!1,ableEndClass:!0,isShowRemindBtn:!0}),o.fiveIntervalTime(),p.default.setAppPermissions("classBtnIsDisableOfRemind",!1),"ready-end"!==o.timeContainer&&(o.timeContainer="ready-end",m.default.CoreController.dispatchEvent({type:"backTimecolorOfRemind",message:{source:"timeRemind",data:{timeColor:o.timeContainer}}}))),1==o.state.isShowTimeRemind&&o.setState({remindType:"oneBeforeClass",timeDifference:n}));else{var l=3e5-n;if(u.default.joinRoomInfo.endOfClassHoursIsClassOver)d.default.remindServiceTime>t&&(o.setState({isShowTimeRemind:!1,ableStartClass:!1,ableEndClass:!0}),clearInterval(o.notClassBeginTimer),o.notClassBeginTimer=null,f.default.getTkRoom().leaveroom(),m.default.Room.dispatchEvent({type:u.default.EVENTTYPE.RoomEvent.roomDelmsg,message:{name:"ClassBegin"}}),setTimeout(function(){f.default.getTkRoom().uninit()},300));else if(l>=0){if(d.default.classBeginTime&&d.default.remindServiceTime,l<=1e4)return!1===o.end.status_end_second_10&&(o.end.status_end_second_10=!0,o.setState({isShowTimeRemind:!0,ableStartClass:!1,ableEndClass:!0}),p.default.setAppPermissions("classBtnIsDisableOfRemind",!1),"end"!==o.timeContainer&&(o.timeContainer="end",m.default.CoreController.dispatchEvent({type:"backTimecolorOfRemind",message:{source:"timeRemind",data:{timeColor:o.timeContainer}}}))),o.setState({isShowRemindBtn:!1,remindType:"closeClassAfterTen",timeOfTen:10}),clearInterval(o.timerCloseRoom),o.timerCloseRoom=setInterval(function(){1==this.state.isShowTimeRemind&&this.setState({isShowRemindBtn:!1,remindType:"closeClassAfterTen",timeOfTen:--this.state.timeOfTen}),d.default.classBeginTime&&d.default.remindServiceTime&&(d.default.remindServiceTime+=1e3),this.state.timeOfTen<1&&(u.default.joinRoomInfo.endImgUrl&&f.default.getTkWhiteBoardManager().openRemoteDocument(u.default.joinRoomInfo.endImgUrl,"classOverImg","generalDocument"),h.default.roomOver(),this.setState({isShowTimeRemind:!1,ableStartClass:!1,ableEndClass:!0}),clearInterval(this.timerCloseRoom),this.timerCloseRoom=null)},1e3),clearInterval(o.notClassBeginTimer),void(o.notClassBeginTimer=null);n>18e4?(!1===o.end.status_gt_minute_3&&(o.end.status_gt_minute_3=!0,o.setState({isShowTimeRemind:!0,ableStartClass:!1,ableEndClass:!0,isShowRemindBtn:!0}),p.default.setAppPermissions("classBtnIsDisableOfRemind",!1),o.fiveIntervalTime(),"immediately-end"!==o.timeContainer&&(o.timeContainer="immediately-end",m.default.CoreController.dispatchEvent({type:"backTimecolorOfRemind",message:{source:"timeRemind",data:{timeColor:o.timeContainer}}}))),1==o.state.isShowTimeRemind&&o.setState({remindType:"exceedThreeMinuteOfClass",timeDifference:n})):!1===o.end.status_end_minute_0&&(o.end.status_end_minute_0=!0,o.setState({isShowTimeRemind:!1,ableStartClass:!1,ableEndClass:!0}),p.default.setAppPermissions("classBtnIsDisableOfRemind",!1),"end"!==o.timeContainer&&(o.timeContainer="end",m.default.CoreController.dispatchEvent({type:"backTimecolorOfRemind",message:{source:"timeRemind",data:{timeColor:o.timeContainer}}})))}else if(!1===o.end.status_end)return o.end.status_end=!0,o.setState({isShowTimeRemind:!0,ableStartClass:!1,ableEndClass:!1,isShowRemindBtn:!0,remindType:"exceedFiveMinuteOfClass"}),p.default.setAppPermissions("classBtnIsDisableOfRemind",!0),o.fiveIntervalTime(),clearInterval(o.notClassBeginTimer),void(o.notClassBeginTimer=null)}}else c.default.sendSignallingFromUpdateTime(f.default.getTkRoom().getMySelf().id);++i>300&&(c.default.sendSignallingFromUpdateTime(f.default.getTkRoom().getMySelf().id),i=0)},a)}},{key:"fiveIntervalTime",value:function(e){var t=this;clearInterval(this.systemTimeRemind),this.systemTimeRemind=setInterval(function(){t.state.timeOfFive=t.state.timeOfFive-1,t.setState({timeOfFive:t.state.timeOfFive}),(t.state.timeOfFive<=0||d.default.isLeaveRoom)&&(t.setState({isShowTimeRemind:!1,timeOfFive:5}),clearInterval(t.systemTimeRemind),t.systemTimeRemind=null,e&&(f.default.getTkRoom().leaveroom(),setTimeout(function(){f.default.getTkRoom().uninit()},300)))},1e3)}},{key:"returnTimeEle",value:function(e,t){var a="";switch(e){case"distanceOneMinute":u.default.joinRoomInfo.endOfClassHoursIsClassOver||(a=r.default.createElement("span",null,d.default.language.languageData.remind.time.readyStart.one,r.default.createElement("time",{className:"time"},Math.ceil(Math.abs(t)/6e4)),d.default.language.languageData.remind.time.readyStart.two));break;case"noClassInTime":u.default.joinRoomInfo.endOfClassHoursIsClassOver||(a=d.default.language.languageData.remind.time.endNotBegin.one);break;case"exceedOneMinuteOfClass":u.default.joinRoomInfo.endOfClassHoursIsClassOver||(a=r.default.createElement("span",null,d.default.language.languageData.remind.time.timeoutStart.one,r.default.createElement("time",{className:"time"},Math.floor(t/6e4)),d.default.language.languageData.remind.time.timeoutStart.two));break;case"oneBeforeClass":a=u.default.joinRoomInfo.endOfClassHoursIsClassOver?t>-6e4?r.default.createElement("span",null,r.default.createElement("time",{className:"time"},Math.ceil(Math.abs(t)/1e3)),d.default.language.languageData.remind.time.readyEndAiBanMa.two,d.default.language.languageData.remind.time.readyEndAiBanMa.three):r.default.createElement("span",null,r.default.createElement("time",{className:"time"},Math.ceil(Math.abs(t)/6e4)),d.default.language.languageData.remind.time.readyEndAiBanMa.one,d.default.language.languageData.remind.time.readyEndAiBanMa.three):r.default.createElement("span",null,d.default.language.languageData.remind.time.readyEnd.one,r.default.createElement("time",{className:"time"},Math.ceil(Math.abs(t)/6e4)),d.default.language.languageData.remind.time.readyEnd.two);break;case"closeClassAfterTen":a=r.default.createElement("span",null,d.default.language.languageData.remind.time.timeoutEnd.one,r.default.createElement("time",null,this.state.timeOfTen),d.default.language.languageData.remind.time.timeoutEnd.two);break;case"exceedThreeMinuteOfClass":a=r.default.createElement("span",null,d.default.language.languageData.remind.time.timeoutReadyEnd.one,r.default.createElement("time",{className:"time"},Math.floor(t/6e4)),d.default.language.languageData.remind.time.timeoutReadyEnd.two,r.default.createElement("time",{className:"time"},5-Math.floor(t/6e4)),d.default.language.languageData.remind.time.timeoutReadyEnd.three);break;case"exceedFiveMinuteOfClass":a=d.default.language.languageData.remind.time.endBegin.one}return a}},{key:"remindBtnClick",value:function(){this.setState({isShowTimeRemind:!1})}},{key:"render",value:function(){return r.default.createElement("div",{className:"sys-time-remind "+(u.default.joinRoomInfo.endOfClassHoursIsClassOver?" aibanma-remind-center":" add-position-absolute-top0-right0"),style:{display:(u.default.joinRoomInfo.endOfClassHoursIsClassOver?this.state.isShowTimeRemind&&(u.default.hasRole.roleChairman||u.default.hasRole.roleTeachingAssistant||u.default.hasRole.roleStudent||u.default.hasRole.rolePatrol):this.state.isShowTimeRemind&&u.default.hasRole.roleChairman)?"block":"none"}}," ",r.default.createElement("span",{className:"message",id:"remind_msg"},this.returnTimeEle(this.state.remindType,this.state.timeDifference)),r.default.createElement("button",{className:"know-btn",style:{display:this.state.isShowRemindBtn&&!u.default.joinRoomInfo.endOfClassHoursIsClassOver?"inline-block":"none"},id:"remind_ok_btn",onClick:this.remindBtnClick.bind(this)},r.default.createElement("span",{className:"btn-content"},d.default.language.languageData.remind.button.remindKnow.text," ",r.default.createElement("span",null,this.state.timeOfFive,""))))}}]),t}(r.default.PureComponent);t.default=y},"O++P":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(a("QbLZ")),o=r(a("q1tI")),n=(r(a("17x9")),r(a("yfjp"))),l=a("9VTz"),s=r(a("HPAy"));function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.fileType,a=e.setFileAttr,r=e.fileAttr;return o.default.createElement("div",{className:"file-attr"},l.addCourseService.isPpt(t)?o.default.createElement("div",{className:"attr-item-warp"},s.default.language.languageData.toolContainer.toolIcon.addCourse.uploadCourse.fileInfo,"",o.default.createElement("p",{className:"attr-item"},o.default.createElement(n.default.Checkbox,{status:r.isDynamicPpt,change:function(e){a((0,i.default)({},r,{isDynamicPpt:e}))}}),o.default.createElement("span",{className:"attr-item-name"},s.default.language.languageData.toolContainer.toolIcon.addCourse.uploadCourse.dynamicPpt)),o.default.createElement("p",{className:"attr-item",style:{display:r.isDynamicPpt&&!TkConstant.hasRole.roleStudent?"inline-block":"none"}},o.default.createElement(n.default.Checkbox,{status:r.isShowNow,change:function(e){a((0,i.default)({},r,{isShowNow:e}))}}),o.default.createElement("span",{className:"attr-item-name"},s.default.language.languageData.toolContainer.toolIcon.addCourse.uploadCourse.dynamicPptSuccess))):null,l.addCourseService.isH5(t)?o.default.createElement("div",{className:"attr-item-warp"},s.default.language.languageData.toolContainer.toolIcon.addCourse.uploadCourse.fileInfo,"",o.default.createElement("div",{className:"attr-item"},o.default.createElement(n.default.Input,{value:r.H5Name,onChange:function(e,t){a((0,i.default)({},r,{H5Name:t}))}}))):null)}},O0U9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLibraryHasToolBar=t.CourseLibraryHasToolBar=void 0;var i=v(a("QbLZ")),o=v(a("Yz+Y")),n=v(a("iCc5")),l=v(a("V7oC")),s=v(a("FYw3")),r=v(a("mRg0")),d=v(a("q1tI")),u=v(a("aJKe")),c=v(a("HPAy")),f=v(a("JL1q")),h=v(a("nHMO")),m=a("x8Le"),p=v(a("eQYT")),g=a("9VTz");function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){return function(a){function m(){var e,t,a,i;(0,n.default)(this,m);for(var l=arguments.length,r=Array(l),d=0;d<l;d++)r[d]=arguments[d];return t=a=(0,s.default)(this,(e=m.__proto__||(0,o.default)(m)).call.apply(e,[this].concat(r))),a.state={fileSortType:"fileid",isAec:!1,searchText:"",filecategory:-1,isSearch:!1,libType:null,fileType:null,uploadFileFromFlag:0,mediaDisabled:!1,courseDisabled:!1,isShowAddCourse:!1},i=t,(0,s.default)(a,i)}return(0,r.default)(m,a),(0,l.default)(m,[{key:"componentDidMount",value:function(){u.default.CoreController.addEventListener("fileListEvent",this.handlerFileList.bind(this))}},{key:"handlerFileList",value:function(e){var t=e.message;t&&this.setState({isAec:t.isAec})}},{key:"handleSearch",value:function(e){var t=e.target.value;this.handleSearchList(t)}},{key:"handleSearchList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=t?"mediaLib":"courseLib";this.setState({searchText:e}),u.default.CoreController.dispatchEvent({type:"fileListEvent",message:{searchText:e,libType:a}})}},{key:"handleSort",value:function(e){var a=!1,i=t?"mediaLib":"courseLib";e!==this.state.fileSortType?this.setState({fileSortType:e,isAec:a}):(a=!this.state.isAec,this.setState({isAec:a})),u.default.CoreController.dispatchEvent({type:"fileListEvent",message:{fileSortType:e,isAec:a,libType:i}})}},{key:"handleAdd",value:function(e,t){if(p.default.hasRole.rolePatrol)return!1;var a=t?"mediaLib":"courseLib";this.setState({libType:a,fileType:e,uploadFileFromFlag:this.state.uploadFileFromFlag+1})}},{key:"openSearch",value:function(){this.setState({isSearch:!0})}},{key:"closeSearch",value:function(){this.setState({isSearch:!1}),this.handleSearchList()}},{key:"clickDisable",value:function(){this.setState({mediaDisabled:!1,courseDisabled:!1})}},{key:"clickEffect",value:function(e){this.setState({mediaDisabled:e,courseDisabled:!e})}},{key:"showAddCourse",value:function(){var e=!this.state.isShowAddCourse;this.setState({isShowAddCourse:e}),e||g.bindCourseService.clearData()}},{key:"render",value:function(){var a=this.state,o=a.searchText,n=a.libType,l=a.fileType,s=a.uploadFileFromFlag,r=a.isShowAddCourse,u=c.default.companyidentify===p.default.COMPANYIDENTIFY.MEETING,m=c.default.classBegin&&f.default.handler.getAppPermissions("canDraw")&&p.default.joinRoomInfo.isStudentUpdateFile;return d.default.createElement(d.default.Fragment,null,r&&!t?d.default.createElement(h.default,{close:this.showAddCourse.bind(this,!1)}):null,d.default.createElement("div",{style:{display:r&&!t?"none":""}},d.default.createElement("div",{className:"fileFilter"},d.default.createElement("div",{className:"flexBox"},d.default.createElement("span",{className:"filterItem"+(this.state.isSearch?" searching":" ")},d.default.createElement("button",{className:"search icon-search",onClick:this.openSearch.bind(this),title:c.default.language.languageData.toolContainer.toolIcon.documentList.button.search.name}),d.default.createElement("span",{style:{display:this.state.isSearch?"":"none"}},d.default.createElement("input",{value:o,placeholder:c.default.language.languageData.toolContainer.toolIcon.documentList.button.search.text,onChange:this.handleSearch.bind(this)}),d.default.createElement("button",{className:"icon-close close",onClick:this.closeSearch.bind(this)}))),d.default.createElement("span",{className:"filterItem"+("fileid"===this.state.fileSortType?" active":""),style:{display:this.state.isSearch?"none":""},onClick:this.handleSort.bind(this,"fileid")},c.default.language.languageData.toolContainer.toolIcon.documentList.button.uploadTime.text,d.default.createElement("span",{className:"flex_box"},d.default.createElement("button",{className:"up"+(this.state.isAec?" on":"")}),d.default.createElement("button",{className:"down"+(this.state.isAec?"":" off")}))),d.default.createElement("span",{className:"filterItem"+("filetype"===this.state.fileSortType?" active":""),style:{display:this.state.isSearch?"none":""},onClick:this.handleSort.bind(this,"filetype")},c.default.language.languageData.toolContainer.toolIcon.documentList.button.fileType.text,d.default.createElement("span",{className:"flex_box"},d.default.createElement("button",{className:"up"+(this.state.isAec?" on":"")}),d.default.createElement("button",{className:"down"+(this.state.isAec?"":" off")}))),d.default.createElement("span",{className:"filterItem"+("filename"===this.state.fileSortType?" active":""),style:{display:this.state.isSearch?"none":""},onClick:this.handleSort.bind(this,"filename")},c.default.language.languageData.toolContainer.toolIcon.documentList.button.fileName.text,d.default.createElement("span",{className:"flex_box"},d.default.createElement("button",{className:"up"+(this.state.isAec?" on":"")}),d.default.createElement("button",{className:"down"+(this.state.isAec?"":" off")})))),d.default.createElement("div",{style:{display:(p.default.hasRole.roleStudent&&!u||p.default.hasRole.rolePatrol)&&!m?"none":""}},t?d.default.createElement("button",{className:"addCourse",onClick:this.handleAdd.bind(this,"course",t),disabled:t?this.state.mediaDisabled:this.state.courseDisabled},c.default.language.languageData.toolContainer.toolIcon.mediaDocumentList.button.addCourse.text):null,t?null:d.default.createElement("button",{className:"addCourse",onClick:this.showAddCourse.bind(this,!0),disabled:this.state.courseDisabled},c.default.language.languageData.toolContainer.toolIcon.documentList.button.addCourse.text))),d.default.createElement(e,(0,i.default)({uploadFileFromFlag:s,fileType:l,libType:n,clickDisable:this.clickDisable.bind(this),clickEffect:this.clickEffect.bind(this)},this.props))))}}]),m}(d.default.Component)}var S=y(m.CourseLibrary,!1),b=y(m.MediaLibrary,!0);t.CourseLibraryHasToolBar=S,t.MediaLibraryHasToolBar=b},OAAT:function(e,t,a){},OYv4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=c(a("Yz+Y")),o=c(a("iCc5")),n=c(a("V7oC")),l=c(a("FYw3")),s=c(a("mRg0")),r=c(a("q1tI")),d=(c(a("XbJA")),c(a("aJKe"))),u=(c(a("JL1q")),c(a("1Nl6")));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"handleQrCodeBoxClick",value:function(){this.setState({qrCodeBoxIsShow:!0}),d.default.CoreController.dispatchEvent({type:"handleQrCodeShow",data:{isShow:!0,whiteboardType:"mainWhiteBoard"}}),this.props.isDisabledHoldItem("qrCode",!0),this.props.close()}},{key:"render",value:function(){return r.default.createElement("li",{className:"holdAllitem "+(this.props.isDisabled?" disabled":"")},r.default.createElement("div",{onClick:this.handleQrCodeBoxClick.bind(this)},r.default.createElement("em",{className:"icon "+this.props.bgName}),r.default.createElement("span",null,this.props.name)))}}]),t}(r.default.Component);f=(0,u.default)(f),t.default=f},PW4q:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(a("aJKe")),o=d(a("eQYT")),n=d(a("uuqz")),l=d(a("HPAy")),s=d(a("mrNk")),r=d(a("XbJA"));function d(e){return e&&e.__esModule?e:{default:e}}var u=TK.EventDispatcher({});i.default.HandlerWebDaoInterface=u,u.addEventListenerOnHandlerWebDaoInterface=function(){var e=function(e){i.default.HandlerWebDaoInterface.addEventListener(o.default.EVENTTYPE.WebDaoEvent[e],function(t){u["handler"+n.default.replaceFirstUper(e)]&&"function"==typeof u["handler"+n.default.replaceFirstUper(e)]&&u["handler"+n.default.replaceFirstUper(e)](t),i.default.CoreController.dispatchEvent(t)})};for(var t in o.default.EVENTTYPE.WebDaoEvent)e(t)},u.handlerSendGift=function(e){var t=e.message,a=t.response,i=t.requestResult,o=t.participantIdJson,n=t.customTrophys;if(i&&0==a.result){var d=s.default.getTkRoom().getUsers();for(var u in o){var c=u,f=d[c];if(f){l.default.participantGiftNumberJson[c]=l.default.participantGiftNumberJson[c]||0,a.type&&"-1"===a.type?f.giftnumber>0&&l.default.participantGiftNumberJson[c]--:l.default.participantGiftNumberJson[c]++;var h={giftnumber:(null!=f.giftnumber?f.giftnumber:0)+l.default.participantGiftNumberJson[c],type:a.type?a.type:void 0};n&&(h.giftinfo={trophyname:n.trophyname,trophyeffect:n.trophyeffect,trophyimg:n.trophyimg,trophyvoice:n.trophyvoice}),r.default.setParticipantPropertyToAll(c,h)}}}},u.handlerRoomStart=function(e){},u.handlerRoomStart=function(e){},u.handlerRoomStart=function(e){},u.addEventListenerOnHandlerWebDaoInterface(),t.default=u},Q1Q1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=h(a("Yz+Y")),o=h(a("iCc5")),n=h(a("V7oC")),l=h(a("FYw3")),s=h(a("mRg0")),r=h(a("q1tI")),d=a("LbeR"),u=h(a("rK/K")),c=h(a("aJKe")),f=h(a("HPAy"));function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={selectedFileID:f.default.defaultFileInfo.fileid},a.whiteBoard=d.FileItemEvent.addWhiteBoardInfo(),a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){c.default.CoreController.addEventListener("openCourseChange",this.openCourseChange.bind(this),this.listernerBackupid)}},{key:"openCourseChange",value:function(e){var t=f.default.defaultFileInfo.fileid;e&&e.message&&(t=e.message.id),this.setState({selectedFileID:t})}},{key:"render",value:function(){return r.default.createElement(r.default.Fragment,null,r.default.createElement(u.default,{fileID:this.state.selectedFileID,pub:"coursePrivateFiles",key:this.whiteBoard.fileid,file:this.whiteBoard}))}}]),t}(r.default.PureComponent);t.default=m},QiFC:function(e,t,a){},QpLg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(a("q1tI")),o=l(a("HPAy")),n=l(a("eQYT"));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.dispose,a=(e.parentState,n.default.hasRole.roleChairman||n.default.hasRole.roleTeachingAssistant?"":" hide");return i.default.createElement("div",{className:"header"},i.default.createElement("span",{className:"subject item"},o.default.language.languageData.qPanel.answerPanel),i.default.createElement("span",{className:"icon-close close-btn"+a,onClick:function(){t({action:"close",data:{}})}}))}},QrCR:function(e,t,a){"use strict";a("Khmk"),a("wMZI"),a("47/Y"),a("wGxT"),a("6XG9"),a("6QO7"),a("T8Zz"),a("yAan"),a("YTbI"),a("U11W"),a("tn2s"),a("f6Bd")},Qxvg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(a("uuqz")),o=l(a("HPAy")),n=l(a("mrNk"));l(a("XbJA"));function l(e){return e&&e.__esModule?e:{default:e}}var s={getAppLanguageInfo:function(e,t){var n=t||o.default.languageName,l={};o.default.language=o.default.language||{};var s=i.default.getCompanyidentify();"meeting"!==s||"japan"!==n&&"spanish"!==n||(n="chinese"),l.name=n,l.languageData=a("lU1p")("./"+s+"/i18_"+n+".js").default,e&&"function"==typeof e&&e(l),document.body.className=document.body.className.replace(/(chinese|english|complex)/g,"")+" "+l.name,document.body.setAttribute("data-language",l.name)},stopAllMediaShare:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.default.getTkRoom().stopShareMedia(void 0,void 0,{onlyStopMyself:e}),n.default.getTkRoom().stopShareLocalMedia(void 0,void 0,{onlyStopMyself:e})},TkUtils:i.default};t.default=s},RCvR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.int=function(e){return""===e||void 0===e?0:parseInt(e,10)};t.float=function(e,t){return""===e?0:Math.round(e*t)/t},t.innerWidth=function(e){var t=e.clientWidth,a=e.style;return t-=i(a.paddingLeft),t-=i(a.paddingRight)},t.outerWidth=function(e){var t=e.clientWidth,a=e.style;return t+=i(a.borderLeftWidth),t+=i(a.borderRightWidth)},t.innerHeight=function(e){var t=e.clientHeight,a=e.style;return t-=i(a.paddingTop),t-=i(a.paddingBottom)},t.outerHeight=function(e){var t=e.clientHeight,a=e.style;return t+=i(a.borderTopWidth),t+=i(a.borderBottomWidth)},t.parseBounds=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}},t.isNumber=function(e){return"number"==typeof e}},RHxx:function(e,t,a){},"S+mp":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a("sk9p")),o=s(a("oF3Q")),n=s(a("iCc5")),l=s(a("V7oC"));function s(e){return e&&e.__esModule?e:{default:e}}var r=function(){function e(){(0,n.default)(this,e),this.autoruns={}}return(0,l.default)(e,[{key:"dispose",value:function(e){(0,o.default)(autoruns).forEach(function(t){var a=(0,i.default)(t,2),o=a[0],n=a[1];o!==e&&e||n.forEach(function(e){return"function"==typeof e&&e()})})}}]),e}();t.default=r},SFpt:function(e,t,a){},SkDs:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=b(a("QbLZ")),n=b(a("Yz+Y")),l=b(a("iCc5")),s=b(a("V7oC")),r=b(a("FYw3")),d=b(a("mRg0")),u=b(a("q1tI")),c=b(a("mrNk")),f=b(a("HPAy")),h=(b(a("uuqz")),b(a("JL1q")),b(a("eQYT"))),m=b(a("XbJA")),p=b(a("aJKe")),g=b(a("fZQK")),v=a("LAQx"),y=b(a("GIAE")),S=a("okNM");a("2vnA");function b(e){return e&&e.__esModule?e:{default:e}}var C=(0,S.observer)(i=function(e){function t(e){return(0,l.default)(this,t),(0,r.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e))}return(0,d.default)(t,e),(0,s.default)(t,[{key:"videoOnDoubleClick",value:function(e,t,a){var i=this._loadStreamInfo(e).user,n=void 0===i?{}:i;if(n.publishstate&&(n.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY||n.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_BOTH)&&f.default.classBegin&&(!y.default.isVideoSCreen||y.default.whoIsBigVideo)){if(h.default.hasRole.roleChairman||h.default.hasRole.roleTeachingAssistant)if(y.default.isVideoSCreen&&y.default.isSignallingScreen){if(y.default.whoIsBigVideo)if("teacherStream"===t&&"S"===y.default.whoIsBigVideo){var l=this._getParams(e,!1);m.default.sendSignallingFromFullScreen(l,!1)}else if("studentStream"===t&&"T"===y.default.whoIsBigVideo){var s=this._getParams(e,!1);m.default.sendSignallingFromFullScreen(s,!1)}else if("studentStream"===t&&"S"===y.default.whoIsBigVideo||"teacherStream"===t&&"T"===y.default.whoIsBigVideo){var r=this._getParams(e,!1);m.default.sendSignallingFromFullScreen(r,!0)}}else{if(!y.default.whoIsBigVideo&&y.default.isVideoSCreen)return;if("studentStream"===t){var d=this._getParams(e,!y.default.whoIsBigVideo||"S"!==y.default.whoIsBigVideo);p.default.CoreController.dispatchEvent({type:"fullScreen",message:(0,o.default)({},d)})}else if(!y.default.isSignallingScreen&&y.default.isVideoSCreen){var u=this._getParams(e,!y.default.whoIsBigVideo||"T"!==y.default.whoIsBigVideo);p.default.CoreController.dispatchEvent({type:"fullScreen",message:(0,o.default)({},u)})}else{var c=this._getParams(e,!0);m.default.sendSignallingFromFullScreen(c,!1)}}else if(h.default.hasRole.roleStudent){if(y.default.isSignallingScreen&&y.default.isVideoSCreen&&y.default.whoIsBigVideo)return;if("studentStream"===t){var g=this._getParams(e,!y.default.whoIsBigVideo||"S"!==y.default.whoIsBigVideo);p.default.CoreController.dispatchEvent({type:"fullScreen",message:(0,o.default)({},g)})}else{var v=this._getParams(e,!y.default.whoIsBigVideo||"T"!==y.default.whoIsBigVideo);p.default.CoreController.dispatchEvent({type:"fullScreen",message:(0,o.default)({},v)})}}return a&&(a.preventDefault(),a.stopPropagation()),!1}}},{key:"_getParams",value:function(e,t){return{fullScreenType:"stream_video",needPictureInPictureSmall:t,mainPictureInPictureStreamRoleStreamRole:this.props.isTeacher?h.default.role.roleChairman:h.default.role.roleStudent,fullScreenStreamExtensionId:e?e.extensionId:"",isTeacher:this.props.isTeacher}}},{key:"_loadStreamInfo",value:function(e){var t=void 0;return e&&void 0!==e.extensionId&&c.default.getTkRoom()&&(t=(0,v.getUser)(e.extensionId)),{user:t,afterElementArray:[]}}},{key:"videoSitchBtnClick",value:function(){this.props.switchHideShow&&"function"==typeof this.props.switchHideShow&&this.props.switchHideShow()}},{key:"render",value:function(){var e=this.props.isTeacher,t=y.default.whoIsBigVideo,a=y.default.isHasCloseBtn,i=e?"teacherStream":"studentStream",o=e?y.default.streams1v1.teacherStream:y.default.streams1v1.studentStream,n=!1;e&&"T"===t?n=!0:e||"S"!==t||(n=!0);return u.default.createElement(S.Provider,{videoStore:y.default,videoStatusStore:{otherVideoStyle:{},otherVideoSize:{}}},u.default.createElement("div",{id:this.props.id||"participants",className:h.default.hasRoomtype.oneToOne?"":"teacherVideo",style:{display:f.default.doubleScreen?"none":"",width:"100%",height:"100%"}},h.default.hasRoomtype.oneToOne&&this.props.isHasHideBtn?u.default.createElement("button",{className:"video_switch_btn "+("hide"===this.props.switchName?"icon-right":"icon-left")+" ",onClick:this.videoSitchBtnClick.bind(this)}):void 0,u.default.createElement(g.default,{hasDragJurisdiction:!1,videoDumbClassName:"vvideo",videoOnDoubleClick:this.videoOnDoubleClick.bind(this,o,i),videoClassName:e?" video-chairman-wrap ":" video-student-wrap ",stream:o,isHasCloseBtn:a,isBigVideo:n,videoId:o?o.extensionId:void 0,isSmallVideo:this.props.isSmallVideo})))}}]),t}(u.default.Component))||i;t.default=C},Sujp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(a("q1tI")),o=l(a("uuqz")),n=l(a("HPAy"));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t){var a=t.data,l=t.unfoldFn,s=t.loadMoreFn,r=t.checkFn,d=o.default.debounce(r,300),u=o.default.debounce(function(){"catalog"===a.type&&l(a.path)}.bind(void 0),300),c=o.default.debounce(function(){s(a.path,a.children.index)}.bind(void 0),300),f=0;return"string"==typeof a.path&&(f=a.path.split("_").length-1),i.default.createElement(i.default.Fragment,null,i.default.createElement("li",{className:"item-info",style:{paddingLeft:.22*f+"rem"},onClick:u},"catalog"===a.type&&i.default.createElement("span",{className:"arrow",style:{transform:a.isUnfold?"":"rotate(-90deg)"}}),i.default.createElement("span",{className:"fileIcon "+a.type}),i.default.createElement("span",{className:"file-name",title:a.name},a.name),i.default.createElement("span",{className:"file-radio "+(a.isCheck?"on":""),onClick:function(e){return e.stopPropagation(),d(a),!1}})),a.children&&a.isUnfold&&a.children.map(function(t){return i.default.createElement(e,{data:t,key:t.id,unfoldFn:l,loadMoreFn:s,checkFn:r})}),"catalog"===a.type&&a.isUnfold&&!a.children.isEnd&&i.default.createElement("p",{onClick:c,className:"load-more",style:{marginLeft:.22*(f+1)+"rem"}},n.default.language.languageData.toolContainer.toolIcon.addCourse.relationCourse.button.loadMore,i.default.createElement("i",{className:"icon-right"})))}},Szfz:function(e,t,a){},T8Zz:function(e,t,a){},TKkb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(a("Yz+Y")),o=u(a("iCc5")),n=u(a("V7oC")),l=u(a("FYw3")),s=u(a("mRg0")),r=u(a("q1tI")),d=u(a("HPAy"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.userList,a=e.buttonClick,i=e.isHasHand;return r.default.createElement("button",{title:d.default.language.languageData.toolContainer.toolIcon.userList.title,className:"Tk-header-icon icon-roster "+(t?"active":"")+" "+(i?"hand":"")+" ",onClick:a})}}]),t}(r.default.Component);t.default=c},U11W:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=a("EJiy"),n=(i=o)&&i.__esModule?i:{default:i};var l=window.Log||{error:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var a="",i=0;i<e.length;i++)a+="object"===(0,n.default)(e[i])?L.Utils.toJsonStringify(e[i]):e[i];L.Logger.panel.value=L.Logger.panel.value+"\n"+a}console.error.apply(console,e)},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var a="",i=0;i<e.length;i++)a+="object"===(0,n.default)(e[i])?L.Utils.toJsonStringify(e[i]):e[i];L.Logger.panel.value=L.Logger.panel.value+"\n"+a}console.log.apply(console,e)},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var a="",i=0;i<e.length;i++)a+="object"===(0,n.default)(e[i])?L.Utils.toJsonStringify(e[i]):e[i];L.Logger.panel.value=L.Logger.panel.value+"\n"+a}console.info.apply(console,e)},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var a="",i=0;i<e.length;i++)a+="object"===(0,n.default)(e[i])?L.Utils.toJsonStringify(e[i]):e[i];L.Logger.panel.value=L.Logger.panel.value+"\n"+a}console.warn.apply(console,e)},warning:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var a="",i=0;i<e.length;i++)a+="object"===(0,n.default)(e[i])?L.Utils.toJsonStringify(e[i]):e[i];L.Logger.panel.value=L.Logger.panel.value+"\n"+a}console.warn.apply(console,e)},trace:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var a="",i=0;i<e.length;i++)a+="object"===(0,n.default)(e[i])?L.Utils.toJsonStringify(e[i]):e[i];L.Logger.panel.value=L.Logger.panel.value+"\n"+a}console.trace.apply(console,e)},debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var a="",i=0;i<e.length;i++)a+="object"===(0,n.default)(e[i])?L.Utils.toJsonStringify(e[i]):e[i];L.Logger.panel.value=L.Logger.panel.value+"\n"+a}console.debug.apply(console,e)}};window.Log=l,t.default=l},"U5/2":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=w(a("GQeE")),o=w(a("/f1G")),n=w(a("oF3Q")),l=w(a("FyfS")),s=w(a("sk9p")),r=w(a("Yz+Y")),d=w(a("iCc5")),u=w(a("V7oC")),c=w(a("FYw3")),f=w(a("mRg0"));a("HzlR");var h=a("q1tI"),m=w(h),p=w(a("HPAy")),g=w(a("eQYT")),v=w(a("aJKe")),y=w(a("JL1q")),S=w(a("mrNk")),b=w(a("3mpg")),C=w(a("XbJA")),k=w(a("uuqz"));function w(e){return e&&e.__esModule?e:{default:e}}var T=function(e){function t(){(0,d.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this));return e.listernerBackupid=(new Date).getTime()+"_"+Math.random(),e.state={isAdministration:!1,isDim:!0,allMuteDisabled:!0,allSpeakingDisabled:!0,allTrophy:0,allRecover:0},e}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){v.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerroomUserpropertyChanged.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomUseraudiostateChanged,this._checkRoomIsAllParticipantMute.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomUservideostateChanged,this._checkRoomIsAllParticipantMute.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomParticipantJoin,this._checkRoomIsAllParticipantMute.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomParticipantLeave,this._checkRoomIsAllParticipantMute.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomParticipantEvicted,this._checkRoomIsAllParticipantMute.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomConnected,this._checkRoomIsAllParticipantMute.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("triggerControlPanel",this.ShowControlPanel.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("recoverPanelBeforeStarting",this.close.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("CloseControlPanel",this.triggerClose.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("CloseALLPanel",this.close.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){v.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"ShowControlPanel",value:function(){this.setState({isAdministration:!0},function(){})}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"videoDraghandle":if(t.data.otherVideoStyle){var a=0,i=!0,o=!1,r=void 0;try{for(var d,u=(0,l.default)((0,n.default)(t.data.otherVideoStyle));!(i=(d=u.next()).done);i=!0){var c=d.value,f=(0,s.default)(c,2),h=f[0];f[1];t.data.otherVideoStyle[h].isDrag&&a++,a>0?this.setState({allRecover:1}):this.setState({allRecover:0})}}catch(e){o=!0,r=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw r}}}}}},{key:"close",value:function(){this.setState({isAdministration:!1}),v.default.CoreController.dispatchEvent({type:"triggerControlPanelRecover"})}},{key:"triggerClose",value:function(){this.setState({isAdministration:!1})}},{key:"handlerOneKeyReset",value:function(){v.default.CoreController.dispatchEvent({type:"oneKeyRecovery",message:{}}),this.close()}},{key:"sendGiftGiveAllUserClick",value:function(){if(y.default.handler.getAppPermissions("giveAllUserSendGift")){var e={},t=S.default.getTkRoom().getUsers(),a=!0,i=!1,n=void 0;try{for(var s,r=(0,l.default)((0,o.default)(t));!(a=(s=r.next()).done);a=!0){var d=s.value;if(d.role===g.default.role.roleStudent&&d.publishstate>0){var u=d.id,c=d.nickname;e[u]=c}}}catch(e){i=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw n}}if(g.default.joinRoomInfo.customTrophys&&g.default.joinRoomInfo.customTrophysVoice&&g.default.joinRoomInfo.customTrophys.length>1)v.default.CoreController.dispatchEvent({type:"loadCustomTrophyItem",message:{type:"all",userIdJson:e}});else if(g.default.joinRoomInfo.customTrophys&&1==g.default.joinRoomInfo.customTrophys.length){var f={trophyname:g.default.joinRoomInfo.customTrophys[0].trophyname,trophyeffect:g.default.joinRoomInfo.customTrophys[0].trophyeffect,trophyimg:g.default.joinRoomInfo.customTrophys[0].trophyimg,trophyvoice:g.default.joinRoomInfo.customTrophys[0].trophyvoice};b.default.sendGift(e,f)}else b.default.sendGift(e);this.close()}else L.Logger.error("do not have permission:giveAllUserSendGift")}},{key:"allUserMuteClick",value:function(){if(y.default.handler.getAppPermissions("allUserMute")){var e=S.default.getTkRoom().getUsers(),t=!0,a=!1,i=void 0;try{for(var n,s=(0,l.default)((0,o.default)(e));!(t=(n=s.next()).done);t=!0){var r=n.value;r.role!==g.default.role.roleChairman&&r.role!==g.default.role.roleTeachingAssistant&&r.publishstate!==g.default.PUBLISHSTATE.PUBLISH_STATE_NONE&&(r.publishstate===g.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY?C.default.changeUserPublish(r.id,g.default.PUBLISHSTATE.PUBLISH_STATE_MUTEALL):r.publishstate===g.default.PUBLISHSTATE.PUBLISH_STATE_BOTH&&C.default.changeUserPublish(r.id,g.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY))}}catch(e){a=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw i}}this.setState({isDim:!1}),this.close()}else L.Logger.error("do not have permission:allUserMute")}},{key:"allSpeakingClick",value:function(e){if(y.default.handler.getAppPermissions("hasAllSpeaking")){var t=S.default.getTkRoom().getUsers(),a=!0,i=!1,n=void 0;try{for(var s,r=(0,l.default)((0,o.default)(t));!(a=(s=r.next()).done);a=!0){var d=s.value;d.role!==g.default.role.roleChairman&&d.role!==g.default.role.roleTeachingAssistant&&d.publishstate!==g.default.PUBLISHSTATE.PUBLISH_STATE_NONE&&(d.publishstate===g.default.PUBLISHSTATE.PUBLISH_STATE_MUTEALL?C.default.changeUserPublish(d.id,g.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY):d.publishstate===g.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY&&C.default.changeUserPublish(d.id,g.default.PUBLISHSTATE.PUBLISH_STATE_BOTH))}}catch(e){i=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw n}}this.setState({isDim:!0}),this.close()}else L.Logger.error("do not have permission: hasAllSpeaking")}},{key:"trophyPrime",value:function(){var e=k.default.getSpecifyRoleList(g.default.role.roleStudent,S.default.getTkRoom().getUsers()),t=0,a=!0,i=!1,n=void 0;try{for(var s,r=(0,l.default)((0,o.default)(e));!(a=(s=r.next()).done);a=!0){s.value.publishstate>0?t+=1:t+=0}}catch(e){i=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw n}}this.setState({allTrophy:t})}},{key:"_checkRoomIsAllParticipantMute",value:function(){this.trophyPrime();var e=S.default.getTkRoom().getUsers(),t=0,a=0,i=!0,n=!1,s=void 0;try{for(var r,d=(0,l.default)((0,o.default)(e));!(i=(r=d.next()).done);i=!0){var u=r.value;u&&u.role===g.default.role.roleStudent&&(u.publishstate==g.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY||u.publishstate==g.default.PUBLISHSTATE.PUBLISH_STATE_BOTH?t++:u.publishstate!=g.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY&&u.publishstate!=g.default.PUBLISHSTATE.PUBLISH_STATE_MUTEALL||a++)}}catch(e){n=!0,s=e}finally{try{!i&&d.return&&d.return()}finally{if(n)throw s}}var c=0===t,f=0===a;return this.state.allMuteDisabled!==c&&this.setState({allMuteDisabled:c}),this.state.allSpeakingDisabled!==f&&this.setState({allSpeakingDisabled:f}),c}},{key:"handlerroomUserpropertyChanged",value:function(e){if(p.default.HeightConcurrence);else{var t=e.message,a=(e.user,!0),o=!1,n=void 0;try{for(var s,r=(0,l.default)((0,i.default)(t));!(a=(s=r.next()).done);a=!0){"publishstate"===s.value&&this._checkRoomIsAllParticipantMute()}}catch(e){o=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(o)throw n}}this.trophyPrime()}}},{key:"_stopPreventClick",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){var e=this.props.id;return m.default.createElement("div",{id:e,className:"ControlPanel-main",style:{display:this.state.isAdministration?"block":"none"},onClick:this._stopPreventClick.bind(this)},m.default.createElement("ul",{className:"ControlPanel-main-ul"},m.default.createElement("li",{className:"ControlPanel-li"+(this.state.allMuteDisabled?" disabled":""),onClick:this.allUserMuteClick.bind(this)},m.default.createElement("em",{title:p.default.language.languageData.header.tool.allMute.title.no,className:"icon icon-control_quantijingyin"}),m.default.createElement("span",{className:"S_span"},p.default.language.languageData.header.tool.allMute.title.no)),m.default.createElement("li",{className:"ControlPanel-li"+(this.state.allSpeakingDisabled?" disabled":""),onClick:this.allSpeakingClick.bind(this)},m.default.createElement("em",{title:p.default.language.languageData.header.tool.allMute.title.yes,className:"icon icon-control_quantifayan"}),m.default.createElement("span",{className:"S_span"},p.default.language.languageData.header.tool.allMute.title.yes)),g.default.hasRole.roleTeachingAssistant||p.default.HeightConcurrence?null:m.default.createElement("li",{className:"ControlPanel-li"+(this.state.allTrophy?"":" disabled"),onClick:this.sendGiftGiveAllUserClick.bind(this)},m.default.createElement("em",{title:p.default.language.languageData.header.tool.allGift.title.yes,className:"icon icon-control_quantijiangli"}),m.default.createElement("span",{className:"S_span"},p.default.language.languageData.header.tool.allGift.title.giftText)),g.default.hasRole.roleTeachingAssistant?null:m.default.createElement("li",{className:"ControlPanel-li"+(this.state.allRecover?"":" disabled"),onClick:this.handlerOneKeyReset.bind(this)},m.default.createElement("em",{title:p.default.language.languageData.otherVideoContainer.button.oneKeyReset.text,className:"icon icon-control_quantifuwei"}),m.default.createElement("span",{className:"S_span"},p.default.language.languageData.otherVideoContainer.button.oneKeyReset.text))))}}]),t}(h.Component);t.default=T},UF9v:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=b(a("QbLZ")),o=b(a("Yz+Y")),n=b(a("iCc5")),l=b(a("V7oC")),s=b(a("FYw3")),r=b(a("mRg0")),d=b(a("q1tI")),u=b(a("mrNk")),c=b(a("aJKe")),f=b(a("eQYT")),h=b(a("HPAy")),m=b(a("JL1q")),p=b(a("B9HA")),g=b(a("oCnM")),v=b(a("/S8a")),y=b(a("921q"));a("XZyt");var S=b(a("mKia"));function b(e){return e&&e.__esModule?e:{default:e}}var C=function(e){function t(){(0,n.default)(this,t);var e=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return e.state={show:!0,isActive:"tool_mouse",eraserDisabled:!1,clearDisabled:!1,redoDisabled:!1,undoDisabled:!1,isShowPenList:!1,isShowShapeList:!1,eraserWidth:15,fontFamily:"",fontSize:48,penWidth:5,primaryColor:"#FF0000",pen:"tool_pencil",shape:"tool_rectangle_empty",textPanelShow:!1,eraserShow:!1,showToolBar:u.default.getTkRoom().getMySelf().candraw},e.firstChange=!0,e.listernerBackupid=(new Date).getTime()+"_"+Math.random(),e}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){c.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("receiveWhiteboardSDKAction",this.handlerReceiveWhiteboardSDKAction.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("updateAppPermissions_canDraw",this.handleCanDrawPermissionsChange.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("extendWhiteboardSDKAction",this.handlerReceiveWhiteboardSDKAction.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){this.changePenStatus()}},{key:"componentWillUnmount",value:function(){c.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=e.user;t.id===u.default.getTkRoom().getMySelf().id&&(t.candraw&&!f.default.hasRoomtype.oneToOne&&f.default.hasRole.roleStudent&&this.firstChange&&(this.firstChange=!1,this.setLineColor(this._randomHexColor())),this.setState({showToolBar:t.candraw}))}},{key:"handlerRoomPubmsg",value:function(e){if("SharpsChange"===e.message.name){var t=!0;t=!(!f.default.joinRoomInfo.clickCapture||!f.default.joinRoomInfo.brushName)||!!f.default.joinRoomInfo.brushName&&"tool_mouse"!=this.state.isActive,u.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({showShapeAuthor:t})}}},{key:"handlerReceiveWhiteboardSDKAction",value:function(e){var t=e.message,a=t.action,i=t.cmd,o=void 0===i?{}:i,n=t.source,l=o.updateViewState,s=o.viewState;if(n===this.props.instanceId&&l&&s&&(!l||l.tool||l.action||l.other)){var r="tool_pencil",d="tool_rectangle_empty",u="tool_mouse",c=!1,h=!1,m=!1,p=!1,g=24,v=5,y=5,S="",b="#FF0000",C=15;switch(a){case"viewStateUpdate":var k=s.tool,w=void 0===k?{}:k,T=s.action,E=void 0===T?{}:T,I=s.other,D=void 0===I?{}:I,x=E.action_clear,R=void 0===x?{}:x,_=E.action_redo,P=void 0===_?{}:_,A=E.action_undo,L=void 0===A?{}:A;for(var B in w)"tool_pencil"!==B&&"tool_highlighter"!==B&&"tool_line"!==B&&"tool_arrow"!==B||(w[B].isUse&&(r=B),f.default.hasRole.roleStudent||this.changePenStatus()),"tool_rectangle_empty"!==B&&"tool_rectangle"!==B&&"tool_ellipse_empty"!==B&&"tool_ellipse"!==B||w[B].isUse&&(d=B),w[B].isUse&&(u=B),c=w.tool_eraser.disabled;h=R.disabled,m=P.disabled,p=L.disabled,g=D.fontSize||g,v=D.pencilWidth||v,y=D.shapeWidth||y,S=D.fontFamily||S,b=D.primaryColor||b,C=D.eraserWidth||C,this.setState({pen:r,shape:d,isActive:u,eraserDisabled:c,clearDisabled:h,redoDisabled:m,undoDisabled:p,fontSize:g,penWidth:v,shapeWidth:y,fontFamily:S,primaryColor:b,eraserWidth:C})}}}},{key:"handleCanDrawPermissionsChange",value:function(){var e=this;this.setState({showToolBar:u.default.getTkRoom().getMySelf().candraw},function(){e.changePenStatus()})}},{key:"toggle",value:function(){this.setState({show:!this.state.show})}},{key:"openToolMouse",value:function(e){var t=this.props.instanceId;u.default.getTkWhiteBoardManager().useWhiteboardTool(e,t,f.default.hasRole.roleStudent),this.setState({isActive:e})}},{key:"penActive",value:function(e){return-1!==["tool_pencil","tool_highlighter","tool_line","tool_arrow"].indexOf(e)?e:""}},{key:"isShowShapeList",value:function(){u.default.getTkWhiteBoardManager().useWhiteboardTool(this.state.shape,this.props.instanceId,f.default.hasRole.roleStudent),this.setState({isShowShapeList:!this.state.isShowShapeList,isActive:this.state.shape,isShowPenList:!1,textPanelShow:!1,eraserShow:!1})}},{key:"isShowPenList",value:function(){u.default.getTkWhiteBoardManager().useWhiteboardTool(this.state.pen,this.props.instanceId,f.default.hasRole.roleStudent),this.setState({isShowPenList:!this.state.isShowPenList,isActive:this.state.pen,isShowShapeList:!1,textPanelShow:!1,eraserShow:!1})}},{key:"changePen",value:function(e){e.target.dataset.type&&(u.default.getTkWhiteBoardManager().useWhiteboardTool(e.target.dataset.type,this.props.instanceId,f.default.hasRole.roleStudent),this.setState({isActive:e.target.dataset.type})),e.stopPropagation()}},{key:"mouseLeave",value:function(){this.setState({isShowShapeList:!1,isShowPenList:!1,isShowSettingList:!1,textPanelShow:!1,eraserShow:!1})}},{key:"setLineColor",value:function(e){var t=this;e&&this.setState({primaryColor:e},function(){u.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({primaryColor:e},t.props.instanceId)})}},{key:"getWidthByType",value:function(e,t){if(t){var a=void 0;switch(t){case"line":case"shape":case"text":case"eraser":0===(a=Math.ceil(Number(e)))&&(a=1)}return a}}},{key:"onAfterChangePenLineWidth",value:function(e){var t=this.getWidthByType(e,"line");u.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({pencilWidth:t},this.props.instanceId)}},{key:"onAfterChangeShapeLineWidth",value:function(e){var t=this.getWidthByType(e,"shape");u.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({shapeWidth:t},this.props.instanceId)}},{key:"openToolUndo",value:function(e){u.default.getTkWhiteBoardManager().undo(this.props.instanceId),this.setState({isActive:e,isShowShapeList:!1,isShowPenList:!1,textPanelShow:!1,eraserShow:!1})}},{key:"openToolLaser",value:function(e){u.default.getTkWhiteBoardManager().useWhiteboardTool(e,this.props.instanceId,f.default.hasRole.roleStudent),this.setState({isActive:e})}},{key:"openToolText",value:function(e){var t=this;u.default.getTkWhiteBoardManager().useWhiteboardTool(e,this.props.instanceId,f.default.hasRole.roleStudent),this.setState({isActive:e,textPanelShow:!this.state.textPanelShow,isShowShapeList:!1,isShowPenList:!1,eraserShow:!1},function(){t.changePenStatus()})}},{key:"changeFontFamily",value:function(e){e&&e.target&&e.target.dataset.fontfamily&&u.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({fontFamily:e.target.dataset.fontfamily},this.props.instanceId),e.stopPropagation()}},{key:"changeFontSize",value:function(e){var t=this.getWidthByType(e,"text");u.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({fontSize:t},this.props.instanceId)}},{key:"shapeActive",value:function(e){return-1!==["tool_rectangle_empty","tool_rectangle","tool_ellipse_empty","tool_ellipse"].indexOf(e)?e:""}},{key:"changeShape",value:function(e){e&&e.target&&e.target.dataset.type&&(u.default.getTkWhiteBoardManager().useWhiteboardTool(e.target.dataset.type,this.props.instanceId,f.default.hasRole.roleStudent),this.setState({isActive:e.target.dataset.type})),e.stopPropagation()}},{key:"openToolEraser",value:function(e){u.default.getTkWhiteBoardManager().useWhiteboardTool(e,this.props.instanceId,f.default.hasRole.roleStudent),this.setState({isActive:e,isShowShapeList:!1,isShowPenList:!1,textPanelShow:!1,eraserShow:!this.state.eraserShow})}},{key:"changePenStatus",value:function(){return!1}},{key:"changeEraser",value:function(e){e&&e.stopPropagation&&e.stopPropagation()}},{key:"onAfterChangeEraserWidth",value:function(e){var t=this.getWidthByType(e,"eraser");u.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({eraserWidth:t},this.props.instanceId)}},{key:"openToolRedo",value:function(e){u.default.getTkWhiteBoardManager().redo(this.props.instanceId),this.setState({isActive:e,isShowShapeList:!1,isShowPenList:!1,textPanelShow:!1,eraserShow:!1})}},{key:"openToolClear",value:function(e){u.default.getTkWhiteBoardManager().clear(this.props.instanceId),this.setState({isActive:e,isShowShapeList:!1,isShowPenList:!1,textPanelShow:!1,eraserShow:!1})}},{key:"_randomHexColor",value:function(){for(var e=Math.floor(16777216*Math.random()).toString(16);e.length<6;)e="0"+e;return"#"+e}},{key:"render",value:function(){var e=this.state.show;return d.default.createElement("ul",{className:"tool-bar-box",style:{display:this.state.showToolBar&&h.default.classBegin?"block":"none"}},d.default.createElement("li",{className:"tool-option icon",onClick:this.toggle.bind(this)}),f.default.joinRoomInfo.mouseoptions&&f.default.hasRole.roleStudent?void 0:d.default.createElement("li",{className:"tool-option tool_mouse "+("tool_mouse"===this.state.isActive?"active":"")+(e?"":" hide"),onClick:this.openToolMouse.bind(this,"tool_mouse"),title:h.default.language.languageData.header.tool.mouse.title},d.default.createElement("em",{className:"icon icon-mouse"})),d.default.createElement("li",{className:"tool-option tool_laser "+("tool_laser"===this.state.isActive?"active":"")+(e&&!f.default.hasRole.roleStudent?"":" hide"),onClick:this.openToolLaser.bind(this,"tool_laser"),title:h.default.language.languageData.header.tool.pencil.laser.title},d.default.createElement("em",{className:"icon icon-jiguang"})),d.default.createElement(p.default,(0,i.default)({},this.state,{showPenList:this.isShowPenList.bind(this),penActive:this.penActive,changePen:this.changePen.bind(this),mouseLeave:this.mouseLeave.bind(this),setLineColor:this.setLineColor.bind(this),onAfterChangePenLineWidth:this.onAfterChangePenLineWidth.bind(this)})),d.default.createElement(g.default,(0,i.default)({},this.state,{openToolText:this.openToolText.bind(this,"tool_text"),changePen:this.changePen.bind(this),mouseLeave:this.mouseLeave.bind(this),changeFontFamily:this.changeFontFamily.bind(this),setLineColor:this.setLineColor.bind(this),changeFontSize:this.changeFontSize.bind(this)})),f.default.joinRoomInfo.shapeoptions&&f.default.hasRole.roleStudent?void 0:d.default.createElement(v.default,(0,i.default)({},this.state,{shapeActive:this.shapeActive,showShapeList:this.isShowShapeList.bind(this),changeShape:this.changeShape.bind(this),mouseLeave:this.mouseLeave.bind(this),setLineColor:this.setLineColor.bind(this),onAfterChangeShapeLineWidth:this.onAfterChangeShapeLineWidth.bind(this)})),d.default.createElement(y.default,(0,i.default)({},this.state,{openToolEraser:this.openToolEraser.bind(this,"tool_eraser"),changeEraser:this.changeEraser.bind(this),mouseLeave:this.mouseLeave.bind(this),onAfterChangeEraserWidth:this.onAfterChangeEraserWidth.bind(this)})),d.default.createElement("li",{className:"tool-option tool_undo "+(this.state.undoDisabled?" disabled":"")+("tool_undo"===this.state.isActive?"active":!e||f.default.hasRole.roleStudent&&!f.default.joinRoomInfo.shapeUndoRedoClear?" hide":""),onClick:this.openToolUndo.bind(this,"tool_undo"),title:h.default.language.languageData.header.tool.undo.title},d.default.createElement("em",{className:"icon icon-back"})),d.default.createElement("li",{className:"tool-option tool_redo "+(this.state.redoDisabled?" disabled":"")+("tool_redo"===this.state.isActive?"active":!e||f.default.hasRole.roleStudent&&!f.default.joinRoomInfo.shapeUndoRedoClear?" hide":""),onClick:this.openToolRedo.bind(this,"tool_redo"),title:h.default.language.languageData.header.tool.redo.title},d.default.createElement("em",{className:"icon icon-before"})),d.default.createElement("li",{className:"tool-option tool_clear "+(this.state.clearDisabled?" disabled":"")+("tool_clear"===this.state.isActive?"active":"")+(!e||f.default.hasRole.roleStudent&&!f.default.joinRoomInfo.shapeUndoRedoClear?" hide":""),onClick:this.openToolClear.bind(this,"tool_clear"),title:h.default.language.languageData.header.tool.clear.title},d.default.createElement("em",{className:"icon icon-delete"})),m.default.handler.getAppPermissions("hasVideoCapture")&&f.default.hasRoomtype.oneToOne&&e?d.default.createElement(S.default,null):void 0,d.default.createElement("li",{className:"tool-option icon-show icon-tools_up "+(e?"show":""),onClick:this.toggle.bind(this)}))}}]),t}(d.default.Component);t.default=C},UIQw:function(e,t,a){},UOZY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(a("q1tI")),o=s(a("17x9")),n=s(a("eQYT")),l=s(a("HPAy"));function s(e){return e&&e.__esModule?e:{default:e}}var r=function(e){var t=e.close,a=e.addType,o=e.switchAddType,s=function(e){o(e)},r=n.default.joinRoomInfo.isShowBingCourse,d=n.default.hasRole.roleStudent;return i.default.createElement("div",{className:"addcourse-header"},i.default.createElement("div",{className:"back-couser",onClick:t},i.default.createElement("span",{className:"back-couser-icon"})," ",l.default.language.languageData.toolContainer.toolIcon.addCourse.uploadCourse.resourceLibrary),r&&!d?i.default.createElement("ul",{className:"add-type-tabs"},i.default.createElement("li",{className:"add-type-tabs-item "+("upload"===a?"on":""),onClick:s.bind(void 0,"upload")},l.default.language.languageData.toolContainer.toolIcon.addCourse.uploadCourse.localUpload,i.default.createElement("span",{className:"add-type-tabs-item-bottom"})),i.default.createElement("li",{className:"add-type-tabs-item "+("bind"===a?"on":""),onClick:s.bind(void 0,"bind")},l.default.language.languageData.toolContainer.toolIcon.addCourse.relationCourse.title,i.default.createElement("span",{className:"add-type-tabs-item-bottom"}))):null)};r.prototype={close:o.default.func,addType:o.default.oneOf(["upload","bind"]),switchAddType:o.default.func},t.default=r},UstG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(a("EJiy")),o=s(a("iCc5")),n=s(a("V7oC")),l=s(a("aJKe"));function s(e){return e&&e.__esModule?e:{default:e}}var r=new(function(){function e(){(0,o.default)(this,e),this.permissionsJson=this.productionDefaultAppAppPermissions()}return(0,n.default)(e,[{key:"productionDefaultAppAppPermissions",value:function(){return{canDraw:!1,classBtnIsDisableOfRemind:!1,loadClassbeginRemind:!1,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1,h5DocumentActionClick:!1,dynamicPptActionClick:!1,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,setParticipantPropertyToAllByoRole:!0,sendSignallingDataToParticipant:!0,sendTextMessage:!0,sendSignallingFromClassBegin:!1,sendSignallingTimerToStudent:!1,sendSignallingDialToStudent:!1,studentInit:!1,dialIconClose:!1,sendSignallingQiangDaQi:!1,sendSignallingQiangDaZhe:!0,sendSignallingFromVideoSplitScreen:!1,sendSignallingFromUpdateTime:!1,sendSignallingFromDocumentChange:!1,sendSignallingFromStreamFailure:!1,sendSignallingFromVideoDraghandle:!1,sendSignallingFromBlackBoardDrag:!1,userPlatformUpOrDown:!1,userAudioOpenOrClose:!1,userVideoOpenOrClose:!1,changeUserCandraw:!1,sendGift:!1,roomStart:!1,roomOver:!1,giveAllUserSendGift:!1,giveAloneUserSendGift:!1,allUserMute:!1,hasAllSpeaking:!1,allUserTools:!1,allTrophy:!1,dialCircleClick:!0,startClassBegin:!1,endClassBegin:!1,forcedEndClassBegin:!1,raisehand:!1,raisehandDisable:!1,loadUserlist:!1,loadCoursewarelist:!0,loadMedialist:!0,loadSystemSettings:!0,loadNoviceHelp:!0,showUserlistIcon:!1,laser:!1,autoPublishAV:!1,userlisPlatform:!1,openFileIsClick:!0,publishMediaStream:!1,unpublishMediaStream:!1,publishFileStream:!1,unpublishFileStream:!1,publishDynamicPptMediaPermission_video:!1,autoClassBegin:!1,hiddenClassBeginAutoClassBegin:!1,dblclickDeviceVideoFullScreenRight:!1,dblclickDeviceVideoFullScreenBottom:!1,studentVframeBtnIsHide:!0,teacherVframeBtnIsShow:!1,endClassbeginRevertToStartupLayout:!1,endClassbeginShowLocalStream:!1,delmsgTo__AllAll:!1,sendWhiteboardMarkTool:!1,isChangeVideoSize:!1,jumpPage:!1,pairOfManyIsShow:!1,toolListIsShowPairMany:!1,sendSignallingFromBlackBoard:!1,sendSignallingFromLowConsume:!1,sendSignallingFromDialDrag:!1,isSendSignallingFromTimerDrag:!1,isSendSignallingFromAnswerDrag:!1,isSendSignallingFromResponderDrag:!1,isSendSignallingFromVideoChangeSize:!1,isSendSignallingFromVideoWhiteboard:!1,sendSignallingFromRemoteControl:!1,isCanDragVideo:!1,closeMyseftAV:!1,controlOtherVideo:!1,localStream:!1,isShowVideoDrawTool:!1,isCapture:!1,isMoviesShare:!1,isQrCode:!1,localRecord:!1,isShowCoursewareRemarks:!1,isSendSignallingFromFullScreen:!1,pictureInPicture:!1,isHandleVideoInFullScreen:!1,chatSendImg:!1,isSendSignallingFromCaptureImg:!1,canDragCaptureImg:!1,isSendSignallingFromCaptureImgDrag:!1,canResizeCaptureImg:!1,isSendCaptureImgResize:!1,publishDeskTopShareStream:!1,unpublishDeskTopShareStream:!1,isShowPPTToolBottom:!1,sendSignallingFromExtendSignalling:!1,sendSignllingEveryoneBanChat:!1,switchLayout:!1,doubleClickVideo:!1,sendQuestion:!1,publishResult:!1,answerCommit:!1,getQuestionCount:!1,doubleDivision:!1,sendIsGroup:!1,hasBanChatBtn:!1,mainPeopleExchangeVideo:!1,hasVideoCapture:!1,isStuHideOtherVideo:!1,isShowTrophy:!0}}},{key:"resetDefaultAppPermissions",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this;t.permissionsJson=t.productionDefaultAppAppPermissions(),e&&l.default.CoreController.dispatchEvent({type:"initAppPermissions",message:{data:t.permissionsJson}})}},{key:"resetAppPermissions",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this;e&&"object"===(void 0===e?"undefined":(0,i.default)(e))&&(Object.customAssign(a.permissionsJson,e),t&&l.default.CoreController.dispatchEvent({type:"resetAppPermissions",message:{data:a.permissionsJson}}))}},{key:"setAppPermissions",value:function(e,t){if(this.permissionsJson[e]!==t){L.Logger.debug("setAppPermissions key and value:",e,t,"old appPermissions:",this.permissionsJson[e]),this.permissionsJson[e]=t;var a={type:"updateAppPermissions_"+e,message:{key:e,value:t}};l.default.CoreController.dispatchEvent(a)}}},{key:"getAppPermissions",value:function(e){return this.permissionsJson[e]}},{key:"initAppPermissions",value:function(e){L.Logger.debug("initAppPermissions data:",e);for(var t in e)this.permissionsJson[t]=e[t];l.default.CoreController.dispatchEvent({type:"initAppPermissions",message:{data:this.permissionsJson}}),l.default.CoreController.dispatchEvent({type:"initAppPermissionsOfWhiteboard",message:{data:this.permissionsJson}})}}]),e}());t.default=r},V7x4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=b(a("GQeE")),o=b(a("FyfS")),n=b(a("Yz+Y")),l=b(a("iCc5")),s=b(a("V7oC")),r=b(a("FYw3")),d=b(a("mRg0")),u=(0,b(a("CSPP")).default)(["\n  display: ",";\n"],["\n  display: ",";\n"]),c=b(a("q1tI")),f=b(a("HPAy")),h=b(a("eQYT")),m=b(a("aJKe")),p=b(a("XbJA")),g=b(a("1Ea7")),v=b(a("mrNk")),y=b(a("JL1q")),S=b(a("3mpg"));function b(e){return e&&e.__esModule?e:{default:e}}var C=b(a("vOnD")).default.div(u,function(e){return e.classbeginInfo.show||e.raiseInfo.show?"''":"none"}),k=function(e){function t(e){(0,l.default)(this,t);var a=(0,r.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.isShowClassOverImg=!1,a.state={classbeginInfo:{show:!1,disabled:!1,classbegin:!1},raiseInfo:{show:!1,disabled:!1,raisehand:!1},muteJustLocal:!0,nowTime:""},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){m.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),m.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),m.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid),m.default.CoreController.addEventListener("receive-msglist-ClassBegin",this.handlerReceiveMsglistClassBegin.bind(this),this.listernerBackupid),m.default.CoreController.addEventListener("initAppPermissions",this.handlerInitAppPermissions.bind(this),this.listernerBackupid),m.default.CoreController.addEventListener("updateAppPermissions_classBtnIsDisableOfRemind",this.handlerUpdateAppPermissions_classBtnIsDisableOfRemind.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){m.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;"ClassBegin"===t.name&&this._updateClassbeginInfo(),"RemoteControl"===t.name&&(this.state.raiseInfo.show=!1,this.setState({raiseInfo:this.state.raiseInfo})),"UpdateTime"==t.name&&"boolean"==typeof this.nowTime&&(this.nowTime=t.ts,this._classbeginOnClick())}},{key:"handlerRoomDelmsg",value:function(e){"ClassBegin"===e.message.name&&this._updateClassbeginInfo()}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=e.message;if(e.user.id===v.default.getTkRoom().getMySelf().id){var a=!0,n=!1,l=void 0;try{for(var s,r=(0,o.default)((0,i.default)(t));!(a=(s=r.next()).done);a=!0){var d=s.value;"raisehand"!==d&&"publishstate"!==d&&"disableaudio"!==d||this._updateRaiseInfo()}}catch(e){n=!0,l=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw l}}}}},{key:"handlerReceiveMsglistClassBegin",value:function(e){e.message;"room-msglist"===e.source&&e.message&&this._updateClassbeginInfo()}},{key:"handlerInitAppPermissions",value:function(e){this._updateClassbeginInfo(),this._updateRaiseInfo()}},{key:"_classbeginOnClick",value:function(){var e=this;if(!f.default.classBegin&&this.nowTime>1*h.default.joinRoomInfo.endtime)g.default.showConfirm(f.default.language.languageData.login.language.timeOver.notice);else if(f.default.classBegin){if(!y.default.handler.getAppPermissions("endClassBegin"))return;var t=f.default.language.languageData.alertWin.messageWin.winMessageText.classBeginEnd.text;y.default.handler.getAppPermissions("localRecord")&&f.default.localRecording&&(t=c.default.createElement("div",null,c.default.createElement("span",{style:{display:"block",textAlign:"center"}},f.default.language.languageData.alertWin.messageWin.winMessageText.classBeginEnd.text),c.default.createElement("span",{style:{display:"block",textAlign:"center",fontSize:"0.12rem",color:"#913706",marginTop:"0.05rem"}},f.default.language.languageData.alertWin.messageWin.winMessageText.classBeginEndLocalRecord.text),f.default.localRecordPath?c.default.createElement("span",{style:{display:"block",textAlign:"center",fontSize:"0.12rem",color:"#913706",marginTop:"0.05rem"}},f.default.localRecordPath?f.default.localRecordPath.substring(0,f.default.localRecordPath.indexOf("TK_")):void 0):void 0)),g.default.showConfirm(t,function(t){t&&(p.default.sendSignllingEveryoneBanChat({isAllBanSpeak:!1},!0),h.default.joinRoomInfo.endImgUrl&&(e.isShowClassOverImg=!0,v.default.getTkWhiteBoardManager().openRemoteDocument(h.default.joinRoomInfo.endImgUrl,"classOverImg","generalDocument")),S.default.roomOver())})}else if(f.default.isLeaveRoom&&h.default.joinRoomInfo.endOfClassHoursIsClassOver)g.default.showConfirm(f.default.language.languageData.remind.time.readyEndAiBanMa.four);else{if(!y.default.handler.getAppPermissions("startClassBegin"))return;y.default.handler.getAppPermissions("localRecord")&&!f.default.selectedRecord?g.default.showConfirm(f.default.language.languageData.alertWin.messageWin.winMessageText.classBeginStartNotSelectRecord.text,function(e){var t=this;e&&(p.default.sendSignllingEveryoneBanChat({isAllBanSpeak:!1},!0),S.default.roomStart(function(){if(f.default.currentPageBeforeClass&&!t.isShowClassOverImg)v.default.getTkWhiteBoardManager().skipPage(f.default.currentPageBeforeClass);else if(t.isShowClassOverImg&&f.default.defaultFileInfo){var e=f.default.defaultFileInfo.fileid||0;v.default.getTkWhiteBoardManager().changeDocument(e,1)}else v.default.getTkWhiteBoardManager().changeDocument(0,1)}))}):(p.default.sendSignllingEveryoneBanChat({isAllBanSpeak:!1},!0),S.default.roomStart(function(){if(f.default.currentPageBeforeClass&&!e.isShowClassOverImg)v.default.getTkWhiteBoardManager().skipPage(f.default.currentPageBeforeClass);else if(e.isShowClassOverImg&&f.default.defaultFileInfo){var t=f.default.defaultFileInfo.fileid||0;v.default.getTkWhiteBoardManager().changeDocument(t,1)}else v.default.getTkWhiteBoardManager().changeDocument(0,1)})),f.default.isOnlyAudioRoom&&v.default.getTkRoom().switchOnlyAudioRoom(!0)}}},{key:"classbeginOnClick",value:function(){this.nowTime=!1,p.default.sendSignallingFromUpdateTime(v.default.getTkRoom().getMySelf().id)}},{key:"raiseOnClick",value:function(){var e=v.default.getTkRoom().getMySelf();if(y.default.handler.getAppPermissions("raisehand")&&!(e.publishstate>0&&h.default.joinRoomInfo.isHandsUpOnStage)){var t=this.state.raiseInfo;t.raisehand=!t.raisehand,this.setState({raiseInfo:t}),p.default.setParticipantPropertyToAll(v.default.getTkRoom().getMySelf().id,{raisehand:!v.default.getTkRoom().getMySelf().raisehand})}}},{key:"handlerUpdateAppPermissions_classBtnIsDisableOfRemind",value:function(){this._updateClassbeginInfo()}},{key:"_updateClassbeginInfo",value:function(){var e={show:y.default.handler.getAppPermissions("forcedEndClassBegin")||(f.default.classBegin?y.default.handler.getAppPermissions("endClassBegin"):y.default.handler.getAppPermissions("startClassBegin")),disabled:!(!f.default.classBegin&&h.default.joinRoomInfo.endOfClassHoursIsClassOver)&&(y.default.handler.getAppPermissions("forcedEndClassBegin")&&!f.default.classBegin||!!y.default.handler.getAppPermissions("classBtnIsDisableOfRemind")),classbegin:f.default.classBegin};Object.customAssign(this.state.classbeginInfo,e),this.setState({classbeginInfo:this.state.classbeginInfo});var t=this.state.raiseInfo,a=this.props.classbeginAndRaiseShowButtonCallback;a&&"function"==typeof a&&a(e.show||t.show)}},{key:"_updateRaiseInfo",value:function(){v.default.getTkRoom().getMySelf();var e={show:y.default.handler.getAppPermissions("raisehand"),raisehand:v.default.getTkRoom().getMySelf().raisehand};Object.customAssign(this.state.raiseInfo,e),this.setState({raiseInfo:this.state.raiseInfo});var t=this.state.classbeginInfo,a=this.props.classbeginAndRaiseShowButtonCallback;a&&"function"==typeof a&&a(t.show||e.show)}},{key:"raiseOnMouseDown",value:function(){var e=this.state.raiseInfo;e.raisehand=!0,p.default.setParticipantPropertyToAll(v.default.getTkRoom().getMySelf().id,{raisehand:!v.default.getTkRoom().getMySelf().raisehand}),this.setState({raiseInfo:e})}},{key:"raiseOnMouseUp",value:function(){var e=this.state.raiseInfo;e.raisehand=!1,p.default.setParticipantPropertyToAll(v.default.getTkRoom().getMySelf().id,{raisehand:!1}),this.setState({raiseInfo:e})}},{key:"raiseOnMouseOut",value:function(){var e=this.state.raiseInfo;e.raisehand=!1,p.default.setParticipantPropertyToAll(v.default.getTkRoom().getMySelf().id,{raisehand:!1}),this.setState({raiseInfo:e})}},{key:"render",value:function(){var e=this.state,t=e.classbeginInfo,a=e.raiseInfo,i=(e.muteJustLocal,v.default.getTkRoom().getMySelf());return c.default.createElement(C,{className:"h-btn-wrap add-fl add-fr",id:"room_controller_container",classbeginInfo:t,raiseInfo:a},!t.show||h.default.hasRole.roleTeachingAssistant||h.default.joinRoomInfo.hiddenClassBegin?void 0:c.default.createElement("button",{className:"add-fl "+(t.disabled?"disabled":"")+(!f.default.classBegin&&h.default.hasRole.rolePatrol?" prohibition":" ")+(f.default.classBegin||y.default.handler.getAppPermissions("forcedEndClassBegin")?" h-room-end":" h-room-start"),disabled:t.disabled||void 0,id:"room_classBegin",onClick:t.disabled?void 0:this.classbeginOnClick.bind(this)},t.classbegin||y.default.handler.getAppPermissions("forcedEndClassBegin")?f.default.language.languageData.header.system.finish.text:f.default.language.languageData.header.system.attend.text),a.show?c.default.createElement("button",{className:"h-room-start h-room-raise add-fl  "+(a.disabled?"disabled":"")+(a.raisehand?" handDown":" "),disabled:a.disabled||void 0,id:"room_Raise",onClick:a.disabled?void 0:this.raiseOnClick.bind(this),onMouseDown:!a.disabled&&i.publishstate>0&&h.default.joinRoomInfo.isHandsUpOnStage?this.raiseOnMouseDown.bind(this):void 0,onMouseUp:!a.disabled&&i.publishstate>0&&h.default.joinRoomInfo.isHandsUpOnStage?this.raiseOnMouseUp.bind(this):void 0,onMouseOut:!a.disabled&&i.publishstate>0&&h.default.joinRoomInfo.isHandsUpOnStage?this.raiseOnMouseOut.bind(this):void 0},a.raisehand?i.publishstate>0&&h.default.joinRoomInfo.isHandsUpOnStage?f.default.language.languageData.header.system.Raise.raisingHand:f.default.language.languageData.header.system.Raise.noText:(i.publishstate>0&&h.default.joinRoomInfo.isHandsUpOnStage,f.default.language.languageData.header.system.Raise.yesText)):void 0)}}]),t}(c.default.Component);t.default=k},V9PI:function(e,t,a){},VIZt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=c(a("Yz+Y")),o=c(a("iCc5")),n=c(a("V7oC")),l=c(a("FYw3")),s=c(a("mRg0")),r=c(a("q1tI")),d=(c(a("mrNk")),c(a("aJKe")));a("kfeF");var u=c(a("HPAy"));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return a.state={show:!1},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.chinese={title:"",explain:",",chromeTrue:"Chrome",chromeTrueClick:"",addPlugin:"",chromeFalse:"Chrome",one:"1chrome://extensions/.crx;",two:"2. ChromeChrome"},a.english={title:"Plug-in installation boot",explain:"The system has detected that you have not installed extension desktop sharing plug-in. Please download and install it.",chromeTrue:"If you can visit the Google Chrome store",chromeTrueClick:"directly click ",addPlugin:" add plugin",chromeFalse:"If you can't access the Google Chrome store",one:"Access the chrome/extension open extension management interface, open the developer mode, and drag the downloaded .crx file into the extended management interface to determine the addition;",two:"When the installation is successful, it will appear in the lower right corner of the browser to the following diagram, which means that the installation is successful, and you can use it normally.If no icon appears, please open the Chrome browser and open the installation plug-in through the Chrome extension browser."},a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){d.default.CoreController.addEventListener("check_no_plug",this.handlerOpenAddPlug.bind(this),this.listernerBackupid)}},{key:"componentWillUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){d.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerOpenAddPlug",value:function(){this.setState({show:!0})}},{key:"close",value:function(){this.setState({show:!1}),d.default.CoreController.dispatchEvent({type:"colse-holdAll-item",message:{type:"sharing"}})}},{key:"render",value:function(){var e="english"===u.default.language.name?this.english:this.chinese;return r.default.createElement("div",{className:"plug_check_model",style:{display:this.state.show?"flex":"none"}},r.default.createElement("div",{className:"plug_check_container "+("english"===u.default.language.name?"plug_check_container_english":"")},r.default.createElement("div",{className:"plug_check_close",onClick:this.close.bind(this)}),r.default.createElement("div",{className:"plug_check_title"},r.default.createElement("div",{className:"plug_check_title_icon"}),r.default.createElement("div",{className:"plug_check_title_h"},r.default.createElement("div",{className:"plug_check_title_h1"},e.title),r.default.createElement("div",{className:"plug_check_title_h2"},e.explain))),r.default.createElement("div",{className:"plug_check_content "+("english"===u.default.language.name?"plug_check_content_english":"")},r.default.createElement("div",{className:"plug_check_type_true"},e.chromeTrue,r.default.createElement("span",{className:"plug_check_fenge"},"|"),r.default.createElement("span",{className:"plug_check_click"},e.chromeTrueClick,r.default.createElement("a",{href:"https://chrome.google.com/webstore/detail/talk-cloud-extension/pboolclgcnlceldkjnplgbcooafhaibk",target:"_blank"},e.addPlugin))),r.default.createElement("a",{className:"plug_check_icon",href:"https://chrome.google.com/webstore/detail/talk-cloud-extension/pboolclgcnlceldkjnplgbcooafhaibk",target:"_blank"},r.default.createElement("div",{className:"plug_check_chrome "+("english"===u.default.language.name?"plug_check_chrome_english":"")})),r.default.createElement("div",{className:"plug_check_border"}),r.default.createElement("div",{className:"plug_check_type_true"},e.chromeFalse,r.default.createElement("span",{className:"plug_check_fenge"},"|"),r.default.createElement("span",{className:"plug_check_click"},e.chromeTrueClick,r.default.createElement("a",{href:"https://doccdn.talk-cloud.net/Updatefiles/Talk-Cloud-Extension_v1.0.2.crx",target:"_blank"},e.addPlugin))),r.default.createElement("div",{className:"plug_check_type_false "+("english"===u.default.language.name?"plug_check_type_false_english":"")},r.default.createElement("div",{className:"plug_check_direct"},e.one),r.default.createElement("div",{className:"plug_check_developer "+("english"===u.default.language.name?"plug_check_developer_english":"")})),r.default.createElement("div",{className:"plug_check_type_false2 "+("english"===u.default.language.name?"plug_check_type_false2_english":"")},r.default.createElement("div",{className:"plug_check_direct"},e.two),r.default.createElement("div",{className:"plug_check_success"})))))}}]),t}(r.default.Component);t.default=f},VrUU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=m(a("QbLZ")),o=m(a("Yz+Y")),n=m(a("iCc5")),l=m(a("V7oC")),s=m(a("FYw3")),r=m(a("mRg0")),d=m(a("q1tI")),u=m(a("aJKe")),c=m(a("HPAy")),f=(m(a("mrNk")),a("O0U9")),h=m(a("eQYT"));function m(e){return e&&e.__esModule?e:{default:e}}a("4rWi");var p=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={isLibraryShow:!1,isMedia:!1,isCourseShow:!0,isMediaShow:!1,uploadType:null},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.tempMediaLib=[],a.tempCourseLib=[],a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){u.default.CoreController.addEventListener("CourseListClick",this.handlerCourseListClick.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener("CloseLibrary",this.handlerCloseLibrary.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener("CloseALLPanel",this.handlerCloseLibrary.bind(this),this.listernerBackupid)}},{key:"handlerCloseLibrary",value:function(){this.setState({isLibraryShow:!1}),u.default.CoreController.dispatchEvent({type:"CoursewareRemove"})}},{key:"handlerCourseListClick",value:function(){this.setState({isLibraryShow:!0}),u.default.CoreController.dispatchEvent({type:"fileListEvent",message:{fileSortType:"fileid",isAec:!1,libType:"courseLib"}}),u.default.CoreController.dispatchEvent({type:"fileListEvent",message:{fileSortType:"fileid",isAec:!1,libType:"mediaLib"}})}},{key:"openCourse",value:function(){this.setState({isCourseShow:!0,isMediaShow:!1})}},{key:"openMedia",value:function(){this.setState({isCourseShow:!1,isMediaShow:!0})}},{key:"render",value:function(){return d.default.createElement("div",{className:"mask",onClick:this.handlerCloseLibrary.bind(this),style:{display:this.state.isLibraryShow?"block":"none"}},d.default.createElement("article",{className:"courseware_box",onClick:function(e){e.stopPropagation()}},d.default.createElement("div",{className:"courseware_left_button"},d.default.createElement("p",{className:"tool-icon"+(this.state.isCourseShow?" active":" "),onClick:this.openCourse.bind(this),title:c.default.language.languageData.toolContainer.toolIcon.documentList.title},c.default.language.languageData.toolContainer.toolIcon.documentList.title),d.default.createElement("p",{className:"tool-icon"+(this.state.isMediaShow?" active":" "),onClick:this.openMedia.bind(this),style:{display:h.default.hasRole.roleStudent?"none":""},title:c.default.language.languageData.toolContainer.toolIcon.mediaDocumentList.title},c.default.language.languageData.toolContainer.toolIcon.mediaDocumentList.title)),d.default.createElement("div",{className:"courseware_content"},d.default.createElement("div",{style:{display:this.state.isCourseShow?"block":"none",height:"100%"}},d.default.createElement(f.CourseLibraryHasToolBar,(0,i.default)({},this.props,{isLibraryShow:this.state.isLibraryShow}))),d.default.createElement("div",{style:{display:this.state.isMediaShow?"block":"none",height:"100%"}},d.default.createElement(f.MediaLibraryHasToolBar,(0,i.default)({},this.props,{isLibraryShow:this.state.isLibraryShow}))))))}}]),t}(d.default.PureComponent);t.default=p},Vsxy:function(e,t,a){},WAjv:function(e,t,a){},WXZs:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=v(a("QbLZ")),o=v(a("jo6Y")),n=v(a("Yz+Y")),l=v(a("iCc5")),s=v(a("V7oC")),r=v(a("FYw3")),d=v(a("mRg0")),u=v(a("q1tI")),c=v(a("17x9")),f=v(a("aJKe")),h=v(a("uuqz")),m=v(a("HPAy")),p=v(a("mrNk")),g=(v(a("XbJA")),v(a("eQYT")));function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){(0,l.default)(this,t);var a=(0,r.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.containerWidthAndHeight=Object.customAssign({},a.props.containerWidthAndHeight),a.instanceId=void 0!==a.props.instanceId?a.props.instanceId:"whiteboard_default",a.whiteboardElementId="whiteboard_container_"+a.instanceId,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.showShapeAuthor=void 0!==a.props.showShapeAuthor?a.props.showShapeAuthor:m.default.showShapeAuthor,a.HandlerWhiteboardAndCoreInstance=p.default.getTkWhiteBoardManager().getWhiteboardIntermediateLayerInstance(),a.HandlerTkWhiteBoardManager=p.default.getTkWhiteBoardManager(),a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){f.default.CoreController.addEventListener("changeWebPageWindowSize",this.handlerChangeWebPageWindowSize.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener("resizeHandler",this.handlerResizeHandler.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener("SwitchLayout",this.handlerSwitchLayout.bind(this),this.listernerBackupid),this._lcInit()}},{key:"componentWillUnmount",value:function(){this.props.saveImage&&this.HandlerWhiteboardAndCoreInstance.downCanvasImageToLocalFile(this.instanceId),f.default.Window.removeBackupListerner(this.listernerBackupid),f.default.CoreController.removeBackupListerner(this.listernerBackupid),this.HandlerTkWhiteBoardManager.destroyExtendWhiteboard(this.instanceId)}},{key:"handlerChangeWebPageWindowSize",value:function(){var e=this,t=this;setTimeout(function(){t.HandlerTkWhiteBoardManager.updateWhiteboardSize(e.instanceId)},100)}},{key:"handlerSwitchLayout",value:function(){var e=this,t=this;setTimeout(function(){t.HandlerTkWhiteBoardManager.updateWhiteboardSize(e.instanceId)},100)}},{key:"handlerResizeHandler",value:function(){this.HandlerTkWhiteBoardManager.updateWhiteboardSize(this.instanceId)}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(e.show!==this.props.show&&this.props.show&&this.HandlerTkWhiteBoardManager.updateWhiteboardSize(this.instanceId),!this.props.containerWidthAndHeight||this.props.containerWidthAndHeight.width===this.containerWidthAndHeight.width&&this.props.containerWidthAndHeight.height===this.containerWidthAndHeight.height||(Object.customAssign(this.containerWidthAndHeight,this.props.containerWidthAndHeight),setTimeout(function(){a.HandlerTkWhiteBoardManager.updateWhiteboardSize(a.instanceId)},100)),this.props.deawPermission!==e.deawPermission){var i={canDraw:this.props.deawPermission};this.HandlerTkWhiteBoardManager.changeWhiteBoardConfigration(i,this.instanceId)}if(this.props.useToolKey!==e.useToolKey&&"tool_color"!==this.props.useToolKey&&this.HandlerTkWhiteBoardManager.useWhiteboardTool(this.props.useToolKey,this.instanceId,g.default.hasRole.roleStudent),this.props.useToolColor!==e.useToolColor){var o={primaryColor:this.props.useToolColor};this.HandlerTkWhiteBoardManager.changeWhiteBoardConfigration(o,this.instanceId)}if(this.props.pencilWidth!==e.pencilWidth){var n={pencilWidth:this.props.pencilWidth};this.HandlerTkWhiteBoardManager.changeWhiteBoardConfigration(n,this.instanceId)}if(this.props.eraserWidth!==e.eraserWidth){var l={eraserWidth:this.props.eraserWidth};this.HandlerTkWhiteBoardManager.changeWhiteBoardConfigration(l,this.instanceId)}if(this.props.shapeWidth!==e.shapeWidth){var s={shapeWidth:this.props.shapeWidth};this.HandlerTkWhiteBoardManager.changeWhiteBoardConfigration(s,this.instanceId)}if(this.props.fontSize!==e.fontSize){var r={fontSize:this.props.fontSize};this.HandlerTkWhiteBoardManager.changeWhiteBoardConfigration(r,this.instanceId)}this.props.watermarkImageUrl!==e.watermarkImageUrl&&this.HandlerWhiteboardAndCoreInstance.setWhiteboardWatermarkImage(this.instanceId,this.props.watermarkImageUrl),this.props.watermarkImageScalc!==e.watermarkImageScalc&&this.HandlerWhiteboardAndCoreInstance.updateWhiteboardWatermarkImageScale(this.instanceId,this.props.watermarkImageScalc),this.props.isBaseboard!==e.isBaseboard&&this.HandlerWhiteboardAndCoreInstance.updateIsBaseboard(this.instanceId,this.props.isBaseboard),this.props.dependenceBaseboardWhiteboardID!==e.dependenceBaseboardWhiteboardID&&this.HandlerWhiteboardAndCoreInstance.updateDependenceBaseboardWhiteboardID(this.instanceId,this.props.dependenceBaseboardWhiteboardID),this.props.saveRedoStack!==e.saveRedoStack&&this.HandlerWhiteboardAndCoreInstance.updateWhiteboardSaveRedoStackAndSaveUndoStack(this.instanceId,{saveRedoStack:this.props.saveRedoStack})}},{key:"_receiveActionCommand",value:function(e,t){if(this.props.receiveVideoWhiteboardSDKAction){var a={action:e,cmd:t};this.props.receiveVideoWhiteboardSDKAction(a)}}},{key:"_lcInit",value:function(){if(document.getElementById(this.whiteboardElementId)){var e=this.props,t=e.useToolKey,a=e.eraserWidth,i=e.pencilWidth,o=e.fontSize,n=e.shapeWidth,l=document.getElementById(this.whiteboardElementId),s={};s="mobile"===TK.SDKTYPE?"videoDrawWhiteboardComponent"===m.default.clientComponentName||"localFileVideoDrawWhiteboardComponent"===m.default.clientComponentName?{initWhiteboardProductionOptions:{proprietaryTools:!0,isBaseboard:this.props.isBaseboard,dependenceBaseboardWhiteboardID:this.props.dependenceBaseboardWhiteboardID,needLooadBaseboard:this.props.needLooadBaseboard,associatedMsgID:this.props.associatedMsgID},isConnectedRoom:!0,canDraw:this.props.deawPermission,synchronization:!0,defaultWhiteboardScale:16/9,isLoadWhiteboardToolBar:!1,backgroundColor:this.props.backgroundColor,primaryColor:this.props.useToolColor}:{initWhiteboardProductionOptions:{proprietaryTools:!0,isBaseboard:this.props.isBaseboard,dependenceBaseboardWhiteboardID:this.props.dependenceBaseboardWhiteboardID,needLooadBaseboard:this.props.needLooadBaseboard,associatedMsgID:this.props.associatedMsgID},canDraw:this.props.deawPermission,synchronization:!0,defaultWhiteboardScale:16/9,isLoadWhiteboardToolBar:!1,backgroundColor:this.props.backgroundColor,primaryColor:this.props.useToolColor,pencilWidth:10,shapeWidth:25,eraserWidth:10,fontSize:48}:{initWhiteboardProductionOptions:{proprietaryTools:!0,isBaseboard:this.props.isBaseboard,dependenceBaseboardWhiteboardID:this.props.dependenceBaseboardWhiteboardID,needLooadBaseboard:this.props.needLooadBaseboard,associatedMsgID:this.props.associatedMsgID},canDraw:this.props.deawPermission,isLoadWhiteboardToolBar:!1,backgroundColor:this.props.backgroundColor,primaryColor:this.props.useToolColor,eraserWidth:a||30,pencilWidth:i||5,shapeWidth:n||5,fontSize:o||48,clickCapture:g.default.joinRoomInfo.clickCapture},this.HandlerTkWhiteBoardManager.createExtendWhiteboard(l,this.instanceId,s,this._receiveActionCommand.bind(this)),this.HandlerTkWhiteBoardManager.updateWhiteboardSize(this.instanceId),this.props.watermarkImageScalc&&void 0!==this.props.watermarkImageScalc&&this.HandlerWhiteboardAndCoreInstance.updateWhiteboardWatermarkImageScale(this.instanceId,this.props.watermarkImageScalc),this.props.watermarkImageUrl&&void 0!==this.props.watermarkImageUrl&&this.HandlerWhiteboardAndCoreInstance.setWhiteboardWatermarkImage(this.instanceId,this.props.watermarkImageUrl),t&&("tool_eraser"===t?this.HandlerTkWhiteBoardManager.useWhiteboardTool("tool_mouse",this.instanceId,g.default.hasRole.roleStudent):this.HandlerTkWhiteBoardManager.useWhiteboardTool(t,this.instanceId,g.default.hasRole.roleStudent))}}},{key:"render",value:function(){var e=this.props,t=e.show,a=(e.containerWidthAndHeight,(0,o.default)(e,["show","containerWidthAndHeight"]));return u.default.createElement("div",(0,i.default)({id:this.whiteboardElementId,style:{display:t?"block":"none",width:"100%",height:"100%"},className:"overflow-hidden  scroll-literally-container "},h.default.filterContainDataAttribute(a)))}}]),t}(u.default.Component);y.propTypes={instanceId:c.default.string.isRequired},t.default=y},WYFG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=f(a("Yz+Y")),o=f(a("iCc5")),n=f(a("V7oC")),l=f(a("FYw3")),s=f(a("mRg0")),r=(0,f(a("CSPP")).default)(["\n    display: ",";\n"],["\n    display: ",";\n"]),d=f(a("q1tI")),u=f(a("HPAy")),c=f(a("eQYT"));function f(e){return e&&e.__esModule?e:{default:e}}var h=f(a("vOnD")).default.div(r,function(e){return e.qqFaceShow?"":"none"}),m=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isPatrol,a=e.qqFaceShow,i=e.textDisable,o=e.emotionClick,n=e.emotionMouseEnter,l=e.QQFaceMouseLeave,s=e.emotionArray;return d.default.createElement("div",{className:"faceBtn"},d.default.createElement("button",{className:"emotion icon icon-biaoqing",disabled:!!u.default.isLeaveRoom||c.default.hasRole.roleStudent&&(t||i),title:u.default.language.languageData.videoContainer.sendMsg.btn.title.sendEmotion,onClick:o,onMouseEnter:n}),d.default.createElement(h,{className:"qqFace",onMouseLeave:l,qqFaceShow:a},s))}}]),t}(d.default.Component);t.default=m},WtN9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={login:{language:{joinRoomHint:{text:"Est entrando a la aula",remind:"This class may be monitored and/or recorded for quality assurance purposes"},timeOver:{title:"",context:"10",confirm:"",notice:""},preLoad:{text:"Est descargando la clase",pass:"ingnorar"},detection:{company:{text:"icouchu",normal:"icouchu",icoachu:"asistante de icouchu"},selectOption:{noCam:"no encuentra cmara",noMicrophone:"no encuentra microfono",noEarphones:"no encuentra auriculares ni altavoz"},welAll:{one:"Bienvenido",two:"aula online",three:"por favor, revise primero todos los aparatos, para observar el buen estado de la clase",four:"empezar el nalisis"},deviceTestHeader:{device:{text:"revisar los aparatos"},areaSwitch:{text:"cambiar la regin"},deviceSwitch:{text:"configuracin"},optimalServer:{text:"la mejor web"},areaSelection:{text:"las regiones opcionales"},videoinput:{text:"nalisis de los videos"},audioouput:{text:"nalisis de las altavoces"},audioinput:{text:"nalisis de microfono"},detectionResult:{text:"resultado de nalisis"},changeScreen:{text:"configurar doble ventanas"},MainMinorChange:{text:"cambiar la ventana principal y la opcional"},systemInfo:{text:"informacin de sistema"}},networkExtend:{title:{select:"seleccionar",area:"regin",delay:"retardar",text:"seleccionar el servidor donde lo ms cerca"},testBtn:"nalisis del retraso del servidor"},videoinputExtend:{cameraOptionAll:{cameraOption:{text:"opciones de las cmaras"},noticeRed:{text:"notas: si rechazarlo, puede bloqueoar la cmara"}},noticeCarmera:{one:"notas: si no se ve el video, por favor revise los problemas siguientes",two:"1.software de antivirus(360, baidu, ) se ve una noticia, por favor permitirlo;",three:"2.aceptar si la cmara est conectado;",four:"3.si la cmara no se ve video. cambiar el puerto para conectar de nuevo;",five:"4.por favor seleccionar las cmaras, permitir su derecho, si no, puede causar su bloqueo;",six:"5.aceptar si la cmara est usando por otra aplicacin;",seven:"6.reiniciar el ordenador;"}},audioouputExtend:{cameraOptionAll:{cameraOption:{text:"opcion de auriculares"},earphoneVolume:{text:"volumen de auriculares"},clickmusic:{one:"pulsar el botn para soar, puede escuchar la msica?"},playMusic:"escuchar la msica"},noticeCarmera:{one:"notas: si no se escucha nada, por favor, revise el problema en esta manera",two:"1.software de antivirus(360, baidu, ) se ve una noticia, por favor permitirlo;",three:"2.aceptar si el mvil y el altavoz estn conectado;",four:"3.si el volumen de los auriculares y el altavoz est al nivel mximo;",five:"4.Por favor seleccionar la funcin de los auriculares, si no permite, puede causar el bloqueo de los auriculares y el altavoz;",six:"5.si no se escucha nada sonido de los auriculares y  el altavoz, cambiar el enchufe de puerto para conectar de nuevo;",seven:"6.reiniciar el ordenador;"}},audioinputExtend:{cameraOptionAll:{cameraOption:{text:"seleccionar el microfono"},noticeRed:{text:"por favor seleccionar la funcin del microfono, si no, puede causar su bloqueo."},speakSound:{text:"hablar por microfono desde 1 hasta 10, puede escuchar su voz y ver la rotacin de fila verde?"}},noticeCarmera:{one:"notas: si usted no puede ver la fila verde, por favor revise en las maneras por lo siguiente",two:"1.software de antivirus(360, baidu, ) se ve una noticia, por favor permitirlo;",three:"2.aceptar si el microfono est conectado y en uso;",four:"3.confirmar si el microfono est conectado con el puerto de ordenador, est el volumen en mximo;",five:"4.por favor, seleccionar la funcin de microfono, si no, puede causar su bloqueo;",six:"5.si el microfono todava no hay nada de voz, cambiar su enchufe para otro puerto;",seven:"6.reiniciar el ordenador."}},browserDetection:{browserVersion:"",versionError:"Chrome",versionPass:"Chrome",prompt:{one:": ",two:"Chrome"}},systemInfo:{currentUser:"usuario actual:",operatingSystem:"versin de la operacin:",processor:"CPU:",RAM:"Espacio:",serverName:"nombre de servidor:",IPAddress:"direccin de IP:",LoginDevice:"registrar la aplicacin:",MediaServer:"servidor para la media:",CoursewareServer:"servidor para la clase:",networkDelay:"retarda de la web:",packetLoss:"porcentaje de perdida:",browser:"navegador de Internet:",uploadSpeed:"velocidad de cargar:",downloadSpeed:"velocidad de descargar:",roomNumber:"nmero de la habitacin:",versionNumber:"Nmero de la versin:"},CoursewareServer:{TkServer:"servidor de icouchu",DocServer:"servidor de alta velocidad"},resultExtend:{head:{text:"nalisis completo"},item1:{text:"programa de nalisis"},item2:{text:"resultado de nalisis",content:{abnormal:"anormal",normal:"normal"}},item3:{text:"detalles de nalisis",content:{video:"no encuentra la cmara",listen:"usted ha aceptadono escucha nada",speak:"usted ha aceptado no puede ver la onda"}},item4:{content:{video:"puede ver el video",listen:"puede escuchar la voz",speak:"puede ver microfono"}}},button:{next:{text:"lo siguiente"},join:{text:"incorporarse a"},ok:{text:"aceptar"},startNetworkTest:{text:"empezar la nalisis"},canSee:{text:"puede ver"},notSee:{text:"no se ve nada"},canListen:{text:"puede escuchar"},notListen:{text:"no escucha nada"},canSpeak:{text:"se ve la onda"},notSpeak:{text:"no se ve la onda"},checkBack:{text:"nalisis de nuevo"},joinRoom:{text:"entrar habitacin"}},mirrorMode:{text:"modo de espejo"}}}},header:{tool:{allMute:{title:{yes:"portavoz para todos",no:"Mudo para todos"}},capture:{title:{all:"cortar un trozo para la clase",small:"cortar un trozo para la ventana"}},qrCode:{title:{yes:"escanear para cargar fotos"}},allGift:{title:{yes:"otorgar un premio a todos",giftText:"premio para todos"}},blackBoard:{title:{open:"ventana blanca",close:"cerrar",prev:"lo anterior",next:"lo siguiente",shrink:"disminuir"},content:{blackboardHeadTitle:"ventana blanca"},toolBtn:{dispenseed:"dividir",recycle:"reciclaje",againDispenseed:"dividir de nuevo",commonTeacher:"profesor"},tip:{saveImage:"si guardar la ventana"},boardTool:{pen:"plumier",text:"palabras",eraser:"borrador",color:"colores y grosor"},upload:{localUpload:"LocalUpload",scanCodeUpload:"ScanCodeUpload"}},sharing:{title:"compartir ventanas"},mouse:{title:"rtn"},pencil:{title:"plumier",pen:{text:"lpiz"},Highlighter:{text:"subrayador"},linellae:{text:"herramienta de hilo"},arrow:{text:"herramienta de flecha"},laser:{title:"lpiz con lser",text:"herramienta de lpiz con lser"}},text:{title:"palabras",Msyh:{text:"Microsoft Yahei"},Ming:{text:"Song, Mincho"},Arial:{text:"Arial"}},shape:{title:"forma",outlinedRectangle:{text:"rectngulo con hueco"},filledRectangle:{text:"rectngulo"},outlinedCircle:{text:"elipse con hueco"},filledCircle:{text:"elipse"}},eraser:{title:"borrador"},undo:{title:"cancelar"},redo:{title:"recuperar"},clear:{title:"limpiar"},tool_zoom_big:{title:"ampliar"},tool_zoom_small:{title:"disminuir"},VideoCapture:{title:""}},page:{prev:{text:"lo anterior"},next:{text:"lo siguiente"},add:{text:"ms pginas"},lcFullBtn:{title:"dibujar por pantalla entera"},pptFullBtn:{title:"PPT por pantalla entera"},h5FileFullBtn:{title:"h5 por pantalla entera"},skipPage:{text_one:"hasta No.",text_two:"pgina"},ok:{text:"aceptar"},coursewareRemarks:{title:"notas para clase"}},system:{attend:{text:"Empezar la clase"},oneToOneFinsh:{text:"Terminar la clase"},Raise:{hashand:"Alguien levanta la mano",text:"Levantar la mano",noText:"Bajar la mano",yesText:"Levantar la mano",raisingHand:"Levantando"},finish:{text:"Terminar la clase"},gift:{text:"Premiar a todos la copa"},muteAll:{text:"Silencio"},help:{title:"Ayuda"},network:{title:"Red preferida",extend:{ChinaTelecom:"China Telecom",ChinaUnicom:"China Unicom",ChinaMobile:"China Mobile",InternationalNetwork:"International Network",ChinaSouthernTelecom:"China Southern Telecom"}},setting:{title:"Ajuste"}},volume:{title:"Volumen"}},toolContainer:{toolIcon:{whiteBoard:{title:"Pizarrn blanco"},courseList:{title:"Lista de material didctico"},classFolder:{title:"Documentos de clase"},adminFolders:{title:"Documentos pblicos"},documentList:{title:"Documentacin de material didctico",titleTop:"Lista de material didctico",titleSort:"Orden",button:{addCourse:{text:"+ Aadir el material didctico"},fileName:{text:"Nombre"},fileType:{text:"Tipo"},uploadTime:{text:"Tiempo"},search:{name:"Buscar",text:"Introducir el contenido de bsqueda"},close:{text:"Cerrar"}}},H5DocumentList:{title:"Documentacin de material didctico",titleTop:"Lista de material didctico",button:{addCourse:{text:"+ Aadir H5"}}},addCourse:{relationCourse:{title:"Resources",button:{addCourse:{text:"Resources"},pervPage:"Previous",nextPage:"Next",relation:"Sync to classroom",loadMore:"Loading more"}},uploadCourse:{resourceLibrary:"Files",localUpload:"Upload",uploadNotice:{one:"1. You can upload files in *.xls;*.xlsx;*.ppt;*.pptx;*.doc;*.docx;*.txt;*.pdf;*.jpg; *.gif;*.jpeg;*.png;*.bmp format;",two:"2. The uploaded file is not allowed to exceed 300M, and the number of file pages is not allowed to exceed 300;",three:'3. If the uploaded ppt has animation, audio and video, trigger, etc., please tick "dynamic ppt";',four:"4. WPS format courseware upload is not supported in the classroom. If yes, please transfer it to PDF and upload it;",five:'5. The dynamic ppt needs to be converted after upload. If it will play automatically after conversion, please tick "auto play after conversion"'},button:{setLoaclFile:"choose file",setLoaclAgain:"choose Again",upload:"Upload",uploadAgain:"Upload Again"},fileInfo:"File attribute",h5Name:"File name",dynamicPpt:"dynamic ppt",dynamicPptSuccess:"play after conversion"}},mediaDocumentList:{title:"Documentacin de los medios",titleTop:"Lista de los medios",button:{addCourse:{text:"+ Aadir los medios"}}},moviesSharing:{title:"Medios compartidos"},resourceLibrary:{title:"Documentacin de material didctico",dynamicpptSuccess:"the file has conversion",dynamicpptFail:"the file conversion fail"},message:{title:"Mensajes"},full:{title:"Pantalla completa"},fullOff:{title:"Salir de la pantalla completa"},overallControl:{title:"Controlar a todos"},screenSharing:{title:"Pantalla compartida"},messageList:{title:"Lista de mensajes"},addDocument:{title:"Aadir archivos"},userList:{title:"Matrcula de alumnos",thead:{facility:"Dispositivo",nick:"Nombre",platform:"Subir/Bajar",camera:"Cmara",microphone:"Micrfono",draw:"Permitir",raise:"Levantar la mano",mute:"Prohibir hablar",remove:"Expulsar"},button:{Scrawl:{on:{title:"Se ha permitido hacer el grafiti"},off:{title:"Se ha cancelado el grafiti"}},answered:{on:{title:"Se ha nombrado al pasar lista"},off:{title:"Sin nombrar"}},video:{on:{title:"Se ha abierto el vdeo"},off:{title:"Se ha cerrado el vdeo"},disabled:{title:"Se ha prohibido el vdeo"}},update:{up:{title:"Se ha subido a la lista de hablante"},down:{title:"Se ha bajado a la lista de hablante"}},audio:{on:{title:"Se ha abierto el audio"},off:{title:"Se ha cerrado el audio"},disabled:{title:"Se ha prohibido el audio"}},mute:{on:{title:"Se ha prohibido"},off:{title:"Permitir hablar"},patrol:{on:{title:""},off:{title:""}}},remove:{title:"Eliminar"}},input:{text:"Verificar la red"},userStatus:{assistant:{text:"Maestro asistente"},student:{text:"Alumno"}},groupModeStatus:{groupMode:{text:""},normalMode:{text:""}}},disableVideo:{yes:"Abrir el vdeo",no:"Prohibir el vdeo"},disableAudio:{yes:"Abrir el audio",no:"Prohibir el audio"},setting:{title:"Ajuste"},help:{title:"Ayuda"},guide:{title:"Guin para los novatos"},seekHelp:{title:"Pedir ayuda"},FileConversion:{text:"Transformando el documento"}}},videoContainer:{videoIcon:{camera:{title:"Cmara"},microphone:{title:"Micrfono"}},sendMsg:{inputText:{placeholder:"Presionar Enter para enviar mensajes",patrolPlaceholder:"No se puede enviar mensajes al pasar",frequently:"Envia la mensaje demasiado frecuentemente, espera por favor"},btn:{title:{banChat:"Prohibir hablar a todos",allChat:"Cancelar el prohibido",sendImg:"Enviar la foto",sendEmotion:"Enviar la calcomana"}},repeatSpeak:{text:"No puede enviar las mensajes continuamente en la zona de charlar"},sendBtn:{text:"Enviar",title:"Enviar mensajes"},tap:{chat:"Charlar",question:"Preguntar",users:"Lista de usuario",doc:"Archivo",refresh:"Actualizar"},tips:{online:"En lnea",goback:"Volver",pics:"Personal",private:"Charlar con l/ella en privada",teacher:"Maestro",assistant:"Maestro asistente",student:"Alumno",patrol:"Pasar",me:"Yo",join:"Entra en la clasa!",leave:"Sale de la clase!",beforeClass:"La leccin no empieza",afterClass:"La leccin ya ha terminada",whiteBoard:"An no empieza la clase, no hay contenido ahora",openAllBans:"Activar el prohibido a todos",closeAllBans:"Cancelar el prohibido a todos"},filter:{quizobj:"Slo puede preguntar al maestro",seeQuiz:"Slo mostrar mis perguntas",seeChat:"Slo mostrar los mensajes de maestro",seeAnswer:"Slo mostrar mis repuestas"},fontSize:{fontSize14:"Normal",fontSize16:"Medium",fontSize18:"Large",fontSize22:"Largest"}},download:{downloadFile:{title:"Descargar"},downloadFailMessage:{title:"Fall de descargar!"}}},otherVideoContainer:{videoIcon:{microphone:{title:"Micrfono"},userPen:{title:"Grafiti"}},button:{scrawl:{yes:"Permitir",no:"Cancelar el permiso"},platform:{yes:"Subir a la lista de hablante",no:"Bajar a la lista de hablante"},audio:{yes:"Abrir el audio",no:"Cerrar el audio"},video:{yes:"Abrir el vdeo",no:"Cerrar el vdeo"},gift:{yes:"Premiar la copa",no:"Deduct trophy"},close:{yes:"Cerrar"},restoreDrag:{text:"Devolver a la posicin original"},allMute:{yes:"Silencio"},videoStatusChairman:{yes:"Abrir el vdeo",no:"Cerrar el vdeo",text:"Cerrar el vdeo"},audioStatusChairman:{yes:"Abrir el audio",no:"Cerrar el audio",text:"Cerrar el audio"},areaExchange:{text:"Cambiar la zona"},doubleDivision:{text:"Swith de vdeo"},oneKeyReset:{text:"Recuperar todos"},onlyAudio:{no:"Enseanza por audio",yes:"Enseanza por vdeo",create:"Si cambia al modo de enseanza interactiva de audio?",cancel:"Si cambia al modo de enseanza interactiva de vdeo?"},pointerReminder:{text:"Puntero del maestro"}},prompt:{text:"Este alumno ha presado la tecla  Home",userText:"Este usuario ha presado la tecla  Home"}},alertWin:{login:{register:{eventListener:{roomDelClassBegin:{text:"Se ha terminado la clase!"},participantEvicted:{roleConflict:{text:"Entr alguien con misma identidad como usted, ya ha salido por fuerza de la clase!"},kick:{text:"Ha expulsado por el maestro!"},noJoin:{text:"Ha expulsado de la clase, entrar despus de tres minutos!"}}}},func:{checkMeeting:{status_minus_1:{text:"Fall de conseguir las informaciones de clase!"},status_3001:{text:"Servidor expirado!"},status_3002:{text:"Empresa bloqueada!"},status_3003:{text:"La clase se ha sido eliminado o expirado!"},status_4007:{text:"Clase no existe!"},status_4008:{text:"Contrasea de clase incorrecta!"},status_4020:{text:"Sorry, your class has been cancelled."},status_4110:{text:"Se ha obligado la contrasea para entrar, introdzcalo!"},status_4109:{text:"Error en acreditacin!"},status_4103:{text:"El personal de la clase ha superado el lmite!"},status_4112:{text:"!Las empresas han sido excedido!"},status_4113:{text:""},status_defalut:{text:"Fall de conseguir las informaciones de clase!"}}}},call:{prompt:{chat:{literally:{yes:{text:"Ha conseguido el permiso de grafiti"},no:{text:"Se ha cancelado el premiso de grafiti"}}},publishStatus:{stream:{yes_status_3:{text:"Se ha puesto en la lista de hablante"},no_status_0:{text:"Ha salido de la lista de hablante"},yes_status_0_to_2:{text:"Se ha puesto en la lista de hablante, pero no ha conseguido el premiso de hablar"},yes_status_3_to_2:{text:"Se ha cancelado el premiso de audio, si quieres conseguirlo por favor haga clicLevantar la mano"},videooff:{text:"Se ha cancelado el premiso de vdeo"},audiooff:{text:"Se ha cancelado el premiso de fontica"},audioon:{text:"Se ha activado el premiso de audio"},videoon:{text:"Se ha activado el premiso de vdeo"},allon:{text:"Ha conseguido el premiso de audio y vdeo"},alloff:{text:"Se han cancelado el premiso de audio y vdeo"},speakoff:{text:"Est prohibido de hablar"},speakon:{text:"Se ha desbloqueado el silencio"}},download:{success:{text:"Descarga con xito!"},failed:{text:"Fall de descargar!"}},allMute:{yes:{text:"La clase est en el estado de silencio a todos"},no:{text:"La clase est permitido hablar"}}},joinRoom:{stream:{join:{text:"Entrar en la clase"},leave:{text:"Salir de la clase"}}},allSilence:{yes:{text:"Prohibir hablar a todos"},no:{text:"Cancelar el prohibido a todos"}},homeBtnRemind:{join:{text:"Volver al modo normal"},leave:{text:"Entrar en el modo de fondo"},userBackgroundMode:{text:"La aplicacin de este alumno est en funcionamiento de fondo, no puede subir"}},streamConnectFailed:{onceSuccessed:{text:"Red anormal, verifique su red y entrar de nuevo"},notSuccess:{text:"Se ha detectado que su red no compatible a udp, conecte a la administracin para cerrar el cortafuegos de udp"}},remoteStreamFailure:{udpNotOnceSuccess:{one:"Debido al cortafuegos, el usuario(",two:")no puede conectar con UDP de servidor, no puede subir"},udpMidwayDisconnected:{one:"Usuario(",two:")La comunicacin anormal con UDP de servidor, no puede subir"},publishvideoFailure_notOverrun:{one:"Usuario(",two:")La comunicacin anormal con el servidor, no puede subir"},publishvideoFailure_overrun:{one:"El personal de la lista de hablante excede al lmite mximo"},mobileHome:{one:"Alumno",two:"La aplicacin de alumno est en funcionamiento de fondo, no puede subir"}}},fun:{uploadCourseFile:{fileTypeError:{text:{one:"El tipo de documento incorrecto, no se compatible con los'.",two:"'documentos de ..."}},fileSizeError:{text:{one:"El tamao del documento excede al lmite, no se puede superar a"}},fileUpload:{success:{text:"Se ha subido con xito el documento, con el nombre de ..."},failureCode:{text:"Cdigo de error:"},failureNegativeOne:{text:"Fall de transformar el documento!"},failureNegativeTwo:{text:"No se puede subir el documento!"},failureNegativeThree:{text:"Ubicacin incorrecta para el documento subido!"},failureNegativeFour:{text:"No se compatible con este tipo de documento!"},failureNegativeSeven:{text:"La clase no existe o ha sido eliminado!"},failureNegativeEight:{text:"Esta clase no es de nuestra empresa!"},failureNegativeTen:{text:"Las pginas de material didctico exceden a lmite"},failureFhree:{text:"No se puede almacenar en el disco de nube"},failureFour:{text:"Error: falta los documentos de index.html"}}},deleteCourseFile:{fileDelete:{failure:{text:"No se puede eliminar el documento"}},isDel:"Est seguro de eliminar?"},page:{pageInteger:{text:"La pgina debe ser de nmero enterno"},pageMax:{text:"La pgina no puede mayor de la  mxima"},pageMin:{text:"La pgina no puede menor de 1"}},UnreadMessage:{text:"X mensajes no ledos"}}},ok:{showError:{text:"Confimar"},showPrompt:{text:"Confimar"},showConfirm:{cancel:"Cancelar",ok:"Confimar"}},title:{showError:{text:"Error"},showPrompt:{text:"Consejo"},showConfirm:{text:"Confirmacin"}},settingWin:{settingTitle:{text:"Ajuste"},default:{text:"Por defecto"},communications:{text:"Comunicacin"},settingOk:{text:"Aplicacin"},settingClose:{text:"Cancelar"},videoInput:{text:"Dispositivo de vdeo"},audioInput:{text:"Dispositivo de entrada de audio"},audioOutput:{text:"Dispositivo de salida de audio"}},messageWin:{title:{closeWindow:{text:"Confirmacin de mensaje"},classBeginEnd:{text:"Recordatorio de terminacin de clase"},allGift:{text:"Recordatorio de enviar"}},winMessageText:{closeWindow:{ok:{text:"Si apagar el sistema?"}},classBeginEnd:{text:"Est seguro de terminar la clase?"},removeStudent:{text:"Est seguro de expulsarlo?"},classBeginEndLocalRecord:{text:"Est realizando la grabacin local, y se terminar automticamente al terminar la clase, el docemento de grabacin ser guardado en"},classBeginStartNotSelectRecord:{text:"No activa la grabacin local automticamente, empieza la clase en directo"},aloneGift:{before:"Si premiar",after:"a los alumnos?"},allGift:{one:"Est seguro",two:"de premiar",three:"a todos?"}},messageOk:{text:"Confirmar"},messageClose:{text:"Cancelar"}}},remind:{time:{readyStart:{one:"la hora de clase quedan",two:"'minutos, por favor prepara"},timeoutStart:{one:"Est tarde",two:"minutos , por favor, ten prisa de empezar la clase"},endNotBegin:{one:"la aula est cerrado, todava no has registrado!"},readyEnd:{one:"hasta terminar la clase quedan",two:"minutos, por favor, organizar su tiempo adecuadamente~"},timeoutReadyEnd:{one:"Est tarde",two:"minutos, la aula se va terminado automticamente  despus d",three:"minutos"},timeoutEnd:{one:"la aula se va cerrar(",two:")"},endBegin:{one:"la aula se ha cerrado, la aula se ha cerrado!"},readyEndAiBanMa:{one:"minutos la clase se va terminar,",two:"segundos despus la clase se va terminar,",three:"por favor organizar su tiempo",four:"est tarde de terminar la clase!"}},button:{remindKnow:{text:"ya conozco"},raise:{yes:"acepto",no:"no acepto"}},raise:{content:{text:"levantar su mano"}}},publish:{beyondMaxVideo:{text:"More than a limit speech seats!"},reason401:{text:"This class was finished"},reason402:{text:"This class has been cancelled"}},networkStatus:{rtt:{title:{text:"est tarde la web"}},packetsLost:{title:{text:"porcentaje de perdida"}},network:{title:{text:"estado de la web"},value:{excellent:"Excelente",well:"est bien",general:"est normal",suck:"est mal"},notice:""}},toolCase:{toolBox:{text:"caja de herramientas"}},qrCode:{scan:{text:"escanear para cargar fotos"},attention:{text:"antes de cargar todo bien no cerrar esta ventana"}},timers:{timerSetInterval:{text:"contador"},timerBegin:{text:"iniciar"},timerStop:{text:"pausar"},again:{text:"renovar"},startNowBtn:{text:"empezar clculos"}},dial:{turntable:{text:"rotacin"}},answers:{headerTopLeft:{text:"aparato para respuestar"},headerMiddel:{text:"respuesta correcta por ajustar letras"},beginAnswer:{text:"empezar a respuestar"},tureAccuracy:{text:"porcentaje de correctos"},add:{text:"aadir respuestas"},reduce:{text:"borrar respuestas"},people:{text:"persona"},trueAnswer:{text:"respuesta correcta"},endAnswer:{text:"termintar a conestar"},restarting:{text:"renovar"},myAnswer:{text:"mi respuesta"},changeAnswer:{text:"corregir la respuesta"},selectAnswer:{text:"por lo menos seleccionar una"},submitAnswer:{text:"Enviar la repuesta"},numberOfAnswer:{text:"Personal de contestacin"},PublishTheAnswer:{text:"Publicar la repuesta"},published:{text:"Se ha publicado"},details:{text:"Detalle"},statistics:{text:"Estadstica"},student:{text:"Alumno"},TheSelectedTheAnswer:{text:"Repuesta elegida"},AnswerTime:{text:"Duracin"},end:{text:"Termina la contestacin primero"},selectedAnswer:{text:"Repuesta elegida"}},responder:{responder:{text:"Respondedor"},begin:{text:"Empezar a responder"},restart:{text:"Empezar de nuevo"},clickTitle:{text:"Presionar el botn para responder"},somebodyTeacher:{text:"Alguien ha respondido"},my:{text:"Felicidades! ha respondido usted"},other:{text:"Se ha respondido"},inAnswerTitle:{text:"Respondiendo..."},inAnswerBtn:{text:"Respondiendo"},inAnswerStudent:{text:"Preparar a responder"},noContest:{text:"No responder"},noStart:{text:""}},shares:{shareSceen:{text:"Escritorio compartido"},stopShare:{text:"Dejar de compartir"},shareing:{text0:"Est compartiendo el programa ....",text1:"Est compartiendo la zona ...",text2:"Est compartiendo el escritorio ..."},sharingMode:{text:"Seleccionar el modo de compartir"},programmShare:{text:"Compartir el programa"},shareArea:{text:"Compartir la zona"},startSharing:{text:"Empezar a compartir"},selectProgramm:{text:"Seleccionar el programa compartido"},programmShareArea:{text:"* Dentro del marco azul son las zonas compartidas"},screenWidthTip:{text:"La resolucin actual de imagen es  ms de 1080P,  se recomienda elejir la zona compartida"}},layoutInfo:{layout:"Swith de distribucin",CoursewareDown:"Siempre arriba de vdeo",VideoDown:"Siempre abajo de vdeo",Encompassment:"Alrededor de vdeo",Bilateral:"Modo de enseanza principal",MainPeople:"Modo de varias personas",OnlyVideo:"",oneToOne:"Distribucin normal",doubleDivision:"Distribucin de dos maestros",doubleVideo:"Distribucin de vdeo",synStudent:"Sincronizar alumno"},phoneBroadcast:{chat:{face:{naughty:"Travieso",happy:"Alegra",complacent:"Orgulloso",curlOnesLips:"Descontento",grieved:"Triste",shedTears:"Lgrima",kiss:"Beso",love:"Besito"}}},getUserMedia:{accessAccepted:{getUserMediaFailure_reGetAudio:"Se ha detectado que no se puede acceder al vdeo, verifique si la cmara est suelta o usada por otra aplicacin",getUserMediaFailure_reGetVideo:"Se ha detectado que no se puede acceder al audio, verifique si el micrfono est suelto o usado por otra aplicacin"},accessDenied:{streamFail:"No se puede acceder al audio ni vdeo, verifique el ajuste de cmara y el dispositivo de micrfono o salga del programa antivirus",notAudioAndVideo:"El sistema no puede detectar su dispositivo de cmara o micrfono, verifique si estn suelto o usado por otra aplicacin"},deviceError:"The system can't get the hardware information. Please restart the computer."},version:{clientDeviceVersionInfo:{key:"la aplicacin actual en uso:",client:"versin para cliente",pc:"versin para PC",mobile:"versin para mvil o ipad"},browserVersionInfo:{webpageApp:"navegador de Internet:",mobileApp:"Versin de sistema:"},appVersionInfo:{key:"Nmero de la versin:"},ipInfo:{key:"direccin de IP:"}},notice:{content:"contexto",href:"link",publish:"publicar",cancel:"cancelar"},loadSupernatantPrompt:{reconnecting:"est recuperando, la web no est fijo",loadRooming:"est conectando la aula",loadRoomingPlayback:"est captando la repeticin",refreshing:"espere un momento, el asistante est ayudandole a entrar"},remoteControl:{remoteTitle:"control remoto",refresh:"renovar obligatoriamente",deviceManagement:"administracin de los aparatos",optimalServer:"la mejor web",kick:"retirarse de la aula",getDocAddress:"servidor de ppt",line1:"servidor de icouchu",line2:"servidor de alta velocidad"},localRecord:{recordState:{notStart:"Grabacin local",recording:"Granbando",recordPaused:"Se ha suspendido"},title:{startRecord:"Empezar a grabar",stopRecord:"Dejar de grabar",pauseRecord:"Suspender a grabar",playRecord:"Recuperar a grabar"}},coursewareRemarks:{remarks:"Nota",close:"Cerrar"},videLabel:{exit:"Salir"},captureImg:{StartUploading:"Se ha empezado a subir la captura",UploadSuccess:"Se ha subido la captura",uploadFailed:"Debido a la red, no se puede subir",SaveSuccess:"La captura de pantalla ha guardado en "},moreUser:{text:"Bajo esta situacin, slo los alumnos subidos se han permitido usar pizarrn blanco"},reloadDoucumentHint:{one:"La red est inestable, est intentando a abirir el material didtico",two:"... veces"},qPanel:{answerPanel:"Contestador",tips:["Haga clic las letras para reestablecer la repuesta correcta","Seleccionar la repuesta"],addOption:"Aadir la repuesta",delOption:"Eliminar la repuesta",start:"Publicar la tarea",end:"Terminar la tarea",restart:"Empezar de nuevo",rightOptionIs:"Repuesta correcta es",hasPub:"Se ha publicado",answerNum:"Personal de contestacin",people:"Personal",commitAnswer:"Enviar la repuesta",modifyAnswer:"Modificar la repuesta",detail:"Detalle",statistics:"Estadstica",useTime:"Duracin",choseAnswer:"Repuesta elegida",myAnswer:"Mis repuestas",pubResult:"Publicar el resultado",loading:"Sin ningn datos por este momento"},whiteboardSetSize:{lineWidth:"Anchura de lnea",eraserWidth:"Tamao de goma de borrar",textWidth:"Tamao de escritura"},fontSize:{number:"Tamao"}}},XGlV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(a("EJiy")),o=s(a("HPAy")),n=s(a("eQYT")),l=(s(a("uuqz")),s(a("aJKe")));function s(e){return e&&e.__esModule?e:{default:e}}var r={updateSystemStyleJson:function(e){e&&"object"===(void 0===e?"undefined":(0,i.default)(e))&&(r.loadSystemStyleJson(e),l.default.CoreController.dispatchEvent({type:"updateSystemStyle"}))},loadSystemStyleJson:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e;t.HeaderVesselSmartStyleJson=t.HeaderVesselSmartStyleJson||{};var a=Object.customAssign({position:"relative",width:"100%",height:"0.42rem",top:"0rem",backgroundColor:o.default.playback?"#5467CC":"",zIndex:387},t.HeaderVesselSmartStyleJson);t.BottomToolsVesselJson=t.BottomToolsVesselJson||{};var i=Object.customAssign({position:"absolute",width:"100%",height:"0.56rem",bottom:"0",zIndex:259},t.BottomToolsVesselJson);t.BottomVesselSmartStyleJson=t.BottomVesselSmartStyleJson||{};var l=Object.customAssign({position:"absolute",height:"0rem",bottom:"auto",top:0,width:"100%"},t.BottomVesselSmartStyleJson);t.RightVesselSmartStyleJson=t.RightVesselSmartStyleJson||{};var s=Object.customAssign({position:"absolute",width:n.default.hasRoomtype.oneToOne?"3.51rem":"4.36rem",right:"0rem",left:"auto",zIndex:200,top:n.default.hasRoomtype.oneToOne&&"0rem"===l.height?"calc("+l.height+" + "+a.height+" + 0.2rem )":"calc("+l.height+" + "+a.height+")",height:(n.default.hasRoomtype.oneToOne&&l.height,"calc(100% - "+a.height+" -  "+l.height+")")},t.RightVesselSmartStyleJson);t.RightContentVesselSmartStyleJson=t.RightContentVesselSmartStyleJson||{};var r=Object.customAssign({position:"absolute",width:"calc(100% - "+s.width+" -  0.25rem )",height:n.default.hasRoomtype.oneToOne&&"0rem"===l.height?"calc(100% - "+a.height+" - "+i.height+" - 0.2rem)":"calc(100% - "+a.height+" -  "+l.height+" - "+i.height+")",top:n.default.hasRoomtype.oneToOne&&"0rem"===l.height?"calc(  + "+a.height+" + 0.2rem)":"calc("+l.height+" + "+a.height+")",left:"0.13rem"},t.RightContentVesselSmartStyleJson);t.LeftToolBarVesselSmartStyleJson=t.LeftToolBarVesselSmartStyleJson||{};var d=Object.customAssign({},t.LeftToolBarVesselSmartStyleJson);switch(n.default.template){case"template_beyond":Object.customAssign(s,{width:0,top:"calc( ( 100% - 8.25rem ) / 2)",height:"8.25rem"}),Object.customAssign(l,{bottom:"0.1rem",top:"auto",left:d.width,width:"calc(100% - "+s.width+" - "+d.width+" - 0.1rem )"}),Object.customAssign(r,{position:"absolute",width:n.default.hasRoomtype.oneToOne?"calc(100% - "+s.width+" )":"100%",height:n.default.hasRoomtype.oneToOne?"8.25rem":"calc(100% - "+a.height+" - "+l.height+" )",top:n.default.hasRoomtype.oneToOne?"calc("+a.height+" + ( 100% - 8.25rem ) / 2) ":r.top+l.height})}o.default.systemStyleJson=null,o.default.systemStyleJson={HeaderVesselSmartStyleJson:a,RightVesselSmartStyleJson:s,BottomVesselSmartStyleJson:l,RightContentVesselSmartStyleJson:r,BottomToolsVesselJson:i,LeftToolBarVesselSmartStyleJson:d}}};t.default=r},XZyt:function(e,t,a){},XbJA:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=g(a("gDS+")),o=g(a("EJiy")),n=g(a("Yz+Y")),l=g(a("iCc5")),s=g(a("V7oC")),r=g(a("FYw3")),d=g(a("mRg0")),u=g(a("yzql")),c=g(a("mrNk")),f=g(a("uuqz")),h=g(a("eQYT")),m=g(a("HPAy")),p=g(a("JL1q"));function g(e){return e&&e.__esModule?e:{default:e}}var v=new(function(e){function t(){(0,l.default)(this,t);var e=(0,r.default)(this,(t.__proto__||(0,n.default)(t)).call(this));return e.sendSignallingDataToParticipants=e.debounce(e.sendSignallingDataToParticipant,999),e.userPlatformUpOrDown=e.debounce(e.userPlatformUpOrDowns,300),e.userAudioOpenOrClose=e.debounce(e.userAudioOpenOrCloses,300),e.userVideoOpenOrClose=e.debounce(e.userVideoOpenOrCloses,300),e.changeUserCandraw=e.debounce(e.changeUserCandraws,300),e}return(0,d.default)(t,e),(0,s.default)(t,[{key:"debounce",value:function(e,t){var a,i;return function(){var o=this,n=arguments;return a?(clearTimeout(a),a=setTimeout(function(){i=e.apply(o,n)},t)):(i=e.apply(o,n),a=setTimeout(function(){},t)),i}}},{key:"sendSignallingFromLowConsume",value:function(e){if(p.default.handler.getAppPermissions("sendSignallingFromLowConsume")){if(null!=e){var t={lowconsume:!1,maxvideo:Number(e)};"LowConsume",this.sendSignallingDataToParticipant(!1,"LowConsume","LowConsume","__all",t,void 0,void 0)}else L.Logger.error("sendSignallingFromLowConsume maxvideo is not exist!")}}},{key:"sendSignallingFromClassBegin",value:function(e,t){if(p.default.handler.getAppPermissions("sendSignallingFromClassBegin")){e||(L.Utils.localStorage.setItem("notSelectedRecord",""),this.delmsgTo__AllAll());var a={};"ClassBegin",a.recordchat=!0,h.default.joinRoomInfo.isClassAudioRemix&&(a.recordtype=2),this.sendSignallingDataToParticipant(e,"ClassBegin","ClassBegin","__all",a,t,void 0)}}},{key:"sendSignallingTimerToStudent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!p.default.handler.getAppPermissions("sendSignallingTimerToStudent"))return!1;var a=this,i="timerMesg",o="timer",n="__all";a.sendSignallingDataToParticipant(t,o,i,n,e)}},{key:"sendSignallingFromExtendSignalling",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments[2];if(!p.default.handler.getAppPermissions("sendSignallingFromExtendSignalling"))return!1;var i=this,o="ExtendSignalling",n="ExtendSignalling";a=a||"__all",i.sendSignallingDataToParticipant(t,n,o,a,e)}},{key:"sendSignllingEveryoneBanChat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!p.default.handler.getAppPermissions("sendSignllingEveryoneBanChat"))return!1;var a=this,i="EveryoneBanChat",o="EveryoneBanChat",n="__all",l=!1;a.sendSignallingDataToParticipant(t,o,i,n,e,l)}},{key:"sendSignllingDoubleClickVideo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!p.default.handler.getAppPermissions("doubleClickVideo"))return!1;var a="doubleClickVideo",i="doubleClickVideo",o="__all",n=!1;this.sendSignallingDataToParticipant(t,i,a,o,e,n)}},{key:"sendSignllingMainPeopleExchangeVideo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!p.default.handler.getAppPermissions("mainPeopleExchangeVideo"))return!1;var a="MainPeopleExchangeVideo",i="MainPeopleExchangeVideo",o="__all",n=!1;this.sendSignallingDataToParticipant(t,i,a,o,e,n)}},{key:"sendSignllingDoubleDivision",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!p.default.handler.getAppPermissions("doubleDivision"))return!1;var a="DoubleDivision",i="DoubleDivision",o="__all",n=!1;this.sendSignallingDataToParticipant(t,i,a,o,e,n)}},{key:"sendSignllingSwitchLayout",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!p.default.handler.getAppPermissions("switchLayout"))return!1;var a=this,i="switchLayout",o="switchLayout",n="__all",l=!1;a.sendSignallingDataToParticipant(t,o,i,n,e,l)}},{key:"sendSignallingDialToStudent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!p.default.handler.getAppPermissions("sendSignallingDialToStudent"))return!1;var a=this,i="dialMesg",o="dial",n="__all";a.sendSignallingDataToParticipant(t,o,i,n,e)}},{key:"sendSignallingQiangDaQi",value:function(e,t){if(!p.default.handler.getAppPermissions("sendSignallingQiangDaQi"))return!1;this.sendSignallingDataToParticipant(e,"qiangDaQi","qiangDaQiMesg","__all",t)}},{key:"sendSignallingQiangDaZhe",value:function(e,t){if(!p.default.handler.getAppPermissions("sendSignallingQiangDaZhe"))return!1;var a="QiangDaZhe_"+c.default.getTkRoom().getMySelf().id;this.sendSignallingDataToParticipant(e,"QiangDaZhe",a,"__all",t,void 0,void 0,"qiangDaQiMesg")}},{key:"sendSignallingFromUpdateTime",value:function(e){if(p.default.handler.getAppPermissions("sendSignallingFromUpdateTime")){var t=e||"__all";this.sendSignallingDataToParticipant(!1,"UpdateTime","UpdateTime",t,{},!0)}}},{key:"sendSignallingFromRemoteControl",value:function(e,t){if(p.default.handler.getAppPermissions("sendSignallingFromRemoteControl")){var a=e||"__all";this.sendSignallingDataToParticipant(!1,"RemoteControl","RemoteControl",a,t,!0)}}},{key:"sendSignallingFromVideoWhiteboard",value:function(e,t){if(p.default.handler.getAppPermissions("isSendSignallingFromVideoWhiteboard")&&h.default.joinRoomInfo.videoWhiteboardDraw){e=e||!1,t=t||{},this.sendSignallingDataToParticipant(e,"VideoWhiteboard","VideoWhiteboard","__all",t,!1)}}},{key:"sendSignallingFromVideoDraghandle",value:function(e,t){if(p.default.handler.getAppPermissions("sendSignallingFromVideoDraghandle")){t=t||"__allExceptSender",this.sendSignallingDataToParticipants(!1,"videoDraghandle","videoDraghandle",t,e,!1)}}},{key:"sendSignallingFromVideoChangeSize",value:function(e,t){if(p.default.handler.getAppPermissions("isSendSignallingFromVideoChangeSize")){t=t||"__allExceptSender",this.sendSignallingDataToParticipant(!1,"VideoChangeSize","VideoChangeSize",t,e,!1)}}},{key:"sendSignallingFromVideoSplitScreen",value:function(e,t,a){if(p.default.handler.getAppPermissions("sendSignallingFromVideoSplitScreen")){t=t||!1,a=a||"__allExceptSender",this.sendSignallingDataToParticipant(t,"VideoSplitScreen","VideoSplitScreen",a,e,!1)}}},{key:"sendSignallingFromBlackBoardDrag",value:function(e,t){if(p.default.handler.getAppPermissions("sendSignallingFromBlackBoardDrag")){t=t||"__allExceptSender",this.sendSignallingDataToParticipant(!1,"BlackBoardDrag","BlackBoardDrag",t,e,!1,void 0,"BlackBoard_new")}}},{key:"sendSignallingFromDialDrag",value:function(e,t){if(p.default.handler.getAppPermissions("sendSignallingFromDialDrag")){t=t||"__allExceptSender",this.sendSignallingDataToParticipant(!1,"DialDrag","DialDrag",t,e,!1,void 0,"dialMesg")}}},{key:"sendSignallingFromTimerDrag",value:function(e,t){if(p.default.handler.getAppPermissions("isSendSignallingFromTimerDrag")){t=t||"__allExceptSender",this.sendSignallingDataToParticipant(!1,"TimerDrag","TimerDrag",t,e,!1,void 0,"timerMesg")}}},{key:"sendSignallingFromAnswerDrag",value:function(e,t){if(p.default.handler.getAppPermissions("isSendSignallingFromAnswerDrag")){var a="Question_"+h.default.joinRoomInfo.serial;t=t||"__allExceptSender",this.sendSignallingDataToParticipant(!1,"AnswerDrag","AnswerDrag",t,e,!1,void 0,a)}}},{key:"sendSignallingFromResponderDrag",value:function(e,t){if(p.default.handler.getAppPermissions("isSendSignallingFromResponderDrag")){t=t||"__allExceptSender",this.sendSignallingDataToParticipant(!1,"ResponderDrag","ResponderDrag",t,e,!1,void 0,"qiangDaQiMesg")}}},{key:"sendSignallingFromFullScreen",value:function(e,t){if(p.default.handler.getAppPermissions("isSendSignallingFromFullScreen")){t=t||!1,e=e||{},this.sendSignallingDataToParticipant(t,"FullScreen","FullScreen","__all",e,!1)}}},{key:"sendSignallingFromCaptureImg",value:function(e,t,a){if(p.default.handler.getAppPermissions("isSendSignallingFromCaptureImg")){a=a||!1,this.sendSignallingDataToParticipant(a,"CaptureImg",e,"__all",t,!1)}}},{key:"sendSignallingFromCaptureImgDrag",value:function(e,t,a){if(p.default.handler.getAppPermissions("isSendSignallingFromCaptureImgDrag")){this.sendSignallingDataToParticipant(!1,"CaptureImgDrag",t,"__allExceptSender",e,!1,void 0,a)}}},{key:"sendSignallingFromCaptureImgResize",value:function(e,t,a){if(p.default.handler.getAppPermissions("isSendCaptureImgResize")){this.sendSignallingDataToParticipant(!1,"CaptureImgResize",t,"__allExceptSender",e,!1,void 0,a)}}},{key:"sendSignallingToParentIframe",value:function(e){var t=e.id,a=e.name,i=e.toID,o=void 0===i?"__all":i,n=(e.data,e.source,e.save),l=void 0===n||n,s=e.delmsg,r=void 0!==s&&s;t=t||a,a="outIframe_"+a,this.sendSignallingDataToParticipant(r,a,t,o,e,!l)}},{key:"sendSignallingFromDocumentChange",value:function(e,t){if(p.default.handler.getAppPermissions("sendSignallingFromDocumentChange")){var a="DocumentChange";t=t||"__allExceptSender",this.sendSignallingDataToParticipant(!1,a,"DocumentChange",t,e,!0)}}},{key:"sendSignallingFromStreamFailure",value:function(e,t){if(p.default.handler.getAppPermissions("sendSignallingFromStreamFailure")){if(e||L.Logger.error("sendSignallingFromStreamFailure stream extensionId is not exist!"),e===c.default.getTkRoom().getMySelf().id){var a="StreamFailure",i={studentId:e};t&&"object"===(void 0===t?"undefined":(0,o.default)(t))&&Object.customAssign(i,t),this.sendSignallingDataToParticipant(!1,a,"StreamFailure","__allSuperUsers",i,!0)}}}},{key:"userPlatformUpOrDowns",value:function(e){if(p.default.handler.getAppPermissions("userPlatformUpOrDown")){e||L.Logger.error("not user , id:"+e.id);var t=void 0;if(!h.default.joinRoomInfo.createOnlyAudioRoom&&h.default.joinRoomInfo.isHasVideo||!m.default.isOnlyAudioRoom){t=e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_NONE?e.hasvideo?e.hasaudio?h.default.PUBLISHSTATE.PUBLISH_STATE_BOTH:h.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY:e.hasaudio?h.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY:h.default.PUBLISHSTATE.PUBLISH_STATE_NONE:h.default.PUBLISHSTATE.PUBLISH_STATE_NONE;var a={socure:"userPlatformUpOrDown_02",logType:"changeUserPublish",myUserId:c.default.getTkRoom().getMySelf().id,userId:e.id,publishstate:t};L.Logger.info("Bug Log:",(0,i.default)(a)),(h.default.hasRole.roleChairman||h.default.hasRole.roleTeachingAssistant)&&this.sendLogToServer(a),this.changeUserPublish(e.id,t),t===h.default.PUBLISHSTATE.PUBLISH_STATE_NONE&&this.setParticipantPropertyToAll(e.id,{pointerstate:!1})}else{t=e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_NONE?h.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY:h.default.PUBLISHSTATE.PUBLISH_STATE_NONE;var o={socure:"userPlatformUpOrDown_01",logType:"changeUserPublish",myUserId:c.default.getTkRoom().getMySelf().id,userId:e.id,publishstate:t};L.Logger.info("Bug Log:",(0,i.default)(o)),(h.default.hasRole.roleChairman||h.default.hasRole.roleTeachingAssistant)&&this.sendLogToServer(o),this.changeUserPublish(e.id,t)}e.publishstate=t;var n={};return e.role!==h.default.role.roleTeachingAssistant&&e.role!==h.default.role.roleChairman&&(t===h.default.PUBLISHSTATE.PUBLISH_STATE_NONE&&e.candraw&&(n.candraw=!1,e.candraw=!1),e.raisehand&&(n.raisehand=!1,e.raisehand=!1)),f.default.isEmpty(n)||this.setParticipantPropertyToAll(e.id,n),e}}},{key:"userAudioOpenOrCloses",value:function(e){if(p.default.handler.getAppPermissions("userAudioOpenOrClose")){e||L.Logger.error("not user , id:"+e.id);var t={},a=!1;if(e.raisehand&&(t.raisehand=!1,e.raisehand=!1),e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY?(t.publishstate=h.default.PUBLISHSTATE.PUBLISH_STATE_MUTEALL,a=!0):e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY?(t.publishstate=h.default.PUBLISHSTATE.PUBLISH_STATE_BOTH,a=!0):e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_BOTH?(t.publishstate=h.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY,a=!0):e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_MUTEALL?(t.publishstate=h.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY,a=!0):e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_NONE&&(t.publishstate=h.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY,a=!0),e.publishstate=t.publishstate?t.publishstate:e.publishstate,a){if(void 0!==t.publishstate){var o={socure:"userAudioOpenOrClose",logType:"setParticipantPropertyToAll",myUserId:c.default.getTkRoom().getMySelf().id,userId:e.id,data:t};L.Logger.info("Bug Log:",(0,i.default)(o)),(h.default.hasRole.roleChairman||h.default.hasRole.roleTeachingAssistant)&&this.sendLogToServer(o)}this.setParticipantPropertyToAll(e.id,t)}return e}}},{key:"userVideoOpenOrCloses",value:function(e){if(p.default.handler.getAppPermissions("userVideoOpenOrClose")){if(e){var t=!1,a={};if(e.raisehand&&(a.raisehand=!1,e.raisehand=!1),e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY?(a.publishstate=h.default.PUBLISHSTATE.PUBLISH_STATE_BOTH,t=!0):e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY?(a.publishstate=h.default.PUBLISHSTATE.PUBLISH_STATE_MUTEALL,t=!0):e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_BOTH?(a.publishstate=h.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY,t=!0):e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_MUTEALL?(a.publishstate=h.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY,t=!0):e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_NONE&&(a.publishstate=h.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY,t=!0),e.publishstate=a.publishstate?a.publishstate:e.publishstate,t){if(void 0!==a.publishstate){var o={socure:"userVideoOpenOrClose",logType:"setParticipantPropertyToAll",myUserId:c.default.getTkRoom().getMySelf().id,userId:e.id,data:a};L.Logger.info("Bug Log:",(0,i.default)(o)),(h.default.hasRole.roleChairman||h.default.hasRole.roleTeachingAssistant)&&this.sendLogToServer(o)}this.setParticipantPropertyToAll(e.id,a)}return e}L.Logger.error("not user , id:"+e.id)}}},{key:"changeUserCandraws",value:function(e){if(p.default.handler.getAppPermissions("changeUserCandraw")){if(e){var t={};if(e.raisehand&&(t.raisehand=!1,e.raisehand=!1),t.candraw=!e.candraw,e.candraw=t.candraw,e.publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_NONE&&(t.publishstate=h.default.PUBLISHSTATE.PUBLISH_STATE_MUTEALL,e.publishstate=h.default.PUBLISHSTATE.PUBLISH_STATE_MUTEALL),void 0!==t.publishstate){var a={socure:"changeUserCandraw",logType:"setParticipantPropertyToAll",myUserId:c.default.getTkRoom().getMySelf().id,userId:e.id,data:t};L.Logger.info("Bug Log:",(0,i.default)(a)),(h.default.hasRole.roleChairman||h.default.hasRole.roleTeachingAssistant)&&this.sendLogToServer(a)}this.setParticipantPropertyToAll(e.id,t)}else L.Logger.error("not user , id:"+e.id)}}},{key:"changeUserPublish",value:function(e,t){if(e){if(m.default.appConnected){if(e!==c.default.getTkRoom().getMySelf().id){var a={socure:"changeUserPublish",logType:"changeUserPublish",myUserId:c.default.getTkRoom().getMySelf().id,userId:e,publishstate:t};L.Logger.info("Bug Log:",(0,i.default)(a)),(h.default.hasRole.roleChairman||h.default.hasRole.roleTeachingAssistant)&&this.sendLogToServer(a)}c.default.getTkRoom().changeUserPublish(e,t)}}else L.Logger.error("user is not exist  , user id is "+e+"!")}},{key:"sendSignallingFromMoreUsers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="MoreUsers",i="MoreUsers",o="__all";this.sendSignallingDataToParticipant(t,a,i,o,e)}},{key:"sendSignallingFromNewBlackBoard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(p.default.handler.getAppPermissions("sendSignallingFromBlackBoard")){var a="BlackBoard_new",i="BlackBoard_new",o="__all";this.sendSignallingDataToParticipant(t,a,i,o,e)}}},{key:"sendSignallingFromUserHasNewBlackBoard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this,i="UserHasNewBlackBoard",o="_"+e.id,n=!1,l="BlackBoard_new",s="__all",r=e.id;a.sendSignallingDataToParticipant(t,i,o,s,e,n,void 0,l,r)}},{key:"sendQuestion",value:function(e,t){if(p.default.handler.getAppPermissions("sendQuestion")){var a="Question_"+h.default.joinRoomInfo.serial;if("start"===t.action&&(t.quesID="ques_"+(new Date).getTime()),m.default.appConnected){t&&"object"===(void 0===t?"undefined":(0,o.default)(t))&&!Array.isArray(t)&&(t=(0,i.default)(t));var n={msgName:"Question",msgId:a,toID:"__all",data:t,save:!0,write2DB:!0};e?c.default.getTkRoom().delMsg({name:"Question",id:a,toID:"__all",data:t}):c.default.getTkRoom().pubMsg(n)}}}},{key:"publishResult",value:function(e,t){if(p.default.handler.getAppPermissions("publishResult")){t=t||!1,this.sendSignallingDataToParticipant(t,"PublishResult","PublishResult","__all",e)}}},{key:"answerCommit",value:function(e){if(p.default.handler.getAppPermissions("answerCommit")){var t="Question_"+h.default.joinRoomInfo.serial,a=e,n=a.actions,l=a.modify;if(m.default.appConnected){e&&"object"===(void 0===e?"undefined":(0,o.default)(e))&&!Array.isArray(e)&&(e=(0,i.default)(e));var s={msgName:"AnswerCommit",msgId:t,toId:"__none",data:e,save:!1,associatedMsgID:"Question",type:"count",write2DB:!0,actions:n,modify:l};c.default.getTkRoom().pubMsg(s)}}}},{key:"getQuestionCount",value:function(e){if(p.default.handler.getAppPermissions("getQuestionCount")){var t="Question_"+h.default.joinRoomInfo.serial,a=c.default.getTkRoom().getMySelf().id;if(m.default.appConnected){e&&"object"===(void 0===e?"undefined":(0,o.default)(e))&&!Array.isArray(e)&&(e=(0,i.default)(e));var n={msgName:"GetQuestionCount",msgId:t,toId:a,data:e,save:!1,associatedMsgID:"Question",type:"getCount"};c.default.getTkRoom().pubMsg(n)}}}},{key:"sendChatShow",value:function(e){this.sendSignallingDataToParticipant(e,"ChatShow","ChatShow","__none",{},!1)}},{key:"sendIsGroup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(p.default.handler.getAppPermissions("sendIsGroup")){var a="isGroup",i="isGroup",o="__all";this.sendSignallingDataToParticipant(t,a,i,o,e)}}}]),t}(u.default));t.default=v},Y0V4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=g(a("Yz+Y")),o=g(a("iCc5")),n=g(a("V7oC")),l=g(a("FYw3")),s=g(a("mRg0")),r=g(a("q1tI")),d=g(a("AAUp")),u=g(a("aJKe")),c=g(a("XbJA")),f=g(a("eQYT")),h=g(a("HPAy")),m=a("ni/M"),p=g(a("ZZj3"));function g(e){return e&&e.__esModule?e:{default:e}}a("Vsxy");var v=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={showChatVessel:!1,pureVideoMod:!1,layoutName:"CoursewareDown",streams:[],toastShow:!1},a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){u.default.CoreController.addEventListener("SwitchLayout",this.handleSwitchLayout.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener("receive-msglist-SwitchLayout",this.handleMsgListSwitchLayout.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener("saveSwicthVideoStream",this.saveSwicthVideoStream.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener("LayoutChangeType",this.layoutChangeTypeHandle.bind(this),this.listernerBackupid),u.default.CoreController.dispatchEvent({type:"SwitchLayout",nowLayout:f.default.layoutParams[f.default.layout]})}},{key:"componentWillUnmount",value:function(){u.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"componentDidUpdate",value:function(){u.default.CoreController.dispatchEvent({type:"SwitchLayoutAfter",message:{}})}},{key:"shouldComponentUpdate",value:function(e,t){return t.layoutName!=this.state.layoutName||!f.default.joinRoomInfo.length}},{key:"handleMsgListSwitchLayout",value:function(e){e.message.nowLayout&&this._SwitchLayout(e.message.nowLayout)}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"switchLayout":this._SwitchLayout(t.data.nowLayout)}}},{key:"handleSwitchLayout",value:function(e){var t=e.nowLayout,a=e.isSynStudent;u.default.CoreController.dispatchEvent({type:"oneKeyRecovery",message:{}}),a?c.default.sendSignllingSwitchLayout({nowLayout:t}):u.default.CoreController.dispatchEvent({type:"togo_layout",message:{nowLayout:t}}),t!==this.state.layoutName&&this._SwitchLayout(t)}},{key:"saveSwicthVideoStream",value:function(e){this.setState({streams:e.streams})}},{key:"streamChange",value:function(e){this.setState({streams:e}),("CoursewareDown"===this.state.layoutName||"VideoDown"===this.state.layoutName||"Encompassment"===this.state.layoutName)&&e.length>24&&(this._SwitchLayout("MainPeople"),u.default.CoreController.dispatchEvent({type:"triggerSwitchLayout",layoutActive:!1,message:{}}),u.default.CoreController.dispatchEvent({type:"SwitchLayout",nowLayout:"MainPeople",isSynStudent:!0}),u.default.CoreController.dispatchEvent({type:"LayoutChangeType",message:"auto",to:"all"}))}},{key:"layoutChangeTypeHandle",value:function(e){var t=this;if("auto"===e.message){this.setState({toastShow:!0});var a=setTimeout(function(){t.setState({toastShow:!1}),clearTimeout(a)},3e3)}}},{key:"_SwitchLayout",value:function(e){switch(c.default.sendSignllingDoubleClickVideo({doubleId:1,isScreen:!1},!1),e){case"CoursewareDown":this.methods().method1();break;case"VideoDown":this.methods().method2();break;case"Encompassment":this.methods().method3();break;case"MorePeople":case"Bilateral":this.methods().method5();break;case"MainPeople":this.methods().method4();break;case"OnlyVideo":this.methods().method6()}h.default.isVideoInFullscreen=!1}},{key:"methods",value:function(){var e=this;return{method1:function(){e.setState({showChatVessel:!1,pureVideoMod:!1,layoutName:"CoursewareDown"})},method2:function(){e.setState({showChatVessel:!1,pureVideoMod:!1,layoutName:"VideoDown"})},method3:function(){e.setState({showChatVessel:!0,pureVideoMod:!1,layoutName:"Encompassment"})},method4:function(){e.setState({showChatVessel:!1,pureVideoMod:!0,layoutName:"MainPeople"})},method5:function(){e.setState({showChatVessel:!1,pureVideoMod:!1,layoutName:"Bilateral"})},method6:function(){e.setState({showChatVessel:!1,pureVideoMod:!0,layoutName:"OnlyVideo"})},method7:function(){e.setState({pureVideoMod:!1})}}}},{key:"render",value:function(){var e=this.state,t=e.showChatVessel,a=e.pureVideoMod,i=e.toastShow,o=e.layoutName,n=/OnlyVideo/.test(o)&&!h.default.doubleScreen,l=f.default.joinRoomInfo.roomVideoHeight/f.default.joinRoomInfo.roomVideoWidth*25;return r.default.createElement("div",{style:{height:"calc( 100% - 0.42rem)"}},i?r.default.createElement("div",{className:"toast-msg"},""):"",r.default.createElement("div",{className:"test-main-content-box "+o,style:{display:n?"none":"flex"}},n?void 0:r.default.createElement("div",{className:"test-video-box"},r.default.createElement(m.TeacherVideoList,null),t?r.default.createElement("div",{id:"emptyBox",style:{width:"25vw",height:"calc(100% - "+l+"vw)"}}):r.default.createElement(m.StudentVideoList,null)),r.default.createElement("div",{className:"test-whiteboard-box",style:{display:a?"none":"flex"}},r.default.createElement(d.default,{pureVideoMod:a}),t?r.default.createElement(m.StudentVideoList,null):null)),n?r.default.createElement(p.default,{layoutName:o}):null)}}]),t}(r.default.Component);t.default=v},YF9X:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={pageCount:function(e,t){return e>0?e<t?1:e%t?parseInt(e/t)+1:e/t:1},deviceTypeClassNameInfo:function(e){var t="";switch(e){case"WindowPC":t="icon-elc_win_explorer";break;case"MacPC":t="icon-elc_mac_explorer";break;case"AndroidPhone":t="icon-elc_Androidphone";break;case"AndroidPad":t="icon-elc_Androidpad";break;case"iPhone":t="icon-elc_iphone";break;case"iPad":t="icon-elc_ipad-copy";break;case"WindowClient":t="icon-elc_win";break;case"MacClient":t="icon-elc_imac";break;case"AndroidTV":t="icon-elc_tv";break;default:t="icon-elc_unknow"}return t},userListToObj:function(e){var t={};for(var a in e){var i=e[a].group&&e[a].group.length>0&&e[a].group[0];if(i&&"defaultGroup"!==i||(i=""),t[i]){var o=t[i].value.length;t[i].value[o]=e[a]}else t[i]={name:i,value:[e[a]]}}return t}}},YTbI:function(e,t,a){"use strict";var i=n(a("P2sY")),o=n(a("EJiy"));function n(e){return e&&e.__esModule?e:{default:e}}var l=function(e){return"object"===(void 0===e?"undefined":(0,o.default)(e))&&"[object object]"===Object.prototype.toString.call(e).toLowerCase()&&!e.length};if(!(Object&&Object.shallowAssign&&Object&&Object.customAssign)){var s=function(e){try{return i.default.apply(i.default,arguments)}catch(i){for(var t=e,a=1;a<arguments.length;a++){var n=arguments[a];if(n&&"object"===(void 0===n?"undefined":(0,o.default)(n)))for(var l in n)t[l]=n[l]}return e}};Object&&Object.shallowAssign||(Object.shallowAssign=s),Object&&Object.customAssign||(Object.customAssign=s)}Object&&Object.deepAssign||(Object.deepAssign=function(e){for(var t=e,a=1;a<arguments.length;a++){var i=arguments[a];if(i&&"object"===(void 0===i?"undefined":(0,o.default)(i)))for(var n in i)void 0===t[n]?"object"===(0,o.default)(i[n])&&(Array.isArray(i[n])||l(i[n]))?t[n]=Object.deepAssign(Array.isArray(i[n])?[]:{},i[n]):t[n]=i[n]:"object"===(0,o.default)(i[n])&&(Array.isArray(i[n])||l(i[n]))?t[n]=Object.deepAssign(Array.isArray(i[n])?[]:{},"object"===(0,o.default)(t[n])?t[n]:Array.isArray(i[n])?[]:{},i[n]):t[n]=i[n]}return e})},YW5m:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,n,l,s,r,d,u,c,f,h,m,p,g,v,y,S,b,C,k,w,T,E,I=q(a("JO7F")),D=q(a("GQeE")),x=q(a("oF3Q")),R=q(a("FyfS")),_=q(a("sk9p")),P=q(a("QbLZ")),A=q(a("Yz+Y")),L=q(a("iCc5")),B=q(a("V7oC")),M=q(a("FYw3")),N=q(a("mRg0")),O=a("av60"),F=q(O),V=q(a("eQYT")),U=q(a("HPAy")),H=q(a("mrNk")),j=q(a("JL1q")),W=q(a("XbJA")),z=q(a("yGYm")),Y=a("LAQx");a("2vnA");function q(e){return e&&e.__esModule?e:{default:e}}function J(e,t,a,i,o){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),o&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(o):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}var K=V.default.EVENTTYPE.RoomEvent,G=(i=(0,O.listener)("SwitchLayout"),o=(0,O.listener)("receive-msglist-SwitchLayout"),n=(0,O.listener)("receive-msglist-MainPeopleExchangeVideo"),l=(0,O.listener)("saveSwicthVideoStream"),s=(0,O.listener)("receive-msglist-ClassBegin"),r=(0,O.listener)("endClassbeginShowLocalStream"),d=(0,O.listener)("receive-msglist-doubleClickVideo"),u=(0,O.listener)("handleVideoDragListData"),c=(0,O.listener)("receive-msglist-FullScreen"),f=(0,O.listener)(K.roomUservideostateChanged),h=(0,O.listener)(K.roomUseraudiostateChanged),m=(0,O.listener)(K.roomConnected),p=(0,O.listener)(K.roomDisconnected),g=(0,O.listener)(K.roomDelmsg),v=(0,O.listener)(K.roomPubmsg),y=(0,O.listener)(K.roomUserscreenstateChanged),S=(0,O.listener)(K.roomUserpropertyChanged),b=(0,O.listener)(K.roomParticipantLeave),C=(0,O.listener)("receive-msglist-isGroup"),k=(0,O.listener)("oneKeyRecovery"),w=(0,O.listener)("changeOtherVideoStyle"),(0,O.listenService)((J((E=function(e){function t(e){(0,L.default)(this,t);var a=(0,M.default)(this,(t.__proto__||(0,A.default)(t)).call(this,e));return a.publishUserIdObj={},a.store=e,a}return(0,N.default)(t,e),(0,B.default)(t,[{key:"switchLayout",value:function(e){var t=e.nowLayout,a=e.isSynStudent;this.emit("oneKeyRecovery"),a?W.default.sendSignllingSwitchLayout({nowLayout:t}):this.emit("togo_layout",{nowLayout:t}),this._setNowLayout(t)}},{key:"msglistSwitchLayout",value:function(e){var t=e.message.nowLayout;t&&this._setNowLayout(t)}},{key:"msglistMainPeopleExchangeVideo",value:function(e){var t=e.message;this.store.setExchangeVideoId(t.doubleId)}},{key:"saveSwicthVideoStream",value:function(e){var t=e.streams;this.store.setStreams(t)}},{key:"handlerReceiveMsglistClassBegin",value:function(e){!U.default.playback&&this._removeLocalStream()}},{key:"handlerEndClassbeginShowLocalStream",value:function(){var e=this;V.default.joinRoomInfo.isClassOverNotLeave||!V.default.joinRoomInfo.isClassOverNotLeave&&V.default.joinRoomInfo.isBeforeClassReleaseVideo||V.default.hasRoomtype.oneToOne||setTimeout(function(){j.default.handler.getAppPermissions("endClassbeginShowLocalStream")&&0===e.store.streams.length&&e._addLocalStream()},250)}},{key:"handlerReceiveVideoDoubleClick",value:function(e){var t=e.message,a=t.doubleId,i=t.isScreen;this._switchVideoDoubleClick(a,i)}},{key:"handleVideoDragListData",value:function(e){this.store.updateVideoDragData(e.message.data)}},{key:"handlerReceiveMsglistFullScreen",value:function(e){var t=e.message.FullScreenArray;this._handlerSignallingFullScreen(t[0])}},{key:"videoStateChange",value:function(e){var t=e.message;if("video"===t.type){var a=this.publishUserIdObj[t.userId]=this.publishUserIdObj[t.userId]||{videoFlag:!1,audioFlag:!1};if(a.videoFlag=t.published,t.publishstate!==V.default.PUBLISHSTATE.PUBLISH_STATE_NONE){var i=H.default.getTkRoom().getUser(t.userId).group;this._updateUserIdObj(t,this.store.updateStreams({group:i?i[0]:["defaultGroup"],extensionId:t.userId,mediaFlagObj:Object.customAssign({},a),type:t.type}))}else this._updateUserIdObj(t,this.store.updateStreams(t.userId))}}},{key:"audioStateChange",value:function(e){var t=e.message;if("video"===t.type){var a=this.publishUserIdObj[t.userId]=this.publishUserIdObj[t.userId]||{videoFlag:!1,audioFlag:!1};if(a.audioFlag=t.published,t.publishstate!==V.default.PUBLISHSTATE.PUBLISH_STATE_NONE){var i=H.default.getTkRoom().getUser(t.userId).group;this._updateUserIdObj(t,this.store.updateStreams({group:i?i[0]:["defaultGroup"],extensionId:t.userId,mediaFlagObj:Object.customAssign({},a),type:t.type}))}else this._updateUserIdObj(t,this.store.updateStreams(t.userId))}}},{key:"roomConnected",value:function(e){var t=j.default.handler.getAppPermissions,a=V.default.joinRoomInfo,i=V.default.hasRole,o=V.default.hasRoomtype,n=U.default.classBegin;if(!(n||!n&&a.autoClassBegin&&i.roleChairman&&t("autoClassBegin"))){var l=t("localStream");o.oneToOne?o.oneToOne&&l&&i.roleTeachingAssistant&&this._addLocalStream():l&&(i.roleStudent||i.roleTeachingAssistant||i.roleChairman)&&this._addLocalStream()}}},{key:"roomDisconnected",value:function(){this.store.setStreams()}},{key:"roomDelMsg",value:function(e){var t=this,a=e.message,i=V.default.joinRoomInfo,o=i.isClassOverNotLeave,n=i.isBeforeClassReleaseVideo;switch(a.name){case"ClassBegin":if(o||!o&&n)return;this.store.setStreams(),!n&&!o&&this._addLocalStream();break;case"FullScreen":setTimeout(function(){t.store.setStateData({pictureInPictureClassnameFromStudentStream:void 0,isHasCloseBtn:!1,pictureInPictureClassnameFromTeacherStream:void 0,changeStyleData:(0,P.default)({},t.store.changeStyleData,{formFullScreenOut:!0,times:(new Date).getTime()})})},0)}}},{key:"roomPubmsg",value:function(e){var t=this,a=e.message,i=U.default.playback;U.default.roomlayout;({switchLayout:function(){return t._setNowLayout(a.data.nowLayout)},ClassBegin:function(){return!i&&t._removeLocalStream()},FullScreen:function(){return t._handlerSignallingFullScreen(a)},videoDraghandle:function(){a.data.otherVideoStyle&&t.store.updateVideoDragData(a.data)},VideoChangeSize:function(){U.default.playback&&"0"===U.default.roomlayout||t.store.updateVideoSizeData(a.data)},MainPeopleExchangeVideo:function(){return t.store.setExchangeVideoId(a.data.doubleId)},doubleClickVideo:function(){return t._switchVideoDoubleClick(a.data.doubleId,a.data.isScreen)},isGroup:function(){return U.default.classBegin&&z.default.canDivided&&t._setVideoStatus(a.data.isGroup)}}[a.name]||function(){})()}},{key:"roomUserscreenstateChanged",value:function(e){var t=e.message;t&&"screen"===t.type&&t.published&&this._switchVideoDoubleClick(null,!1)}},{key:"userPropsChanged",value:function(e){e.message.publishstate===V.default.PUBLISHSTATE.PUBLISH_STATE_NONE&&this.store.setStreams(this.store.streams.filter(function(t){return t.extensionId!=e.user.id})),this.store.updateChangedMsg(e)}},{key:"handlerRoomParticipantLeave",value:function(e){var t=e.user.id;this.store.updateVideoDragData({removeId:t}),this.store.updateVideoSizeData({removeId:t}),this.store.setStreams(this.store.streams.filter(function(e){return e.extensionId!==t}))}},{key:"handlerReceiveMsglistIsGroup",value:function(e){if(!U.default.classBegin&&z.default.canDivided)return!1;if(!U.default.HeightConcurrence)return t(H.default.getTkRoom().getUsers());function t(e){var t=!0,a=!1,i=void 0;try{for(var o,n=(0,R.default)((0,x.default)(e));!(t=(o=n.next()).done);t=!0){var l=o.value,s=(0,_.default)(l,2),r=(s[0],s[1]),d=r.hasvideo?r.hasaudio?V.default.PUBLISHSTATE.PUBLISH_STATE_BOTH:V.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY:r.hasaudio?V.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY:V.default.PUBLISHSTATE.PUBLISH_STATE_NONE;z.default.isGroup&&r.role===V.default.role.roleClassTeacher&&W.default.changeUserPublish(r.id,d)}}catch(e){a=!0,i=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw i}}}H.default.getTkRoom().getRoomUsers(function(e){return t(e)})}},{key:"oneKeyRecovery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.store.setOneKey(e)}},{key:"changeOtherVideoStyle",value:function(e){this.store.setChangeStyle(e)}},{key:"_updateUserIdObj",value:function(e,t){var a=e.userId,i=(t.find(function(e){return e.extensionId===a})||{}).mediaFlagObj;if(i&&!1===i.videoFlag&&!1===i.audioFlag){var o=H.default.getTkRoom().getUser(a);(!o||o&&o.publishstate!==V.default.PUBLISHSTATE.PUBLISH_STATE_MUTEALL)&&(this.store.updateStreams(a),delete this.publishUserIdObj[a])}}},{key:"_addLocalStream",value:function(){U.default.isLeaveRoom||j.default.handler.getAppPermissions("localStream")&&this.store.updateStreams({group:U.default.myGroup?U.default.myGroup:["defaultGroup"],extensionId:H.default.getTkRoom().getMySelf().id,mediaFlagObj:{videoFlag:!0,audioFlag:!0},type:"video"})}},{key:"_removeLocalStream",value:function(){this.store.updateStreams(H.default.getTkRoom().getMySelf().id)}},{key:"_handlerSignallingFullScreen",value:function(e){if(!V.default.hasRoomtype.oneToOne){var t=e.data,a=t.fullScreenType;t.needPictureInPictureSmall;["courseware_file","stream_media"].includes(a)&&(V.default.joinRoomInfo.videoInFullScreen||U.default.playback)&&this.store.setStateData({pictureInPictureClassnameFromStudentStream:void 0,pictureInPictureClassnameFromTeacherStream:"pictureInPicture small "+a,isHasCloseBtn:!0})}}},{key:"_setNowLayout",value:function(e){this.store.updatelayout(e),this.store.setVideoScreenId(null)}},{key:"_switchVideoDoubleClick",value:function(e,t){U.default.isVideoDrag=!!t,this.store.setVideoScreenId(t?e:void 0);var a=H.default.getTkRoom().getUser(e);a&&!a.isDrag&&this.emit("oneKeyRecovery")}},{key:"_setVideoStatus",value:function(e){if(!U.default.HeightConcurrence)return t(H.default.getTkRoom().getUsers());function t(t){var a=!0,i=!1,o=void 0;try{for(var n,l=(0,R.default)((0,x.default)(t));!(a=(n=l.next()).done);a=!0){var s=n.value,r=(0,_.default)(s,2),d=(r[0],r[1]),u=d.hasvideo?d.hasaudio?V.default.PUBLISHSTATE.PUBLISH_STATE_BOTH:V.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY:d.hasaudio?V.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY:V.default.PUBLISHSTATE.PUBLISH_STATE_NONE;e&&d.role===V.default.role.roleClassTeacher&&W.default.changeUserPublish(d.id,u),e&&d.publishstate!==V.default.PUBLISHSTATE.PUBLISH_STATE_NONE&&!(0,Y.isTeacher)(d.id)&&!(0,Y.isClassTeacher)(d.id)&&W.default.changeUserPublish(d.id,V.default.PUBLISHSTATE.PUBLISH_STATE_NONE),!e&&d.publishstate!==V.default.PUBLISHSTATE.PUBLISH_STATE_NONE&&!(0,Y.isTeacher)(d.id)&&!V.default.joinRoomInfo.autoStartAV&&W.default.changeUserPublish(d.id,V.default.PUBLISHSTATE.PUBLISH_STATE_NONE),d.pointerstate&&W.default.setParticipantPropertyToAll(d.id,{pointerstate:!1})}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}V.default.joinRoomInfo.autoStartAV&&!e&&setTimeout(function(){var e=H.default.getTkRoom().getUsers()&&(0,D.default)(H.default.getTkRoom().getUsers()).map(function(e){return H.default.getTkRoom().getUser(e)}).filter(function(e){return e.publishstate>0&&H.default.getTkRoom().getMySelf().id!==e.id&&!(0,Y.isTeacher)(e.id)}).length,t=H.default.getTkRoom().getMySelf();!(0,Y.isTeacher)(t.id)&&W.default.changeUserPublish(t.id,V.default.PUBLISHSTATE.PUBLISH_STATE_NONE);var a=t.hasvideo?t.hasaudio?V.default.PUBLISHSTATE.PUBLISH_STATE_BOTH:V.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY:t.hasaudio?V.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY:V.default.PUBLISHSTATE.PUBLISH_STATE_NONE;e<V.default.joinRoomInfo.maxvideo-((0,Y.isTeacher)(t.id)?0:1)&&!(0,Y.isTeachingAssistant)(t.id)&&!(0,Y.isClassTeacher)(t.id)&&W.default.changeUserPublish(t.id,a)},Math.abs(100*Math.random()+1e3*(2-parseInt(10*Math.random()/2))))}H.default.getTkRoom().getRoomUsers(function(e){return t(e)})}}]),t}(F.default)).prototype,"switchLayout",[i],(0,I.default)(E.prototype,"switchLayout"),E.prototype),J(E.prototype,"msglistSwitchLayout",[o],(0,I.default)(E.prototype,"msglistSwitchLayout"),E.prototype),J(E.prototype,"msglistMainPeopleExchangeVideo",[n],(0,I.default)(E.prototype,"msglistMainPeopleExchangeVideo"),E.prototype),J(E.prototype,"saveSwicthVideoStream",[l],(0,I.default)(E.prototype,"saveSwicthVideoStream"),E.prototype),J(E.prototype,"handlerReceiveMsglistClassBegin",[s],(0,I.default)(E.prototype,"handlerReceiveMsglistClassBegin"),E.prototype),J(E.prototype,"handlerEndClassbeginShowLocalStream",[r],(0,I.default)(E.prototype,"handlerEndClassbeginShowLocalStream"),E.prototype),J(E.prototype,"handlerReceiveVideoDoubleClick",[d],(0,I.default)(E.prototype,"handlerReceiveVideoDoubleClick"),E.prototype),J(E.prototype,"handleVideoDragListData",[u],(0,I.default)(E.prototype,"handleVideoDragListData"),E.prototype),J(E.prototype,"handlerReceiveMsglistFullScreen",[c],(0,I.default)(E.prototype,"handlerReceiveMsglistFullScreen"),E.prototype),J(E.prototype,"videoStateChange",[f],(0,I.default)(E.prototype,"videoStateChange"),E.prototype),J(E.prototype,"audioStateChange",[h],(0,I.default)(E.prototype,"audioStateChange"),E.prototype),J(E.prototype,"roomConnected",[m],(0,I.default)(E.prototype,"roomConnected"),E.prototype),J(E.prototype,"roomDisconnected",[p],(0,I.default)(E.prototype,"roomDisconnected"),E.prototype),J(E.prototype,"roomDelMsg",[g],(0,I.default)(E.prototype,"roomDelMsg"),E.prototype),J(E.prototype,"roomPubmsg",[v],(0,I.default)(E.prototype,"roomPubmsg"),E.prototype),J(E.prototype,"roomUserscreenstateChanged",[y],(0,I.default)(E.prototype,"roomUserscreenstateChanged"),E.prototype),J(E.prototype,"userPropsChanged",[S],(0,I.default)(E.prototype,"userPropsChanged"),E.prototype),J(E.prototype,"handlerRoomParticipantLeave",[b],(0,I.default)(E.prototype,"handlerRoomParticipantLeave"),E.prototype),J(E.prototype,"handlerReceiveMsglistIsGroup",[C],(0,I.default)(E.prototype,"handlerReceiveMsglistIsGroup"),E.prototype),J(E.prototype,"oneKeyRecovery",[k],(0,I.default)(E.prototype,"oneKeyRecovery"),E.prototype),J(E.prototype,"changeOtherVideoStyle",[w],(0,I.default)(E.prototype,"changeOtherVideoStyle"),E.prototype),T=E))||T);t.default=G},Z2bU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=m(a("GQeE")),n=m(a("Yz+Y")),l=m(a("iCc5")),s=m(a("V7oC")),r=m(a("FYw3")),d=m(a("mRg0")),u=m(a("q1tI")),c=(m(a("HPAy")),a("okNM")),f=m(a("++Kp")),h=m(a("i7NE"));function m(e){return e&&e.__esModule?e:{default:e}}var p=(0,c.inject)("userListDataStore")(i=(0,c.observer)(i=function(e){function t(){return(0,l.default)(this,t),(0,r.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props.userListDataStore;return u.default.createElement("ul",{className:"user-group-ul"},e.userListGroupData[""]?u.default.createElement("li",{key:"userListLidefault"},u.default.createElement(h.default,{groupId:""}),u.default.createElement(f.default,{groupId:""})):null,(0,o.default)(e.userListGroupData).map(function(e,t){return""===e?null:u.default.createElement("li",{key:"userListLi"+t},u.default.createElement(h.default,{groupId:e}),u.default.createElement(f.default,{groupId:e}))}))}}]),t}(u.default.Component))||i)||i;t.default=p},Z2dm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=m(a("QbLZ")),o=m(a("Yz+Y")),n=m(a("iCc5")),l=m(a("V7oC")),s=m(a("FYw3")),r=m(a("mRg0")),d=m(a("q1tI")),u=m(a("aJKe")),c=m(a("eQYT")),f=m(a("HPAy")),h=m(a("daUe"));function m(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={reconnecting:!1},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){u.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomDisconnected,this.handlerDisconnected.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomLeaveroom,this.handlerRoomLeaveroom.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){u.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerDisconnected",value:function(){this.state.reconnecting||this.setState({reconnecting:!0})}},{key:"handlerRoomLeaveroom",value:function(){this.setState({reconnecting:!1})}},{key:"handlerRoomConnected",value:function(){this.setState({reconnecting:!1})}},{key:"render",value:function(){var e=this.state.reconnecting;return d.default.createElement(h.default,(0,i.default)({show:e,content:f.default.language.languageData.loadSupernatantPrompt.reconnecting},this.props))}}]),t}(d.default.Component);t.default=p},Z66F:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(a("Yz+Y")),o=f(a("iCc5")),n=f(a("V7oC")),l=f(a("FYw3")),s=f(a("mRg0")),r=f(a("q1tI")),d=f(a("XbJA")),u=f(a("aJKe")),c=(f(a("JL1q")),f(a("1Nl6")));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){u.default.CoreController.addEventListener("receive-msglist-NewBlackBoard",this.handlerReceive_msglist_NewBlackBoard.bind(this),this.listernerBackupid)}},{key:"handlerReceive_msglist_NewBlackBoard",value:function(e){this.props.handlerRoomPubmsg(e),"BlackBoard_new"===e.message.name&&this.props.isDisabledHoldItem("blackboard",!0)}},{key:"handleBlackBoardClick",value:function(){d.default.sendSignallingFromNewBlackBoard({blackBoardState:"_prepareing",currentTapKey:"blackBoardCommon",currentTapPage:1},!1),this.props.isDisabledHoldItem("blackboard",!0),this.props.close()}},{key:"render",value:function(){return r.default.createElement("li",{className:"holdAllitem "+(this.props.isDisabled?" disabled":"")},r.default.createElement("div",{onClick:this.handleBlackBoardClick.bind(this)},r.default.createElement("em",{className:"icon "+this.props.bgName}),r.default.createElement("span",null,this.props.name)))}}]),t}(r.default.Component);h=(0,c.default)(h),t.default=h},ZRkH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=g(a("rfXi")),o=g(a("Yz+Y")),n=g(a("iCc5")),l=g(a("V7oC")),s=g(a("FYw3")),r=g(a("mRg0"));a("2Ltr");var d=g(a("q1tI")),u=g(a("HPAy")),c=g(a("eQYT")),f=g(a("aJKe")),h=g(a("mrNk")),m=g(a("Qxvg")),p=g(a("pIe1"));function g(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={modeStatuses:[!1,!0,!1],programmShare:!1,shareStream:void 0,type:3},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.isPublish=!1,a.programmArray=[],a.selectProgramm=void 0,a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){f.default.CoreController.addEventListener("programmShare",this.handlerProgrammShare.bind(this)),f.default.CoreController.addEventListener("DisconnectionRoom",this.clickCloseProgrammShare.bind(this)),f.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,this.handlerRoomPlaybackClearAll.bind(this),this.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.programmShare!==this.state.programmShare&&this.state.programmShare&&this.setDefaultPosition()}},{key:"componentWillUnmount",value:function(){f.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,i=document.getElementById(t),o=document.querySelector(a.bounds);if(i&&o&&a.changePosition&&"function"==typeof a.changePosition){a.changePosition(t,{percentLeft:.5,percentTop:.5,isDrag:!1},!1)}}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"ClassBegin":this.state.programmShare&&(this.wsToggle(!1),this.setState({programmShare:!1}))}}},{key:"handlerRoomPlaybackClearAll",value:function(){this.setState({modeStatuses:[!1,!1,!0],programmShare:!1,shareStream:void 0}),this.isPublish=!1,this.programmArray=[],this.selectProgramm=void 0}},{key:"handlerProgrammShare",value:function(){this.setState({modeStatuses:[!1,!1,!0],programmShare:!0})}},{key:"handlerShareRegionClick",value:function(){}},{key:"shareFailure",value:function(e){L.Logger.error("Share the failure"+e)}},{key:"handlerShareFullScreenClick",value:function(){var e=c.default.joinRoomInfo.sharedMouseLocus;this.closeProgrammShare(),m.default.stopAllMediaShare(),u.default.isClient&&(h.default.getNativeInterface().createShareScreenWindow(0,0,0,0,!1,!1,this.shareFailure,e),h.default.getNativeInterface().startShareScreen(this.shareFailure),f.default.CoreController.dispatchEvent({type:"hasToolBox",message:{isHasToolBox:!1}}))}},{key:"clickCloseProgrammShare",value:function(){this.wsToggle(!1),this.closeProgrammShare(),f.default.CoreController.dispatchEvent({type:"colse-holdAll-item",message:{type:"sharing"}})}},{key:"closeProgrammShare",value:function(){this.setState({programmShare:!1}),this.isPublish=!1,f.default.CoreController.dispatchEvent({type:"disabledSharing"})}},{key:"wsToggle",value:function(e){var t=c.default.joinRoomInfo.sharedMouseLocus;u.default&&u.default.isClient&&!u.default.isMacClient&&(e?h.default.getNativeInterface().createShareScreenWindow(400,300,window.innerWidth/2-500,window.innerHeight/2-150,!1,!1,this.shareFailure,t):h.default.getNativeInterface().destroyShareScreenWindow())}},{key:"handlerShareAreaClick",value:function(){if(u.default.isMacClient)return!1;this.closeProgrammShare(),m.default.stopAllMediaShare(),h.default.getNativeInterface().startShareScreen(this.shareFailure),f.default.CoreController.dispatchEvent({type:"hasToolBox",message:{isHasToolBox:!1}})}},{key:"changeMode",value:function(e){if(0===e)this.wsToggle(!1),this.handlerProgrammShareSelect();else if(1===e)this.wsToggle(!0);else{if(2!==e)return void this.wsToggle(!1);this.wsToggle(!1)}this.setState({modeStatuses:(0,i.default)(this.state.modeStatuses).map(function(t,a){return a===e})})}},{key:"next",value:function(){for(var e=void 0,t=0;t<this.state.modeStatuses.length;t++)!0===this.state.modeStatuses[t]&&(e=t);if(void 0!==e)switch(Number(e)){case 0:break;case 1:this.handlerShareAreaClick();break;case 2:this.handlerShareFullScreenClick()}}},{key:"onComboBoxChanged",value:function(e){this.selectProgramm=this.refs.programmShareSelect.value}},{key:"handlerProgrammShareSelect",value:function(){var e=this;u.default.isClient&&h.default.getNativeInterface()&&h.default.getNativeInterface().getShareableApplicationsList(function(t){if(Array.isArray(t)){e.programmArray=[];var a=e.refs.programmShareSelect;a.innerHTML="";for(var i=0;i<t.length;i++){for(var o=!1,n=0;n<e.programmArray.length;n++)if(e.programmArray[n].value===t[i].id){o=!0;break}if(!o){var l={};l.value=t[i].id,l.label=t[i].title,e.programmArray.push(l);var s=-1!==t[i].title.indexOf("-")?t[i].title.split("-")[0]:t[i].title,r=document.createElement("option");r.title=t[i].title,r.value=t[i].id,r.text=s,a.options.add(r)}}e.selectProgramm=e.programmArray[0].value}})}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.programmShareDrag,i=e.draggableData,o=Object.customAssign({id:t,percentPosition:{percentLeft:a.percentLeft||.5,percentTop:a.percentTop||.5}},i);return d.default.createElement(p.default,o,d.default.createElement("div",{id:t,className:"programm-share",style:{display:this.state.programmShare&&!u.default.isOnlyAudioRoom?"block":"none"}},d.default.createElement("div",{className:"programm-share-title"},d.default.createElement("h3",{className:"programm-share-name"},u.default.language.languageData.shares.sharingMode.text),d.default.createElement("span",{className:"icon-close programm-share-close",onClick:this.clickCloseProgrammShare.bind(this)})),d.default.createElement("div",{className:"programm-share-body"},d.default.createElement("div",{className:"programm-share-body-main"},u.default.isClient&&u.default.clientversion>=2018031e3&&!u.default.isMacClient?d.default.createElement("div",{className:"programm-share-item"},d.default.createElement("div",{className:this.state.modeStatuses[1]?" programm-share-item-box-active programm-share-item-box":"programm-share-item-box",onClick:this.changeMode.bind(this,1)},d.default.createElement("div",{className:"programm-share-item-img area-share-img"+(this.state.modeStatuses[1]?" area-share-img-active":"")}),d.default.createElement("span",{className:"tk-programm-share-btn"},u.default.language.languageData.shares.shareArea.text))):null,d.default.createElement("div",{className:"programm-share-item"},d.default.createElement("div",{className:this.state.modeStatuses[2]?" programm-share-item-box-active programm-share-item-box":"programm-share-item-box",onClick:this.changeMode.bind(this,2)},d.default.createElement("div",{className:"programm-share-item-img screen-share-img"+(this.state.modeStatuses[2]?" screen-share-img-active":"")}),d.default.createElement("span",{className:"tk-programm-share-btn"+("english"===u.default.languageName?" change-width":"")},u.default.language.languageData.shares.shareSceen.text)))),window.screen.width>1920&&this.state.modeStatuses[2]?d.default.createElement("p",{className:"screen_width_tip"},u.default.language.languageData.shares.screenWidthTip.text):void 0,d.default.createElement("div",{className:"programm-share-select-box",style:{display:this.state.modeStatuses[0]?"block":"none"}},d.default.createElement("p",{className:"programm-share-select-tit"},u.default.language.languageData.shares.selectProgramm.text),d.default.createElement("select",{ref:"programmShareSelect",className:"programm-share-select",onChange:this.onComboBoxChanged.bind(this)})),d.default.createElement("div",null,d.default.createElement("button",{className:"tk-programm-share-start-btn",onClick:this.next.bind(this)},u.default.language.languageData.shares.startSharing.text)))))}}]),t}(d.default.Component);t.default=v},ZZj3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=g(a("Yz+Y")),n=g(a("iCc5")),l=g(a("V7oC")),s=g(a("FYw3")),r=g(a("mRg0")),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a("q1tI")),u=a("okNM"),c=a("2vnA"),f=g(a("vK/f")),h=g(a("7Ln7")),m=g(a("bm2/")),p=g(a("yu6M"));function g(e){return e&&e.__esModule?e:{default:e}}a("UIQw");var v=(0,u.observer)(i=function(e){function t(e){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,r.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=(0,c.toJS)(f.default.streamsList),t=void 0;try{t=e.length>2?e[0].length*e[0][0].clientWidth+"vw":""}catch(e){t=""}return d.createElement(u.Provider,{videoStore:h.default,videoStatusStore:m.default},d.createElement("div",{className:"onlyVideo_1"},e.map(function(e,a){return d.createElement(p.default,{videoList:e,key:a,rowWidth:t})})))}}]),t}(d.Component))||i;t.default=v},ZqRg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(a("Yz+Y")),o=u(a("iCc5")),n=u(a("V7oC")),l=u(a("FYw3")),s=u(a("mRg0")),r=u(a("q1tI")),d=u(a("mrNk"));u(a("HPAy")),u(a("17x9"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.stream,a=e.myUserId,i=e.volume,o=e.isHideOtherVideo;t.mediaFlagObj&&t.mediaFlagObj.videoFlag&&d.default.getTkRoom().playVideo(t.extensionId,this.props.videoDumbElementIdPrefix+t.extensionId,{mirror:this.props.isMirror,loader:this.props.loader,mode:this.props.mode}),t.extensionId!==a&&t.mediaFlagObj&&t.mediaFlagObj.audioFlag&&!o&&(d.default.getTkRoom().playAudio(t.extensionId,this.props.videoDumbElementIdPrefix+t.extensionId),this._changeVolume(i))}},{key:"componentWillUnmount",value:function(){this.props.stream.extensionId!==this.props.myUserId&&d.default.getTkRoom().unplayAudio(this.props.stream.extensionId),d.default.getTkRoom().unplayVideo(this.props.stream.extensionId)}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,i=a.stream,o=a.mode,n=a.loader,l=a.isMirror,s=a.videoDumbElementIdPrefix,r=a.myUserId,u=(a.user,a.isHideOtherVideo);i&&i.mediaFlagObj&&i.mediaFlagObj.videoFlag&&o!==e.mode&&(d.default.getTkRoom().unplayVideo(i.extensionId),d.default.getTkRoom().playVideo(i.extensionId,s+i.extensionId,{mirror:l,loader:n,mode:o})),null!=i&&i.mediaFlagObj&&e.stream&&(i.extensionId!==r&&(u!==e.isHideOtherVideo&&(u?d.default.getTkRoom().unplayAudio(i.extensionId):i.mediaFlagObj.audioFlag&&(d.default.getTkRoom().playAudio(i.extensionId,s+i.extensionId),this._changeVolume(this.props.volume))),(!e.stream.mediaFlagObj&&i.mediaFlagObj||e.stream.mediaFlagObj&&e.stream.mediaFlagObj.audioFlag!==i.mediaFlagObj.audioFlag)&&(i.mediaFlagObj.audioFlag&&!u?(d.default.getTkRoom().playAudio(i.extensionId,s+i.extensionId),this._changeVolume(this.props.volume)):d.default.getTkRoom().unplayAudio(i.extensionId))),(e.stream.mediaFlagObj&&e.stream.mediaFlagObj.videoFlag!==i.mediaFlagObj.videoFlag||!e.stream.mediaFlagObj&&i.mediaFlagObj.videoFlag)&&(i.mediaFlagObj.videoFlag?d.default.getTkRoom().playVideo(i.extensionId,s+i.extensionId,{mirror:l,loader:n,mode:o}):d.default.getTkRoom().unplayVideo(i.extensionId))),null!=i&&i.mediaFlagObj&&i.mediaFlagObj.videoFlag&&null!=l&&e.isMirror!==l&&i&&d.default.getTkRoom().updateVideoPlayerOptions({mirror:l},i.extensionId),null!=i&&i.mediaFlagObj&&i.mediaFlagObj.audioFlag&&void 0!==this.props.volume&&null!==this.props.volume&&e.volume!==this.props.volume&&this._changeVolume(this.props.volume)}},{key:"_changeVolume",value:function(e){var t=this.props,a=t.stream,i=t.myUserId;this.props.changeVolumeJurisdiction&&void 0!==e&&"number"==typeof e&&a.extensionId&&i&&a.extensionId!==i&&d.default.getTkRoom().setRemoteAudioVolume(e,this.props.stream.extensionId)}},{key:"render",value:function(){return r.default.createElement(r.default.Fragment,null,this.props.stream.extensionId&&r.default.createElement("div",{className:"video-box "+this.props.videoDumbElementIdPrefix,id:this.props.videoDumbElementIdPrefix+this.props.stream.extensionId}))}}]),t}(r.default.Component);t.default=c},"Zt/p":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=C(a("gDS+")),o=C(a("GQeE")),n=C(a("Yz+Y")),l=C(a("iCc5")),s=C(a("V7oC")),r=C(a("FYw3")),d=C(a("mRg0")),u=(0,C(a("CSPP")).default)(["\n    display: ",";\n"],["\n    display: ",";\n"]),c=a("q1tI"),f=C(c),h=(C(a("i8i4")),C(a("mrNk"))),m=C(a("HPAy")),p=C(a("JL1q")),g=C(a("aJKe")),v=C(a("eQYT")),y=C(a("gjeX")),S=(a("QWsV"),a("b9ZJ"),a("69XA")),b=C(a("9pnM"));function C(e){return e&&e.__esModule?e:{default:e}}var k=C(a("vOnD")).default.ul(u,function(e){return e.show?"block":"none"}),w=function(e){function t(e,a){(0,l.default)(this,t);var i=(0,r.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e,a));return i.measureCache=new S.CellMeasurerCache({fixedWidth:!0}),i.state={isDown:!0,isDowntext:0,show:!0,imgSize:{}},i.needScrollGoDown=!1,i.updateListTimer=null,i.scrollTimer=null,i.scrollInfo={},i.awitForceUpdateGridRenderNumber=0,i.prevMsgNumber=0,i.listernerBackupid=(new Date).getTime()+"_"+Math.random(),i}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){g.default.Document.addEventListener(v.default.EVENTTYPE.DocumentEvent.onFullscreenchange,this.handlerOnFullscreenchange.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener(v.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),window.addEventListener("resize",this.handleScrollResize.bind(this))}},{key:"componentWillUnmount",value:function(){g.default.CoreController.removeBackupListerner(this.listernerBackupid),g.default.Document.removeBackupListerner(this.listernerBackupid),clearTimeout(this.scrollTime),clearTimeout(this.resetChatListTimer),clearTimeout(this.scrollGoDownTimer),clearTimeout(this.updateListTimer),window.removeEventListener("resize",this.handleScrollResize)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.chatMessageListLength;e.chatMessageListLength!==t&&(this.state.isDown||(this.prevMsgNumber||(this.prevMsgNumber=t),this.setState({isDowntext:e.chatMessageListLength-this.prevMsgNumber})))}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props,i=a.chatMessageListLength,o=a.delChatListNum,n=a.isShow;if(this.needScrollGoDown&&(this.needScrollGoDown=!1,this._scrollGoDown()),n!==e.isShow&&!0===n&&this.VList&&this.measureCache&&(this.measureCache.clearAll(),this.VList.forceUpdateGrid(),this.scrollGoDownTimer=setTimeout(function(){t._scrollGoDown(),clearTimeout(t.scrollGoDownTimer)},0)),this.awitForceUpdateGridRenderNumber++,this.chatListLength+e.delChatListNum!==i+o){if(this.state.isDown||(this.prevMsgNumber||(this.prevMsgNumber=this.chatListLength+e.delChatListNum),this.setState({isDowntext:i+o-this.prevMsgNumber>0?i+o-this.prevMsgNumber>99?"99+":i+o-this.prevMsgNumber:0})),i)this.props.accelerateDate(i-1).fromID===h.default.getTkRoom().getMySelf().id?(this.needScrollGoDown=!0,this._scrollGoDown()):this.scrollInfo.offsetHeight+this.scrollInfo.scrollTop+5>=this.scrollInfo.scrollHeight&&(this.needScrollGoDown=!0,this._scrollGoDown());clearTimeout(this.updateListTimer),this.awitForceUpdateGridRenderNumber>99?(this.awitForceUpdateGridRenderNumber=0,this.measureCache.clearAll(),this.VList.forceUpdateGrid()):this.updateListTimer=setTimeout(function(){t.awitForceUpdateGridRenderNumber=0,t.measureCache.clearAll(),t.VList.forceUpdateGrid()},300)}this.chatListLength=i}},{key:"shouldComponentUpdate",value:function(e){var t=document.getElementById("rightchatbox");return!(!e.isShow&&!t)}},{key:"handleScrollResize",value:function(){var e=this;m.default.playback?(this.needScrollGoDown=!0,this._scrollGoDown()):(0,o.default)(this.scrollInfo).length>0&&this.scrollInfo.offsetHeight+this.scrollInfo.scrollTop+5>=this.scrollInfo.scrollHeight&&(this.needScrollGoDown=!0,this._scrollGoDown()),clearTimeout(this.updateListTimer),this.updateListTimer=setTimeout(function(){e.VList&&e.measureCache&&(e.measureCache.clearAll(),e.VList.forceUpdateGrid())},17)}},{key:"handlerOnFullscreenchange",value:function(){m.default.playback&&(this.needScrollGoDown=!0,this._scrollGoDown())}},{key:"handlerRoomDelmsg",value:function(e){var t=this,a=this;switch(e.message.name){case"ClassBegin":!v.default.joinRoomInfo.isClassOverNotLeave&&p.default.handler.getAppPermissions("endClassbeginRevertToStartupLayout")&&(this.resetChatListTimer=setTimeout(function(){a._resetChatList(),clearTimeout(t.resetChatListTimer)},250))}}},{key:"_resetChatList",value:function(){this.prevMsgNumber=0,this.setState({isDown:!0,isDowntext:0})}},{key:"scroll",value:function(e){e&&(this.scrollInfo={offsetHeight:e.clientHeight,scrollTop:e.scrollTop,scrollHeight:e.scrollHeight},this.scrollInfo.scrollHeight-this.scrollInfo.offsetHeight<=this.scrollInfo.scrollTop+5?(this.prevMsgNumber=0,this.setState({isDown:!0,isDowntext:""})):this.setState({isDown:!1}))}},{key:"godown",value:function(){this.needScrollGoDown=!0,this._scrollGoDown()}},{key:"changebig",value:function(e,t){g.default.CoreController.dispatchEvent({type:"isBigPictureDisplay",imgurl:e,cospath:t})}},{key:"getsize",value:function(e,t){t.target.style.display="block",$(t.target).prev()[0].style.display="none";var a=m.default.windowInnerWidth/v.default.STANDARDSIZE,o=JSON.parse((0,i.default)(this.state.imgSize));o[e]={width:o[e].initWidth||Math.round(t.target.width)/a+"rem",height:o[e].initHeight||Math.round(t.target.height)/a+"rem"},o[e].initWidth||(o[e].initWidth=o[e].width,o[e].initHeight=o[e].height),this.setState({imgSize:o})}},{key:"imgerrror",value:function(e,t){this.state.imgSize[e]={width:"1.39rem",height:"1.39rem"},this.measureCache.clearAll(),this.VList.forceUpdateGrid(),this.setState({imgSize:this.state.imgSize}),$(t.target).prev().addClass("error"),t.target.style.display="none"}},{key:"_handleTranslateClick",value:function(e){var t=this,a=e.target,i=$(a).siblings(".user-sended").text(),o="20180130000119815",n=(new Date).getTime(),l=(0,y.default)(o+i+n+"MeLC5NI37txuT_wtTd0B"),s=void 0,r=navigator.language||navigator.userLanguage;r&&(r=r.toLocaleLowerCase()),L.Logger.info("The words you want to translate is ",i,"is Chinese ",/[\u4e00-\u9fa5]/.test(i)),L.Logger.info("Your browser text type is ",r);var d=void 0;if(v.default.joinRoomInfo.isJapaneseTranslate?d="jp":r.indexOf("en")>-1?d="en":r.indexOf("zh")>-1?d="zh":r.indexOf("nl")>-1?d="nl":r.indexOf("fr")>-1?d="fra":r.indexOf("de")>-1?d="de":r.indexOf("ja")>-1?d="jp":r.indexOf("it")>-1?d="it":r.indexOf("pt")>-1?d="pt":r.indexOf("es")>-1?d="spa":r.indexOf("sv")>-1?d="swe":r.indexOf("ko")>-1?d="kor":r.indexOf("ru")>-1?d="ru":r.indexOf("th")>-1?d="th":r.indexOf("vi")>-1&&(d="vie"),v.default.joinRoomInfo.isJapaneseTranslate){s=/^[\u3040-\u309F\u30A0-\u30FF]+$/.test(i)?"zh":"jp"}else s=/[\u4e00-\u9fa5]/.test(i)?"en"===d||"zh"===d?"en":d||"en":/[a-zA-Z]/.test(i)&&("en"===d||"zh"===d)?"zh":d||"en";var u={q:i,from:"auto",to:s,appid:o,salt:n,sign:l};$.ajax({url:"https://fanyi-api.baidu.com/api/trans/vip/translate",data:u,dataType:"jsonp",type:"get",success:function(e){e.trans_result&&(t.props.changeChatList&&"function"==typeof t.props.changeChatList&&t.props.changeChatList($(a).attr("data-index"),e.trans_result[0].dst),t.measureCache.clearAll(),t.VList.forceUpdateGrid())}})}},{key:"getLanguageType",value:function(e){}},{key:"initVList",value:function(e,t){this.measureCache=e,this.VList=t}},{key:"_loadBubble",value:function(e,t){var a=this,i=this.props.accelerateDate(e),o="",n="";if("onlyimg"==i.msgtype){var l=/([^\*]+)(.png|.gif|.jpg|.jpeg)$/.exec(i.msg);o=l[1]+"-1"+l[2],n=i.cospath}return this.state.imgSize[e]||(this.state.imgSize[e]={width:v.default.joinRoomInfo.roomtype===v.default.ROOMTYPE.oneToOne?"2rem":"3rem",height:v.default.joinRoomInfo.roomtype===v.default.ROOMTYPE.oneToOne?"1rem":"1.5rem"}),i.fromID&&void 0!==i.type?f.default.createElement("li",{key:e,className:i.styleName?i.styleName:"",style:t},f.default.createElement("div",{className:"user-msg-box"},f.default.createElement("div",{className:"user-title"},i.sendUserType?f.default.createElement("span",{className:"send-time"},i.time):void 0,i.sendUserType?void 0:f.default.createElement("span",{className:"send-time"},i.time),f.default.createElement("span",{className:"username"},f.default.createElement("span",{className:"keywords"}," ",i.sendUserType?i.sendUserType:""," "),i.sendUserType?void 0:f.default.createElement("span",{className:"limit-length"},i.who))),f.default.createElement("div",{className:"user-body"},"onlyimg"==i.msgtype?f.default.createElement("div",{ref:function(e){return a.div=e},style:{height:this.state.imgSize[e].height,width:this.state.imgSize[e].width}},f.default.createElement("div",{className:"Lodingimg"}),f.default.createElement("img",{className:"msg-only-img",onLoad:this.getsize.bind(this,e),onError:this.imgerrror.bind(this,e),src:window.WBGlobal.nowUseDocAddress+o,onDoubleClick:this.changebig.bind(this,o,n),alt:o})):f.default.createElement("div",{className:"user-sended ",onMouseDown:function(e){e.stopPropagation()},style:{fontSize:this.props.chatFontSize/100+"rem"}},i.msg,i.transResult?f.default.createElement("p",null,i.transResult):null),"onlyimg"!==i.msgtype?f.default.createElement("button",{className:"translate icon-fanyi_me "+(i.transResult?"disabled":""),disabled:!!i.transResult,"data-index":e,style:{display:m.default.playback?"none":"",opacity:i.transResult?.5:1},onClick:this._handleTranslateClick.bind(this)}):null))):f.default.createElement("li",{className:"notice "+(i.styleName?i.styleName:""),key:e,style:t},f.default.createElement("div",{className:"notice-box",onMouseDown:function(e){e.stopPropagation()}},f.default.createElement("span",{className:"send-time icon icon-icon_jinggao"}),f.default.createElement("span",{className:"send-time"},i.time),f.default.createElement("span",{className:"the-msg",dangerouslySetInnerHTML:{__html:i.who}})))}},{key:"_scrollGoDown",value:function(){var e=this,t=this.props.chatMessageListLength;this.VList&&t&&(this.VList.scrollToRow(t-1),clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(function(){e.VList.scrollToRow(t-1),e.forceUpdate()},10))}},{key:"render",value:function(){var e=this.state,t=e.isDown,a=e.isDowntext,i=this.props,o=i.chatMessageListLength,n=i.isShow;return f.default.createElement(k,{className:"chat-list ",show:this.props.show},!0!==t&&a?f.default.createElement("span",{className:"logspan",onClick:this.godown.bind(this)},f.default.createElement("i",null),this.state.isDowntext+m.default.language.languageData.alertWin.call.fun.UnreadMessage.text):null,f.default.createElement(b.default,{loadListItem:this._loadBubble.bind(this),rowCount:o,className:"chat-list-box custom-scroll-bar constraint-box ",id:"chatListBox",onScroll:this.scroll.bind(this),initVList:this.initVList.bind(this),isShow:n}))}}]),t}(c.Component);t.default=w},Zz1c:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(a("Yz+Y")),o=u(a("iCc5")),n=u(a("V7oC")),l=u(a("FYw3")),s=u(a("mRg0")),r=u(a("q1tI")),d=u(a("HPAy"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.buttonClick,a=e.isFullScreen;return r.default.createElement("button",{title:d.default.language.languageData.toolContainer.toolIcon[a?"fullOff":"full"].title,className:"Tk-header-icon icon-"+(a?"reset":"f11"),onClick:t})}}]),t}(r.default.Component);t.default=c},aJKe:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={};i.Document=TK.EventDispatcher({}),i.Window=TK.EventDispatcher({}),i.Element=TK.EventDispatcher({}),i.Room=TK.EventDispatcher({}),i.Stream=TK.EventDispatcher({}),i.Role=TK.EventDispatcher({}),t.default=i},av60:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listenService=t.removeListener=t.listener=t.default=void 0;var i=s(a("AyUB")),o=s(a("iCc5")),n=s(a("V7oC")),l=s(a("aJKe"));function s(e){return e&&e.__esModule?e:{default:e}}var r=function(){function e(t){(0,o.default)(this,e),this.listernerBackupid=(new Date).getTime()+"_"+Math.random(),t.distroy=d.bind(this.listernerBackupid)}return(0,n.default)(e,[{key:"on",value:function(e,t){var a=this;l.default.CoreController.addEventListener(e,function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];t.call.apply(t,[a].concat(i))},this.listernerBackupid)}},{key:"emit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.default.CoreController.dispatchEvent({type:e,message:t})}}]),e}();t.default=r;var d=function(e){l.default.CoreController.removeBackupListerner(e)};t.listener=function(e){if("string"!=typeof e)throw new Error("Arguments illegal!");return function(t,a,i){if("function"!=typeof t[a])throw new Error("The property of the listener annotation must be a function!");return t.listenerHandlers||(t.listenerHandlers=[]),t.initListener||(t.initListener=function(){var e=this;this.listenerHandlers.forEach(function(t){l.default.CoreController.addEventListener(t.eventName,function(){for(var a,i=arguments.length,o=Array(i),n=0;n<i;n++)o[n]=arguments[n];(a=t.handler).call.apply(a,[e].concat(o))},e.listernerBackupid)})}),t.listenerHandlers.push({eventName:e,handler:i.value}),i}},t.removeListener=d,t.listenService=function(e,t,a){return new Proxy(e,{apply:function(t,a,i){e.apply(a,i)},construct:function(t,a){var o=(0,i.default)(e.prototype);return this.apply(t,o,a),"function"==typeof o.initListener&&o.initListener(o),o}})}},bF9o:function(e,t,a){},bJkr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=h(a("Yz+Y")),o=h(a("iCc5")),n=h(a("V7oC")),l=h(a("FYw3")),s=h(a("mRg0")),r=h(a("q1tI")),d=h(a("aJKe")),u=(h(a("uuqz")),h(a("eQYT"))),c=(h(a("3mpg")),h(a("HPAy"))),f=h(a("mrNk"));function h(e){return e&&e.__esModule?e:{default:e}}a("0c+C");var m=function(e){function t(){(0,o.default)(this,t);var e=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return e.state={istrue:!1,imgurl:"",cospath:""},e}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){d.default.CoreController.addEventListener("isBigPictureDisplay",this.isBigPicture.bind(this)),d.default.CoreController.addEventListener(u.default.EVENTTYPE.RoomEvent.roomNativeNotification,this.downloadFinished.bind(this))}},{key:"isBigPicture",value:function(e){e.imgurl&&this.setState({istrue:!0,imgurl:e.imgurl,cospath:e.cospath})}},{key:"del",value:function(e){27==e.keyCode&&this.setState({istrue:!1,imgurl:""})}},{key:"downloadFinished",value:function(e){"onHttpResult"!==e.message.name||0!==e.message.args.httpcode&&0===e.message.args.httpcode||this.clickDel()}},{key:"clickDel",value:function(){this.setState({istrue:!1,imgurl:""})}},{key:"focus",value:function(){this.a.focus()}},{key:"handlerDownLoad",value:function(){var e=this,t=this.state.imgurl;if(-1!==t.lastIndexOf(".")){var a=t.lastIndexOf("."),i=t.substring(a+1);f.default.getNativeInterface().getSaveFileName({caption:"Save",filter:{all:"*.*"},suffix:i},function(t){if("Complete"===t.action){var a="";e.state.cospath&&(a=(a=e.state.cospath).replace(/https/,"http"));var i=e.state.cospath?a+e.state.imgurl:window.WBGlobal.nowUseDocAddress.replace(/https/,"http").replace(/:443/,":80")+e.state.imgurl;f.default.getNativeInterface().nativeDownloadFile(i,t.filename)}})}}},{key:"render",value:function(){var e=this;return r.default.createElement("div",{id:"openBigImg"},this.state.istrue?r.default.createElement("div",{ref:function(t){return e.a=t},onLoad:this.focus.bind(this),className:"isdisplay",tabIndex:"0",onKeyDown:this.del.bind(this)},r.default.createElement("img",{src:window.WBGlobal.nowUseDocAddress+this.state.imgurl,className:"changebigimg",onClick:this.clickDel.bind(this),alt:"bigimg"}),c.default.isClient?null:r.default.createElement("div",{className:"downloadPictrue"},r.default.createElement("a",{href:this.state.cospath?this.state.cospath+this.state.imgurl:window.WBGlobal.nowUseDocAddress+this.state.imgurl,target:"blank",className:"download_btn",title:c.default.language.languageData.videoContainer.download.downloadFile.title}))):null)}}]),t}(r.default.Component);t.default=m},"bm2/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o,n,l,s,r,d,u=A(a("SEkw")),c=A(a("JO7F")),f=A(a("QbLZ")),h=A(a("P2sY")),m=A(a("sk9p")),p=A(a("oF3Q")),g=A(a("gDS+")),v=A(a("GQeE")),y=A(a("Yz+Y")),S=A(a("iCc5")),b=A(a("V7oC")),C=A(a("FYw3")),k=A(a("mRg0")),w=a("2vnA"),T=A(a("eQYT")),E=A(a("HPAy")),I=A(a("7Ln7")),D=A(a("S+mp")),x=A(a("XbJA")),R=a("LAQx"),_=A(a("yGYm")),P=A(a("mrNk"));function A(e){return e&&e.__esModule?e:{default:e}}function L(e,t,a,i){a&&(0,u.default)(e,t,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(i):void 0})}function B(e,t,a,i,o){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),o&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(o):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}E.default.windowInnerWidth,T.default.STANDARDSIZE;var M=new(i=function(e){function t(){(0,S.default)(this,t);var e=(0,C.default)(this,(t.__proto__||(0,y.default)(t)).call(this));return L(e,"otherVideoStyle",o,e),L(e,"otherVideoSize",n,e),L(e,"videoFullStyle",l,e),L(e,"videoList",s,e),L(e,"updates",r,e),L(e,"teacherId",d,e),e.autoruns.videoStore=[(0,w.autorun)(function(){e.videoStyleMsg(I.default.videoDragData.otherVideoStyle)}),(0,w.autorun)(function(){e.videoSizeMsg(I.default.videoSizeData)}),(0,w.autorun)(function(){e.layoutConfigMsg((0,R.SwitchLayout)(I.default.layoutName))}),(0,w.autorun)(function(){e.videoListMsg(I.default.streams.map(function(e){return e}),I.default.layoutName,_.default.isGroup,_.default.groupId)}),(0,w.autorun)(function(){e.userPropsMsg(I.default.userChangedMsg,I.default.streams)}),(0,w.autorun)(function(){e.exchangeVideo(I.default.exchangeVideoId)}),(0,w.reaction)(function(){return I.default.oneKeyData},function(t){if(e.initVideoStyle(),e.initVideoSize(),t){var a={otherVideoStyle:e.otherVideoStyle};x.default.sendSignallingFromVideoDraghandle(a,"__all");var i={ScaleVideoData:{}};(0,v.default)(e.otherVideoSize).forEach(function(e){return i.ScaleVideoData[e]={scale:1}}),x.default.sendSignallingFromVideoChangeSize(i)}}),(0,w.reaction)(function(){return(0,g.default)(I.default.changeStyleData)},e.changeVideoStyle.bind(e)),(0,w.reaction)(function(){return I.default.streams.length},function(){if(e.videoStyleMsg(e.otherVideoStyle),T.default.hasRole.roleChairman||T.default.hasRole.roleTeachingAssistant){var t={otherVideoStyle:e.otherVideoStyle};x.default.sendSignallingFromVideoDraghandle(t,"__all")}}),(0,w.autorun)(function(){e.videoScreenIdMsg(I.default.videoScreenId)})],(0,w.when)(function(){return I.default.isDistroy},function(){return e.dispose()}),e}return(0,k.default)(t,e),(0,b.default)(t,[{key:"videoStyleMsg",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1],i=I.default.layoutName,o=JSON.parse((0,g.default)((0,w.toJS)(this.otherVideoStyle)));(0,p.default)(t).forEach(function(a,n){var l=(0,m.default)(a,2),s=l[0],r=l[1];(0,R.calcVideoSize)().then(function(t){return e.updateFullStyle(t),(0,R.setContentVesselOffset)(),e.updates=!e.updates,t}).then(function(a){var n=t[s].percentLeft,l=t[s].percentTop;if((r.left||r.top)&&(n=r.left,l=r.top,delete t[s].left,delete t[s].top),t[s].percentLeft=n<0?0:n>1?1:n,t[s].percentTop=l<0?0:l>1?1:l,("Encompassment"===i||"Bilateral"===i)&&r.isDrag!==(o[s]||{}).isDrag&&r.isDrag){var d={},u=(0,R.getVideoSize)("VideoDown",I.default.streams.length,!0),c=u.videoWidth,f=u.videoHeight,h=E.default.windowInnerWidth/T.default.STANDARDSIZE;d.videoWidth=c*window.GLOBAL.windowInnerWidth/100/h,d.videoHeight=f*window.GLOBAL.windowInnerWidth/100/h,e.updateVideoSize(d,s)}return a})}),this.otherVideoStyle=(0,h.default)({},this.otherVideoStyle,t),a&&delete this.otherVideoStyle[a]}},{key:"updateVideoStyle",value:function(e,t){t?e instanceof Object&&(this.otherVideoStyle[t]=e):this.otherVideoStyle=e}},{key:"initVideoStyle",value:function(e){var t={percentTop:0,percentLeft:0,isDrag:!1};if(e)this.otherVideoStyle[e]=t;else{var a={};(0,v.default)(this.otherVideoStyle).forEach(function(e){return a[e]=t}),this.otherVideoStyle=a}}},{key:"videoSizeMsg",value:function(e){var t=this,a=e.ScaleVideoData,i=void 0===a?{}:a,o=e.otherVideoSize,n=void 0===o?{}:o,l=e.removeId,s=I.default.layoutName;i&&(0,p.default)(i).forEach(function(e,a){var i=(0,m.default)(e,2),o=i[0],l=i[1],r=(0,R.isTeacher)(o),d=void 0;d=t.otherVideoStyle[o].isDrag&&r&&("Encompassment"===s||"Bilateral"===s)?(0,R.getInitVideoSize)("VideoDown",I.default.streams.length,r).initVideoWidth:(0,R.getInitVideoSize)(I.default.layoutName,I.default.streams.length,r).initVideoWidth,l.scale=l.scale||1,n[o]={videoWidth:l.scale*d,videoHeight:l.scale*d/E.default.videoScale}}),(0,p.default)(n).forEach(function(e,t){var a=(0,m.default)(e,2),i=a[0],o=a[1],l=o.videoWidth,s=o.videoHeight;n[i]=(0,R.limitVideoSize)(l,s,I.default.layoutName,I.default.streams.length,!1)}),this.otherVideoSize=(0,h.default)({},this.otherVideoSize,n),l&&delete this.otherVideoSize[l]}},{key:"updateVideoSize",value:function(e,t){t?e instanceof Object&&(this.otherVideoSize[t]=e):this.otherVideoSize=e}},{key:"initVideoSize",value:function(e){if(e)this.otherVideoStyle[e]=initData;else{var t={};I.default.layoutName;(0,v.default)(this.otherVideoStyle).forEach(function(e){var a=(0,R.getInitVideoSize)(I.default.layoutName,I.default.streams.length,(0,R.isTeacher)(e)),i=a.initVideoWidth,o=a.initVideoHeight;t[e]={videoWidth:i,videoHeight:o,initVideoWidth:i,initVideoHeight:o}}),this.otherVideoSize=t}}},{key:"layoutConfigMsg",value:function(e){var t=this;(0,R.calcVideoSize)().then(function(e){return t.updateFullStyle(e)}),E.default.isVideoDrag=!1}},{key:"userPropsMsg",value:function(e,t){var a=this,i=e.message,o=void 0===i?{}:i,n=e.user;e.fromID;(0,R.calcVideoSize)().then(function(e){return a.updateFullStyle(e)}),o.publishstate===T.default.PUBLISHSTATE.PUBLISH_STATE_NONE&&(this.otherVideoStyle[n.id]&&(this.otherVideoStyle[n.id].percentLeft=0,this.otherVideoStyle[n.id].percentTop=0,this.otherVideoStyle[n.id].isDrag=!1),this.videoSizeMsg((0,p.default)(this.otherVideoSize||{}).map(function(e){return(0,m.default)(e,1)[0]!==n.id})),x.default.sendSignallingFromVideoDraghandle({otherVideoStyle:this.otherVideoStyle},"__all"))}},{key:"updateFullStyle",value:function(e){this.videoFullStyle=e}},{key:"videoScreenIdMsg",value:function(){var e=this;(0,R.calcVideoSize)().then(function(t){return e.updateFullStyle(t)})}},{key:"videoListMsg",value:function(e,t,a,i){var o=this,n=JSON.parse((0,g.default)(e));if(T.default.joinRoomInfo.VideosSequence&&n.length>2){var l=n.shift();n.unshift(l)}this.videoList={teacher:[],student:[]},n.forEach(function(e){if(e){var a=e.extensionId,i=(0,R.isTeacher)(a),n=(0,R.getVideoSize)(t,I.default.streams.length,i,I.default.streams.length),l=n.videoWidth,s=n.videoHeight,r=(o.otherVideoSize||{})[a]||{videoHeight:s,videoWidth:l};if((o.otherVideoStyle||{})[a]||o.updateVideoStyle({percentTop:0,percentLeft:0,isDrag:!1},a),!o.otherVideoSize[a]||t&&!o.otherVideoSize[a]&&!o.otherVideoStyle[a].isDrag){var d=E.default.windowInnerWidth/T.default.STANDARDSIZE;r.videoWidth=l*window.GLOBAL.windowInnerWidth/100/d,r.videoHeight=s*window.GLOBAL.windowInnerWidth/100/d,o.updateVideoSize(r,a)}o.videoList[i?"teacher":"student"].push({fatherId:o.elementId,id:a,stream:e,videoDumbClassName:"hvideo",otherVideoStyle:(0,f.default)({},o.otherVideoStyle[a]),otherVideoSize:(0,f.default)({},o.otherVideoSize[a]),isShow:!0,isTeacher:i})}});var s=this.videoList.teacher;s.length?this.teacherId=s[0].id:this.teacherId=null,this.videoList.teacher.length>=1&&this.videoList.student.unshift((0,f.default)({},this.videoList.teacher[0],{isShow:!1})),void 0!==I.default.exchangeVideoId&&this.exchangeVideo(I.default.exchangeVideoId?I.default.exchangeVideoId:this.teacherId);var r=JSON.parse((0,g.default)(this.videoList.student));T.default.joinRoomInfo.VideosSequence&&r.length>2&&(r.sort((0,R.keySort)("id")),this.videoListSort(r))}},{key:"videoListSort",value:function(e){this.videoList.student=e}},{key:"changeVideoStyle",value:function(e){if((e=JSON.parse(e)).formFullScreenOut)this.videoStyleMsg(this.otherVideoStyle);else if(e.message){var t=e.message,a=t.data,i=t.initiative,o=a.id,n=a.item,l=a.style,s=void 0===l?{}:l;if(s.isDrag!==this.otherVideoStyle[o].isDrag&&s.isDrag){var r={},d=(0,R.getVideoSize)("VideoDown",I.default.streams.length,!0),u=d.videoWidth,c=d.videoHeight,f=E.default.windowInnerWidth/T.default.STANDARDSIZE;r.videoWidth=u*window.GLOBAL.windowInnerWidth/100/f,r.videoHeight=c*window.GLOBAL.windowInnerWidth/100/f,this.updateVideoSize(r,o)}if(this.updateVideoStyle(s,o),i&&T.default.hasRole.roleChairman||T.default.hasRole.roleTeachingAssistant){var h={otherVideoStyle:this.otherVideoStyle};x.default.sendSignallingFromVideoDraghandle(h,"__all")}if(this.otherVideoStyle[o].isDrag&&n&&!n.isDrag){var m=(0,R.getUser)(o);m.publishstate===T.default.PUBLISHSTATE.PUBLISH_STATE_MUTEALL?x.default.changeUserPublish(o,T.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY):m.publishstate===T.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY&&x.default.changeUserPublish(o,T.default.PUBLISHSTATE.PUBLISH_STATE_BOTH)}(0,R.setContentVesselOffset)()}}},{key:"_loadStreamInfo",value:function(e){var t=void 0;return e&&void 0!==e.extensionId&&P.default.getTkRoom()&&(t=(0,R.getUser)(e.extensionId)),{user:t}}},{key:"exchangeVideo",value:function(e){if("MainPeople"===I.default.layoutName&&void 0!==e){var t=!1;this.videoList.student.forEach(function(a){a.isShow=!0,a.id===e&&(t=(0,R.isTeacher)(a.id)?null:(0,f.default)({},a,{isShow:!0}),a.isShow=!1)}),this.videoList.teacher=this.videoList.teacher.filter(function(e){return(0,R.isTeacher)(e.id)}),t?(this.videoList.teacher.length&&(this.videoList.teacher[0].isShow=!1),this.videoList.teacher.push(t),(0,R.isTeacher)(this.videoList.student[0].id)&&(this.videoList.student[0].isShow=!0)):null==t?this.videoList.teacher.length&&(this.videoList.teacher[0].isShow=!0):this.videoList.teacher.length&&(this.videoList.teacher[0].isShow=!1)}}},{key:"upDateExchangeTeacherVideo",value:function(e,t){var a=(0,R.getVideoSize)(I.default.layoutName,I.default.streams.length,e),i=a.videoWidth,o=a.videoHeight,n={},l=E.default.windowInnerWidth/T.default.STANDARDSIZE;n.videoWidth=i*window.GLOBAL.windowInnerWidth/100/l,n.videoHeight=o*window.GLOBAL.windowInnerWidth/100/l,this.updateVideoSize(n,t)}},{key:"notDragstreamLength",get:function(){var e=this,t=0;return this.videoList.teacher.map(function(a){a.isShow&&e.otherVideoStyle[a.id]&&!e.otherVideoStyle[a.id].isDrag&&t++}),this.videoList.student.map(function(a){a.isShow&&e.otherVideoStyle[a.id]&&!e.otherVideoStyle[a.id].isDrag&&t++}),t}},{key:"notDragStudentLength",get:function(){var e=this,t=0;return this.videoList.student.map(function(a){a.isShow&&e.otherVideoStyle[a.id]&&!e.otherVideoStyle[a.id].isDrag&&t++}),t}},{key:"studentLayoutMax",get:function(){var e=this,t={one:6,two:12},a=I.default.layoutName;"CoursewareDown"!==a&&"VideoDown"!==a||(this.videoList.teacher.filter(function(t){return t.isShow&&e.otherVideoStyle[t.id]&&!e.otherVideoStyle[t.id].isDrag}).length||(t.one=7,t.two=14));return t}}]),t}(D.default),o=B(i.prototype,"otherVideoStyle",[w.observable],{enumerable:!0,initializer:function(){return{}}}),n=B(i.prototype,"otherVideoSize",[w.observable],{enumerable:!0,initializer:function(){return{}}}),l=B(i.prototype,"videoFullStyle",[w.observable],{enumerable:!0,initializer:function(){return{}}}),s=B(i.prototype,"videoList",[w.observable],{enumerable:!0,initializer:function(){return{teacher:[],student:[]}}}),r=B(i.prototype,"updates",[w.observable],{enumerable:!0,initializer:function(){return!1}}),d=B(i.prototype,"teacherId",[w.observable],{enumerable:!0,initializer:function(){return null}}),B(i.prototype,"videoStyleMsg",[w.action],(0,c.default)(i.prototype,"videoStyleMsg"),i.prototype),B(i.prototype,"updateVideoStyle",[w.action],(0,c.default)(i.prototype,"updateVideoStyle"),i.prototype),B(i.prototype,"initVideoStyle",[w.action],(0,c.default)(i.prototype,"initVideoStyle"),i.prototype),B(i.prototype,"videoSizeMsg",[w.action],(0,c.default)(i.prototype,"videoSizeMsg"),i.prototype),B(i.prototype,"updateVideoSize",[w.action],(0,c.default)(i.prototype,"updateVideoSize"),i.prototype),B(i.prototype,"initVideoSize",[w.action],(0,c.default)(i.prototype,"initVideoSize"),i.prototype),B(i.prototype,"layoutConfigMsg",[w.action],(0,c.default)(i.prototype,"layoutConfigMsg"),i.prototype),B(i.prototype,"userPropsMsg",[w.action],(0,c.default)(i.prototype,"userPropsMsg"),i.prototype),B(i.prototype,"updateFullStyle",[w.action],(0,c.default)(i.prototype,"updateFullStyle"),i.prototype),B(i.prototype,"videoScreenIdMsg",[w.action],(0,c.default)(i.prototype,"videoScreenIdMsg"),i.prototype),B(i.prototype,"videoListMsg",[w.action],(0,c.default)(i.prototype,"videoListMsg"),i.prototype),B(i.prototype,"videoListSort",[w.action],(0,c.default)(i.prototype,"videoListSort"),i.prototype),B(i.prototype,"changeVideoStyle",[w.action],(0,c.default)(i.prototype,"changeVideoStyle"),i.prototype),B(i.prototype,"_loadStreamInfo",[w.action],(0,c.default)(i.prototype,"_loadStreamInfo"),i.prototype),B(i.prototype,"exchangeVideo",[w.action],(0,c.default)(i.prototype,"exchangeVideo"),i.prototype),B(i.prototype,"notDragstreamLength",[w.computed],(0,c.default)(i.prototype,"notDragstreamLength"),i.prototype),B(i.prototype,"notDragStudentLength",[w.computed],(0,c.default)(i.prototype,"notDragStudentLength"),i.prototype),B(i.prototype,"studentLayoutMax",[w.computed],(0,c.default)(i.prototype,"studentLayoutMax"),i.prototype),i);t.default=M},bmQc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o,n,l,s,r,d,u,c,f,h,m,p,g=R(a("SEkw")),v=R(a("JO7F")),y=R(a("m1cH")),S=R(a("/f1G")),b=R(a("iCc5")),C=R(a("V7oC")),k=a("2vnA"),w=R(a("Cbuf")),T=R(a("yGYm")),E=R(a("eQYT")),I=R(a("mrNk")),D=R(a("YF9X")),x=R(a("HPAy"));function R(e){return e&&e.__esModule?e:{default:e}}function _(e,t,a,i){a&&(0,g.default)(e,t,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(i):void 0})}function P(e,t,a,i,o){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),o&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(o):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}var A=new(i=function(){function e(){(0,b.default)(this,e),_(this,"userListItemData",o,this),_(this,"userListGroupData",n,this),_(this,"userListSum",l,this),_(this,"isSearch",s,this),_(this,"pageSum",r,this),_(this,"pageSize",d,this),_(this,"groupPageSize",u,this),_(this,"nowPage",c,this),_(this,"isPageText",f,this),_(this,"searchNowPage",h,this),_(this,"searchName",m,this),_(this,"isUserListShow",p,this)}return(0,C.default)(e,[{key:"setUserListItemData",value:function(e){this.userListItemData=e}},{key:"setUserListGroupData",value:function(e){this.userListGroupData=e}},{key:"updateGroupDisplay",value:function(e,t){this.userListGroupData[e].show=t}},{key:"updateSearchInfo",value:function(e,t){this.isSearch=e,this.searchName=t}},{key:"updateIsUserListShow",value:function(e){this.isUserListShow=e}},{key:"updatePageInfo",value:function(e,t,a){this.isPageText=t,e&&(this.isSearch?this.searchNowPage=e:this.nowPage=e),"small"===a?this.handlerSmallRoomUsers():"big"===a&&this.getBigRoomUsers()}},{key:"updateListByClickIcon",value:function(e,t,a){if("default"===t)this.userListItemData[a]=e;else{var i=e.group&&"defaultGroup"===e.group[0]?"":e.group[0];i&&(this.userListGroupData[i].value[a]=e)}}},{key:"handlerSmallRoomUsers",value:function(){var e=this,t=this.getSmallAllUsers(),a=null,i=E.default.hasRole.roleChairman||E.default.hasRole.rolePatrol?t.filter(function(e){return 0!==e.role}):t;if(T.default.canDivided&&!E.default.hasRoomtype.oneToOne&&(E.default.hasRole.roleChairman||E.default.hasRole.roleTeachingAssistant||E.default.hasRole.rolePatrol))this.isSearch?(a=i.filter(function(t){return t.nickname.toLowerCase().indexOf(e.searchName.toLowerCase())>=0}),this.setUserListGroupData(D.default.userListToObj(a))):this.setUserListGroupData(D.default.userListToObj(i));else if(E.default.hasRole.roleClassTeacher&&(i=i.filter(function(e){return e.group&&e.group[0]===x.default.myGroup})),this.isSearch){var o=(a=i.filter(function(t){return t.nickname.toLowerCase().indexOf(e.searchName.toLowerCase())>=0})).slice(this.pageSize*(this.searchNowPage-1),this.pageSize*this.searchNowPage);A.setUserListItemData(o),this.pageSum=D.default.pageCount(a.length,this.pageSize),this.searchNowPage>this.pageSum&&(this.searchNowPage=this.pageSum,this.isPageText=this.pageSum)}else{var n=i.slice(this.pageSize*(this.nowPage-1),this.pageSize*this.nowPage);A.setUserListItemData(n),this.pageSum=D.default.pageCount(i.length,this.pageSize),this.nowPage>this.pageSum&&(this.nowPage=this.pageSum,this.isPageText=this.pageSum)}this.userListSum=i.length}},{key:"getSmallAllUsers",value:function(){var e=(0,S.default)(I.default.getTkRoom().getUsers()),t=e.filter(function(e){return 0===e.role}),a=e.filter(function(e){return 2===e.role}).sort(function(e,t){return e.ts-t.ts}),i=e.filter(function(e){return 1===e.role}).sort(function(e,t){return e.ts-t.ts}),o=e.filter(function(e){return 5===e.role}).sort(function(e,t){return e.ts-t.ts}),n=[];return E.default.hasRole.rolePatrol||n.push.apply(n,(0,y.default)(t)),n.push.apply(n,(0,y.default)(o)),n.push.apply(n,(0,y.default)(i)),n.push.apply(n,(0,y.default)(a)),n}},{key:"getBigRoomUsers",value:function(){var e=this,t=E.default.hasRole.roleChairman||E.default.hasRole.rolePatrol?[TK.ROOM_ROLE.ASSISTANT,TK.ROOM_ROLE.STUDENT,5]:[TK.ROOM_ROLE.ASSISTANT,TK.ROOM_ROLE.STUDENT,TK.ROOM_ROLE.TEACHER,5],a=0;E.default.hasRole.roleClassTeacher||(a=this.isSearch?this.pageSize*(this.searchNowPage-1):this.pageSize*(this.nowPage-1)),(T.default.canDivided&&!E.default.hasRoomtype.oneToOne&&(E.default.hasRole.roleChairman||E.default.hasRole.roleTeachingAssistant||E.default.hasRole.rolePatrol)||E.default.hasRole.roleClassTeacher)&&(this.pageSize=1e4),I.default.getTkRoom().getRoomUsers(function(t,a){if(T.default.canDivided&&!E.default.hasRoomtype.oneToOne&&(E.default.hasRole.roleChairman||E.default.hasRole.roleTeachingAssistant||E.default.hasRole.rolePatrol))e.setUserListGroupData(D.default.userListToObj(t,!0));else{var i=D.default.pageCount(a,e.pageSize),o=t;if(E.default.hasRole.roleClassTeacher){o=o.filter(function(e){return e.group&&e.group[0]===x.default.myGroup}),e.userListSum=o.length;var n=void 0;n=e.isSearch?e.groupPageSize*(e.searchNowPage-1):e.groupPageSize*(e.nowPage-1),o=o.slice(n,n+e.groupPageSize),i=D.default.pageCount(e.userListSum,e.groupPageSize)}e.isSearch?e.searchNowPage>i&&(e.searchNowPage=i,e.isPageText=i):e.nowPage>i&&(e.nowPage=i,e.isPageText=i),A.setUserListItemData(o),e.pageSum=i}E.default.hasRole.roleClassTeacher||(e.userListSum=a)},a,this.pageSize,t,function(e){L.Logger.error(e)},this.searchName,[{role:"asc"},{ts:"asc"}])}}]),e}(),o=P(i.prototype,"userListItemData",[k.observable],{enumerable:!0,initializer:function(){return new Array}}),n=P(i.prototype,"userListGroupData",[k.observable],{enumerable:!0,initializer:function(){return{}}}),l=P(i.prototype,"userListSum",[k.observable],{enumerable:!0,initializer:function(){return 0}}),s=P(i.prototype,"isSearch",[k.observable],{enumerable:!0,initializer:function(){return!1}}),r=P(i.prototype,"pageSum",[k.observable],{enumerable:!0,initializer:function(){return 1}}),d=P(i.prototype,"pageSize",[k.observable],{enumerable:!0,initializer:function(){return 15}}),u=P(i.prototype,"groupPageSize",[k.observable],{enumerable:!0,initializer:function(){return 15}}),c=P(i.prototype,"nowPage",[k.observable],{enumerable:!0,initializer:function(){return 1}}),f=P(i.prototype,"isPageText",[k.observable],{enumerable:!0,initializer:function(){return"1"}}),h=P(i.prototype,"searchNowPage",[k.observable],{enumerable:!0,initializer:function(){return 1}}),m=P(i.prototype,"searchName",[k.observable],{enumerable:!0,initializer:function(){return""}}),p=P(i.prototype,"isUserListShow",[k.observable],{enumerable:!0,initializer:function(){return!1}}),P(i.prototype,"setUserListItemData",[k.action],(0,v.default)(i.prototype,"setUserListItemData"),i.prototype),P(i.prototype,"setUserListGroupData",[k.action],(0,v.default)(i.prototype,"setUserListGroupData"),i.prototype),P(i.prototype,"updateGroupDisplay",[k.action],(0,v.default)(i.prototype,"updateGroupDisplay"),i.prototype),P(i.prototype,"updateSearchInfo",[k.action],(0,v.default)(i.prototype,"updateSearchInfo"),i.prototype),P(i.prototype,"updateIsUserListShow",[k.action],(0,v.default)(i.prototype,"updateIsUserListShow"),i.prototype),P(i.prototype,"updatePageInfo",[k.action],(0,v.default)(i.prototype,"updatePageInfo"),i.prototype),P(i.prototype,"updateListByClickIcon",[k.action],(0,v.default)(i.prototype,"updateListByClickIcon"),i.prototype),P(i.prototype,"handlerSmallRoomUsers",[k.action],(0,v.default)(i.prototype,"handlerSmallRoomUsers"),i.prototype),P(i.prototype,"getSmallAllUsers",[k.action],(0,v.default)(i.prototype,"getSmallAllUsers"),i.prototype),P(i.prototype,"getBigRoomUsers",[k.action],(0,v.default)(i.prototype,"getBigRoomUsers"),i.prototype),i);new w.default(A),t.default=A},cFpp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={login:{language:{joinRoomHint:{text:"Entering classroom, recording...",remind:"This class may be monitored and/or recorded for quality assurance purposes"},esw:{title:"Help"},timeOver:{title:"Reminder",context:"Class will end in 10 minutes. Please be prepared",confirm:"Ok got it",notice:"It's time for the end of the course"},preLoad:{text:"File downloading",pass:"Skip "},detection:{company:{text:"Talk Cloud",normal:"Talk Cloud",icoachu:"Coach U"},selectOption:{noCam:"No camera was detected.",noMicrophone:"No microphone was detected.",noEarphones:"No headphones or speaker  was detected."},welAll:{one:"Selamat datang di ruang kelas ",two:"Online",three:"Untuk pengalaman kelas yang memuaskan, silahkan menyelesaikan tes perangkat terlebih dahulu",four:"Mulai Tes"},deviceTestHeader:{device:{text:"Device Test"},areaSwitch:{text:"Region Select"},deviceSwitch:{text:"Settings"},optimalServer:{text:"Optimal Server"},areaSelection:{text:"Region Select"},videoinput:{text:"Tes Kamera"},audioouput:{text:"Tes Speaker"},audioinput:{text:"Tes Mic"},detectionResult:{text:"Laporan"},changeScreen:{text:"double screen"},MainMinorChange:{text:"change screen"},systemInfo:{text:"System info"}},networkExtend:{title:{select:"Select",area:"Region",delay:"Delay",text:"Please choose the nearest server"},testBtn:"Server delay test"},videoinputExtend:{cameraOptionAll:{cameraOption:{text:"Kamera"},noticeRed:{text:"Memilih Block akan mematikan fitur kamera"}},noticeCarmera:{one:"Tips: Jika Anda tidak dapat melihat video, Anda bisa memeriksa beberapa hal berikut:",two:"1.Pilih Allow saat browser menampilkan pesan",three:"2.Pastikan kamera telah terhubung dan aktif",four:"3.Jika kamera masih tidak bekerja, silahkan cabut dan pasang di slot lainnya",five:"4.Pastikan kamera yang dipilih sudah tepat. Jika Anda memilih Block saat browser menampilkan pesan, kamera tidak akan bekerja.",six:"5.Pastikan tidak ada program / aplikasi lain yang menggunakan kamera",seven:"6.Restart komputer",eight:"",nine:""}},audioouputExtend:{cameraOptionAll:{cameraOption:{text:"Speaker"},earphoneVolume:{text:"Volume"},clickmusic:{one:"Klik tombol Mainkan, apakah terdengar musik?"},playMusic:"Play Music"},noticeCarmera:{one:"Tips: Jika Anda tidak dapat mendengar musik, Anda bisa memeriksa beberapa hal berikut:",two:"1. Pilih Allow saat browser menampilkan pesan",three:"2. Pastikan speaker / earphone telah terhubung dan aktif",four:"3. Pastikan volum suara sudah diset maksimal.",five:"4. Pastikan speaker yang dipilih sudah tepat. Jika Anda memilih Block saat browser menampilkan pesan, fungsi speaker tidak akan bekerja.",six:"5. Jika speaker / earphone masih tidak bekerja, silahkan cabut dan pasang di slot lainnya.",seven:"6. Restart komputer.",eight:""}},audioinputExtend:{cameraOptionAll:{cameraOption:{text:"Mikrofon"},noticeRed:{text:"Harap memilih pilihan mikrofon yang tepat. Memilih Block akan mematikan fitur mikrofon."},speakSound:{text:"Hitung mulai 1 hingga 10. Pastikan Anda mendengar suara Anda dan melihat indikator hijau berfluktuasi."}},noticeCarmera:{one:"Tips: Jika Anda tidak melihat indikator berwarna hijau, Anda bisa memeriksa beberapa hal berikut:",two:"1. Pilih Allow saat browser menampilkan pesan",three:"2. Pastikan mikrofon telah terhubung",four:"3. Pastikan volume mikrofon sudah diset maksimal",five:"4. Pastikan mikrofon yang dipilih sudah tepat. Jika Anda memilih Block saat browser menampilkan pesan, fungsi mikrofon tidak akan bekerja.",six:"5. Jika tetap tidak ada suara dari mikrofon, silahkan cabut dan pasang di slot lainnya",seven:"6. Restart komputer",eight:"",nine:"",ten:""}},browserDetection:{browserVersion:"Versi browser",versionError:"Versi Google Chrome Anda bukan yang terbaru ",versionPass:"Versi Google Chrome Anda adalah yang terbaru",prompt:{one:"Tip: Klik link",two:"untuk mengunduh versi terbaru browser Google Chrome"}},systemInfo:{currentUser:"Current user:",operatingSystem:"Operating system:",processor:"Processor:",RAM:"RAM:",serverName:"Server name:",IPAddress:"IP Address:",LoginDevice:"Login device:",MediaServer:"Media server",CoursewareServer:"Courseware server",networkDelay:"Network delay:",packetLoss:"Packet loss:",browser:"Browser:",uploadSpeed:"Upload speed:",downloadSpeed:"Download speed:",roomNumber:"Room number:",versionNumber:"Version number:"},CoursewareServer:{TkServer:"Talk-cloud CDN Server",DocServer:"CDN Server"},resultExtend:{head:{text:"Detection complete"},item1:{text:"Jenis tes"},item2:{text:"Hasil tes",content:{abnormal:"Abnormal",normal:"Normal"}},item3:{text:"Detail pemeriksaan",content:{video:"Tidak terdeteksi perangkat kamera",listen:"Anda memilih tidak mendengar suara",speak:"Anda memilih Tidak melihat fluktuasi"}},item4:{content:{video:"Bisa melihat video",listen:"Bisa mendengar audio",speak:"Bisa melihat mic berfungsi"}}},button:{next:{text:"Next"},join:{text:"Join"},ok:{text:"OK"},startNetworkTest:{text:"Start network test"},canSee:{text:"Terlihat"},notSee:{text:"Tidak terlihat"},canListen:{text:"Terdengar"},notListen:{text:"Tidak terdengar"},canSpeak:{text:"Ada fluktuasi"},notSpeak:{text:"Tidak ada fluktuasi"},checkBack:{text:"Periksa kembal"},joinRoom:{text:"Masuk ruangan"}},mirrorMode:{text:"Mirror mode"}}}},header:{tool:{allMute:{title:{yes:"All Microphones On",no:"All Microphones Off"}},capture:{title:{all:"Screenshot",small:"Hide the classroom window when Screenshot"}},qrCode:{title:{yes:"Upload picture by QR code"}},allGift:{title:{yes:"Award Trophy",giftText:"Award Trophy to all"}},blackBoard:{title:{open:"Small Whiteboard",close:"Close",prev:"Previous",next:"Next",shrink:"Shrink"},content:{blackboardHeadTitle:"Small Whiteboard"},toolBtn:{dispenseed:"Send",recycle:"Take Back",againDispenseed:"Send Again",commonTeacher:"Teacher"},tip:{saveImage:"Save Image"},boardTool:{pen:"Pen",text:"Text Input",eraser:"Eraser",color:"Colors and Thickness",upload:"Upload"},upload:{localUpload:"LocalUpload",scanCodeUpload:"ScanCodeUpload"}},sharing:{title:"Sharing"},mouse:{title:"Mouse"},pencil:{title:"Pen",pen:{text:"Pencil"},Highlighter:{text:"Highlighter"},linellae:{text:"Line"},arrow:{text:"Arrow"},laser:{title:"Laser pen",text:"Laser pen"}},text:{title:"Text Input",Msyh:{text:"Microsoft YaHei"},Ming:{text:"SimSun"},Arial:{text:"Arial"}},shape:{title:"Shape",outlinedRectangle:{text:"Square"},filledRectangle:{text:"Solid Square"},outlinedCircle:{text:"Circle"},filledCircle:{text:"Solid Circle"}},eraser:{title:"Eraser"},undo:{title:"Undo"},redo:{title:"Recover"},clear:{title:" Clear Screen"},tool_zoom_big:{title:"Zoom In"},tool_zoom_small:{title:"Zoom Out"},VideoCapture:{title:"Video screenshot"}},page:{prev:{text:"Previous Page"},next:{text:"Next Page"},add:{text:"Add Page"},lcFullBtn:{title:"Full Screen of Drawing Area"},pptFullBtn:{title:"Full Screen  of PPT"},h5FileFullBtn:{title:"Full Screen  of Courseware"},skipPage:{text_one:"To ",text_two:" pages"},ok:{text:"Confirm"},coursewareRemarks:{title:"Courseware Remarks"}},system:{attend:{text:"Start Class"},oneToOneFinsh:{text:"Finish Class"},Raise:{hashand:"someone hands up",text:"Raise Hand",noText:"Cancel your hands",yesText:"Raise hands",raisingHand:"Raising hand"},finish:{text:"Finish Class"},gift:{text:"Award Trophy to All"},muteAll:{text:"Students' Microphone Off"},help:{title:"Help"},network:{title:"Select Server",extend:{ChinaTelecom:"China Telecom",ChinaUnicom:"China Unicom",ChinaMobile:"China Mobile",InternationalNetwork:"International Network",ChinaSouthernTelecom:"China Southern Telecom"}},setting:{title:"Settings"}},volume:{title:"Volume"}},toolContainer:{toolIcon:{whiteBoard:{title:"Whiteboard"},courseList:{title:"Courseware List"},classFolder:{title:"room files"},adminFolders:{title:"public files"},documentList:{title:"Files",titleTop:"Courseware List",titleSort:"Sort",button:{addCourse:{text:" + Add file"},fileName:{text:"Name"},fileType:{text:"Type"},uploadTime:{text:"Time"},search:{name:"Search",text:"Enter search content"},close:{text:"Close"}}},H5DocumentList:{title:"Courseware Files",titleTop:"Courseware List",button:{addCourse:{text:" + Add a H5 "}}},addCourse:{relationCourse:{title:"Resources",button:{addCourse:{text:"Resources"},pervPage:"Previous",nextPage:"Next",relation:"Sync to classroom",loadMore:"Loading more"}},uploadCourse:{resourceLibrary:"Files",localUpload:"Upload",uploadNotice:{one:"1. You can upload files in *.xls;*.xlsx;*.ppt;*.pptx;*.doc;*.docx;*.txt;*.pdf;*.jpg; *.gif;*.jpeg;*.png;*.bmp format;",two:"2. The uploaded file is not allowed to exceed 300M, and the number of file pages is not allowed to exceed 300;",three:'3. If the uploaded ppt has animation, audio and video, trigger, etc., please tick "dynamic ppt";',four:"4. WPS format courseware upload is not supported in the classroom. If yes, please transfer it to PDF and upload it;",five:'5. The dynamic ppt needs to be converted after upload. If it will play automatically after conversion, please tick "auto play after conversion"'},button:{setLoaclFile:"choose file",setLoaclAgain:"choose Again",upload:"Upload",uploadAgain:"Upload Again"},fileInfo:"File attribute",h5Name:"File name",dynamicPpt:"dynamic ppt",dynamicPptSuccess:"play after conversion"}},mediaDocumentList:{title:"Media",titleTop:"Media List",button:{addCourse:{text:" + Add a Media File"}}},moviesSharing:{title:"Media Sharing"},resourceLibrary:{title:"Files",dynamicpptSuccess:"the file has conversion",dynamicpptFail:"the file conversion fail"},message:{title:"message"},full:{title:"Full Screen"},fullOff:{title:"Exit full screen"},overallControl:{title:"Global Control"},screenSharing:{title:"Screen Sharing"},messageList:{title:"Message List"},addDocument:{title:"Add a Meida File"},userList:{title:"Students List",thead:{facility:"Device",nick:"Nickname",platform:"Onstage",camera:"Camera",microphone:"Microphone",draw:"Draw",raise:"Raise",mute:"Mute",remove:"Kick Out"},button:{Scrawl:{on:{title:"Draw"},off:{title:"No Drawing"}},answered:{on:{title:"Answered"},off:{title:"No Answered"}},video:{on:{title:"Video On"},off:{title:"Video Off"},disabled:{title:"Video disabled"}},update:{up:{title:"Speaking"},down:{title:"Not speaking"}},audio:{on:{title:"Microphone On"},off:{title:"Microphone Off"},disabled:{title:"Microphone disabled"}},mute:{on:{title:"Banned On"},off:{title:"Banned OFF"},patrol:{on:{title:""},off:{title:""}}},remove:{title:"Kick Out"}},input:{text:"Check the network"},userStatus:{assistant:{text:"Assistant"},student:{text:"Student"}},groupModeStatus:{groupMode:{text:""},normalMode:{text:""}}},disableVideo:{yes:"Video On",no:"Disable Video"},disableAudio:{yes:"Audio On",no:"Disable Audio"},setting:{title:"Settings"},help:{title:"Help"},guide:{title:"Newbie Guide"},seekHelp:{title:"Seek Help"},customerService:{title:"Customer Service"},FileConversion:{text:"File Conversion"}}},videoContainer:{videoIcon:{camera:{title:"Camera"},microphone:{title:"Microphone"}},sendMsg:{inputText:{placeholder:"Press button Enter to send message.",patrolPlaceholder:"You can't send a message on a cruise.",frequently:"Messages are sent too frequently.Please try later"},btn:{title:{banChat:"Chat Banned",allChat:"Allow Chat",sendImg:"Send Picture",sendEmotion:"Send Emotion"}},repeatSpeak:{text:"Not flood the screen here"},sendBtn:{text:"Send",title:"Send Message"},tap:{chat:"Message",question:"Quiz",users:"Users' list",doc:"WhiteBoard",refresh:"Refresh"},tips:{online:"Online",goback:"Back",pics:" Person(s) ",private:"Chat privately",teacher:"teacher",assistant:"assistant",student:"student",patrol:"patrol",me:"Me",join:"Join room",leave:"Leave room",beforeClass:"Class not start",afterClass:"Class is finished",whiteBoard:"Class not start,no content show",openAllBans:"Open all bans",closeAllBans:"Cancellation of all bans"},filter:{quizobj:"Just ask the teacher",seeQuiz:"Only mine visible",seeChat:"Only teacher's visible",seeAnswer:"Only mine visible"},fontSize:{fontSize14:"Normal",fontSize16:"Medium",fontSize18:"Large",fontSize22:"Largest"}},download:{downloadFile:{title:"Download"},downloadFailMessage:{title:"Download Failed"}}},otherVideoContainer:{videoIcon:{microphone:{title:"Microphone"},userPen:{title:"Operation"}},button:{scrawl:{yes:"Operation",no:"No Operation"},platform:{yes:"Start speaking",no:"Stop speaking"},audio:{yes:"Microphone On",no:"Microphone Off "},video:{yes:"Video On",no:"Video Off "},gift:{yes:"Award Trophy",no:"Deduct trophy"},close:{yes:"Close"},restoreDrag:{text:"Restore Position"},allMute:{yes:"All Microphone Off"},videoStatusChairman:{yes:"Video On",no:"Video Off",text:"Video Off"},audioStatusChairman:{yes:"Microphone On",no:"Microphone Off",text:"Microphone Off"},areaExchange:{text:"Area Exchange"},oneKeyReset:{text:"Restore All"},doubleDivision:{text:"Video Switch"},onlyAudio:{no:"Audio lessons",yes:"Video lessons",create:"Switch to audio interactive teaching mode",cancel:"Switch to video interactive teaching mode"},pointerReminder:{text:"poninter reminder"}},prompt:{text:"student pressed home button",userText:"user pressed home button"}},alertWin:{login:{register:{eventListener:{roomDelClassBegin:{text:"The class is over!"},participantEvicted:{roleConflict:{text:"User of the same identity has entered the room. You are blocked."},kick:{text:"You have been sent out of the classroom by the teacher!"},noJoin:{text:"You have been kicked out of the classroom,please try again after three minutes!"}}}},func:{checkMeeting:{status_minus_1:{text:"Class Information Retriveal Failed"},status_3001:{text:"Server has expired!"},status_3002:{text:"Account of the company has expired."},status_3003:{text:"The class not exist or has expired."},status_4007:{text:"The classroom not exist."},status_4008:{text:"Wrong Password."},status_4020:{text:"Sorry, your class has been cancelled."},status_4110:{text:"You need to be authenticated.Please enter password."},status_4109:{text:"Authentication Failed"},status_4103:{text:"The number of students has exceeded limit."},status_4112:{text:"Enterprise point has exceeded limit!"},status_4113:{text:"The balance of the package is insufficient. Please contact the administrator to recharge it."},status_defalut:{text:"Class Information Retriveal Failed"}}}},call:{prompt:{chat:{literally:{yes:{text:"You are allowed to scrawl now."},no:{text:"You are not allowed to scrawl now."}}},publishStatus:{stream:{yes_status_3:{text:"Your screen video is on now. "},no_status_0:{text:"Your screen video is off now."},yes_status_0_to_2:{text:"Your screen video is on now. But audio is off and you can press the raising-hand button if you have any questions."},yes_status_3_to_2:{text:"Audio is off and you can press the raising-hand button if you have any questions."},videooff:{text:"Your video is off."},audiooff:{text:"Microphone is off and you can press the raising-hand button if you have any questions."},audioon:{text:"Microphone is on and you can speak now"},videoon:{text:"Your video is on."},allon:{text:"Your video and microphone are all on."},alloff:{text:"Your video and microphone are all off."},speakoff:{text:"You have been banned for speaking."},speakon:{text:"You have been allowed to speaking."}},download:{success:{text:"Download successful!"},failed:{text:"Download failed!"}},allMute:{yes:{text:"All Microphone Off Now"},no:{text:"All Microphone On Now"}}},joinRoom:{stream:{join:{text:"Enter Classroom"},leave:{text:"Left Classroom"}}},allSilence:{yes:{text:"All prohibition to chat"},no:{text:"All permission to chat"}},homeBtnRemind:{join:{text:"Back to normal mode"},leave:{text:"Background mode"},userBackgroundMode:{text:"The student's application in the background, could not on stage."}},streamConnectFailed:{onceSuccessed:{text:"Network exception, check the network environment and re-enter"},notSuccess:{text:"We detected that your network do not support udp. Please contact your network administrator to turn off the firewall of udp."}},remoteStreamFailure:{udpNotOnceSuccess:{one:"Due to the firewall intervention,the user(",two:") is unable to carry out UDP connection with the server.  Opening video failed."},udpMidwayDisconnected:{one:"Anomalous UDP communication occurs between the user(",two:") and the server. Opening video failed."},publishvideoFailure_notOverrun:{one:"User",two:"Anomaly in server connection. Presence failed."},publishvideoFailure_overrun:{one:"Attendants number is over limit."},mobileHome:{one:"Student",two:"is running at back-end.  Presence failed."}}},fun:{uploadCourseFile:{fileTypeError:{text:{one:"The file type'.",two:"'is not supported"}},fileSizeError:{text:{one:"File size exceeds limit, file size cannot exceed "}},fileUpload:{success:{text:"The file has been uploaded successfully.the file name is '"},failureCode:{text:"Error code"},failureNegativeOne:{text:"File conversion failure"},failureNegativeTwo:{text:"Upload Failed"},failureNegativeThree:{text:"Upload file location error"},failureNegativeFour:{text:"This type of file is not supported"},failureNegativeSeven:{text:"Class does not exist or has been deleted"},failureNegativeEight:{text:"The class does not belong to the company"},failureNegativeTen:{text:"The number of pages in the courseware is beyond the limit"},failureFhree:{text:"Cloud storage failed"},failureFour:{text:"Error: file index.html missed"}}},deleteCourseFile:{fileDelete:{failure:{text:"Deletion Failed"}},isDel:"Are you sure you want to delete it?"},page:{pageInteger:{text:"The page number inputted must be integers."},pageMax:{text:"The page number inputted not exceed the maximum!"},pageMin:{text:"The page number entered can't be less than 1."}},UnreadMessage:{text:"Unread message"}}},ok:{showError:{text:"Confirm"},showPrompt:{text:"Confirm"},showConfirm:{cancel:"Cancel",ok:"Confirm"}},title:{showError:{text:"Error Message"},showPrompt:{text:"Prompt Message"},showConfirm:{text:"Confirmation Messages"}},settingWin:{settingTitle:{text:"Settings"},default:{text:"Default"},communications:{text:"Communications"},settingOk:{text:"Apply"},settingClose:{text:"Cancel"},videoInput:{text:"Video Equipment"},audioInput:{text:"Audio Input Equipment"},audioOutput:{text:"Audio Output Equipment"}},messageWin:{title:{closeWindow:{text:"Message Conformation Box"},classBeginEnd:{text:"Ending Class Reminder"},allGift:{text:"Sending Message Reminder"}},winMessageText:{closeWindow:{ok:{text:"Shutting down the system?"}},classBeginEnd:{text:"Are you sure you want to finish class?"},removeStudent:{text:"are you sure to kick this member off?"},classBeginEndLocalRecord:{text:"The recording will be stopped after class. The storage address of the recording file is as follows:"},classBeginStartNotSelectRecord:{text:"Do not start recording and start class"},aloneGift:{before:"Are you sure to award trophies to ",after:"?"},allGift:{one:"Are you sure to",two:"Award trophies to ",three:"all visible students?"}},messageOk:{text:"Confirm"},messageClose:{text:"Cancel"}}},remind:{time:{readyStart:{one:"The class will start after ",two:" minute. Get ready."},timeoutStart:{one:"You are ",two:" minute late already. Seize the time!"},endNotBegin:{one:"The class is over. You  have missed it."},readyEnd:{one:"There are ",two:"minutes to finish class. Be reminded."},timeoutReadyEnd:{one:"Your class is",two:"minutes overtime now. This  class will end automatically in",three:"minutes."},timeoutEnd:{one:"This  class is about to shut down. (",two:")"},endBegin:{one:"The class has been finished."},readyEndAiBanMa:{one:"minutes to the end of the class.",two:"seconds to the end of the class.",three:"Please arrange the time",four:"Exceed the end of the classroom !"}},button:{remindKnow:{text:"I got it."},raise:{yes:"Agree",no:"Disagree"}},raise:{content:{text:"A hand is raised!"}}},publish:{beyondMaxVideo:{text:"More than a limit speech seats!"},reason401:{text:"This class was finished"},reason402:{text:"This class has been cancelled"}},networkStatus:{rtt:{title:{text:"Network delay"}},packetsLost:{title:{text:"Packet loss"}},network:{title:{text:"Network state"},value:{excellent:"Excellent",well:"Good",general:"General",suck:"Bad"},notice:"Your network is not in good condition at present"}},toolCase:{toolBox:{text:"ToolBox"}},qrCode:{scan:{text:"Scan to upload"},attention:{text:"Please do not close"}},timers:{timerSetInterval:{text:"Timer"},timerBegin:{text:"Start"},timerStop:{text:"Pause"},again:{text:"Restart"},startNowBtn:{text:"Start the time"}},dial:{turntable:{text:"Spinner"}},answers:{headerTopLeft:{text:"Quiz"},headerMiddel:{text:"Set the right choice"},beginAnswer:{text:"Start Answer"},tureAccuracy:{text:"Accuracy"},add:{text:"Add Answer"},reduce:{text:"Reduce Answer"},people:{text:"People"},trueAnswer:{text:"The right answer"},endAnswer:{text:"End of the answer"},restarting:{text:"Restart"},myAnswer:{text:"My Answer"},changeAnswer:{text:"Modify the Answer"},selectAnswer:{text:"Please select at least one answer"},submitAnswer:{text:"Submit the answer"},numberOfAnswer:{text:"Number of answer"},PublishTheAnswer:{text:"Publish the answer"},published:{text:"Published"},details:{text:"Details"},statistics:{text:"Statistics"},student:{text:"Student"},TheSelectedTheAnswer:{text:"The selections"},AnswerTime:{text:"Answer Time"},end:{text:"Please finish your questions first"},selectedAnswer:{text:"Selected answer"}},responder:{responder:{text:"Responder"},begin:{text:"Start"},restart:{text:"Restart"},clickTitle:{text:"Click button to start"},somebodyTeacher:{text:"Someone Snatched"},my:{text:"Congratulations,It's your turn"},other:{text:"Be Snatched"},inAnswerTitle:{text:"Is answering"},inAnswerBtn:{text:"Is answering"},inAnswerStudent:{text:"Ready to snatch"},noContest:{text:"Nobody to snatch"},noStart:{text:"Not started"}},shares:{shareSceen:{text:"Desktop Sharing"},stopShare:{text:"Stop Share"},shareing:{text0:"Program sharing is being carried out......",text1:"Regional Sharing is being carried out......",text2:"Desktop sharing is being carried out......"},sharingMode:{text:"Please select the sharing mode"},programmShare:{text:"Programm sharing"},shareArea:{text:"Area sharing"},startSharing:{text:"Start sharing"},selectProgramm:{text:"Please select the program you want to share"},programmShareArea:{text:"* The blue box is a shared area"},screenWidthTip:{text:"Your current resolution is greater than 1080P. You should choose region sharing."},safariNotify:{text:"You are currently using Safri, which does not support DeskTopShare. To use this feature, please use Chrome browser or Download PC client!"}},layoutInfo:{layout:"layout",CoursewareDown:"Video set-top",VideoDown:"Video down",Encompassment:"Video around",Bilateral:"Teacher priority",MainPeople:"Main Video",OnlyVideo:"Free Video",oneToOne:"Default Layout",doubleDivision:"Double Layout",doubleVideo:"Video Layout",synStudent:"Student side synchronization"},phoneBroadcast:{chat:{face:{naughty:"Naughty",happy:"Happy",complacent:"Complacent",curlOnesLips:"Curl ones lips",grieved:"Grieved",shedTears:"shed tears",kiss:"kiss",love:"Kisses and hugs"}}},getUserMedia:{accessAccepted:{getUserMediaFailure_reGetAudio:"The system detects that your video is not successful, please check whether the camera device is loose or occupied by other programs.",getUserMediaFailure_reGetVideo:"The system detects that your audio is not successful, please check whether the microphone device is loose or occupied by other programs."},accessDenied:{streamFail:"Access to audio / video failure, please check the system camera / microphone device settings, or exit antivirus software.",notAudioAndVideo:"The system cannot find your camera / microphone device.Please check if the cables are correctly connected or occupied by other programs."},deviceError:"The system can't get the hardware information. Please restart the computer."},version:{clientDeviceVersionInfo:{key:"The client device used:",client:"pc_client",pc:"pc_web",mobile:"mobile_web"},browserVersionInfo:{webpageApp:"Browser:",mobileApp:"Operation system:"},appVersionInfo:{key:"Version:"},ipInfo:{key:"IP Address"}},notice:{content:"content",href:"href",publish:"publish",cancel:"cancel"},loadSupernatantPrompt:{reconnecting:"Network has a jitter. Trying to restore for you.",loadRooming:"Connecting to classroom",loadRoomingPlayback:"Obtaining replay content",refreshing:"The assistant is trying to log in again."},remoteControl:{remoteTitle:"Remote Control",refresh:"Force Refresh",deviceManagement:"Device Control",optimalServer:"Optimal server",kick:"Kicked out of the classroom",getDocAddress:"Course Server",line1:"Talk-cloud CDN Server",line2:"CDN Server"},localRecord:{recordState:{notStart:"Local Recording",recording:"In Recording",recordPaused:"Paused"},title:{notStart:"Start Recording",recording:"Stop Recording",recordPaused:"Pause Recording",recordPlay:"Restore Recording"}},coursewareRemarks:{remarks:"remarks",close:"close"},videLabel:{exit:"Drop out"},captureImg:{StartUploading:"Capture the image to start uploading",UploadSuccess:"The image of the screenshot is uploaded",uploadFailed:"The upload failed due to a network problem",SaveSuccess:"Screen shot is successfully stored in "},moreUser:{text:"Under current sceneonly onstage students can use little whiteboard !"},reloadDoucumentHint:{one:"The network is unstable , Trying to reopen the courseware ...",two:""},qPanel:{answerPanel:"Answer Panel",tips:["Click on the letter to preset the correct answer","Please Chose Option"],addOption:"Add",delOption:"Delete",start:"Release",end:"End",restart:"Restart",rightOptionIs:"The Right Option is",hasPub:"Published",answerNum:"Answer Number",people:"People",commitAnswer:"Commit",modifyAnswer:"Modify",detail:"Detail",statistics:"Statistics",useTime:"Use Time",choseAnswer:"Chose Answer",myAnswer:"My Answer",pubResult:"Publish Result",loading:"No Data"},whiteboardSetSize:{lineWidth:"Line width",eraserWidth:"Eraser size",textWidth:"Text size"},fontSize:{number:"Number"}}},cIq1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=I(a("gDS+")),n=I(a("YEIV")),l=I(a("oF3Q")),s=I(a("FyfS")),r=I(a("sk9p")),d=I(a("Yz+Y")),u=I(a("iCc5")),c=I(a("V7oC")),f=I(a("FYw3")),h=I(a("mRg0")),m=I(a("q1tI")),p=I(a("JL1q")),g=I(a("aJKe")),v=I(a("mrNk")),y=I(a("HPAy")),S=I(a("eQYT")),b=I(a("XbJA")),C=I(a("1Ea7")),k=I(a("uuqz")),w=I(a("UF9v")),T=I(a("yGYm")),E=I(a("3mpg"));function I(e){return e&&e.__esModule?e:{default:e}}a("jKbA");var D=(0,a("okNM").observer)(i=function(e){function t(e){(0,u.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.state={fileTypeMark:"general",hideWhiteboardToolbar:!1,isPageShow:!1},a.fatherContainerId="white_board_outer_layout",a.whiteboardContainerId="big_literally_wrap",a.loadFail=void 0,a.loadSuccess=void 0,a.isGroup=!1,a.documentScale=0,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){g.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),g.default.Window.addEventListener(S.default.EVENTTYPE.WindowEvent.onResize,this.handleWindowOnResize.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("resizeHandler",this.handlerOnResize.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("initAppPermissions",this.handlerInitAppPermissions.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("updateSystemStyle",this.setStyle.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,this.handlerRoomPlaybackClearAll.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid),window.TKWhiteBoardManager&&v.default.getTkRoom().registerRoomWhiteBoardDelegate&&this._initWhiteboardDefault()}},{key:"componentWillUnmount",value:function(){v.default.getTkWhiteBoardManager().destroyMainWhiteboard()}},{key:"componentDidUpdate",value:function(e,t){if(e.pureVideoMod!==this.props.pureVideoMod&&!this.props.pureVideoMod)var a=setTimeout(function(){v.default.getTkWhiteBoardManager().updateWhiteboardSize("default"),clearTimeout(a)},50)}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=e.message,a=e.user,i=!0,o=!1,d=void 0;try{for(var u,c=(0,s.default)((0,l.default)(t));!(i=(u=c.next()).done);i=!0){var f=u.value,h=(0,r.default)(f,2),m=h[0],p=h[1];a.id===v.default.getTkRoom().getMySelf().id&&"candraw"===m&&(!T.default.isGroup||T.default.isGroup&&"defaultGroup"===y.default.myGroup)&&v.default.getTkWhiteBoardManager().changeWhiteBoardConfigration((0,n.default)({canDraw:p,canPage:p||S.default.hasRole.roleStudent&&S.default.joinRoomInfo.isSupportPageTrun,actionClick:p||S.default.hasRole.roleStudent&&S.default.joinRoomInfo.isSupportPageTrun,synchronization:p},"synchronization",p),"default")}}catch(e){o=!0,d=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw d}}}},{key:"handlerOnResize",value:function(){v.default.getTkWhiteBoardManager().updateWhiteboardSize("default")}},{key:"handleWindowOnResize",value:function(){this.setStyle()}},{key:"_receiveActionCommand",value:function(e,t){switch(L.Logger.info("receive whiteboard sdk action commandaction,cmd:",e,t),g.default.CoreController.dispatchEvent({type:"receiveWhiteboardSDKAction",message:{action:e,cmd:t,source:"default"}}),e){case"viewStateUpdate":S.default.hasRole.roleStudent&&S.default.joinRoomInfo.pptpagingoptions&&this.setState({isPageShow:!0});var a=t.viewState,i=a.fileid,n=a.documentType,l=a.other,s=void 0===l?{}:l,r=a.page,d=void 0===r?{}:r,u=a.scale;a.zoom;if(this.documentScale!==u){this.documentScale=u;var c=S.default.joinRoomInfo.isStuHideOtherVideo&&S.default.hasRole.roleStudent;y.default.wbScale=Math.abs(Number(Number(u).toFixed(2))-1.78)<=.1?1.78:S.default.hasRoomtype.oneToOne||c?1.33:"100%",this.setStyle()}if("dynamicPPT"===n&&(document.getElementById("defaultTalkcloudVolume").style.display="block"),v.default.getTkRoom().getMySelf().id&&v.default.getTkRoom().getMySelf().primaryColor!==s.primaryColor){var f=v.default.getTkRoom().getMySelf().id,h={primaryColor:s.primaryColor};b.default.setParticipantPropertyToAll(f,h)}T.default.changeGroupingPage(d.currentPage),T.default.changeGroupingDocumentId(i);break;case"skipPageFailureBouncedNotice":"overPageRange"===t.type?C.default.showPrompt(y.default.language.languageData.alertWin.call.fun.page.pageMax.text):"pageTypeNotNumber"===t.type?C.default.showPrompt(y.default.language.languageData.alertWin.call.fun.page.pageInteger.text):"pageLessThanOne"===t.type&&C.default.showPrompt(y.default.language.languageData.alertWin.call.fun.page.pageMin.text);break;case"mediaPlayerNotice":"end"===t.type?this.setState({hideWhiteboardToolbar:!1}):this.setState({hideWhiteboardToolbar:!0});break;case"documentLoadFail":(0,o.default)(this.loadFail)!==(0,o.default)(t.loadFailData)&&(this.loadFail=t.loadFailData,E.default.documentSendServer({notice:"loadFail",data:this.loadFail},function(e){return L.Logger.info("loadFail message end server message : "+(0,o.default)(e))}))}}},{key:"handlerRoomPlaybackClearAll",value:function(){v.default.getTkWhiteBoardManager().resetWhiteboardData()}},{key:"_initWhiteboardDefault",value:function(){var e=document.getElementById(this.whiteboardContainerId),t={isUseKeyboardPage:!y.default.playback,whiteboardToolBarConfig:{isDrag:!0,initDragPosition:{left:100,top:50}},documentToolBarConfig:{isDrag:!0,isLoadFullScreen:!0,isLoadRemark:S.default.joinRoomInfo.hasCoursewareRemarks&&p.default.handler.getAppPermissions("isShowCoursewareRemarks"),isLoadVolume:!0,initDragPosition:{left:50,top:100}},isLoadWhiteboardToolBar:!1,fontSize:48,primaryColor:S.default.hasRole.roleStudent?"#000000":"#FF0000",canDraw:p.default.handler.getAppPermissions("canDraw"),canRemark:S.default.joinRoomInfo.hasCoursewareRemarks&&p.default.handler.getAppPermissions("isShowCoursewareRemarks"),isLoadDocumentRemark:S.default.joinRoomInfo.hasCoursewareRemarks&&p.default.handler.getAppPermissions("isShowCoursewareRemarks"),videoPlayerConfig:{controlCallback:{pause:this.pauseMediaCallBackHandle},controlPermissions:{hasPlayOrPause:S.default.hasRole.roleTeachingAssistant||S.default.hasRole.roleChairman,hasChangeProgress:S.default.hasRole.roleTeachingAssistant||S.default.hasRole.roleChairman,hasClose:S.default.hasRole.roleTeachingAssistant||S.default.hasRole.roleChairman}},audioPlayerConfig:{isLoadControl:!0,controlPermissions:{hasPlayOrPause:S.default.hasRole.roleTeachingAssistant||S.default.hasRole.roleChairman,hasChangeProgress:S.default.hasRole.roleTeachingAssistant||S.default.hasRole.roleChairman,hasClose:S.default.hasRole.roleTeachingAssistant||S.default.hasRole.roleChairman}},clickCapture:S.default.joinRoomInfo.clickCapture,isMeeting:y.default.companyidentify===S.default.COMPANYIDENTIFY.MEETING};v.default.getTkWhiteBoardManager().createMainWhiteboard(e,t,this._receiveActionCommand.bind(this))}},{key:"handlerInitAppPermissions",value:function(){var e={canDraw:p.default.handler.getAppPermissions("canDraw"),documentToolBarConfig:{isLoadRemark:S.default.joinRoomInfo.hasCoursewareRemarks&&p.default.handler.getAppPermissions("isShowCoursewareRemarks")},canRemark:S.default.joinRoomInfo.hasCoursewareRemarks&&p.default.handler.getAppPermissions("isShowCoursewareRemarks"),isLoadDocumentRemark:S.default.joinRoomInfo.hasCoursewareRemarks&&p.default.handler.getAppPermissions("isShowCoursewareRemarks"),isH5MediaOutput:S.default.joinRoomInfo.isH5MediaOutput,isH5MediaOutputDominant:S.default.joinRoomInfo.isH5MediaOutput&&S.default.hasRole.roleChairman};v.default.getTkWhiteBoardManager().changeWhiteBoardConfigration(e,"default")}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message,a=t.data;switch(t.name){case"ClassBegin":S.default.joinRoomInfo.isClassOverNotLeave&&v.default.getTkWhiteBoardManager().resetWhiteboardData(),k.default.tool.exitFullscreen();break;case"doubleClickVideo":a&&a.isScreen&&(v.default.getTkRoom().stopShareMedia(),v.default.getTkRoom().stopShareLocalMedia())}}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"ClassBegin":S.default.joinRoomInfo.isClassOverNotLeave||v.default.getTkWhiteBoardManager().resetWhiteboardData()}}},{key:"pauseMediaCallBackHandle",value:function(){g.default.CoreController.dispatchEvent({type:"receivePauseMedia"})}},{key:"handlerRoomConnected",value:function(){this._changeWhiteboardConfig()}},{key:"colorReverse",value:function(e){var t="000000"+(16777215-("0x"+e.replace(/#/g,""))).toString(16);return t.substring(t.length-6,t.length)}},{key:"_changeWhiteboardConfig",value:function(){if(S.default.joinRoomInfo.customWhiteboardBackground){var e=S.default.joinRoomInfo.whiteboardcolor,t="#"+y.default.customWhiteboardColorArry[e],a=void 0;if(S.default.hasRole.roleChairman||S.default.hasRole.roleTeachingAssistant)a="ffffff"===y.default.customWhiteboardColorArry[e]?"#FF0000":"#FFFFFF";else{a="000000"===y.default.customWhiteboardColorArry[e]?"#FFD100":"#000000"}var i={primaryColor:a,backgroundColor:t,secondaryColor:t,isNativePlayAudio:y.default.isClient&&window.clientInfo.clientversion>2018122e3};v.default.getTkWhiteBoardManager().changeWhiteBoardConfigration(i,"default")}else{var o={isNativePlayAudio:y.default.isClient&&window.clientInfo.clientversion>2018122e3};v.default.getTkWhiteBoardManager().changeWhiteBoardConfigration(o,"default")}}},{key:"setStyle",value:function(){var e=JSON.parse((0,o.default)(y.default.systemStyleJson)),t=e.RightVesselSmartStyleJson,a=e.RightContentVesselSmartStyleJson;if((S.default.joinRoomInfo.isStuHideOtherVideo&&S.default.hasRole.roleStudent||S.default.hasRoomtype.oneToOne)&&t&&a)if(y.default.doubleScreen){var i=y.default.systemStyleJson,n=i.BottomVesselSmartStyleJson,l=i.HeaderVesselSmartStyleJson,s=Number(n.height.replace("rem","")),r=Number(l.height.replace("rem","")),d=y.default.windowInnerWidth/S.default.STANDARDSIZE,u=y.default.windowInnerHeight/d;a.width="100%",a.height=u-s-r+"rem",a.left="0",a.top="0.42rem",p.default.handler.updateSystemStyleJson("RightContentVesselSmartStyleJson",a)}else p.default.handler.updateSystemStyleJson("RightVesselSmartStyleJson",Object.customAssign(t,this._getJsonStyle(this._getMainHeight(),"video"))),p.default.handler.updateSystemStyleJson("RightContentVesselSmartStyleJson",Object.customAssign(a,this._getJsonStyle(this._getMainHeight(),"wb")));else if(a&&!S.default.hasRoomtype.oneToOne){if("100%"===y.default.wbScale)a.width="100%",a.left="0rem";else{var c=y.default.systemStyleJson,f=c.BottomVesselSmartStyleJson,h=c.HeaderVesselSmartStyleJson,m=Number(f.height.replace("rem","")),g=Number(h.height.replace("rem","")),v=y.default.windowInnerWidth/S.default.STANDARDSIZE,b=y.default.windowInnerHeight/v,C=y.default.windowInnerWidth/v,k=b-m-g,w=k*y.default.wbScale,T="calc( ( 100% - "+w+"rem ) / 2 )";w<=C?(a.width=w+"rem",a.height=k+"rem",a.left=T,a.top=g+"rem"):(a.width="100%",a.height=b-m-g+"rem",a.left="0",a.top=g+"rem")}p.default.handler.updateSystemStyleJson("RightContentVesselSmartStyleJson",a)}}},{key:"_getJsonStyle",value:function(e,t){if(e&&t){var a=y.default.windowInnerWidth/S.default.STANDARDSIZE,i=y.default.windowInnerHeight/a,o=y.default.windowInnerWidth/a,n=Number(i-y.default.systemStyleJson.HeaderVesselSmartStyleJson.height.replace("rem",""))||i,l=n-e>0?(n-e)/2+Number(y.default.systemStyleJson.HeaderVesselSmartStyleJson.height.replace("rem","")):Number(y.default.systemStyleJson.HeaderVesselSmartStyleJson.height.replace("rem","")),s="video"===t?0:"auto",r="video"!==t?0:"auto";return{height:e+"rem",width:("video"===t?e*y.default.videoScale/2:o-e*y.default.videoScale/2)+"rem",top:l+"rem",right:s,left:r}}}},{key:"_getMainHeight",value:function(){if(y.default.videoScale&&y.default.wbScale&&y.default.systemStyleJson&&y.default.systemStyleJson.HeaderVesselSmartStyleJson&&y.default.systemStyleJson.HeaderVesselSmartStyleJson.height){var e=y.default.windowInnerWidth/S.default.STANDARDSIZE,t=y.default.wbScale,a=y.default.videoScale,i=y.default.windowInnerWidth,o=y.default.windowInnerHeight/e,n=Number(o-y.default.systemStyleJson.HeaderVesselSmartStyleJson.height.replace("rem",""))||o,l=2*i/(2*t+a)/e;return l>n?n:l}}},{key:"render",value:function(){var e=this.state.hideWhiteboardToolbar?" hide-whiteboard-toolbar":"";return m.default.createElement("div",{id:this.fatherContainerId,className:"white-board-outer-layout whiteboard-sdk-px-to-rem "+(y.default.playback?" noToolBar":"")+(this.state.isPageShow?" hide-page-tool":"")},"  ",m.default.createElement("div",{id:this.whiteboardContainerId,className:"big-literally-wrap "+e}," "),m.default.createElement(w.default,{instanceId:"default"}))}}]),t}(m.default.Component))||i;t.default=D},cruE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(a("q1tI")),o=n(a("17x9"));function n(e){return e&&e.__esModule?e:{default:e}}a("d8u/");var l=function(e){var t=e.text,a=e.onClick,o=e.disabled,n=e.type,l=e.styles,s=e.classNames;return i.default.createElement("div",{className:"base-button "+n+" "+s,onClick:function(){o||a.apply(void 0,arguments)},disabled:o,style:l},t)};l.propTypes={text:o.default.node,type:o.default.oneOf(["confirm","serious",""]),disabled:o.default.bool,onClick:o.default.func,styles:o.default.object,classNames:o.default.string},l.defaultProps={text:"",type:"confirm",disabled:!1,onClick:function(){},styles:{margin:"0 10px"},classNames:""},t.default=l},d0FX:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(a("4d7F")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a("M39V")),n=l(a("3mpg"));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return new i.default(function(e,t){n.default.getUpdateInfo(function(t){var a={isSupport:!1,version:"",isLastest:!0};if(t&&0===t.result){var i=t.googleversion,n=o.getParser(window.navigator.userAgent),l=n.getBrowser(),s=l.name,r=l.version;s&&r&&(a.version=""+s+r,a.isSupport=!0);var d=n.satisfies({chrome:">="+i});a.isLastest=d}return e(a),a})})}},d4kU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(a("Yz+Y")),o=u(a("iCc5")),n=u(a("V7oC")),l=u(a("FYw3")),s=u(a("mRg0")),r=u(a("q1tI")),d=u(a("HPAy"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.settingActive,a=e.buttonClick;return r.default.createElement("button",{title:d.default.language.languageData.toolContainer.toolIcon.setting.title,className:"Tk-header-icon icon-setting"+(t?" active":""),onClick:a})}}]),t}(r.default.Component);t.default=c},"d8u/":function(e,t,a){},dSw6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=h(a("Yz+Y")),o=h(a("iCc5")),n=h(a("V7oC")),l=h(a("FYw3")),s=h(a("mRg0")),r=h(a("q1tI")),d=a("eO8H"),u=(h(a("MFcB")),h(a("5gSR"))),c=h(a("GZZl")),f=h(a("1tGc"));function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){return r.default.createElement(d.HashRouter,null,r.default.createElement(d.Switch,null,r.default.createElement(d.Route,{path:"/login",component:u.default}),r.default.createElement(d.Route,{path:"/call",component:c.default}),r.default.createElement(d.Route,{path:"/playback",component:f.default}),r.default.createElement(d.Route,{path:"/replay",component:f.default}),r.default.createElement(d.Route,{path:"/",component:u.default})))}}]),t}(r.default.Component);t.default=m},daUe:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=c(a("Yz+Y")),o=c(a("iCc5")),n=c(a("V7oC")),l=c(a("FYw3")),s=c(a("mRg0")),r=c(a("q1tI"));a("bF9o");var d=c(a("HPAy")),u=c(a("imbG"));c(a("JL1q")),c(a("uuqz")),c(a("aJKe"));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.content,i=e.showIcon,o=void 0===i||i,n=e.showContent,l=void 0===n||n,s=e.isLoadIconShow;return r.default.createElement("section",{className:"supernatant-container add-position-absolute-top0-left0",style:{display:t?"block":"none"}},88!==d.default.logintype&&d.default.playback?r.default.createElement(u.default,{content:a}):null,r.default.createElement("div",{className:"load-container",style:{display:s?"block":"none"}},r.default.createElement("span",{className:"icon",style:{display:o?"":"none"}}),r.default.createElement("span",{className:"content",style:{display:l?"":"none"}},a)))}}]),t}(r.default.Component);t.default=f},eN5N:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=I(a("GQeE")),o=I(a("m1cH")),n=I(a("oF3Q")),l=I(a("sk9p")),s=I(a("EJiy")),r=I(a("gDS+")),d=I(a("FyfS")),u=I(a("iCc5")),c=I(a("V7oC")),f=I(a("aJKe")),h=I(a("eQYT")),m=I(a("uuqz")),p=I(a("3l8K")),g=I(a("JL1q")),v=I(a("1Ea7")),y=I(a("HPAy")),S=I(a("3mpg")),b=I(a("mrNk")),C=I(a("XbJA")),k=I(a("Qxvg")),w=I(a("UstG")),T=I(a("28kM")),E=I(a("yGYm"));function I(e){return e&&e.__esModule?e:{default:e}}var D=new(function(){function e(t){(0,u.default)(this,e),this.room=t,this.awitTextMsgs=[],this.maxAwitTextMsgs=50,this.awitParticipantJoinOrLeaves=[],this.maxAwitParticipantJoinOrLeaves=50}return(0,c.default)(e,[{key:"registerEventToRoom",value:function(){var e=this,t=function(t){b.default.getTkRoom().addEventListener(h.default.EVENTTYPE.RoomEvent[t],function(a){if(e["handler"+m.default.replaceFirstUper(t)]&&"function"==typeof e["handler"+m.default.replaceFirstUper(t)]&&e["handler"+m.default.replaceFirstUper(t)](a))return;"room-usernetworkstate-changed"!==a.type&&L.Logger.debug(h.default.EVENTTYPE.RoomEvent[t]+" event:",a),f.default.CoreController.dispatchEvent(a,!1)})};for(var a in h.default.EVENTTYPE.RoomEvent)t(a)}},{key:"joinPlaybackRoom",value:function(){var e=m.default.getUrlParams("type"),t=m.default.getUrlParams("serial");if(!y.default.playback)return L.Logger.error("No playback environment, no execution joinPlaybackRoom!");if(!e||!t)return L.Logger.error("No playback environment, no execution joinPlaybackRoom!");var a={roomtype:e,serial:t,recordfilepath:"http://"+(/\//g.test(m.default.getUrlParams("path").charAt(m.default.getUrlParams("path").length-1))?m.default.getUrlParams("path"):m.default.getUrlParams("path")+"/"),domain:m.default.getUrlParams("domain"),host:m.default.getUrlParams("host")};y.default.recordfilepath=a.recordfilepath,b.default.getTkRoom().init("talkcloudAppKey",function(){b.default.getTkRoom().joinPlaybackRoom(h.default.SERVICEINFO.webHostname,h.default.SERVICEINFO.sdkPort,a)},function(e){L.Logger.error("room init fail,fail info:",e)},!(y.default.playback||88===y.default.logintype),{isGetFileList:!1,isInnerVersions:!0,tk_invalidappkey:!0,useHttpProtocol:88===y.default.logintype,useServerScreenRecording:88===y.default.logintype})}},{key:"joinRoom",value:function(){var e=m.default.getBrowserInfo(),t={raisehand:!1,giftnumber:0,candraw:g.default.handler.getAppPermissions("canDraw")||!1,disablevideo:!1,disableaudio:!1,pointerstate:!1,disablechat:!1,primaryColor:"#000000",devicetype:this._userLoginDeviceType(),systemversion:y.default.isClient&&y.default.clientversion?y.default.clientversion:e.info.browserName+" "+e.info.browserVersion,version:h.default.VERSIONS,appType:"webpageApp",volume:100,tk_version:"1",codeVersion:2,group:[y.default.myGroup]},a=m.default.decrypt(h.default.SERVICEINFO.joinUrl)||window.location.href,i=decodeURIComponent(a),o=i.indexOf("?"),n=h.default.SERVICEINFO.webHostname,l=h.default.SERVICEINFO.sdkPort,s=i.substring(o+1),r=m.default.getUrlParams("refresh_thirdid"),u=!0,c=L.Utils.localStorage.getItem("tkLocalstorageServerName");c&&null!=c&&"undefined"!==c&&"null"!==c&&(u=!1);var p=function(e){var t=(new Date).getTime()-Number(L.Utils.localStorage.getItem("evictedTime"));if(h.default.joinRoomInfo.serial===L.Utils.localStorage.getItem("serial")&&parseInt(t/1e3/60)<3)v.default.showPrompt(y.default.language.languageData.alertWin.login.register.eventListener.participantEvicted.noJoin.text),f.default.CoreController.dispatchEvent({type:"leave_room"}),b.default.getTkRoom().leaveroom();else if(h.default.joinRoomInfo.preLoading){var a=b.default.getTkRoom().getFileList(),i=!0,o=!1,n=void 0;try{for(var l,s=(0,d.default)(a);!(i=(l=s.next()).done);i=!0){var r=l.value;if(1===Number(r.type)&&(1===Number(r.fileprop)||2===Number(r.fileprop))){!0;break}}}catch(e){o=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw n}}window.talk_window&&window.talk_window.preloadFile&&(TK.isTkNative||TK.isMacClient)&&a.filter(function(e){return 1===parseInt(e.type)&&!!e.preloadingzip}).length>0?f.default.CoreController.addEventListener("coursewarePreloaded",e()):L.Utils.isFunction(e)&&e()}else L.Utils.isFunction(e)&&e()};b.default.getTkRoom().init("talkcloudAppKey",function(){b.default.getTkRoom().joinroom(n,l,void 0,r||void 0,{checkroomParamsUrl:s,autoServer:u,awitConnectRoomCallback:p},t)},function(e){L.Logger.error("room init fail,fail info:",e)},!(y.default.playback||88===y.default.logintype),{isGetFileList:!0,isInnerVersions:!0,tk_invalidappkey:!0,useHttpProtocol:88===y.default.logintype,useServerScreenRecording:88===y.default.logintype})}},{key:"handlerRoomLeaveroom",value:function(e){y.default.isLeaveRoom=!0}},{key:"handlerRoomServeraddressUpdate",value:function(e){var t=e.message,a=t.web_host,i=t.doc_host,o=t.backup_doc_host;return h.default.bindServiceinfoToTkConstant({web_host:a,doc_host:i,backup_doc_host:o,isInit:!1}),!0}},{key:"handlerRoomMsglist",value:function(e){var t=e.message;this._msglistOnConnected(t,"roomMsglist")}},{key:"handlerRoomPubmsg",value:function(e){e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var t=e.message;if(y.default.signallingMessageList&&y.default.signallingMessageList.length>0&&"UpdateTime"!==t.name&&"LowConsume"!==t.name&&"StreamFailure"!==t.name){for(var a=y.default.signallingMessageList.length-1;a>=0;a--)y.default.signallingMessageList[a].id===t.id&&y.default.signallingMessageList.splice(a,1);return y.default.signallingMessageList.push(t),!0}switch(y.default.serviceTime||(y.default.serviceTime=1e3*t.ts,y.default.remindServiceTime=1e3*t.ts),t.name){case"ClassBegin":y.default.serviceTime=m.default.isMillisecondClass(t.ts)?t.ts:1e3*t.ts,y.default.remindServiceTime=m.default.isMillisecondClass(t.ts)?t.ts:1e3*t.ts,this._classBeginStartHandler(t),h.default.hasRole.roleChairman&&this.rtmpStartBroadcast();break;case"UpdateTime":y.default.serviceTime=1e3*t.ts,y.default.remindServiceTime=1e3*t.ts,y.default.firstGetServiceTime||y.default.isHandleMsglistFromRoomPubmsg||!y.default.signallingMessageList||(y.default.firstGetServiceTime=!0,y.default.classBegin||this._msglistOnConnected(y.default.signallingMessageList,"roomConnected"),this._msglistOnConnected(y.default.signallingMessageList,"roomPubmsg"),y.default.signallingMessageList=null,delete y.default.signallingMessageList);break;case"StreamFailure":L.Logger.info("StreamFailure signalling:"+(0,r.default)(t));var i=t.data.studentId,o=t.data.failuretype,u=function(e){switch(o){case h.default.streamFailureType.udpNotOnceSuccess:v.default.showPrompt(y.default.language.languageData.alertWin.call.prompt.remoteStreamFailure.udpNotOnceSuccess.one+e.nickname+y.default.language.languageData.alertWin.call.prompt.remoteStreamFailure.udpNotOnceSuccess.two);break;case h.default.streamFailureType.udpMidwayDisconnected:v.default.showPrompt(y.default.language.languageData.alertWin.call.prompt.remoteStreamFailure.udpMidwayDisconnected.one+e.nickname+y.default.language.languageData.alertWin.call.prompt.remoteStreamFailure.udpMidwayDisconnected.two);break;case h.default.streamFailureType.publishvideoFailure_notOverrun:v.default.showPrompt(y.default.language.languageData.alertWin.call.prompt.remoteStreamFailure.publishvideoFailure_notOverrun.one+e.nickname+y.default.language.languageData.alertWin.call.prompt.remoteStreamFailure.publishvideoFailure_notOverrun.two);break;case h.default.streamFailureType.publishvideoFailure_overrun:v.default.showPrompt(y.default.language.languageData.alertWin.call.prompt.remoteStreamFailure.publishvideoFailure_overrun.one);break;case h.default.streamFailureType.mobileHome:v.default.showPrompt(e.nickname+y.default.language.languageData.alertWin.call.prompt.remoteStreamFailure.mobileHome.two)}};if(y.default.HeightConcurrence)y.default.specificUsers[i]&&b.default.getTkRoom().getRoomUser(i,function(e){e?(delete y.default.specificUsers[i],u(e)):L.Logger.error("user is not exist , userid is "+i+"!")},function(e){L.Logger.error("getRoomUser Failure"+e+"!")});else if(y.default.specificUsers[i]){var c=b.default.getTkRoom().getUser(i);if(!c)return void L.Logger.error("user is not exist , userid is "+i+"!");delete y.default.specificUsers[i],u(c)}break;case"LowConsume":t.data&&void 0!==t.data.maxvideo&&(h.default.joinRoomInfo.maxvideo=Number(t.data.maxvideo));break;case"RemoteControl":switch(t.data.action){case"refresh":if(t.toID===b.default.getTkRoom().getMySelf().id)return f.default.CoreController.dispatchEvent({type:"loadSupernatantPrompt",message:{show:!0,content:y.default.language.languageData.loadSupernatantPrompt.refreshing}}),window.location.reload(!0),!0;break;case"areaSelection":if(t.toID===b.default.getTkRoom().getMySelf().id&&"getServerListInfo"===t.data.type)return b.default.getTkRoom().requestServerList(h.default.SERVICEINFO.webHostname,h.default.SERVICEINFO.sdkPort,function(e,a){var i=b.default.getTkRoom().getMySelf().servername,o=void 0;if(e&&"object"===(void 0===e?"undefined":(0,s.default)(e))){o={};var r=!0,u=!1,c=void 0;try{for(var f,h=(0,d.default)((0,n.default)(e));!(r=(f=h.next()).done);r=!0){var m=f.value,p=(0,l.default)(m,2),g=p[0],v=p[1];o[g]=Object.customAssign({},v)}}catch(e){u=!0,c=e}finally{try{!r&&h.return&&h.return()}finally{if(u)throw c}}}else o=e;var y={action:"areaSelection",type:"sendServerListInfo",serverData:{serverList:o,serverName:i}},S=t.fromID;C.default.sendSignallingFromRemoteControl(S,y)}),!0;break;case"deviceManagement":if(t.toID===b.default.getTkRoom().getMySelf().id){if("getDeviceInfo"===t.data.type){return TK.DeviceMgr.getDevices(function(e){var a={action:"deviceManagement",type:"sendDeviceInfo",deviceData:{deviceInfo:e}},i=t.fromID;C.default.sendSignallingFromRemoteControl(i,a)},{isSetlocalStorage:!1}),!0}if("changeDeviceInfo"===t.data.type){var p=t.data.changeData.selectDeviceInfo;TK.DeviceMgr.setDevices(p,function(){L.Logger.error("set devices failed")}),f.default.CoreController.dispatchEvent({type:"remotecontrol_deviceManagement_changeDeviceInfo",message:{selectDeviceInfo:p}})}}break;case"nowSomeoneCdnIp":C.default.sendSignallingFromRemoteControl(t.fromID,{action:"callCdnIp",serverInfo:{serverKey:window.WBGlobal.docAddressKey}});break;case"changeCdnIp":var g=t.data.key;b.default.getTkWhiteBoardManager().switchDocAddress(g,!0),L.Logger.info("change cdn , cdn key is "+window.WBGlobal.docAddressKey+", address is "+window.WBGlobal.nowUseDocAddress)}break;case"FullScreen":y.default.isVideoInFullscreen=!0}}},{key:"handlerRoomDelmsg",value:function(e){var t=e.message;if(e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data)),y.default.signallingMessageList&&y.default.signallingMessageList.length>0){for(var a=y.default.signallingMessageList.length-1;a>=0;a--)y.default.signallingMessageList[a].id!==t.id&&y.default.signallingMessageList[a].associatedMsgID!==t.id||y.default.signallingMessageList.splice(a,1);return!0}switch(t.name){case"ClassBegin":f.default.CoreController.dispatchEvent({type:"recoverPanelBeforeStarting"});var i=this._classBeginEndHandler(t);v.default.showPrompt(y.default.language.languageData.alertWin.login.register.eventListener.roomDelClassBegin.text,function(){h.default.joinRoomInfo.classBeginEndCloseClient&&y.default.isClient&&!y.default.isMacClient&&b.default.getNativeInterface().shutdownNativeClient&&b.default.getNativeInterface().shutdownNativeClient(),h.default.joinRoomInfo.classBeginEndCloseClient&&y.default.isMacClient&&window.close(),i?h.default.joinRoomInfo.isClassOverNotLeave||f.default.CoreController.dispatchEvent({type:"endClassbeginShowLocalStream"}):h.default.joinRoomInfo&&h.default.joinRoomInfo.jumpurl&&h.default.hasRole.roleStudent&&(window.location.href=h.default.joinRoomInfo.jumpurl)}),h.default.hasRole.roleChairman&&this.rtmpStopBroadcast();break;case"FullScreen":y.default.isVideoInFullscreen=!1}}},{key:"handlerRoomConnected",value:function(e){y.default.isStartRtml=!1,y.default.isLeaveRoom=!1,new T.default(E.default),this._compareDocServerSpeedSwitchCND(),b.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({languageType:"chinese"===y.default.language.name?"ch":"complex"===y.default.language.name?"tw":"japan"===y.default.language.name?"ja":"en",mediaShareToID:b.default.getTkRoom().getMySelf().id,clientMediaShare:!1,synchronization:!1,canDraw:b.default.getTkRoom().getMySelf().candraw,canPage:b.default.getTkRoom().getMySelf().candraw||h.default.hasRole.roleTeachingAssistant||h.default.hasRole.roleChairman||h.default.hasRole.roleStudent&&h.default.joinRoomInfo.isSupportPageTrun,actionClick:b.default.getTkRoom().getMySelf().candraw||h.default.hasRole.roleTeachingAssistant||h.default.hasRole.roleChairman||h.default.hasRole.roleStudent&&h.default.joinRoomInfo.isSupportPageTrun,isMobile:"mobile"===TK.SDKTYPE,addPage:!1,pptVolumeSynchronization:!1}),(y.default.isClient||y.default.playback)&&TK.DeviceMgr.removeDeviceChangeListener&&TK.DeviceMgr.removeDeviceChangeListener(),y.default.firstGetServiceTime=!1,y.default.isHandleMsglistFromRoomPubmsg=!1,y.default.appConnected=!0,b.default.getTkRoom().getMySelf().role===h.default.role.roleStudent&&S.default.getGiftInfo(b.default.getTkRoom().getMySelf().id,function(e){if(0==e.result){var t=e.giftinfo,a=!0,i=!1,o=void 0;try{for(var n,l=(0,d.default)(t);!(a=(n=l.next()).done);a=!0){var s=n.value,r=s.receiveid;y.default.participantGiftNumberJson[r]=y.default.participantGiftNumberJson[r]||0,y.default.participantGiftNumberJson[r]+=Number(s.giftnumber)}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}var u=b.default.getTkRoom().getMySelf().giftnumber||0;(u+=y.default.participantGiftNumberJson[b.default.getTkRoom().getMySelf().id]||0)!==b.default.getTkRoom().getMySelf().giftnumber&&C.default.setParticipantPropertyToAll(b.default.getTkRoom().getMySelf().id,{giftnumber:u})}});var t=p.default.getRoleHasDefalutAppPermissions();w.default.initAppPermissions(t);var a=e.message;y.default.signallingMessageList=a;var i=b.default.getTkRoom().getUsers();for(var o in i){var n=i[o];p.default.checkRoleConflict(n,!0)}this._msglistOnConnected(y.default.signallingMessageList,"roomConnected"),h.default.joinRoomInfo.isBeforeClassReleaseVideo&&!y.default.classBegin&&this._BeforeClassAutoPublishAV(),y.default.serviceTime&&!y.default.firstGetServiceTime&&!y.default.isHandleMsglistFromRoomPubmsg&&y.default.signallingMessageList&&(y.default.firstGetServiceTime=!0,this._msglistOnConnected(y.default.signallingMessageList,"roomPubmsg"),y.default.signallingMessageList=null,delete y.default.signallingMessageList),y.default.classBegin||b.default.getTkRoom().getMySelf().candraw===g.default.handler.getAppPermissions("canDraw")||C.default.setParticipantPropertyToAll(b.default.getTkRoom().getMySelf().id,{candraw:g.default.handler.getAppPermissions("canDraw")}),y.default.firstGetServiceTime||C.default.sendSignallingFromUpdateTime(b.default.getTkRoom().getMySelf().id),g.default.handler.refreshSystemStyleJson(),f.default.CoreController.dispatchEvent({type:"loadSupernatantPrompt",message:{show:!1,content:void 0}}),y.default.isClifent&&TK.isTkNative&&TK.subscribe_from_native&&b.default.getTkRoom().getDeviceMgr&&b.default.getTkRoom().getDeviceMgr()&&b.default.getTkRoom().getDeviceMgr().setSpeakerVolume&&b.default.getTkRoom()&&b.default.getTkRoom().getMySelf()&&b.default.getTkRoom().getDeviceMgr().setSpeakerVolume(b.default.getTkRoom().getMySelf().volume),h.default.joinRoomInfo.isHasVideo||y.default.isOnlyAudioRoom||y.default.playback||b.default.getTkRoom().switchOnlyAudioRoom(!0),$(window).resize()}},{key:"handlerRoomDisconnected",value:function(e){y.default.appConnected=!1,y.default.classBegin=!1,y.default.serviceTime=void 0,y.default.remindServiceTime=void 0,y.default.signallingMessageList=null,delete y.default.signallingMessageList,y.default.isHandleMsglistFromRoomPubmsg=!1,y.default.participantGiftNumberJson={},b.default.getTkRoom().getMySelf().giftnumber=0,b.default.getTkRoom().getMySelf().role===h.default.role.roleStudent&&(b.default.getTkRoom().getMySelf().pointerstate=!1)}},{key:"handlerRoomParticipantJoin",value:function(e){}},{key:"handlerRoomModeChanged",value:function(e){e.message.roomMode===TK.ROOM_MODE.BIG_ROOM?y.default.HeightConcurrence=!0:e.message.roomMode===TK.ROOM_MODE.NORMAL_ROOM&&(y.default.HeightConcurrence=!1)}},{key:"handlerRoomTextMessage",value:function(e){var t=this;if(e&&e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),y.default.HeightConcurrence){var a=(new Date).getTime(),i=function(){t.oldHandleTextMsgListTime=a,clearTimeout(t.awitTextMsgTimer),t.awitTextMsgTimer=void 0,t.awitTextMsgs.length&&(f.default.CoreController.dispatchEvent({type:"room-text-message-list",message:[].concat((0,o.default)(t.awitTextMsgs))}),t.awitTextMsgs.length=0)};return void 0!==this.oldTextMsgTime&&void 0!==this.oldHandleTextMsgListTime?a-this.oldTextMsgTime>500?(this.awitTextMsgs.push(e),i()):a-this.oldHandleTextMsgListTime>1e3?(this.awitTextMsgs.push(e),i()):(this.awitTextMsgs.push(e),this.awitTextMsgTimer||(clearTimeout(this.awitTextMsgTimer),this.awitTextMsgTimer=setTimeout(function(){i()},1e3))):(this.awitTextMsgs.push(e),i()),this.oldTextMsgTime=a,!0}}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=e.message,a=e.user,i=!0,o=!1,s=void 0;try{for(var r,u=(0,d.default)((0,n.default)(t));!(i=(r=u.next()).done);i=!0){var c=r.value,f=(0,l.default)(c,2),m=f[0],p=f[1];if(a.id===b.default.getTkRoom().getMySelf().id){switch(m){case"servername":L.Utils.localStorage.setItem("tkLocalstorageServerName",p)}"candraw"===m&&(w.default.setAppPermissions("sendWhiteboardMarkTool",p),w.default.setAppPermissions("h5DocumentActionClick",p),w.default.setAppPermissions("dynamicPptActionClick",p),w.default.setAppPermissions("publishDynamicPptMediaPermission_video",p),w.default.setAppPermissions("unpublishMediaStream",p),w.default.setAppPermissions("publishMediaStream",p),w.default.setAppPermissions("canDraw",p),w.default.setAppPermissions("isCanDragVideo",p),w.default.setAppPermissions("isChangeVideoSize",p),w.default.setAppPermissions("canDragCaptureImg",p),w.default.setAppPermissions("canResizeCaptureImg",p),w.default.setAppPermissions("isQrCode",p),h.default.joinRoomInfo.pptpagingoptions?b.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({canDraw:p,canPage:!h.default.hasRole.roleStudent&&p,actionClick:!h.default.hasRole.roleStudent&&p,synchronization:p},"default"):h.default.joinRoomInfo.isSupportPageTrun?b.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({canDraw:p,canPage:!!h.default.hasRole.roleStudent||p,actionClick:!!h.default.hasRole.roleStudent||p,synchronization:p},"default"):b.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({canDraw:p,canPage:p,actionClick:p,synchronization:p},"default"),h.default.hasRole.roleStudent&&(w.default.setAppPermissions("whiteboardPagingPage",p||h.default.joinRoomInfo.isSupportPageTrun),w.default.setAppPermissions("newpptPagingPage",p||h.default.joinRoomInfo.isSupportPageTrun),w.default.setAppPermissions("h5DocumentPagingPage",p||h.default.joinRoomInfo.isSupportPageTrun),w.default.setAppPermissions("jumpPage",p||h.default.joinRoomInfo.isSupportPageTrun),w.default.setAppPermissions("Asharing",p))),"volume"===m&&y.default.isClient&&TK.isTkNative&&TK.subscribe_from_native&&b.default.getTkRoom().getDeviceMgr&&b.default.getTkRoom().getDeviceMgr().setSpeakerVolume&&b.default.getTkRoom().getDeviceMgr().setSpeakerVolume(p),"publishstate"===m&&(h.default.joinRoomInfo.isSupportCandraw&&h.default.hasRoomtype.oneToOne&&h.default.hasRole.roleStudent&&p!==h.default.PUBLISHSTATE.PUBLISH_STATE_NONE&&y.default.classBegin&&!y.default.isAutoGetCandraw||h.default.joinRoomInfo.isSupportCandraw&&!h.default.hasRoomtype.oneToOne&&y.default.roomChange&&h.default.hasRole.roleStudent&&p!==h.default.PUBLISHSTATE.PUBLISH_STATE_NONE&&y.default.classBegin&&!y.default.isAutoGetCandraw)&&(b.default.getTkRoom().getMySelf().candraw||(y.default.isAutoGetCandraw=!0,C.default.setParticipantPropertyToAll(b.default.getTkRoom().getMySelf().id,{candraw:!b.default.getTkRoom().getMySelf().candraw})))}"giftnumber"===m&&(y.default.participantGiftNumberJson[a.id]=void 0,delete y.default.participantGiftNumberJson[a.id])}}catch(e){o=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw s}}}},{key:"handlerRoomFiles",value:function(e){var t=e.message,a=void 0,i=!0,o=!1,n=void 0;try{for(var l,s=(0,d.default)(t);!(i=(l=s.next()).done);i=!0){var r=l.value;if(1===Number(r.type)&&"mp4"!==m.default.getFiletyeByFilesuffix(r.filetype)&&"mp3"!==m.default.getFiletyeByFilesuffix(r.filetype)){a=r;break}"mp4"===m.default.getFiletyeByFilesuffix(r.filetype)||"mp3"===m.default.getFiletyeByFilesuffix(r.filetype)||a||a||(a=r)}}catch(e){o=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw n}}y.default.defaultFileInfo=a||y.default.defaultFileInfo}},{key:"handlerRoomParticipantEvicted",value:function(e){return w.default.resetDefaultAppPermissions(!0),e.message.reason&&402==e.message.reason?(v.default.showError(y.default.language.languageData.publish.reason402.text),b.default.getTkRoom().leaveroom(!0),setTimeout(function(){b.default.getTkRoom().uninit()},300),!1):e.message.reason&&401==e.message.reason?(v.default.showError(y.default.language.languageData.publish.reason401.text),b.default.getTkRoom().leaveroom(!0),setTimeout(function(){b.default.getTkRoom().uninit()},300),!1):void(e.message&&1===e.message.reason?(h.default.hasRole.roleStudent&&(L.Utils.localStorage.setItem("evictedTime",(new Date).getTime()),L.Utils.localStorage.setItem("serial",h.default.joinRoomInfo.serial),L.Utils.localStorage.setItem("evicteid",e.message.id)),v.default.showPrompt(y.default.language.languageData.alertWin.login.register.eventListener.participantEvicted.kick.text)):(v.default.showPrompt(y.default.language.languageData.alertWin.login.register.eventListener.participantEvicted.roleConflict.text),y.default&&y.default.isClient&&!y.default.isMacClient&&b.default.getNativeInterface().destroyShareScreenWindow()))}},{key:"handlerRoomAudiovideostateSwitched",value:function(e){var t=e.message;y.default.isOnlyAudioRoom=t.onlyAudio,f.default.CoreController.dispatchEvent({type:"isOnlyAudioRoom",onlyAudio:t.onlyAudio})}},{key:"handlerRoomCheckroom",value:function(e){var t=e.message||{},a=t.ret,i=t.roominfo;this._handlerCheckroomOrInitPlaybackInfo(a,i)}},{key:"handlerRoomCheckroomPlayback",value:function(e){var t=e.message||{},a=t.ret,i=t.roominfo;this._handlerCheckroomOrInitPlaybackInfo(a,i)}},{key:"handlerRoomErrorNotice",value:function(e){var t=e.errorCode,a=e.message,i=void 0===a?{}:a,o=b.default.getTkRoom().getMySelf().id,n=i.userId,l=i.type,s=i.causeCode;if(o===n&&"video"===l){var d={};switch(t){case TK.ERROR_NOTICE.PUBLISH_AUDIO_VIDEO_FAILURE:L.Logger.warning("my stream is not publish success , publish failure info is "+(0,r.default)(e)+" , my user id is "+o),d.failuretype=2===Number(s)?h.default.streamFailureType.publishvideoFailure_overrun:h.default.streamFailureType.publishvideoFailure_notOverrun,C.default.sendSignallingFromStreamFailure(o,d);break;case TK.ERROR_NOTICE.UDP_CONNECTION_FAILED:d.failuretype=h.default.streamFailureType.udpNotOnceSuccess,v.default.showPrompt(y.default.language.languageData.alertWin.call.prompt.streamConnectFailed.notSuccess.text),C.default.sendSignallingFromStreamFailure(o,d);break;case TK.ERROR_NOTICE.UDP_CONNECTION_INTERRUPT:d.failuretype=h.default.streamFailureType.udpMidwayDisconnected,v.default.showPrompt(y.default.language.languageData.alertWin.call.prompt.streamConnectFailed.onceSuccessed.text),C.default.sendSignallingFromStreamFailure(o,d)}}}},{key:"handlerAccessAccepted",value:function(e){y.default.playback||e.message&&void 0!==e.message.getUserMediaFailureCode&&(e.message.getUserMediaFailureCode===L.Constant.getUserMedia.FAILURE_USERMEDIA_AGAIN_ONLY_GET_AUDIO?v.default.showPrompt(y.default.language.languageData.getUserMedia.accessAccepted.getUserMediaFailure_reGetAudio):e.message.getUserMediaFailureCode===L.Constant.getUserMedia.FAILURE_USERMEDIA_AGAIN_ONLY_GET_VIDEO&&v.default.showPrompt(y.default.language.languageData.getUserMedia.accessAccepted.getUserMediaFailure_reGetVideo))}},{key:"handlerAccessDenied",value:function(e){if(!y.default.playback){var t=void 0,a=!1;switch(e.message.code){case L.Constant.accessDenied.streamFail:t=y.default.language.languageData.getUserMedia.accessDenied.streamFail,a=!0;break;case L.Constant.accessDenied.notAudioAndVideo:t=y.default.language.languageData.getUserMedia.accessDenied.notAudioAndVideo,a=!0}a&&!1===y.default.needDetectioned&&v.default.showPrompt(t)}}},{key:"_msglistOnConnected",value:function(e,t){var a=this,o=this;return function(e,t,n){var l={};for(var s in e)n&&n[e[s].name]||(e[s].data&&"string"==typeof e[s].data&&(e[s].data=JSON.parse(e[s].data)),/outIframe/.test(e[s].name)?f.default.CoreController.dispatchEvent({type:"outIframe-msglist",message:{signallingData:e[s]}}):null==l[e[s].name]||null==l[e[s].name]?(l[e[s].name]=[],l[e[s].name].push(e[s])):l[e[s].name].push(e[s]));if("roomConnected"===t){var r=l.ClassBegin;if(null!=r&&null!=r&&r.length>0)"ClassBegin"==r[r.length-1].name&&(o._classBeginStartHandler(r[r.length-1]),f.default.CoreController.dispatchEvent({type:"receive-msglist-ClassBegin",source:"room-msglist",message:r[r.length-1]}));else if(f.default.CoreController.dispatchEvent({type:"receive-msglist-not-ClassBegin",source:"room-msglist",message:{}}),h.default.joinRoomInfo.autoClassBegin&&h.default.hasRole.roleChairman&&w.default.getAppPermissions("autoClassBegin")&&!y.default.classBegin)if(h.default.joinRoomInfo.hiddenClassBegin){if(!w.default.getAppPermissions("hiddenClassBeginAutoClassBegin"))return;S.default.roomStart()}else{if(!w.default.getAppPermissions("startClassBegin"))return;S.default.roomStart()}l.ClassBegin=null}else if("roomPubmsg"===t||"roomMsglist"===t){var d=l.LowConsume;null!=d&&d.length>0?h.default.hasRole.roleChairman?C.default.sendSignallingFromLowConsume(h.default.joinRoomInfo.maxvideo):d[d.length-1].data&&void 0!==d[d.length-1].data.maxvideo&&(h.default.joinRoomInfo.maxvideo=Number(d[d.length-1].data.maxvideo)):"roomPubmsg"===t&&h.default.hasRole.roleChairman&&C.default.sendSignallingFromLowConsume(h.default.joinRoomInfo.maxvideo),l.LowConsume=null;var u=l.videoDraghandle;if(null!=u&&u.length>0){var c=u[u.length-1].data.otherVideoStyle;if(c){var m=b.default.getTkRoom().getMySelf();if(c[m.id]){c[m.id]={percentTop:0,percentLeft:0,isDrag:!1};var p={otherVideoStyle:c};C.default.sendSignallingFromVideoDraghandle(p)}f.default.CoreController.dispatchEvent({type:"handleVideoDragListData",message:{data:{otherVideoStyle:c}}})}}l.videoDraghandle=null;var g=l.VideoSplitScreen;null!=g&&g.length>0&&f.default.CoreController.dispatchEvent({type:"receive-msglist-VideoSplitScreen",message:g[g.length-1]}),l.VideoSplitScreen=null;var v=l.VideoChangeSize;if(null!=v&&v.length>0&&v[0].data.ScaleVideoData){var k=b.default.getTkRoom().getMySelf();if(v[0].data.ScaleVideoData[k.id]){v[0].data.ScaleVideoData[k.id]={scale:1};var T={ScaleVideoData:v[0].data.ScaleVideoData};C.default.sendSignallingFromVideoChangeSize(T)}f.default.CoreController.dispatchEvent({type:"handleVideoSizeListData",message:{data:{ScaleVideoData:v[0].data.ScaleVideoData}}})}l.VideoChangeSize=null;var I=l.CaptureImg;null!=I&&I.length>0&&f.default.CoreController.dispatchEvent({type:"receive-msglist-CaptureImg",message:{CaptureImgArray:I}}),l.CaptureImg=null;var D=l.CaptureImgDrag;null!=D&&D.length>0&&f.default.CoreController.dispatchEvent({type:"receive-msglist-CaptureImgDrag",message:{CaptureImgDragArray:D}}),l.CaptureImgDrag=null;var x=l.CaptureImgResize;null!=x&&x.length>0&&f.default.CoreController.dispatchEvent({type:"receive-msglist-CaptureImgResize",message:{CaptureImgResizeArray:x}}),l.CaptureImgResize=null;var R=l.FullScreen;null!=R&&R.length>0&&(y.default.isVideoInFullscreen=!0,f.default.CoreController.dispatchEvent({type:"receive-msglist-FullScreen",message:{FullScreenArray:R}})),l.FullScreen=null;var _=l.VideoWhiteboard;null!=_&&_.length>0&&f.default.CoreController.dispatchEvent({type:"receive-msglist-VideoWhiteboard",message:{VideoWhiteboardArray:_}}),l.VideoWhiteboard=null;var P=l.timer;null!=P&&null!=P&&P.length>0&&"timer"==P[P.length-1].name&&f.default.CoreController.dispatchEvent({type:"receive-msglist-timer",source:"room-msglist",message:{timerShowArr:P}}),l.timer=null;var A=l.TimerDrag;null!=A&&A.length>0&&f.default.CoreController.dispatchEvent({type:"receive-msglist-TimerDrag",message:{TimerDragArray:A}}),l.TimerDrag=null;var B=l.dial;null!=B&&null!=B&&B.length>0&&"dial"==B[B.length-1].name&&f.default.CoreController.dispatchEvent({type:"receive-msglist-dial",source:"room-msglist",message:{dialShowArr:B}}),l.dial=null;var M=l.DialDrag;null!=M&&M.length>0&&f.default.CoreController.dispatchEvent({type:"receive-msglist-DialDrag",message:{DialDragArray:M}}),l.DialDrag=null;var N=l.answer;null!=N&&null!=N&&N.length>0&&"answer"==N[N.length-1].name&&f.default.CoreController.dispatchEvent({type:"receive-msglist-answer",source:"room-msglist",message:{answerShowArr:N}}),l.answer=null;var O=l.Question;null!=O&&null!=O&&O.length>0&&"Question"==O[O.length-1].name&&f.default.CoreController.dispatchEvent({type:"receive-msglist-question",source:"room-msglist",message:{data:O[0]}}),l.Question=null;var F=l.PublishResult;null!=F&&null!=F&&F.length>0&&"PublishResult"==F[F.length-1].name&&f.default.CoreController.dispatchEvent({type:"receive-msglist-publishResult",source:"room-msglist",message:{data:F[0]}}),l.PublishResult=null;var V=l.AnswerDrag;null!=V&&V.length>0&&f.default.CoreController.dispatchEvent({type:"receive-msglist-AnswerDrag",message:{AnswerDragArray:V}}),l.AnswerDrag=null;var U=l.qiangDaQi;null!=U&&null!=U&&U.length>0&&"qiangDaQi"==U[U.length-1].name&&f.default.CoreController.dispatchEvent({type:"receive-msglist-qiangDaQi",source:"room-msglist",message:{qiangDaQiArr:U}}),l.qiangDaQi=null;var H=l.QiangDaZhe;null!=H&&null!=H&&H.length>0&&"QiangDaZhe"==H[H.length-1].name&&f.default.CoreController.dispatchEvent({type:"receive-msglist-QiangDaZhe",source:"room-msglist",message:{QiangDaZheArr:H}}),l.QiangDaZhe=null;var j=l.ResponderDrag;null!=j&&j.length>0&&f.default.CoreController.dispatchEvent({type:"receive-msglist-ResponderDrag",message:{ResponderDragArray:j}}),l.ResponderDrag=null;var W=l.MoreUsers;if(null!=W&&null!=W&&W.length>0)"MoreUsers"==W[W.length-1].name&&(y.default.isMoreUsers=!0,f.default.CoreController.dispatchEvent({type:"receive-msglist-MoreUsers",source:"room-msglist",message:W[W.length-1]}));else if("roomPubmsg"===t&&(0,i.default)(b.default.getTkRoom().getUsers()).length>y.default.userCount&&!y.default.HeightConcurrence){var z={hasMoreUser:!0};y.default.isMoreUsers=!0,C.default.sendSignallingFromMoreUsers(z,!1)}l.MoreUsers=null;var Y=l.BlackBoard;null!=Y&&null!=Y&&Y.length>0&&"BlackBoard"==Y[Y.length-1].name&&f.default.CoreController.dispatchEvent({type:"receive-msglist-BlackBoard",source:"room-msglist",message:Y[Y.length-1]}),l.BlackBoard=null;var q=l.BlackBoard_new;null!=q&&null!=q&&q.length>0&&"BlackBoard_new"==q[q.length-1].name&&f.default.CoreController.dispatchEvent({type:"receive-msglist-NewBlackBoard",source:"room-msglist",message:q[q.length-1]}),l.BlackBoard_new=null;var J=l.UserHasNewBlackBoard;null!=J&&null!=J&&J.length>0&&"UserHasNewBlackBoard"==J[J.length-1].name&&f.default.CoreController.dispatchEvent({type:"receive-msglist-UserHasNewBlackBoard",source:"room-msglist",message:J}),l.UserHasNewBlackBoard=null;var K=l.BlackBoardDrag;null!=K&&K.length>0&&f.default.CoreController.dispatchEvent({type:"receive-msglist-BlackBoardDrag",message:{BlackBoardDragArray:K}}),l.BlackBoardDrag=null;var G=l.ShowPage;if(!("roomPubmsg"!==t||null!=G&&G.length>0||y.default.playback)){L.Logger.debug("openDefaultDoucmentFile info:",y.default.defaultFileInfo);var Q=y.default.defaultFileInfo.fileid;b.default.getTkWhiteBoardManager().changeDocument(Q)}l.ShowPage=null;var X=l.EveryoneBanChat;null!=X&&null!=X&&X.length>0&&"EveryoneBanChat"==X[X.length-1].name&&f.default.CoreController.dispatchEvent({type:"receive-msglist-EveryoneBanChat",source:"room-msglist",message:{EveryoneBanChatArr:X}}),l.EveryoneBanChatArr=null;var Z=l.switchLayout;null!=Z&&null!=Z&&Z.length>0&&"switchLayout"==Z[Z.length-1].name&&f.default.CoreController.dispatchEvent({type:"receive-msglist-SwitchLayout",source:"room-msglist",message:Z[0].data}),l.SwitchLayoutArr=null;var $=l.DoubleDivision;null!=$&&null!=$&&$.length>0&&"DoubleDivision"==$[$.length-1].name&&f.default.CoreController.dispatchEvent({type:"receive-msglist-DoubleDivision",source:"room-msglist",message:$[0].data}),l.DoubleDivisionArr=null;var ee=l.doubleClickVideo;null!=ee&&null!=ee&&ee.length>0&&"doubleClickVideo"==ee[ee.length-1].name&&f.default.CoreController.dispatchEvent({type:"receive-msglist-doubleClickVideo",source:"room-msglist",message:ee[0].data}),l.doubleClickVideoArr=null;var te=l.MainPeopleExchangeVideo;null!=te&&null!=te&&te.length>0&&"MainPeopleExchangeVideo"==te[te.length-1].name&&f.default.CoreController.dispatchEvent({type:"receive-msglist-MainPeopleExchangeVideo",source:"room-msglist",message:te[0].data}),l.mainPeopleExchangeVideoArr=null;var ae=l.isGroup;null!=ae&&null!=ae&&ae.length>0&&"isGroup"==ae[ae.length-1].name&&(E.default.changeGroup(ae[0].data),f.default.CoreController.dispatchEvent({type:"receive-msglist-isGroup",source:"room-msglist",message:ae[0].data})),l.isGroup=null,"roomPubmsg"===t&&h.default.hasRole.roleChairman&&!y.default.isStartRtml&&y.default.classBegin&&a.rtmpStartBroadcast(),y.default.isHandleMsglistFromRoomPubmsg=!0}}(e,t,{}),!0}},{key:"isTeacher",value:function(e){var t=b.default.getTkRoom()&&b.default.getTkRoom().getUser(e);return!(!t||t.role!==h.default.role.roleChairman)}},{key:"_autoPublishAV",value:function(){var e=this;setTimeout(function(){var t=b.default.getTkRoom().getUsers()&&(0,i.default)(b.default.getTkRoom().getUsers()).map(function(e){return b.default.getTkRoom().getUser(e)}).filter(function(t){return t.publishstate>0&&b.default.getTkRoom().getMySelf().id!==t.id&&!e.isTeacher(t.id)}).length,a=b.default.getTkRoom().getMySelf();if((h.default.joinRoomInfo.autoStartAV||h.default.hasRole.roleChairman)&&w.default.getAppPermissions("autoPublishAV")){var o=a.hasvideo?a.hasaudio?h.default.PUBLISHSTATE.PUBLISH_STATE_BOTH:h.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY:a.hasaudio?h.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY:h.default.PUBLISHSTATE.PUBLISH_STATE_NONE;C.default.changeUserPublish(a.id,h.default.PUBLISHSTATE.PUBLISH_STATE_NONE),y.default.isOnlyAudioRoom?C.default.changeUserPublish(a.id,h.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY):t<h.default.joinRoomInfo.maxvideo-(e.isTeacher(a.id)?0:1)&&C.default.changeUserPublish(a.id,o)}else{if(b.default.getTkRoom().getMySelf().role===h.default.role.roleClassTeacher)return!1;C.default.changeUserPublish(b.default.getTkRoom().getMySelf().id,h.default.PUBLISHSTATE.PUBLISH_STATE_NONE)}},Math.abs(100*Math.random()+1e3*(2-parseInt(10*Math.random()/2))))}},{key:"_BeforeClassAutoPublishAV",value:function(){(h.default.hasRole.roleChairman||h.default.hasRole.roleStudent)&&setTimeout(function(){var e=b.default.getTkRoom().getUsers()&&(0,n.default)(b.default.getTkRoom().getUsers()).filter(function(e){var t=(0,l.default)(e,2),a=(t[0],t[1]);return a.role==h.default.role.roleStudent&&a.publishstate>0}).length,t=b.default.getTkRoom().getMySelf();if(!h.default.hasRoomtype.oneToOne&&h.default.hasRole.roleStudent&&e+1>h.default.joinRoomInfo.maxvideo-1)return C.default.changeUserPublish(t.id,h.default.PUBLISHSTATE.PUBLISH_STATE_NONE),!1;if(h.default.joinRoomInfo.isHasVideo){var a=t.hasvideo?t.hasaudio?h.default.PUBLISHSTATE.PUBLISH_STATE_BOTH:h.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY:t.hasaudio?h.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY:h.default.PUBLISHSTATE.PUBLISH_STATE_NONE;C.default.changeUserPublish(t.id,a)}else C.default.changeUserPublish(t.id,h.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY)},Math.abs(100*Math.random()+1e3*(2-parseInt(10*Math.random()/2))))}},{key:"_saveAddressToSession",value:function(e){if(h.default.joinRoomInfo&&h.default.joinRoomInfo.thirdid){var t=e||m.default.getUrlParams("timestamp",window.location.href),a=m.default.decrypt(h.default.joinRoomInfo.joinUrl),i=a.indexOf("&refresh_thirdid");-1!==i&&(a=a.substring(0,i)),a+="&refresh_thirdid="+h.default.joinRoomInfo.thirdid,L.Utils.sessionStorage.setItem(t,m.default.encrypt(a))}}},{key:"_userLoginDeviceType",value:function(){return y.default.isClient?y.default.isMacClient?"MacClient":"WindowClient":y.default.isMobile?"Mobile":"Mac"==y.default.osType?"MacPC":"WindowPC"}},{key:"_classBeginStartHandler",value:function(e){y.default.classBeginTime=m.default.isMillisecondClass(e.ts)?e.ts:1e3*e.ts,y.default.classBegin=!0,b.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({mediaShareToID:"__all",synchronization:!(!h.default.hasRole.roleChairman&&!h.default.hasRole.roleTeachingAssistant&&y.default.companyidentify!==h.default.COMPANYIDENTIFY.MEETING)||b.default.getTkRoom().getMySelf().candraw,addPage:h.default.hasRole.roleChairman||h.default.hasRole.roleTeachingAssistant,pptVolumeSynchronization:h.default.hasRole.roleChairman||h.default.hasRole.roleTeachingAssistant});var t=p.default.getRoleHasDefalutAppPermissions();w.default.initAppPermissions(t),k.default.stopAllMediaShare(!0),this._autoPublishAV(),h.default.joinRoomInfo.isSupportCandraw&&h.default.hasRoomtype.oneToOne&&h.default.hasRole.roleStudent||h.default.joinRoomInfo.isSupportCandraw&&!h.default.hasRoomtype.oneToOne&&y.default.roomChange&&h.default.hasRole.roleStudent?b.default.getTkRoom().getMySelf().candraw||b.default.getTkRoom().getMySelf().publishstate===h.default.PUBLISHSTATE.PUBLISH_STATE_NONE?b.default.getTkRoom().getMySelf().candraw!==g.default.handler.getAppPermissions("canDraw")&&g.default.handler.setAppPermissions("canDraw",b.default.getTkRoom().getMySelf().candraw):C.default.setParticipantPropertyToAll(b.default.getTkRoom().getMySelf().id,{candraw:!b.default.getTkRoom().getMySelf().candraw}):b.default.getTkRoom().getMySelf().candraw!==g.default.handler.getAppPermissions("canDraw")&&C.default.setParticipantPropertyToAll(b.default.getTkRoom().getMySelf().id,{candraw:g.default.handler.getAppPermissions("canDraw")})}},{key:"_classBeginEndHandler",value:function(e){y.default.classBegin=!1,y.default.endClassBegin=!0;var t=!1;E.default.changeGroup(!1),b.default.getTkWhiteBoardManager().useWhiteboardTool("tool_mouse"),b.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({mediaShareToID:void 0,synchronization:!1,addPage:!1,pptVolumeSynchronization:!1}),b.default.getTkRoom().getMySelf().pointerstate&&C.default.setParticipantPropertyToAll(b.default.getTkRoom().getMySelf().id,{pointerstate:!1}),h.default.joinRoomInfo.isBeforeClassReleaseVideo&&!h.default.joinRoomInfo.isClassOverNotLeave&&h.default.hasRole.roleChairman&&b.default.getTkRoom().getMySelf().publishstate!==h.default.PUBLISHSTATE.PUBLISH_STATE_BOTH&&C.default.changeUserPublish(b.default.getTkRoom().getMySelf().id,h.default.PUBLISHSTATE.PUBLISH_STATE_BOTH),h.default.joinRoomInfo.isClassOverNotLeave||!h.default.joinRoomInfo.isClassOverNotLeave&&h.default.joinRoomInfo.isBeforeClassReleaseVideo||b.default.getTkRoom().getMySelf().publishstate!==h.default.PUBLISHSTATE.PUBLISH_STATE_NONE&&C.default.changeUserPublish(b.default.getTkRoom().getMySelf().id,h.default.PUBLISHSTATE.PUBLISH_STATE_NONE);var a=p.default.getRoleHasDefalutAppPermissions();return w.default.initAppPermissions(a),h.default.joinRoomInfo.hiddenClassBegin?(b.default.getTkRoom().leaveroom(!0),t=!1,setTimeout(function(){b.default.getTkRoom().uninit()},300)):h.default.joinRoomInfo.isClassOverNotLeave?(k.default.stopAllMediaShare(!0),h.default.hasRole.roleStudent&&!1!==b.default.getTkRoom().getMySelf().candraw&&C.default.setParticipantPropertyToAll(b.default.getTkRoom().getMySelf().id,{candraw:!1}),f.default.CoreController.dispatchEvent({type:"revertToStartupLayout_endClassbegin"}),t=!0):h.default.hasRole.roleChairman?(k.default.stopAllMediaShare(!0),C.default.delmsgTo__AllAll(),f.default.CoreController.dispatchEvent({type:"revertToStartupLayout_endClassbegin"}),t=!0):(b.default.getTkRoom().leaveroom(!0),t=!1,setTimeout(function(){b.default.getTkRoom().uninit()},300)),t}},{key:"_handlerCheckroomOrInitPlaybackInfo",value:function(e,t){if(0!=e)switch(L.Logger.error("checkroom error",e),e){case-1:v.default.showError(y.default.language.languageData.alertWin.login.func.checkMeeting.status_minus_1.text);break;case 3001:v.default.showError(y.default.language.languageData.alertWin.login.func.checkMeeting.status_3001.text);break;case 3002:v.default.showError(y.default.language.languageData.alertWin.login.func.checkMeeting.status_3002.text);break;case 3003:v.default.showError(y.default.language.languageData.alertWin.login.func.checkMeeting.status_3003.text);break;case 4007:v.default.showError(y.default.language.languageData.alertWin.login.func.checkMeeting.status_4007.text);break;case 4008:v.default.showError(y.default.language.languageData.alertWin.login.func.checkMeeting.status_4008.text);break;case 4020:v.default.showError(y.default.language.languageData.alertWin.login.func.checkMeeting.status_4020.text);break;case 4110:v.default.showError(y.default.language.languageData.alertWin.login.func.checkMeeting.status_4110.text);break;case 4109:v.default.showError(y.default.language.languageData.alertWin.login.func.checkMeeting.status_4109.text);break;case 4103:v.default.showError(y.default.language.languageData.alertWin.login.func.checkMeeting.status_4103.text);break;case 4112:v.default.showError(y.default.language.languageData.alertWin.login.func.checkMeeting.status_4112.text);break;case 4113:v.default.showError(y.default.language.languageData.alertWin.login.func.checkMeeting.status_4113.text);break;default:v.default.showError(y.default.language.languageData.alertWin.login.func.checkMeeting.status_defalut.text)}else{L.Logger.debug("checkroom  roominfo:",t);var a=m.default.decrypt(h.default.SERVICEINFO.joinUrl)||window.location.href,i=b.default.getTkRoom().getRoomProperties().chairmancontrol,o=void 0,n=void 0;y.default.playback?"mobile"===TK.SDKTYPE&&TK.global&&void 0!==TK.global.fakeJsSdkInitInfo.mobileInfo.clientType?t.skins&&"object"===(0,s.default)(t.skins[TK.global.fakeJsSdkInitInfo.mobileInfo.clientType])&&(o=t.skins[TK.global.fakeJsSdkInitInfo.mobileInfo.clientType].tplId,n=t.skins[TK.global.fakeJsSdkInitInfo.mobileInfo.clientType].skinId):t.skins&&"object"===(0,s.default)(t.skins.pc)&&(o=t.skins.pc.tplId):t.room&&"object"===(0,s.default)(t.room)&&(o=t.room.tplId);n={skin_orange:"skin_orange",skin_tigerlily:"skin_orange",skin_black:"skin_black",skin_default:"skin_beyond_default",skin_purple:"skin_beyond_default",skin_beyond:"skin_beyond_default",skin_beyond_default:"skin_beyond_default"}[n=t.room.colourid&&"default"!==t.room.colourid&&"0"!==t.room.colourid?"skin_"+t.room.colourid:t.room.skinId]||"skin_beyond_default",h.default.skin=n,y.default.playback&&t&&!n&&(h.default.layout=h.default.layout?h.default.layout:"layout_3",f.default.CoreController.dispatchEvent({type:"SwitchLayout",nowLayout:h.default.layoutParams[h.default.layout]}),n="purple");var l=b.default.getTkRoom().getVideoProfile(),r={starttime:b.default.getTkRoom().getRoomProperties().starttime,endtime:b.default.getTkRoom().getRoomProperties().endtime,nickname:b.default.getTkRoom().getMySelf().nickname,thirdid:b.default.getTkRoom().getMySelf().id,joinUrl:m.default.encrypt(a),serial:b.default.getTkRoom().getRoomProperties().serial,roomrole:Number(b.default.getTkRoom().getMySelf().role),roomtype:Number(b.default.getTkRoom().getRoomProperties().roomtype),companyid:Number(b.default.getTkRoom().getRoomProperties().companyid),maxvideo:Number(b.default.getTkRoom().getRoomProperties().maxvideo),isLivebypass:void 0!==b.default.getTkRoom().getRoomProperties().livebypass&&null!==b.default.getTkRoom().getRoomProperties().livebypass&&1===Number(b.default.getTkRoom().getRoomProperties().livebypass),autoStartAV:!y.default.playback&&!!i&&1===Number(i.substr(23,1)),autoClassBegin:!y.default.playback&&!!i&&1===Number(i.substr(32,1)),studentCloseMyseftAV:!y.default.playback&&!!i&&1===Number(i.substr(33,1)),hiddenClassBegin:!y.default.playback&&!!i&&1===Number(i.substr(34,1)),isUploadH5Document:!(y.default.playback||!i)&&1===Number(i.substr(35,1)),assistantOpenMyseftAV:!!i&&1===Number(i.substr(36,1)),isSupportCandraw:!(y.default.playback||!i)&&1===Number(i.substr(37,1)),isSupportPageTrun:!(y.default.playback||!i)&&1===Number(i.substr(38,1)),isShowTheAnswer:!(y.default.playback||!i)&&1===Number(i.substr(42,1)),hasCoursewareRemarks:!(y.default.playback||!i)&&1===Number(i.substr(43,1)),isDoubleScreenDisplay:!(y.default.playback||!i)&&1===Number(i.substr(39,1)),isBeforeClassReleaseVideo:!(y.default.playback||!i)&&1===Number(i.substr(41,1)),isClassOverNotLeave:!(y.default.playback||!i)&&1===Number(i.substr(47,1)),videoWhiteboardDraw:!(y.default.playback||!i)&&1===Number(i.substr(48,1)),localRecord:!(y.default.playback||y.default.isClient||!i)&&1===Number(i.substr(49,1)),videoInFullScreen:!(y.default.playback||!i)&&1===Number(i.substr(50,1)),pictureInPicture:!(y.default.playback||!i)&&1===Number(i.substr(51,1)),pauseWhenOver:!(y.default.playback||!i)&&1===Number(i.substr(52,1)),classBeginEndCloseClient:!(y.default.playback||!i)&&1===Number(i.substr(54,1)),chatSendImg:!(y.default.playback||!i)&&1===Number(i.substr(53,1)),isDocumentClassification:!(y.default.playback||!i)&&1===Number(i.substr(56,1)),brushName:!(y.default.playback||!i)&&1===Number(i.substr(58,1)),hasCaptureImg:!(y.default.playback||!i)&&1===Number(i.substr(59,1)),pushflow:!(y.default.playback||!i)&&1===Number(i.substr(60,1)),qrCode:!(y.default.playback||!i)&&1===Number(i.substr(69,1)),shapeUndoRedoClear:!(y.default.playback||!i)&&1===Number(i.substr(68,1)),isMoviesShare:!!i&&1===Number(i.substr(70,1)),isDoubleShare:!!i&&1===Number(i.substr(72,1)),endOfClassHoursIsClassOver:!(y.default.playback||!i)&&1===Number(i.substr(71,1)),customTrophysVoice:!!i&&1===Number(i.substr(44,1)),pointerReminder:!!i&&1===Number(i.substr(73,1)),areaExchange:!1,tourCancelBtn:!(y.default.playback||!i)&&1===Number(i.substr(78,1)),isHasVideo:!!i&&1===Number(i.substr(1,1)),customWhiteboardBackground:!!i&&1===Number(i.substr(81,1)),createOnlyAudioRoom:!(y.default.playback||!i)&&1===Number(i.substr(80,1)),isConfigVideoMirror:!(y.default.playback||!i)&&1===Number(i.substr(55,1)),sharedMouseLocus:!(y.default.playback||!i)&&1===Number(i.substr(97,1)),preLoading:!(y.default.playback||!i)&&1===Number(i.substr(102,1)),toolBox:{answer:!(y.default.playback||!i)&&1===Number(i.substr(61,1)),turnplate:!(y.default.playback||!i)&&1===Number(i.substr(62,1)),timer:!(y.default.playback||!i)&&1===Number(i.substr(63,1)),responder:!(y.default.playback||!i)&&1===Number(i.substr(64,1)),moreBlackboard:!(y.default.playback||!i)&&1===Number(i.substr(65,1)),destTopShare:!(y.default.playback||!i)&&1===Number(i.substr(66,1))},isHandsUpOnStage:!0,pptpagingoptions:!(y.default.playback||!i)&&1===Number(i.substr(112,1)),mouseoptions:!(y.default.playback||!i)&&1===Number(i.substr(113,1)),shapeoptions:!(y.default.playback||!i)&&1===Number(i.substr(114,1)),fontoptions:!(y.default.playback||!i)&&1===Number(i.substr(115,1)),VideosSequence:!(y.default.playback||!i)&&1===Number(i.substr(116,1)),networkstate:!(y.default.playback||!i)&&1===Number(i.substr(117,1)),issearchwrapper:!(y.default.playback||!i)&&1===Number(i.substr(118,1)),isJapaneseTranslate:!(y.default.playback||!i)&&1===Number(i.substr(122,1)),isJoinRoomTip:!(y.default.playback||!i)&&1===Number(i.substr(90,1)),isStuHideOtherVideo:!(y.default.playback||!i)&&1===Number(i.substr(119,1)),clickCapture:!(y.default.playback||!i)&&1===Number(i.substr(131,1)),hideRemoveStudentBtn:!(y.default.playback||!i)&&1===Number(i.substr(135,1)),isH5MediaOutput:!1,isShowBingCourse:!(y.default.playback||!i)&&1===Number(i.substr(143,1)),isStudentUpdateFile:!(y.default.playback||!i)&&1===Number(i.substr(145,1)),isCloseAutoGainControl:!(y.default.playback||!i)&&1===Number(i.substr(127,1)),isCloseEchoCancellation:!(y.default.playback||!i)&&1===Number(i.substr(127,1)),isCloseNoiseSuppression:!(y.default.playback||!i)&&1===Number(i.substr(128,1)),jumpurl:y.default.playback?"":m.default.getUrlParams("jumpurl"),roomname:b.default.getTkRoom().getRoomProperties().roomname,pullConfigure:b.default.getTkRoom().getRoomProperties().pullConfigure,pushConfigure:b.default.getTkRoom().getRoomProperties().pushConfigure,pushUrl:b.default.getTkRoom().getRoomProperties().pullid,helpcallbackurl:t.helpcallbackurl,classRoomLogoUrl:t.room.classroomlogo?t.room.classroomlogo:void 0,whiteboardcolor:y.default.playback?void 0!==b.default.getTkRoom().getRoomProperties().whiteboardcolor?Number(b.default.getTkRoom().getRoomProperties().whiteboardcolor)-1:0:void 0!==t.room.whiteboardcolor?Number(t.room.whiteboardcolor)-1:0,template:h.default.testTemplate?h.default.testTemplate:o&&!/^\d*$/g.test(o)?"template_"+o:h.default.template,skin:b.default.getTkRoom().getRoomProperties().skinId,color:b.default.getTkRoom().getRoomProperties().colourid,localRecordInfo:{recorduploadaddr:b.default.getTkRoom().getRoomProperties().recorduploadaddr,localrecordtype:b.default.getTkRoom().getRoomProperties().localrecordtype},foregroundpic:b.default.getTkRoom().getRoomProperties().foregroundpic,voicefileUrl:b.default.getTkRoom().getRoomProperties().voicefile,customTrophys:b.default.getTkRoom().getRoomProperties().trophy?b.default.getTkRoom().getRoomProperties().trophy:void 0,pushflowaddr:b.default.getTkRoom().getRoomProperties().pushflowaddr?b.default.getTkRoom().getRoomProperties().pushflowaddr:void 0,roomVideoWidth:l.width,roomVideoHeight:l.height,endImgUrl:t.classendbg||"",helpaddress:t.helpaddress||""};if("function"==typeof TK.DeviceMgr.setAudioProcessing&&TK.DeviceMgr.setAudioProcessing({autoGainControl:!r.isCloseAutoGainControl,echoCancellation:!r.isCloseEchoCancellation,noiseSuppression:!r.isCloseNoiseSuppression}),Object.customAssign(r,{}),r.isLivebypass&&y.default.isClient&&h.default.joinRoomInfo.pushflowaddr&&(r.toolBox.destTopShare=!1),r.roomtype===h.default.ROOMTYPE.oneToOne&&i&&1===Number(i.substr(36,1))){r.roomtype=3,y.default.roomChange=!0;var d="layout_1";"layout_53"===h.default.layout&&(d="layout_7"),h.default.layout=d,f.default.CoreController.dispatchEvent({type:"SwitchLayout",nowLayout:h.default.layoutParams[h.default.layout]})}if(b.default.setRoomName(b.default.getTkRoom().getRoomProperties().roomname),b.default.setUserName(b.default.getTkRoom().getMySelf().nickname),b.default.setUserThirdid(b.default.getTkRoom().getMySelf().id),document.head.getElementsByTagName("title")[0].innerHTML=b.default.getRoomName(),h.default.bindRoomInfoToTkConstant(r),h.default.bindParticipantHasRoleToTkConstant(),h.default.bindParticipantHasRoomtypeToTkConstant(),h.default.updateTemplate("template_beyond"),"default"!==r.skin&&r.skin?r.skin&&h.default.updateSkin(r.skin):r.color&&h.default.updateSkin(r.color),y.default.videoScale=h.default.joinRoomInfo.roomVideoWidth/h.default.joinRoomInfo.roomVideoHeight,y.default.isClient&&!y.default.isMacClient&&b.default.getNativeInterface()&&b.default.getNativeInterface().getMonitorCount(function(e){e>1&&h.default.joinRoomInfo.isDoubleScreenDisplay&&(y.default.doubleScreen=!0,b.default.getNativeInterface().enableViceMonitor())}),y.default.showShapeAuthor=h.default.joinRoomInfo.brushName&&!y.default.playback,b.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({mediaSharePauseWhenOver:h.default.joinRoomInfo.pauseWhenOver,isLoadDocumentRemark:h.default.joinRoomInfo.hasCoursewareRemarks,canRemark:h.default.joinRoomInfo.hasCoursewareRemarks,showShapeAuthor:y.default.showShapeAuthor,isOnlyUndoRedoClearMyselfShape:h.default.hasRole.roleStudent&&h.default.joinRoomInfo.shapeUndoRedoClear,isH5MediaOutput:h.default.joinRoomInfo.isH5MediaOutput,isH5MediaOutputDominant:h.default.joinRoomInfo.isH5MediaOutput&&h.default.hasRole.roleChairman,documentToolBarConfig:{isLoadRemark:h.default.joinRoomInfo.hasCoursewareRemarks},whiteboardToolBarConfig:{loadWhiteboardTools:{laser:h.default.hasRole.roleChairman,clear:h.default.hasRole.roleChairman||(h.default.hasRole.roleStudent||h.default.hasRole.roleTeachingAssistant)&&h.default.joinRoomInfo.shapeUndoRedoClear,undo:h.default.hasRole.roleChairman||(h.default.hasRole.roleStudent||h.default.hasRole.roleTeachingAssistant)&&h.default.joinRoomInfo.shapeUndoRedoClear,redo:h.default.hasRole.roleChairman||(h.default.hasRole.roleStudent||h.default.hasRole.roleTeachingAssistant)&&h.default.joinRoomInfo.shapeUndoRedoClear}}}),!y.default.playback){var u=(new Date).getTime();this._saveAddressToSession(u),window.location.hash="call?timestamp="+u+"&reset=true&tplId="+h.default.template.replace(/template_/g,"")+"&layout="+h.default.layout.replace(/layout_/g,"")+"&playHostname="+h.default.SERVICEINFO.webHostname}}}},{key:"rtmpStartBroadcast",value:function(){if(y.default.isClient&&h.default.hasRole.roleChairman&&(h.default.joinRoomInfo.pushflow||h.default.joinRoomInfo.isLivebypass)&&h.default.joinRoomInfo.pushflowaddr){y.default.isStartRtml=!0;var e=m.default.createBurglarChain("/live"+h.default.joinRoomInfo.pushflowaddr.split("live")[1],y.default.serviceTime/1e3),t=e.wsSecret,a=e.wsTime;console.info("rtmp TkUtils.createBurglarChain resulut wsTime  is  "+a);var i=h.default.joinRoomInfo.pushflowaddr+"?wsSecret="+t+"&wsTime="+a;b.default.getNativeInterface().initBroadcast(i,10,2,1920,1080);var o;y.default.rtmpStream&&y.default.rtmpStream.destroy&&(y.default.rtmpStream.destroy(),y.default.rtmpStream=void 0),o=b.default.getTkRoom().getMySelf().id+":screen",y.default.rtmpStream=TK.Stream({audio:!0,video:!0,screen:!0,data:!1,extensionId:o,attributes:{type:"screen"}},!0),y.default.rtmpStream.create(),b.default.getNativeInterface().startBroadcast(o)}}},{key:"rtmpStopBroadcast",value:function(){y.default.isClient&&h.default.hasRole.roleChairman&&(h.default.joinRoomInfo.pushflow||h.default.joinRoomInfo.isLivebypass)&&h.default.joinRoomInfo.pushflowaddr&&(b.default.getNativeInterface().stopBroadcast(),b.default.getNativeInterface().uninitBroadcast(),y.default.rtmpStream&&y.default.rtmpStream.destroy&&(y.default.rtmpStream.destroy(),y.default.rtmpStream=void 0))}},{key:"_compareDocServerSpeedSwitchCND",value:function(){var e=function(e,t){if("function"==typeof t)if("mobile"===TK.SDKTYPE){if(b.default.getTkRoom()&&"function"==typeof b.default.getTkRoom().getLocalStorageItem)try{b.default.getTkRoom().getLocalStorageItem(e,function(e){t(e)})}catch(e){L.Logger.error("getLocalStorageItem error:",e),t("")}}else t(L.Utils.localStorage.getItem("tkDocAddressKey"))};e("tkDocAddressKey",function(t){if(!t){var a=void 0,i=1,o=[],n=!1,l=function(t){e("tkDocAddressKey",function(e){e||t!==window.WBGlobal.docAddressKey&&(b.default.getTkWhiteBoardManager().switchDocAddress(t,!1),L.Logger.info("auto switch cdn , cdn key is "+window.WBGlobal.docAddressKey+", address is "+window.WBGlobal.nowUseDocAddress))})},s=function(e,t,a){return e+"://"+t+":"+a};!function e(){var t,r,d=[],u=[];(t=window.WBGlobal.docAddressList,r=3,t.filter(function(e,t){return(i-1)*r<=t&&t<i*r})).forEach(function(t,r){!function(e,t,a,i,o){var n={},l=(new Date).getTime(),s=e+"/speed.bmp?ts="+l,r=new Image;r.onload=function(){var e=(new Date).getTime();n={code:0,loadingTime:o?e-l-50:e-l},"function"==typeof t&&t(n,a,i)},r.onerror=function(){n={code:-1,loadingTime:void 0},"function"==typeof t&&t(n,a,i)},r.src=s}(s(t.protocol,t.hostname,t.port),function(t,i,r){L.Logger.info("load backup document cdn  speed.bmp ,cdn address is "+s(r.protocol,r.hostname,r.port)+" , response is "+L.Utils.toJsonStringify(t)),0===t.code&&t.loadingTime?n||(u.push({hostname:r.hostname,speed:t.loadingTime}),clearTimeout(a),a=setTimeout(function(){if(u.length>1){var e=u.sort(function(e,t){return e.speed-t.speed});l(e[0].hostname)}else l(r.hostname);n=!0},100)):(d.push(1),o.push(1)),o.length===window.WBGlobal.docAddressList.length?l(window.WBGlobal.docAddressList[0].hostname):3===d.length&&e()},r,t,1===i&&0===r)}),i+=1}()}})}}]),e}());t.default=D},eQYT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(a("FyfS")),o=r(a("io0T")),n=r(a("uuqz")),l=r(a("aJKe")),s=r(a("HPAy"));r(a("mrNk"));function r(e){return e&&e.__esModule?e:{default:e}}var d={},u="v3.2.0",c="2018102520",f=!1;try{u="3.3.0",c=2020030300,f=!1}catch(e){L.Logger.warning("There is no configuration version number and version time[__VERSIONS__ , __VERSIONSTIME__]!"),L.Logger.warning("There is no configuration dev mark[__DEV__]!")}d.VERSIONS=u,d.VERSIONSTIME=c,d.newpptVersions=2017091401,d.remoteNewpptUpdateTime=2018032113,d.debugFromAddress=!!n.default.getUrlParams("debug")&&""!=n.default.getUrlParams("debug"),d.DEV=f||d.debugFromAddress,d.role={},(0,o.default)(d.role,{roleChairman:{value:0,writable:!1},roleTeachingAssistant:{value:1,writable:!1},roleStudent:{value:2,writable:!1},roleAudit:{value:3,writable:!1},rolePatrol:{value:4,writable:!1},roleClassTeacher:{value:5,writable:!1},rolePlayback:{value:-1,writable:!1},roleRecord:{value:88,writable:!1}});var h={};(0,o.default)(h,{roomConnected:{value:"room-connected",writable:!1,enumerable:!0},roomConnectFail:{value:"room-connect-fail",writable:!1,enumerable:!0},roomCheckroom:{value:"room-checkroom",writable:!1,enumerable:!0},roomCheckroomPlayback:{value:"room-checkroom-playback",writable:!1,enumerable:!0},roomParticipantJoin:{value:"room-participant_join",writable:!1,enumerable:!0},roomAudiovideostateSwitched:{value:"room-audiovideostate-switched",writable:!1,enumerable:!0},roomModeChanged:{value:"room-mode-changed",writable:!1,enumerable:!0},roomUsernetworkstateChanged:{value:"room-usernetworkstate-changed",writable:!1,enumerable:!0},roomUserscreenstateChanged:{value:"room-userscreenstate-changed",writable:!1,enumerable:!0},roomParticipantLeave:{value:"room-participant_leave",writable:!1,enumerable:!0},roomParticipantEvicted:{value:"room-participant_evicted",writable:!1,enumerable:!0},roomTextMessage:{value:"room-text-message",writable:!1,enumerable:!0},roomPubmsg:{value:"room-pubmsg",writable:!1,enumerable:!0},roomDelmsg:{value:"room-delmsg",writable:!1,enumerable:!0},roomMsglist:{value:"room-msglist",writable:!1,enumerable:!0},roomUserpropertyChanged:{value:"room-userproperty-changed",writable:!1,enumerable:!0},roomUservideostateChanged:{value:"room-uservideostate-changed",writable:!1,enumerable:!0},roomUseraudiostateChanged:{value:"room-useraudiostate-changed",writable:!1,enumerable:!0},roomFiles:{value:"room-files",writable:!1,enumerable:!0},roomAddFile:{value:"room-add-file",writable:!1,enumerable:!0},roomDeleteFile:{value:"room-delete-file",writable:!1,enumerable:!0},roomUpdateFile:{value:"room-update-file",writable:!1,enumerable:!0},roomDisconnected:{value:"room-disconnected",writable:!1,enumerable:!0},roomLeaveroom:{value:"room-leaveroom",writable:!1,enumerable:!0},roomPlaybackClearAll:{value:"room-playback-clear_all",writable:!1,enumerable:!0},roomPlaybackDuration:{value:"room-playback-duration",writable:!1,enumerable:!0},roomPlaybackPlaybackEnd:{value:"room-playback-playbackEnd",writable:!1,enumerable:!0},roomPlaybackPlaybackUpdatetime:{value:"room-playback-playback_updatetime",writable:!1,enumerable:!0},roomPlaybackClearAllFromPlaybackController:{value:"room-playback-clear_all-from-playback-controller",writable:!1,enumerable:!0},getUserMediaFailure:{value:"getUserMedia_failure",writable:!1,enumerable:!0},roomServeraddressUpdate:{value:"room-serveraddress-update",writable:!1,enumerable:!0},roomNativeNotification:{value:"room-native-notification",writable:!1,enumerable:!0},roomErrorNotice:{value:"room-error-notice",writable:!1,enumerable:!0},deviceNotAvailable:{value:"device-not-available",writable:!1,enumerable:!0},accessAccepted:{value:"access-accepted",writable:!1,enumerable:!0},accessDenied:{value:"access-denied",writable:!1,enumerable:!0}});var m={};(0,o.default)(m,{accessAccepted:{value:"access-accepted",writable:!1,enumerable:!0},accessDenied:{value:"access-denied",writable:!1,enumerable:!0},streamEnded:{value:"stream-ended",writable:!1}});var p={};(0,o.default)(p,{onResize:{value:"onResize",writable:!1},onMessage:{value:"onMessage",writable:!1},onBeforeUnload:{value:"onBeforeUnload",writable:!1}});var g={};(0,o.default)(g,{onKeydown:{value:"onKeydown",writable:!1},onFullscreenchange:{value:"onFullscreenchange",writable:!1}});var v={};(0,o.default)(v,{getGiftInfo:{value:"get-gift-info",writable:!1,enumerable:!0},sendGift:{value:"send-gift",writable:!1,enumerable:!0},roomStart:{value:"room-start",writable:!1,enumerable:!0},roomOver:{value:"room-over",writable:!1,enumerable:!0}});var y={};(0,o.default)(y,{initSystemStyleJson:{value:"init-system-style-json",writable:!1},updateSystemStyleJson:{value:"update-system-style-json",writable:!1}}),d.EVENTTYPE={},(0,o.default)(d.EVENTTYPE,{RoomEvent:{value:h,writable:!1},StreamEvent:{value:m,writable:!1},WindowEvent:{value:p,writable:!1},DocumentEvent:{value:g,writable:!1},WebDaoEvent:{value:v,writable:!1},OtherEvent:{value:y,writable:!1}}),d.ROOMTYPE={},(0,o.default)(d.ROOMTYPE,{oneToOne:{value:0,writable:!1}}),d.SERVICEINFO={},d.bindServiceinfoToTkConstant=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.protocol,a=e.web_host,i=e.web_port,o=(e.doc_host,e.doc_port,e.backup_doc_host,e.backup_doc_port,e.isInit),r=void 0===o||o;t=t||window.location.protocol?window.location.protocol.replace(/:/g,""):"https";var u=n.default.getUrlParams("host")||window.location.hostname;if(88!==s.default.logintype){var c=L.Utils.localStorage.getItem("tkLocalstorageServerName");if(c&&null!=c&&"undefined"!==c&&"null"!==c){var f=u.indexOf(".");if(f>0){var h=u.substring(0,f),m=new RegExp(h);u=u.replace(m,c)}}}var p=a||u,g=i||"http"===t?80:443,v={webProtocol:t,webHostname:p,webPort:g,sdkPort:88===s.default.logintype?80:443,webProtocolAndHostname:t+"://"+p,webAddress:t+"://"+p+":"+g};r&&(v.joinUrl=n.default.encrypt(window.location.href)),Object.customAssign(d.SERVICEINFO,v),r&&console.info("encrypt_tk_info:\n",d.SERVICEINFO.joinUrl),l.default&&l.default.CoreController&&l.default.CoreController.dispatchEvent&&l.default.CoreController.dispatchEvent({type:"bindServiceinfoToTkConstant",message:{SERVICEINFO:d.SERVICEINFO}})},d.bindServiceinfoToTkConstant(),d.PUBLISHSTATE={},(0,o.default)(d.PUBLISHSTATE,{PUBLISH_STATE_NONE:{value:TK.PUBLISH_STATE_NONE,writable:!1},PUBLISH_STATE_AUDIOONLY:{value:TK.PUBLISH_STATE_AUDIOONLY,writable:!1},PUBLISH_STATE_VIDEOONLY:{value:TK.PUBLISH_STATE_VIDEOONLY,writable:!1},PUBLISH_STATE_BOTH:{value:TK.PUBLISH_STATE_BOTH,writable:!1},PUBLISH_STATE_MUTEALL:{value:TK.PUBLISH_STATE_MUTEALL,writable:!1}}),d.STANDARDSIZE=19.2;var S=["jpg","jpeg","png","bmp","gif"],b=["xls","xlsx","ppt","pptx","doc","docx","txt","pdf"].concat(S),C=["mp3","mp4"],k=["zip"];d.FILETYPE={imgFileListAccpetArr:S,documentFileListAccpetArr:b,mediaFileListAccpetArr:C,h5DocumentFileListAccpetArr:k,imgFileListAccpet:"."+S.join(",."),documentFileListAccpet:"."+b.join(",."),mediaFileListAccpet:"."+C.join(",."),h5DocumentFileListAccpet:"."+k.join(",.")},d.LOGLEVEL={},(0,o.default)(d.LOGLEVEL,{DEBUG:{value:0,writable:!1},TRACE:{value:1,writable:!1},INFO:{value:2,writable:!1},WARNING:{value:3,writable:!1},ERROR:{value:4,writable:!1},NONE:{value:5,writable:!1}}),d.COMPANYIDENTIFY={},(0,o.default)(d.COMPANYIDENTIFY,{DEFAULT:{value:"1",writable:!1},NETWORKSCHOOL:{value:"2",writable:!1},MEETING:{value:"3",writable:!1}}),d.changeDocumentFileListAccpetArr=function(e,t,a){if(e)if(n.default.isArray(e)){var o=!0,s=!1,r=void 0;try{for(var u,c=(0,i.default)(e);!(o=(u=c.next()).done);o=!0){var f=u.value;b.push(f)}}catch(e){s=!0,r=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw r}}}else"string"==typeof e&&b.push(e);if(t)if(n.default.isArray(t)){var h=!0,m=!1,p=void 0;try{for(var g,v=(0,i.default)(t);!(h=(g=v.next()).done);h=!0){var y=g.value;C.push(y)}}catch(e){m=!0,p=e}finally{try{!h&&v.return&&v.return()}finally{if(m)throw p}}}else"string"==typeof t&&C.push(t);if(a)if(n.default.isArray(a)){var S=!0,w=!1,T=void 0;try{for(var E,I=(0,i.default)(a);!(S=(E=I.next()).done);S=!0){var D=E.value;k.push(D)}}catch(e){w=!0,T=e}finally{try{!S&&I.return&&I.return()}finally{if(w)throw T}}}else"string"==typeof a&&k.push(a);d.FILETYPE={documentFileListAccpetArr:b,mediaFileListAccpetArr:C,h5DocumentFileListAccpetArr:k,documentFileListAccpet:"."+b.join(",."),mediaFileListAccpet:"."+C.join(",."),h5DocumentFileListAccpet:"."+k.join(",.")},l.default.CoreController.dispatchEvent({type:"changeDocumentFileListAccpetArr"})},d.joinRoomInfo={},d.bindRoomInfoToTkConstant=function(e){e?(L.Logger.debug("joinRoomInfo:",e),d.joinRoomInfo=e,l.default.CoreController.dispatchEvent({type:"bindRoomInfoToTkConstant",message:{joinRoomInfo:d.joinRoomInfo}})):L.Logger.error("joinRoomInfo is not exist!")},d.hasRole={},d.bindParticipantHasRoleToTkConstant=function(){d.joinRoomInfo?((0,o.default)(d.hasRole,{roleChairman:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.roleChairman,writable:!1},roleTeachingAssistant:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.roleTeachingAssistant,writable:!1},roleStudent:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.roleStudent,writable:!1},roleAudit:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.roleAudit,writable:!1},rolePatrol:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.rolePatrol,writable:!1},roleClassTeacher:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.roleClassTeacher,writable:!1},rolePlayback:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.rolePlayback,writable:!1},roleRecord:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.roleRecord,writable:!1}}),l.default.CoreController.dispatchEvent({type:"bindParticipantHasRoleToTkConstant",message:{hasRole:d.hasRole}})):L.Logger.error("TkConstant.joinRoomInfo is not exist!")},d.hasRoomtype={},d.bindParticipantHasRoomtypeToTkConstant=function(){d.joinRoomInfo?((0,o.default)(d.hasRoomtype,{oneToOne:{value:d.joinRoomInfo&&d.joinRoomInfo.roomtype===d.ROOMTYPE.oneToOne,writable:!1}}),l.default.CoreController.dispatchEvent({type:"bindParticipantHasRoomtypeToTkConstant",message:{hasRoomtype:d.hasRoomtype}})):L.Logger.error("TkConstant.joinRoomInfo is not exist!")},d.streamFailureType={},(0,o.default)(d.streamFailureType,{udpNotOnceSuccess:{value:1,writable:!1},publishvideoFailure_notOverrun:{value:2,writable:!1},publishvideoFailure_overrun:{value:3,writable:!1},mobileHome:{value:4,writable:!1},udpMidwayDisconnected:{value:5,writable:!1},unpublishStreamNotBelongremoteStreams:{value:6,writable:!1}}),d.template="template_beyond",d.updateTemplate=function(e){var t=d.template;$(document.body).removeClass(t+" "+d.template+" "+(s.default.isClient?"clientApp":"webpageApp")).addClass(d.template+" "+(s.default.isClient?"clientApp":"webpageApp")),l.default.CoreController.dispatchEvent({type:d.EVENTTYPE.OtherEvent.initSystemStyleJson})};var w=window.GLOBAL.getUrlParams("colourid");w&&"0"!==w||(w="default");var T=window.GLOBAL.getUrlParams("skinId");"default"===T&&(T="skin_"+w);d.skin={tigerlily:"skin_orange",skin_tigerlily:"skin_orange",black:"skin_black",skin_black:"skin_black",default:"skin_beyond_default",purple:"skin_beyond_default",beyond:"skin_beyond_default",beyond_default:"skin_beyond_default",skin_default:"skin_beyond_default",skin_purple:"skin_beyond_default",skin_beyond:"skin_beyond_default",skin_beyond_default:"skin_beyond_default"}[T]||"skin_beyond_default";d.updateSkin=function(e){var t={tigerlily:"skin_orange",skin_tigerlily:"skin_orange",black:"skin_black",skin_black:"skin_black",default:"skin_beyond_default",purple:"skin_beyond_default",beyond:"skin_beyond_default",beyond_default:"skin_beyond_default",skin_default:"skin_beyond_default",skin_purple:"skin_beyond_default",skin_beyond:"skin_beyond_default",skin_beyond_default:"skin_beyond_default"}[e]||"skin_beyond_default";d.skin=t;var a=["skin_orange","skin_black","skin_beyond_default"];!function(){if(document.getElementById("skinContainer")&&!/beyond.css/.test(document.getElementById("skinContainer").href))try{document.head.removeChild(document.getElementById("skinContainer"))}catch(e){L.Logger.error(e)}document.getElementById("skinContainer")||$(document.head).append('<link id="skinContainer" rel="stylesheet" href="./cssTemplate/beyond.css"/>')}();for(var i=0;i<a.length;i++)$(document.body).removeClass(a[i]);$(document.body).addClass(d.skin+" ").attr("data-skin",d.skin),l.default.CoreController.dispatchEvent({type:"updateSkin",message:{skin:d.skin}})},d.layoutParams={layout_1:"CoursewareDown",layout_2:"VideoDown",layout_3:"Encompassment",layout_4:"Bilateral",layout_6:"MainPeople",layout_7:"OnlyVideo",layout_51:"oneToOne",layout_52:"oneToOneDoubleDivision",layout_53:"oneToOneDoubleVideo"};var E="1",I="layout_1";n.default.getUrlParams("layout").length?(I="layout_"+(E=(E=n.default.getUrlParams("layout")||"1")+""=="5"?"4":E),d.layoutParams[I]||(I="layout_1")):n.default.getUrlParams("position").length&&(I="layout_"+(E=n.default.getUrlParams("position")||"51"),d.layoutParams[I]||(I="layout_51")),d.layout=I,window.TkConstant=d,t.default=d},eTdC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(a("Yz+Y")),o=u(a("iCc5")),n=u(a("V7oC")),l=u(a("FYw3")),s=u(a("mRg0")),r=u(a("q1tI")),d=u(a("HPAy"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props.buttonClick;return r.default.createElement("button",{title:d.default.language.languageData.toolContainer.toolIcon.guide.title,className:"Tk-header-icon icon-guide",onClick:e})}}]),t}(r.default.Component);t.default=c},eebF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=v(a("HaWR")),o=v(a("Yz+Y")),n=v(a("iCc5")),l=v(a("V7oC")),s=v(a("FYw3")),r=v(a("mRg0")),d=(0,v(a("CSPP")).default)(["\n    display: ","\n"],["\n    display: ","\n"]);a("p9a2");var u=v(a("q1tI")),c=v(a("HPAy")),f=v(a("eQYT")),h=v(a("aJKe")),m=v(a("mrNk")),p=(v(a("3mpg")),v(a("pIe1"))),g=v(a("uuqz"));v(a("XbJA"));function v(e){return e&&e.__esModule?e:{default:e}}var y=v(a("vOnD")).default.div.attrs({className:"qrCode-teachTool-wrap"})(d,function(e){return m.default.getTkRoom().getMySelf().candraw?e.isShow:"none"}),S=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={qrCodeTeachToolWrapDisplay:"none",resizeInfo:{width:0,height:0}},a.getFilestop=null,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){h.default.CoreController.addEventListener("handleQrCodeShow",this.handleqrCodeShow.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){h.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.qrCodeTeachToolWrapDisplay!==this.state.qrCodeTeachToolWrapDisplay&&"block"===this.state.qrCodeTeachToolWrapDisplay&&this.setDefaultPosition(),this.updateResize()}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;if("ShowPage"===t.name){var a=t.data;"string"==typeof a&&(a=JSON.parse(a));var i=a,o=i.isQrcode,n=i.userid,l=m.default.getTkRoom().getMySelf().id;1==o&&n===l&&this.qrCodeCloseHandel()}if("ShowPage_extendWhiteBoard"===t.name){var s=t.data;"string"==typeof s&&(s=JSON.parse(s));var r=s,d=r.isQrcode,u=r.userid,c=m.default.getTkRoom().getMySelf().id;1==d&&u===c&&this.qrCodeCloseHandel()}}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"ClassBegin":this.qrCodeCloseHandel()}}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,i=document.getElementById(t),o=document.querySelector(a.bounds);if(i&&o&&a.changePosition&&"function"==typeof a.changePosition){a.changePosition(t,{percentLeft:.5,percentTop:.5,isDrag:!1},!1)}}},{key:"handleqrCodeShow",value:function(e){if("none"==this.state.qrCodeTeachToolWrapDisplay&&e.data.isShow){clearInterval(this.getFilestop),this.setState({qrCodeTeachToolWrapDisplay:"block"});var t=encodeURI(m.default.getTkRoom().getMySelf().nickname),a=m.default.getTkRoom().getMySelf().id+"_"+g.default.getGUID().getGUIDDate()+g.default.getGUID().getGUIDTime();if(-1!=f.default.SERVICEINFO.webAddress.indexOf("demo")){var i="http://demo.talk-cloud.net/static/qrCode/qrCode.html?serial="+f.default.joinRoomInfo.serial+"&userid="+m.default.getTkRoom().getMySelf().id+"&sender="+t+"&key="+f.default.joinRoomInfo.companyid+"&url="+f.default.SERVICEINFO.webAddress+"&languageName="+c.default.languageName+"&ts="+(new Date).getTime()+"&codeid="+a+"&mustPush=1&whiteboardType="+e.data.whiteboardType;$("#qrCode").qrcode({render:"canvas",width:256,height:256,text:i,typeNumber:-1,correctLevel:0,background:"#ffffff",foreground:"#000000",ecLevel:"L",radius:.5})}else{var o=f.default.SERVICEINFO.webAddress+"/static/qrCode/qrCode.html?serial="+f.default.joinRoomInfo.serial+"&userid="+m.default.getTkRoom().getMySelf().id+"&sender="+t+"&key="+f.default.joinRoomInfo.companyid+"&url="+f.default.SERVICEINFO.webAddress+"&languageName="+c.default.languageName+"&ts="+(new Date).getTime()+"&codeid="+a+"&mustPush=1&whiteboardType="+e.data.whiteboardType;$("#qrCode").qrcode({render:"canvas",width:256,height:256,text:o,typeNumber:-1,correctLevel:0,background:"#ffffff",foreground:"#000000",ecLevel:"L",radius:.5})}}}},{key:"qrCodeCloseHandel",value:function(){clearInterval(this.getFilestop),$("#qrCode canvas").remove(),this.setState({qrCodeTeachToolWrapDisplay:"none"}),h.default.CoreController.dispatchEvent({type:"handleQrCodeShow",data:{isShow:!1}}),h.default.CoreController.dispatchEvent({type:"colse-holdAll-item",message:{type:"qrCode"}})}},{key:"updateResize",value:function(){var e=this.props.id,t=document.getElementById(e);if(t){var a=c.default.windowInnerWidth/f.default.STANDARDSIZE,o=t.offsetWidth/a,n=t.offsetHeight/a;!this.state.resizeInfo||(0,i.default)(this.state.resizeInfo.width,o)&&(0,i.default)(this.state.resizeInfo.height,n)||(this.state.resizeInfo={width:o,height:n},this.setState({resizeInfo:this.state.resizeInfo}))}}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.qrCodeDrag,i=e.draggableData,o=this.state.resizeInfo,n=a.percentLeft,l=a.percentTop;0==n||n||(n=.5),0==l||l||(l=.5);var s=Object.customAssign({id:t,size:o,percentPosition:{percentLeft:n,percentTop:l}},i);return u.default.createElement(p.default,s,u.default.createElement(y,{id:t,isShow:this.state.qrCodeTeachToolWrapDisplay},u.default.createElement("div",{className:"qrCode-teachTool-header"},u.default.createElement("span",{className:"scanStyle"},c.default.language.languageData.qrCode.scan.text),u.default.createElement("span",{className:"icon-close qrCode-close",onClick:this.qrCodeCloseHandel.bind(this)})),u.default.createElement("div",{id:"qrCode",className:"qrCode"}),u.default.createElement("div",{className:"attentionStyle"},c.default.language.languageData.qrCode.attention.text)))}}]),t}(u.default.Component);t.default=S},emLI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(a("sk9p")),o=a("q1tI"),n=f(o),l=a("9VTz"),s=f(a("yfjp")),r=f(a("zrT5")),d=f(a("HPAy")),u=f(a("O++P")),c=f(a("MnM8"));function f(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.close,a=(0,o.useState)(!1),f=(0,i.default)(a,2),h=f[0],m=f[1],p=(0,o.useState)(0),g=(0,i.default)(p,2),v=g[0],y=g[1],S=(0,o.useState)("selecting"),b=(0,i.default)(S,2),C=b[0],k=b[1],w=(0,o.useState)(""),T=(0,i.default)(w,2),E=T[0],I=T[1],D=(0,o.useState)(null),x=(0,i.default)(D,2),R=x[0],_=x[1],P=(0,o.useState)(0),A=(0,i.default)(P,2),L=A[0],B=A[1],M=(0,o.useState)(""),N=(0,i.default)(M,2),O=N[0],F=N[1],V=(0,o.useState)(""),U=(0,i.default)(V,2),H=U[0],j=U[1],W=(0,o.useState)({isDynamicPpt:!1,H5Name:"",isShowNow:!1}),z=(0,i.default)(W,2),Y=z[0],q=z[1],J=function(e,t){k("loading"),B(t)},K=function(e){if(0==+e){k("success");var a=setTimeout(function(){t&&t(),clearTimeout(a)},2e3)}else{var i=l.addCourseService.fileUploadErrorCode(e);I(i),k("fail"),m(!0)}B(100)},G=function(){B(0),I(""),_(null),F(""),j(""),m(!1),q({isDynamicPpt:!1,H5Name:"",isShowNow:!1}),k("selecting")};return n.default.createElement("div",{className:"uploas-course"},n.default.createElement(c.default,{selectFileFn:function(){var e=v+1;q({isDynamicPpt:!1,H5Name:"",isShowNow:!1}),j(""),y(e)},uploadCancel:function(){l.addCourseService.uploadCancelFn(),G()},uploadStatus:C,progress:L,fileName:O,fileType:H,errorMsg:E}),!l.addCourseService.isOther(H)&&n.default.createElement(u.default,{fileType:H,fileAttr:Y,setFileAttr:q.bind(void 0)}),n.default.createElement("div",{className:"upload-button"},h?n.default.createElement(s.default.Button,{text:d.default.language.languageData.toolContainer.toolIcon.addCourse.uploadCourse.button.uploadAgain,classNames:"upload",onClick:G}):n.default.createElement(s.default.Button,{text:d.default.language.languageData.toolContainer.toolIcon.addCourse.uploadCourse.button.upload,classNames:"upload",disabled:"selected"!==C||!R,onClick:function(){k("loading"),B(0),l.addCourseService.uploadFileFn(R,Y,H,K,J)}})),n.default.createElement(r.default,{isWritedbFromUploadFile:!0,accept:l.addCourseService.accept,flag:v,externalUploadFileCallback:function(e,t,a){F(t),j(a),_(e),k("selected")}}))}},ezS8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=m(a("Yz+Y")),o=m(a("iCc5")),n=m(a("V7oC")),l=m(a("FYw3")),s=m(a("mRg0")),r=m(a("q1tI")),d=m(a("HPAy")),u=m(a("eQYT")),c=(m(a("uuqz")),m(a("aJKe"))),f=m(a("JL1q")),h=(m(a("mrNk")),m(a("XbJA")));function m(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={isFullScreen:!1,isVideoInFullscreenFile:!1},a.WhiteboardTool="",a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){var e=this;c.default.CoreController.addEventListener(u.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener(u.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener(u.default.EVENTTYPE.DocumentEvent.onKeydown,this.onKeydown.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("receive-msglist-FullScreen",this.handlerMsglistFullScreen.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("receiveWhiteboardSDKAction",this.receiveWhiteboardSDKAction.bind(this),this.listernerBackupid);var t=document.getElementById("defaultDocumentToolViewRoot"),a=document.getElementById("defaultTalkcloudFullScreen"),i=document.getElementById("defaultTalkcloudVolume"),o=t.querySelector("#defaultTalkcloudRemark");t.appendChild(a),t.appendChild(i),t.appendChild(o),a.onclick=function(){f.default.handler.getAppPermissions("isHandleVideoInFullScreen")?e.handleVideoInFullScreen():e.fullScreenClick()}}},{key:"componentWillUnmount",value:function(){c.default.CoreController.removeBackupListerner(this.listernerBackupid),c.default.Document.removeBackupListerner(this.listernerBackupid),c.default.Window.removeBackupListerner(this.listernerBackupid)}},{key:"receiveWhiteboardSDKAction",value:function(e){var t=this;if(e.message){var a=e.message,i=a.cmd;if("mediaPlayerNotice"===a.action&&"videoPlayer"===i.playerType){var o=document.getElementById("defaultTalkcloudFullScreen"),n=document.getElementById("defaultVideoPlayerTalkMediaPlayerTotalControl").querySelector(".full-screen-btn.add-cursor-pointer.add-fl");if(f.default.handler.getAppPermissions("isHandleVideoInFullScreen")?n.onclick=function(){t.handleVideoInFullScreenOnClick()}:n.onclick=function(){t.handlermp4FullBtn()},"play"===i.type||"pause"===i.type)o.disabled=!0;else if("end"===i.type)if(o.disabled=!1,f.default.handler.getAppPermissions("isHandleVideoInFullScreen")&&d.default.isVideoPlayerInFullscreen){d.default.isVideoPlayerInFullscreen=!1,h.default.sendSignallingFromFullScreen({fullScreenType:"stream_media",needPictureInPictureSmall:!1},!0)}else d.default.mainContainerFull&&(d.default.mainContainerFull=!1,c.default.CoreController.dispatchEvent({type:"fullScreen",message:{fullScreenType:"stream_media",isFullScreen:!1}}))}}}},{key:"handlermp4FullBtn",value:function(){var e=document.getElementById("defaultVideoPlayerTalkMediaPlayerTotalControl").querySelector(".full-screen-btn.add-cursor-pointer.add-fl");d.default.mainContainerFull?(d.default.mainContainerFull=!1,e.classList.remove("exit"),c.default.CoreController.dispatchEvent({type:"fullScreen",message:{fullScreenType:"stream_media",isFullScreen:!1}})):(d.default.mainContainerFull=!0,e.classList.add("exit"),c.default.CoreController.dispatchEvent({type:"fullScreen",message:{fullScreenType:"stream_media",isFullScreen:!0}}))}},{key:"onKeydown",value:function(e){if(32===e.message.keyCode){h.default.sendSignallingFromFullScreen({fullScreenType:"courseware_file",needPictureInPictureSmall:!1},!0)}}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"FullScreen":var a=document.getElementById("defaultTalkcloudFullScreen");if("courseware_file"===t.data.fullScreenType)a.classList.add("isScreen"),(u.default.hasRole.roleStudent||u.default.hasRole.rolePatrol)&&(a.disabled=!0),this.setState({isVideoInFullscreenFile:!0});else if("stream_media"===t.data.fullScreenType){var i=document.getElementById("defaultVideoPlayerTalkMediaPlayerTotalControl").querySelector(".full-screen-btn.add-cursor-pointer.add-fl");i.classList.add("exit"),(u.default.hasRole.roleStudent||u.default.hasRole.rolePatrol)&&(i.style.display="none"),this.setState({isVideoInFullscreenFile:!0})}}}},{key:"handlerRoomDelmsg",value:function(e){var t=e.message;switch(t.name){case"FullScreen":if("stream_media"===t.data.fullScreenType){var a=document.getElementById("defaultVideoPlayerTalkMediaPlayerTotalControl").querySelector(".full-screen-btn.add-cursor-pointer.add-fl");a.classList.remove("exit"),a.style.display="block",this.setState({isVideoInFullscreenFile:!1})}else{var i=document.getElementById("defaultTalkcloudFullScreen");i.classList.remove("isScreen"),i.disabled=!1,this.setState({isVideoInFullscreenFile:!1})}}}},{key:"handlerMsglistFullScreen",value:function(e){var t=e.message.FullScreenArray[0].data;if("courseware_file"===t.fullScreenType){var a=document.getElementById("defaultTalkcloudFullScreen");a.classList.add("isScreen"),(u.default.hasRole.roleStudent||u.default.hasRole.rolePatrol)&&(a.disabled=!0),this.setState({isVideoInFullscreenFile:!0})}else if("stream_media"===t.fullScreenType){var i=document.getElementById("defaultVideoPlayerTalkMediaPlayerTotalControl").querySelector(".full-screen-btn.add-cursor-pointer.add-fl");i.classList.add("exit"),(u.default.hasRole.roleStudent||u.default.hasRole.rolePatrol)&&(i.style.display="none"),this.setState({isVideoInFullscreenFile:!0})}}},{key:"handleVideoInFullScreen",value:function(){if(this.state.isVideoInFullscreenFile){h.default.sendSignallingFromFullScreen({fullScreenType:"courseware_file",needPictureInPictureSmall:!1},!0)}else{h.default.sendSignallingFromFullScreen({fullScreenType:"courseware_file",needPictureInPictureSmall:!0})}}},{key:"handleVideoInFullScreenOnClick",value:function(){if(u.default.hasRole.roleChairman||u.default.hasRole.roleTeachingAssistant)if(d.default.isVideoInFullscreen){d.default.isVideoPlayerInFullscreen=!1,h.default.sendSignallingFromFullScreen({fullScreenType:"stream_media",needPictureInPictureSmall:!1},!0)}else{d.default.isVideoPlayerInFullscreen=!0,h.default.sendSignallingFromFullScreen({fullScreenType:"stream_media",needPictureInPictureSmall:!0})}}},{key:"fullScreenClick",value:function(e){var t=document.getElementById("defaultTalkcloudFullScreen");this.state.isFullScreen?(t.classList.remove("isScreen"),c.default.CoreController.dispatchEvent({type:"fullScreen",message:{fullScreenType:"courseware_file",isFullScreen:!1}})):(t.classList.add("isScreen"),c.default.CoreController.dispatchEvent({type:"fullScreen",message:{fullScreenType:"courseware_file",isFullScreen:!0}})),this.setState({isFullScreen:!this.state.isFullScreen})}},{key:"render",value:function(){return r.default.createElement("div",{id:"full_btn_wrap",style:{height:"0.4rem",width:"0.4rem",marginLeft:"0.2rem",display:"none"}})}}]),t}(r.default.PureComponent);t.default=p},f6Bd:function(e,t,a){},fG3h:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(a("rfXi")),o=l(a("iCc5")),n=l(a("V7oC"));function l(e){return e&&e.__esModule?e:{default:e}}var s=new(function(){function e(){(0,o.default)(this,e)}return(0,n.default)(e,[{key:"BrowserCheck",value:function(){var e,t=navigator.appName,a=navigator.userAgent,i=a.match(/(opera|chrome|safari|firefox|msie|trident)\/?\s*(\.?\d+(\.\d+)*)/i);return i&&null!=(e=a.match(/version\/([\.\d]+)/i))&&(i[2]=e[1]),i=i?[i[1],i[2]]:[t,navigator.appVersion,"-?"]}},{key:"audioOutputChangeHandler",value:function(e){var t=e.deviceId,a=e.setSinkIdParentElementId;if(!TK.isTkNative||!TK.subscribe_from_native){var o=t;if(null!=o){var n=document.getElementById(a).getElementsByTagName("audio");n&&n.length>0&&TK.DeviceMgr.associateElementsToSpeaker((0,i.default)(n),o)}}}},{key:"audioSourceChangeHandlerFrom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deviceId,a=e.audioinputAudioElementId,i=e.audioinputVolumeContainerId;TK.DeviceMgr.startMicrophoneTest(t,a,function(e){e=.16*e/16;var t=$("#"+i);if(t&&t.length>0){var a=Math.floor(16*e);t.find("li").removeClass("yes").filter(":lt("+a+")").addClass("yes")}})}},{key:"enumerateDevices",value:function(e){TK.DeviceMgr.getDevices(e)}},{key:"checkNeedDetectionDevice",value:function(e){var t=this;t.enumerateDevices(function(a){try{var i=!0;L.Logger.debug("checkNeedDetectionDevice deviceInfo",a);var o=L.Utils.localStorage.getItem(L.Constant.deviceStorage.audioinput),n=L.Utils.localStorage.getItem(L.Constant.deviceStorage.audiooutput),l=L.Utils.localStorage.getItem(L.Constant.deviceStorage.videoinput);i="Safari"===t.BrowserCheck()[0]?!a.hasdevice.audioinput||!a.hasdevice.videoinput||a.useDevices.audioinput!==o||a.useDevices.videoinput!==l:!(a.hasdevice.audioinput&&a.hasdevice.audiooutput&&a.hasdevice.videoinput&&a.useDevices.audioinput===o&&a.useDevices.audiooutput===n&&a.useDevices.videoinput===l),e&&"function"==typeof e&&e(i)}catch(e){L.Logger.error("TK  enumerateDevices error:",e)}},{isSetlocalStorage:!1})}}]),e}());t.default=s},fNWt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(a("Yz+Y")),o=d(a("iCc5")),n=d(a("V7oC")),l=d(a("FYw3")),s=d(a("mRg0")),r=d(a("q1tI"));function d(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={show:!1},a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.setState({show:!0})},150)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){return r.default.createElement("div",{className:"tk-download-loading",style:{display:this.state.show?"block":"none",width:"100%",height:"100%",position:"absolute",left:0,top:0,backgroundColor:"#121a2c"}},r.default.createElement("span",{className:"text",style:{display:"none",position:"absolute",left:"50%",top:"50%",color:"#DDD",fontSize:"0.3rem",fontWeight:"500",transform:"translate(-50% , -50%)"}},window.GLOBAL&&window.GLOBAL.language&&"chinese"===window.GLOBAL.language.name?"...":"Trying to loading..."))}}]),t}(r.default.Component);t.default=u},fQVj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=h(a("FyfS")),o=h(a("Yz+Y")),n=h(a("iCc5")),l=h(a("V7oC")),s=h(a("FYw3")),r=h(a("mRg0")),d=h(a("q1tI")),u=h(a("XbJA")),c=h(a("aJKe")),f=(h(a("JL1q")),h(a("1Nl6")));function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){c.default.CoreController.addEventListener("receive-msglist-qiangDaQi",this.handlerMsglistQiangDaQi.bind(this),this.listernerBackupid)}},{key:"handlerMsglistQiangDaQi",value:function(e){var t=!0,a=!1,o=void 0;try{for(var n,l=(0,i.default)(e.message.qiangDaQiArr);!(t=(n=l.next()).done);t=!0){n.value;this.props.isDisabledHoldItem("responder",!0)}}catch(e){a=!0,o=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw o}}}},{key:"responderAssemblyShowHandel",value:function(){u.default.sendSignallingQiangDaQi(!1,{isShow:!0,begin:!1,userAdmin:""}),c.default.CoreController.dispatchEvent({type:"responderShow",className:"responder-implement-bg",isShow:!0}),this.props.isDisabledHoldItem("responder",!0),this.props.close()}},{key:"render",value:function(){return d.default.createElement("li",{className:"holdAllitem "+(this.props.isDisabled?" disabled":"")},d.default.createElement("div",{onClick:this.responderAssemblyShowHandel.bind(this)},d.default.createElement("em",{className:"icon "+this.props.bgName}),d.default.createElement("span",null,this.props.name)))}}]),t}(d.default.Component);m=(0,f.default)(m),t.default=m},fZQK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=T(a("QbLZ")),n=T(a("Yz+Y")),l=T(a("iCc5")),s=T(a("V7oC")),r=T(a("FYw3")),d=T(a("mRg0")),u=T(a("q1tI")),c=T(a("mrNk")),f=T(a("eQYT")),h=T(a("JL1q")),m=T(a("XbJA")),p=T(a("aJKe")),g=T(a("HPAy")),v=T(a("uuqz")),y=a("P9b8"),S=T(a("0rwh")),b=a("okNM"),C=a("LAQx"),k=a("2vnA"),w=T(a("iDD2"));function T(e){return e&&e.__esModule?e:{default:e}}var E=v.default.isSafari(),I={beginDrag:function(e,t,a){var i=e.videoId,o=e.percentLeft,n=e.percentTop,l=e.isDrag;return p.default.CoreController.dispatchEvent({type:"changeLayerIsShow",data:{mainContentLayerIsShow:!0}}),{id:i,percentLeft:o,percentTop:n,isDrag:l}},canDrag:function(e,t){var a=e.hasDragJurisdiction,i=e.isHasCloseBtn;return!(!a||f.default.hasRole.roleStudent&&!e.isDrag||g.default.isVideoStretch||g.default.isVideoInFullscreen||g.default.isVideoDrag||i)},endDrag:function(e,t,a){p.default.CoreController.dispatchEvent({type:"changeLayerIsShow",data:{mainContentLayerIsShow:!1}})}};var D={width:"100%",height:"calc('100%' - '0.42rem')",position:"fixed",left:0,top:"0.42rem",margin:0,zIndex:210},x=(0,b.inject)("videoStore","videoStatusStore")(i=(0,b.observer)(i=function(e){function t(e){(0,l.default)(this,t);var a=(0,r.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.isDragChange=!1,a.handlerWindowResize=function(){a.props.videoStatusStore.updateFullStyle&&(0,C.calcVideoSize)().then(function(e){a.props.videoStatusStore.updateFullStyle.call(a.props.videoStatusStore,e),a.forceUpdate&&a.forceUpdate()})},a.state={isVideoMirror:!(!L.Utils.localStorage.getItem("isVideoMirror")||"false"===L.Utils.localStorage.getItem("isVideoMirror"))&&L.Utils.localStorage.getItem("isVideoMirror"),updateState:!1,loader:!1,isMediaClassName:!1,isDoubleDivisionOver:!1},a.lastVideoDragStyle={},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.moveVideoTargetArr=[],a.otherVideoStyle=a.props.videoStatusStore.otherVideoStyle[a.props.videoId],a.otherVideoSize=a.props.videoStatusStore.otherVideoSize[a.props.videoId],a.defalutFontSize=g.default.windowInnerWidth/f.default.STANDARDSIZE,a.videoWidthPX=a.props.videoWidth*a.defalutFontSize,a.videoHeightPX=a.props.videoHeight*a.defalutFontSize,a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.videoId;p.default.CoreController.addEventListener(e+"_mouseMove",this.videoChangeSize.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener(e+"_mouseUp",this.videoMouseUp.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener("videoMirroring",this.videoMirroringHandle.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener("isOnlyAudioRoom",this.isOnlyAudioRoomHandle.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener("receiveWhiteboardSDKAction",this.handlerReceiveWhiteboardSDKAction.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener("receive-msglist-SwitchLayout",this.handleMsgListSwitchLayout.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),p.default.Window.addEventListener(f.default.EVENTTYPE.WindowEvent.onResize,this.handlerWindowResize,this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){this.forceUpdate=null,p.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"componentWillUpdate",value:function(e){E&&(this.isDragChange=!!this.props.isDrag!=!!e.isDrag)}},{key:"componentDidUpdate",value:function(){if(E&&(this.isDragChange||this.isDoubleClick)){this.props.videoId;var e=setTimeout(function(){document.getElementsByClassName("teacherVideoList")[0]&&(document.getElementsByClassName("teacherVideoList")[0].style.opacity=1),document.getElementsByClassName("studentVideoLists")[0]&&(document.getElementsByClassName("studentVideoLists")[0].style.opacity=1),clearTimeout(e)},30);this.isDoubleClick=!1}}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message,a=void 0===t?{}:t;switch(a.name){case"switchLayout":this.setState({isDoubleDivisionOver:"oneToOneDoubleDivision"===a.data.nowLayout})}}},{key:"handleMsgListSwitchLayout",value:function(e){var t=e.message;this.setState({isDoubleDivisionOver:"oneToOneDoubleDivision"===t.nowLayout})}},{key:"handlerRoomDelmsg",value:function(e){var t=e.message;switch((void 0===t?{}:t).name){case"ClassBegin":this.setState({isDoubleDivisionOver:!1})}}},{key:"handlerReceiveWhiteboardSDKAction",value:function(e){switch(e.message.action){case"mediaPlayerNotice":"videoPlayer"!==e.message.cmd.playerType&&"audioPlayer"!==e.message.cmd.playerType||("end"===e.message.cmd.type?this.setState({isMediaClassName:!1}):this.setState({isMediaClassName:!0}),"play"===e.message.cmd.type&&g.default.isVideoDrag&&m.default.sendSignllingDoubleClickVideo({doubleId:1,isScreen:!1},!1))}}},{key:"handlerRoomUserpropertyChanged",value:function(e){this.props.stream&&this.props.stream.extensionId===e.userId?this.setState({updateState:!this.state.updateState}):e.message&&void 0!==e.message.volume&&this.setState({updateState:!this.state.updateState})}},{key:"isOnlyAudioRoomHandle",value:function(){this.forceUpdate()}},{key:"restoreVideoDrag",value:function(){var e=this.props,t=e.videoId;e.isDrag&&this.props.initOtherVideoDragByUserid&&"function"==typeof this.props.initOtherVideoDragByUserid&&this.props.initOtherVideoDragByUserid(t)}},{key:"sendDragOfChangeVideoSize",value:function(e){var t=g.default.windowInnerWidth/f.default.STANDARDSIZE,a=document.getElementById(e),i=a.clientWidth,o=a.clientHeight,n=document.getElementById("lc-full-vessel"),l=n.clientWidth,s=n.clientHeight,r=(a.offsetLeft-g.default.dragRange.left*t)/(l-i),d=(a.offsetTop-g.default.dragRange.top*t)/(s-o);l===i?r=this.lastVideoDragStyle?this.lastVideoDragStyle.percentLeft:0:(isNaN(r)||null===r)&&(r=0),s===o?d=this.lastVideoDragStyle?this.lastVideoDragStyle.percentTop:0:(isNaN(d)||null===d)&&(d=0);var u={percentTop:d,percentLeft:r,isDrag:!0};p.default.CoreController.dispatchEvent({type:"changeOtherVideoStyle",message:{data:{style:u,id:e},initiative:!0}})}},{key:"mouseDown",value:function(e){if(h.default.handler.getAppPermissions("isChangeVideoSize")){var t=this.props,a=t.videoId,i=t.isDrag,o=t.percentLeft,n=t.percentTop;i&&("w"!==this.stretchDirection&&"s"!==this.stretchDirection&&"se"!==this.stretchDirection||(g.default.isVideoStretch=!0,g.default.changeVideoSizeMouseUpEventName=a+"_mouseUp",p.default.CoreController.dispatchEvent({type:"changeLayerIsShow",data:{mainContentLayerIsShow:!0}})),this.lastVideoDragStyle={percentLeft:o,percentTop:n})}}},{key:"videoMouseUp",value:function(e){var t=this.props,a=t.videoId;if(t.isDrag){var i=e.message.data.event;!0===g.default.isVideoStretch&&(this.props.sendSignallingOfVideoSize&&"function"==typeof this.props.sendSignallingOfVideoSize&&(this.props.sendSignallingOfVideoSize(),this.sendDragOfChangeVideoSize(a)),this.lastVideoDragStyle={percentLeft:0,percentTop:0},g.default.isVideoStretch=!1,p.default.CoreController.dispatchEvent({type:"changeLayerIsShow",data:{mainContentLayerIsShow:!1}}),i.onmousemove=null,i.target.style.cursor="",g.default.changeVideoSizeEventName=null,g.default.changeVideoSizeMouseUpEventName=null,this.setState({updateState:!this.state.updateState}))}}},{key:"videoChangeSize",value:function(e){var t=e.message.data.event,a=this.props,i=a.videoId,o=a.isDrag,n=a.percentLeft,l=a.percentTop,s=a.videoWidth,r=a.videoHeight;if(o){var d=(0,C.getVideoSize)(this.props.videoStore.layoutName,this.props.videoStatusStore.notDragstreamLength,(0,C.isTeacher)(i),this.props.videoStatusStore.notDragStudentLength).videoWidth,u=g.default.windowInnerWidth/f.default.STANDARDSIZE,c=s*u,h=r*u;if(!s||!r){var m=document.getElementById(this.props.videoId)||{clientWidth:0,clientHeight:0};c=m.clientWidth,h=m.clientHeight}var p=this._percentageChangeToRem(n,l,c,h),v=p.videoLeft,y=p.videoTop,S=(v+g.default.dragRange.left)*u,b=(y+g.default.dragRange.top)*u,k=t.pageX,w=t.pageY;g.default.isVideoStretch?this.initVideoCursorStyle():k>=S+c-7&&k<=S+c&&w>=b&&w<b+h-7?(t.target.style.cursor="w-resize",this.stretchDirection="w",this.moveVideoTargetArr.includes(t.target)||this.moveVideoTargetArr.push(t.target)):w>=b+h-7&&w<=b+h&&k>=S&&k<S+c-7?(t.target.style.cursor="s-resize",this.stretchDirection="s",this.moveVideoTargetArr.includes(t.target)||this.moveVideoTargetArr.push(t.target)):w<b+h&&w>=b+h-7&&k<S+c&&k>=S+c-7?(t.target.style.cursor="se-resize",this.stretchDirection="se",this.moveVideoTargetArr.includes(t.target)||this.moveVideoTargetArr.push(t.target)):(this.stretchDirection="",this.initVideoCursorStyle());var T=void 0,E=void 0;!g.default.isVideoStretch||"w"!==this.stretchDirection&&"se"!==this.stretchDirection?g.default.isVideoStretch&&"s"===this.stretchDirection&&(T=(E=Math.abs(w-b)/u)*g.default.videoScale,(w<g.default.dragRange.top*u||w<b)&&(E=(T=d*window.GLOBAL.windowInnerWidth/100/u)/g.default.videoScale),this.props.changeVideoSize&&"function"==typeof this.props.changeVideoSize&&this.props.changeVideoSize(T,E,i)):(E=(T=Math.abs(k-S)/u)/g.default.videoScale,(k<g.default.dragRange.left*u||k<S)&&(E=(T=d*window.GLOBAL.windowInnerWidth/100/u)/g.default.videoScale),this.props.changeVideoSize&&"function"==typeof this.props.changeVideoSize&&this.props.changeVideoSize(T,E,i))}}},{key:"initVideoCursorStyle",value:function(){this.moveVideoTargetArr.forEach(function(e,t){e.style.cursor=""}),this.moveVideoTargetArr=[]}},{key:"mouseMove",value:function(){if(h.default.handler.getAppPermissions("isChangeVideoSize")){var e=this.props,t=e.videoId,a=e.isDrag;g.default.changeVideoSizeEventName!==t+"_mouseMove"&&g.default.changeVideoSizeMouseUpEventName!==t+"_mouseUp"&&!g.default.isVideoStretch&&a&&(g.default.changeVideoSizeEventName=t+"_mouseMove",g.default.changeVideoSizeMouseUpEventName=t+"_mouseUp")}}},{key:"_loadStreamInfo",value:function(e){var t=void 0;return e&&void 0!==e.extensionId&&c.default.getTkRoom()&&(t=(0,C.getUser)(e.extensionId)),{user:t,afterElementArray:[]}}},{key:"_percentageChangeToRem",value:function(e,t,a,i){if(f.default.hasRoomtype.oneToOne)return{videoLeft:0,videoTop:0};var o=window.GLOBAL.windowInnerWidth/f.default.STANDARDSIZE,n=document.getElementById("lc-full-vessel")||document.getElementById("lc-full-vessel");if(n){var l=n.clientWidth,s=n.clientHeight;if(!a||!i){var r=document.getElementById(this.props.videoId)||{clientWidth:0,clientHeight:0};a=r.clientWidth,i=r.clientHeight}return{videoLeft:e*(l-a)/o,videoTop:t*(s-i)/o}}return{videoLeft:0,videoTop:0}}},{key:"videoMirroringHandle",value:function(e){this.setState({isVideoMirror:e.message.isVideoMirroring})}},{key:"doubleClick",value:function(e){if("OnlyVideo"!==this.props.videoStore.layoutName){var t=e.currentTarget.id;if("MainPeople"===this.props.videoStore.layoutName&&g.default.classBegin&&h.default.handler.getAppPermissions("mainPeopleExchangeVideo"))return this.props.videoStore.setExchangeVideoId(t),void m.default.sendSignllingMainPeopleExchangeVideo({doubleId:t});if(f.default.hasRoomtype.oneToOne)this.props.videoOnDoubleClick(e);else{var a=this._loadStreamInfo(this.props.stream).user,i=void 0===a?{}:a,o=this.props.videoStore.videoScreenId&&(this.props.videoStore.videoScreenId===i.id||this.props.videoStore.videoScreenId===this.props.videoId);E&&(console.error("this.isDoubleClick",this.isDoubleClick),this.isDoubleClick=!0),this.props.isDrag||this.props.videoStore.isHasCloseBtn||g.default.classBegin&&(f.default.hasRole.roleStudent||m.default.sendSignllingDoubleClickVideo({doubleId:t,isScreen:!o},!1))}}}},{key:"render",value:function(){var e,t=this.props,a=t.connectDropTarget,i=t.connectDragSource,n=(t.getItem,t.isDragging,t.percentLeft),l=t.percentTop,s=t.videoId,r=t.isDrag,d=t.isCanDrag,h=t.videoWidth,m=t.videoHeight,p=t.isBigVideo,v=t.clientWidth,y=t.clientHeight,b=t.studentLength,w=this.props.videoStore,T=w.layoutName,I=w.videoScreenId,x=w.userChangedMsg,R=w.isHasCloseBtn,_=w.pictureInPictureClassnameFromTeacherStream,P="MainPeople"===T||"oneToOneDoubleVideo"===T||"OnlyVideo"===T,A=g.default.windowInnerWidth/f.default.STANDARDSIZE,L=h*A,B=m*A,M=this._loadStreamInfo(this.props.stream).user,N=void 0===M?{}:M,O=!!this.props.hasDragJurisdiction&&!d,F=this._percentageChangeToRem(n,l,L,B),V=F.videoLeft;e={cursor:d?"move":"default",top:F.videoTop+g.default.dragRange.top+"rem",left:V+g.default.dragRange.left+"rem",margin:r?0:void 0,position:r?"fixed":"",width:h+"rem",height:m+"rem",zIndex:r?300:" "};var U=I&&(I===N.id||I===this.props.videoId),H=null;if(!f.default.hasRoomtype.oneToOne&&U)H=(0,k.toJS)(this.props.videoStatusStore.videoFullStyle);else if(f.default.hasRoomtype.oneToOne)H=null;else if(v&&y)H={width:v+"vw",height:y+"vw"};else{var j=(0,C.getVideoSize)(T,this.props.videoStatusStore.notDragstreamLength,(0,C.isTeacher)(s),this.props.videoStatusStore.notDragStudentLength);H={width:j.videoWidth+"vw",height:j.videoHeight+"vw"}}this.props.videoStatusStore.updates;var W=f.default.joinRoomInfo.roomVideoHeight/f.default.joinRoomInfo.roomVideoWidth,z={width:p?"100vw":100/7+"vw",height:p?100*W+"vw":100/7*W+"vw",display:g.default.isOnlyAudioRoom||N&&N.publishstate!==f.default.PUBLISHSTATE.PUBLISH_STATE_VIDEOONLY&&N.publishstate!==f.default.PUBLISHSTATE.PUBLISH_STATE_BOTH?"none":"block"};if("MainPeople"===T&&"video-chairman-wrap"===this.props.videoClassName){var Y=(0,C.calcTeacherVideoStyle)(!!this.props.videoStatusStore.notDragStudentLength);H={width:Y.clientWidth+"vw",height:Y.clientHeight+"vw",margin:"0 auto"}}var q=(0,o.default)({},this.props,this.state),J=(0,C.isTeacher)(N.id)?_:this.props.videoStore.pictureInPictureClassnameFromStudentStream,K=R?z:r?e:H,G=12;this.props.videoStatusStore.studentLayoutMax&&this.props.videoStatusStore.studentLayoutMax.two&&(G=this.props.videoStatusStore.studentLayoutMax.two);var Q=!(0,C.isTeacher)(s)&&("CoursewareDown"===T||"VideoDown"===T||"Encompassment"===T)&&b<G,X=!(0,C.isTeacher)(s)&&("CoursewareDown"===T||"VideoDown"===T||"Encompassment"===T)&&b>=G&&!r,Z=r||!(0,C.isTeacher)(s)&&("CoursewareDown"===T||"VideoDown"===T||"Encompassment"===T)&&b<G?("Encompassment"===T?12.5:100/7)*(f.default.joinRoomInfo.roomVideoHeight/f.default.joinRoomInfo.roomVideoWidth)+"vw":"100%";("CoursewareDown"===T||"VideoDown"===T||"Encompassment"===T)&&b<G?(0,C.isTeacher)(s)||U&&!oe?!U||oe?(K.height="calc("+K.height+" - 2px)",K.width="calc("+K.width+" - 2px)",Z="calc("+Z+" - 2px)"):K.margin=0:(K.height="calc("+K.height+" - 2px)",K.width="calc("+K.width+" - 2px)",Z="calc("+Z+" - 2px)"):f.default.hasRoomtype.oneToOne||(K.margin=0),"MainPeople"===T&&this.props.isTeacherList&&(K.margin="0 auto"),(K=K||{}).width=K.width||"",K.height=K.height||"";var $=g.default.systemStyleJson,ee=$.RightContentVesselSmartStyleJson,te=void 0===ee?{}:ee,ae=($.RightVesselSmartStyleJson,{width:te.width,height:te.height,position:"fixed",left:0,top:te.top,margin:0,zIndex:210}),ie={width:z.width,height:z.height,position:"fixed",right:0,bottom:0,top:"auto",left:"auto",margin:0,zIndex:211},oe=f.default.joinRoomInfo.isStuHideOtherVideo&&f.default.hasRole.roleStudent,ne=U?ae:{width:"100%",height:"100%",margin:0},le="",se=c.default.getTkRoom().getMySelf();(0,C.isTeacher)(I)&&(N.role===f.default.role.roleChairman?(ne=D,le="teacher-full-whiteBoard"):N.id===se.id&&(ne=ie)),!_||-1==_.indexOf("courseware_file")&&-1==_.indexOf("stream_media")||(ne=(0,o.default)({},K));var re=oe&&se&&N.id!==se.id&&N.role!==f.default.role.roleChairman&&!r&&!U,de=le||U&&!oe?TK_VIDEO_MODE.ASPECT_RATIO_CONTAIN:TK_VIDEO_MODE.ASPECT_RATIO_COVER;return E&&(this.isDragChange||this.isDoubleClick)&&(document.getElementsByClassName("studentVideoLists")[0]&&(document.getElementsByClassName("studentVideoLists")[0].style.opacity=.99),document.getElementsByClassName("teacherVideoList")[0]&&(document.getElementsByClassName("teacherVideoList")[0].style.opacity=.99)),a(i(u.default.createElement("div",{id:""+(s||N.id),onMouseMove:this.mouseMove.bind(this),onMouseDown:this.mouseDown.bind(this),onDoubleClick:this.doubleClick.bind(this),style:oe&&(!r||U||(0,C.isTeacher)(I)&&N.id===se.id)?ne:(0,o.default)({},K,{height:Q&&!r?Z:K.height?K.height:void 0}),className:"video-container "+(this.props.videoClassName||"")+" "+(J||"")+" "+(this.state.isMediaClassName?" stream_media":"")+" "+(U&&!oe?"isFullWhiteBoard":"")+" "+(re?" hide-other-student-video":"")+" "+le},u.default.createElement(S.default,(0,o.default)({},q,{mode:de,user:N,isDoubleClick:U,videoStyle:R?z:r?e:H,isDoubleDivisionOver:this.state.isDoubleDivisionOver,restoreDrag:this.restoreVideoDrag.bind(this,N.id),dragIsHide:O,userChangedMsg:x,isOnlyVideo:P,videoToolBoxHeight:Z,isHideOtherVideo:re,videoChange2:X,studentLength:b,layoutName:T})))))}}]),t}(u.default.Component))||i)||i,R=(0,y.DragSource)("talkDrag",I,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging(),isCanDrag:t.canDrag(),getItem:t.getItem()}})(x);t.default=(0,y.DropTarget)("talkDrag",w.default,function(e){return{connectDropTarget:e.dropTarget()}})(R)},gQA0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=R(a("QbLZ")),o=R(a("Yz+Y")),n=R(a("iCc5")),l=R(a("V7oC")),s=R(a("FYw3")),r=R(a("mRg0")),d=(0,R(a("CSPP")).default)(["\n  display: ",";\n"],["\n  display: ",";\n"]);a("6Tyi");var u=R(a("q1tI")),c=R(a("HPAy")),f=R(a("eQYT")),h=R(a("mrNk")),m=R(a("XbJA")),p=R(a("aJKe")),g=R(a("JL1q")),v=R(a("uuqz")),y=R(a("vOnD")),S=R(a("E0DN")),b=R(a("NBDQ")),C=R(a("nC4r")),k=R(a("OYv4")),w=R(a("fQVj")),T=R(a("xKLr")),E=R(a("Z66F")),I=R(a("EfqC")),D=R(a("FzLZ")),x=R(a("uTxR"));function R(e){return e&&e.__esModule?e:{default:e}}var _=y.default.div(d,function(e){return e.isShow?"block":"none"}),P=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={isShow:!1,holdData:{answer:{name:c.default.language.languageData.answers.headerTopLeft.text,bgName:"icon-hold_datiqi",isDisabled:!1,isShow:!1,id:"answer"},turnplate:{name:c.default.language.languageData.dial.turntable.text,bgName:"icon-hold_zhuanpan",isDisabled:!1,isShow:!1,id:"turnplate"},timer:{name:c.default.language.languageData.timers.timerSetInterval.text,bgName:"icon-hold_jishiqi",isDisabled:!1,isShow:!1,id:"timer"},qrCode:{name:c.default.language.languageData.header.tool.qrCode.title.yes,bgName:"icon-hold_erweima",isDisabled:!1,isShow:!1,id:"qrCode"},responder:{name:c.default.language.languageData.responder.responder.text,bgName:"icon-hold_qingdaqi",isDisabled:!1,isShow:!1,id:"responder"},sharing:{name:c.default.language.languageData.shares.shareSceen.text,bgName:"icon-hold_table_share",isDisabled:!1,isShow:!1,id:"sharing"},blackboard:{name:c.default.language.languageData.header.tool.blackBoard.title.open,bgName:"icon-hold_xiaobaiban",isDisabled:!1,isShow:!1,id:"blackboard"},movieShare:{name:c.default.language.languageData.toolContainer.toolIcon.moviesSharing.title,bgName:"icon-hold_movie_share",isDisabled:!1,isShow:!1,id:"movieShare"},allCaptrue:{name:c.default.language.languageData.header.tool.capture.title.all,bgName:"icon-hold_quyujieping",isDisabled:!1,isShow:!1,id:"allCaptrue"},smallCaptrue:{name:c.default.language.languageData.header.tool.capture.title.small,bgName:"icon-hold_jieping",isDisabled:!1,isShow:!1,id:"smallCaptrue"}},HoldBtn:[]},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){p.default.CoreController.addEventListener("togo_holdArr",this.handleTogoHoldAll.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener("initAppPermissions",this.handlerInitAppPermissions.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener("updateAppPermissions_isQrCode",this.handlerIsQrCode.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener("updateAppPermissions_Asharing",this.Asharing.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener("updateAppPermissions_isCapture",this.handlerIsCaptureUpdate.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener("colse-holdAll-item",this.handleCloseItem.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener("recoverPanelBeforeStarting",this.handlercloseHoldAll.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener("CloseALLPanel",this.close.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener("receiveWhiteboardSDKAction",this.receiveWhiteboardSDKAction.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid),p.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomAudiovideostateSwitched,this.handlerRoomAudiovideostateSwitched.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){p.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerIsQrCode",value:function(e){this.handlerInitAppPermissions()}},{key:"Asharing",value:function(){this.handlerInitAppPermissions()}},{key:"handlerIsCaptureUpdate",value:function(e){this.handlerInitAppPermissions()}},{key:"receiveWhiteboardSDKAction",value:function(e){var t=e.message,a=t.action,i=t.cmd;"mediaPlayerNotice"===a&&"file"===i.streamType&&("end"===i.type?this.isDisabledHoldItem("movieShare",!1):this.isDisabledHoldItem("movieShare",!0))}},{key:"handlerInitAppPermissions",value:function(){var e=this,t=this.state.holdData,a=f.default.hasRole,i=a.roleChairman,o=a.roleTeachingAssistant;t.turnplate.isShow=f.default.joinRoomInfo.toolBox.turnplate&&(i||o),t.answer.isShow=f.default.joinRoomInfo.toolBox.answer&&(i||o),t.responder.isShow=f.default.joinRoomInfo.toolBox.responder&&!f.default.hasRoomtype.oneToOne&&!c.default.roomChange&&(i||o),t.blackboard.isShow=f.default.joinRoomInfo.toolBox.moreBlackboard&&(i||o),t.qrCode.isShow=g.default.handler.getAppPermissions("isQrCode")&&f.default.joinRoomInfo.qrCode,t.timer.isShow=f.default.joinRoomInfo.toolBox.timer&&(i||o),t.sharing.isShow=function(){if(c.default.isOnlyAudioRoom)return!1;if(f.default.joinRoomInfo.toolBox.destTopShare&&f.default.hasRole.roleChairman)return!0;if(f.default.joinRoomInfo.isDoubleShare){if(!g.default.handler.getAppPermissions("Asharing"))return!1;if(c.default.isClient)return!0;if(c.default.isMobile)return!1;if("Chrome"===e.BrowserCheck()[0])return!0;if("Safari"===e.BrowserCheck()[0])return!0}return!1}(),t.movieShare.isShow=c.default.isClient&&g.default.handler.getAppPermissions("isMoviesShare")&&(i||o)&&!c.default.isOnlyAudioRoom,t.allCaptrue.isShow=g.default.handler.getAppPermissions("isCapture")&&c.default.isClient,t.smallCaptrue.isShow=g.default.handler.getAppPermissions("isCapture")&&c.default.isClient,g.default.handler.getAppPermissions("canDraw")&&p.default.CoreController.dispatchEvent({type:"isholdAllShow",message:{isShowData:t}}),this.setState({holdData:t})}},{key:"handlerRoomPubmsg",value:function(e){switch(e.message.name){case"BlackBoard_new":this.isDisabledHoldItem("blackboard",!0);break;case"answer":case"Question":this.isDisabledHoldItem("answer",!0);break;case"dial":this.isDisabledHoldItem("turnplate",!0);break;case"timer":this.isDisabledHoldItem("timer",!0);break;case"qiangDaQi":this.isDisabledHoldItem("responder",!0);break;case"OnlyAudioRoom":this.isDisabledHoldItem("sharing",!0),this.isDisabledHoldItem("movieShare",!0)}}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"BlackBoard_new":this.isDisabledHoldItem("blackboard",!1);break;case"answer":case"Question":this.isDisabledHoldItem("answer",!1);break;case"dial":this.isDisabledHoldItem("turnplate",!1);break;case"timer":this.isDisabledHoldItem("timer",!1);break;case"qiangDaQi":this.isDisabledHoldItem("responder",!1);break;case"OnlyAudioRoom":this.isDisabledHoldItem("sharing",!1),this.isDisabledHoldItem("movieShare",!1);break;case"ClassBegin":var t=this.state.holdData;for(var a in t)t[a].isDisabled=!1;this.setState({holdData:t});break;case"roomStart":this.close()}}},{key:"handlercloseHoldAll",value:function(){var e=this.state.holdData;for(var t in e)e[t].isDisabled=!1;this.close(),this.setState({holdData:e})}},{key:"handlerRoomUserpropertyChanged",value:function(){this.getOpenHoldItemArr().length>0||this.setState({isShow:!1})}},{key:"handlerRoomAudiovideostateSwitched",value:function(e){this.handlerInitAppPermissions()}},{key:"close",value:function(){p.default.CoreController.dispatchEvent({type:"colose_holdArr"}),this.setState({isShow:!1})}},{key:"handleTogoHoldAll",value:function(e){this.setState({isShow:e.isShow})}},{key:"handleCloseItem",value:function(e){this.isDisabledHoldItem(e.message.type,!1)}},{key:"isDisabledHoldItem",value:function(e,t){var a=this.state.holdData;a[e].isDisabled=t,"movieShare"===e&&c.default.isClient&&(f.default.hasRole.roleChairman||f.default.hasRole.roleTeachingAssistant)&&(a[e].isShow=!0),this.setState({holdData:a})}},{key:"takeSnapshot",value:function(e){var t=this,a=e.isHideClassroom,i="TK"+v.default.dateFormat(new Date,"yyyyMMddHHmmss"),o=!0;c.default.isClient&&h.default.getNativeInterface()&&h.default.getNativeInterface().screenCaptureUpload(i,function(e,a,i,n,l,s){if("progress"===e&&o&&(t.setState({isCapture:!1}),p.default.CoreController.dispatchEvent({type:"captureImgStartUploading"}),o=!1),"saved"===e&&0===l&&(t.setState({isCapture:!0}),p.default.CoreController.dispatchEvent({type:"captureImgUploadSaved",message:{captureImgInfo:s}})),"result"===e)if(0===l&&s.swfpath){s.fileid=v.default.dateFormat(new Date,"yyyyMMddHHmmss");var r="CaptureImg_"+s.fileid,d=s.swfpath.substring(s.swfpath.lastIndexOf("."))||".jpg",u=s.swfpath.replace(d,"-1"+d),g=window.WBGlobal.nowUseDocAddress+u,y=new Image;y.onload=function(){var e=c.default.windowInnerWidth/f.default.STANDARDSIZE,t={captureImgInfo:s,remSize:{width:y.width/e,height:y.height/e}};m.default.sendSignallingFromCaptureImg(r,t)},y.src=g,L.Logger.info("capture image info"+s),t.setState({isCapture:!0}),p.default.CoreController.dispatchEvent({type:"captureImgUploadFinished"}),h.default.getTkWhiteBoardManager().useWhiteboardTool("tool_pencil")}else t.setState({isCapture:!0}),p.default.CoreController.dispatchEvent({type:"captureImgUploadFailed"}),L.Logger.warning("capture image upload failed")},a)}},{key:"getOpenHoldItemArr",value:function(){var e=this.state.holdData,t=[];for(var a in e)e[a].isShow&&t.push(e[a]);return t}},{key:"createHoldItemElement",value:function(){var e=this.getOpenHoldItemArr(),t=[],a=this.state.holdData,o=a.answer,n=a.turnplate,l=a.timer,s=a.qrCode,r=a.responder,d=a.sharing,c=a.blackboard,f=a.movieShare,h=a.allCaptrue,m=a.smallCaptrue,p={close:this.close.bind(this),isDisabledHoldItem:this.isDisabledHoldItem.bind(this)},g={answer:u.default.createElement(S.default,(0,i.default)({key:0},o,p)),turnplate:u.default.createElement(b.default,(0,i.default)({key:1},n,p)),timer:u.default.createElement(C.default,(0,i.default)({key:2},l,p)),qrCode:u.default.createElement(k.default,(0,i.default)({key:3},s,p)),responder:u.default.createElement(w.default,(0,i.default)({key:4},r,p)),sharing:u.default.createElement(T.default,(0,i.default)({key:5},d,p)),blackboard:u.default.createElement(E.default,(0,i.default)({key:6},c,p,{handlerRoomPubmsg:this.handlerRoomPubmsg.bind(this)})),movieShare:u.default.createElement(I.default,(0,i.default)({key:7},f,p)),allCaptrue:u.default.createElement(D.default,(0,i.default)({key:8},h,p,{takeSnapshot:this.takeSnapshot.bind(this)})),smallCaptrue:u.default.createElement(x.default,(0,i.default)({key:9},m,p,{takeSnapshot:this.takeSnapshot.bind(this)}))};return e.forEach(function(e,a){t.push(g[e.id])}),t}},{key:"_stopPreventClick",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"BrowserCheck",value:function(){var e,t=navigator.appName,a=navigator.userAgent,i=a.match(/(opera|chrome|safari|firefox|msie|trident)\/?\s*(\.?\d+(\.\d+)*)/i);return i&&null!=(e=a.match(/version\/([\.\d]+)/i))&&(i[2]=e[1]),i=i?[i[1],i[2]]:[t,navigator.appVersion,"-?"]}},{key:"render",value:function(){var e=this.createHoldItemElement(),t=this.props.id;return u.default.createElement("div",null,u.default.createElement(_,{id:t,isShow:this.state.isShow,onClick:this._stopPreventClick.bind(this),className:"hold-all-box "+(f.default.hasRole.roleStudent?"hold-all-box-student":"")+" "},u.default.createElement("ul",{className:"holdItemBox "},e)))}}]),t}(u.default.Component);t.default=P},hi7R:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=g(a("QbLZ")),o=g(a("Yz+Y")),n=g(a("iCc5")),l=g(a("V7oC")),s=g(a("FYw3")),r=g(a("mRg0")),d=a("q1tI"),u=g(d),c=g(a("HPAy")),f=g(a("WXZs")),h=g(a("aJKe")),m=g(a("XbJA")),p=g(a("pIe1"));function g(e){return e&&e.__esModule?e:{default:e}}a("1G3J");var v=h.default.CoreController,y=h.default.Window,S=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e)),i=e.captureImgInfo;return a.state={captureImgBoardInfo:{containerWidthAndHeight:{width:0,height:0},watermarkImageUrl:"",isShow:!1,backgroundColor:"transparent",instanceId:"captureImgBoard"+i.fileid,saveImage:!1,nickname:"captureImgBoard",deawPermission:v.handler.getAppPermissions("canDraw"),associatedMsgID:"CaptureImg_"+i.fileid},isRender:!1},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){v.addEventListener("updateAppPermissions_canDraw",this.handlerUpdateAppPermissions_canDraw.bind(this),this.listernerBackupid),v.addEventListener("updateAppPermissions_canDragCaptureImg",this.handlerUpdate_canDragCaptureImg.bind(this),this.listernerBackupid),v.addEventListener("updateAppPermissions_canResizeCaptureImg",this.handlerUpdate_canResizeCaptureImg.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){y.removeBackupListerner(this.listernerBackupid),v.removeBackupListerner(this.listernerBackupid)}},{key:"handlerUpdateAppPermissions_canDraw",value:function(){var e=this.state.captureImgBoardInfo;e.deawPermission=v.handler.getAppPermissions("canDraw"),this.setState({captureImgBoardInfo:e})}},{key:"handlerUpdate_canDragCaptureImg",value:function(){this.setState({isRender:!this.state.isRender})}},{key:"handlerUpdate_canResizeCaptureImg",value:function(){this.setState({isRender:!this.state.isRender})}},{key:"captureImgCloseClick",value:function(){m.default.sendSignallingFromCaptureImg("CaptureImg_"+this.props.captureImgInfo.fileid,{},!0)}},{key:"onStartDrag",value:function(){if(!this.props.selectMouse||!v.handler.getAppPermissions("canDragCaptureImg")||c.default.isVideoStretch)return!1}},{key:"handleMouseMove",value:function(e,t){var a=this.props.changeEleReSize;"function"==typeof a&&a(e,t)}},{key:"handleMouseUp",value:function(e,t){var a=this.props,i=a.sendSignallingOfResize,o=a.sendSignallingOfDrag,n=a.changeEleReSize;"function"==typeof i&&(i(e),"function"==typeof o&&o(e)),"function"==typeof n&&n(e,t)}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.captureImgInfo.swfpath,o=e.draggableData,n=e.position,l=e.resizeInfo,s=e.useToolInfo,r=s.useToolKey,d=s.useToolColor,h=s.blackboardToolsInfo,m=e.selectMouse,g=e.changeLayerIsShow,y=e.eleInitResizeInfos,S=this.state.captureImgBoardInfo,b=S.watermarkImageUrl,C=S.containerWidthAndHeight,k=S.instanceId,w=S.nickname,T=S.backgroundColor,E=S.deawPermission,I=S.associatedMsgID,D=c.default.windowInnerWidth/TkConstant.STANDARDSIZE,x=a.substring(a.lastIndexOf("."))||".jpg",R=a.replace(x,"-1"+x);b=window.WBGlobal.nowUseDocAddress+R;var _={width:l.width+"rem",height:l.height+"rem"},P=Object.customAssign({id:t,isDrag:!0,isResize:!0,handle:void 0,size:l,borderWidth:.04,bounds:"pc"===TK.SDKTYPE?"#lc-full-vessel":"tk_app",position:{x:n.left,y:n.top},percentPosition:{percentLeft:n.percentLeft,percentTop:n.percentTop},onStartDrag:this.onStartDrag.bind(this),changeLayerIsShow:g,disabled:!(m&&v.handler.getAppPermissions("canDragCaptureImg")&&!c.default.isVideoStretch)||v.handler.getAppPermissions("hasVideoCapture")},o),A={canResize:v.handler.getAppPermissions("canResizeCaptureImg")&&m&&!v.handler.getAppPermissions("hasVideoCapture"),eleInitResizeInfos:y,handleMouseUp:this.handleMouseUp.bind(this),handleMouseMove:this.handleMouseMove.bind(this),minResize:{width:.44,height:.44},changeEleReSize:this.props.changeEleReSize};D&&(C={width:l.width*D,height:l.height*D});var L={resizeInfo:l,isBaseboard:!1,watermarkImageUrl:b,instanceId:k,nickname:w,show:!0,backgroundColor:T,containerWidthAndHeight:C,showShapeAuthor:!1,deawPermission:E,associatedMsgID:I,useToolColor:d,eraserWidth:h.eraserWidth,pencilWidth:h.pencilWidth,fontSize:h.fontSize,shapeWidth:h.shapeWidth,useToolKey:r};return u.default.createElement(p.default,(0,i.default)({},P,{resizeData:A}),u.default.createElement("div",{id:t,className:"capture-img-box",style:_},u.default.createElement(f.default,L),u.default.createElement("div",{className:"capture-img-layer",style:{display:P.disabled?"none":"block"}}),u.default.createElement("button",{id:"captureImgClose",className:"capture-img-close icon-close",style:{display:TkConstant.hasRole.roleChairman||TkConstant.hasRole.roleTeachingAssistant?void 0:"none"},onClick:this.captureImgCloseClick.bind(this),title:c.default.language.languageData.header.tool.blackBoard.title.close})))}}]),t}(d.PureComponent);t.default=S},i7NE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=f(a("Yz+Y")),n=f(a("iCc5")),l=f(a("V7oC")),s=f(a("FYw3")),r=f(a("mRg0")),d=f(a("q1tI")),u=a("okNM"),c=(f(a("HPAy")),f(a("eQYT")));function f(e){return e&&e.__esModule?e:{default:e}}var h=(0,u.inject)("userListDataStore","userListStatusStore","globalStore")(i=(0,u.observer)(i=function(e){function t(){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,r.default)(t,e),(0,l.default)(t,[{key:"isGrouoShow",value:function(e){this.props.userListStatusStore.changeAllShowGroup(e)}},{key:"isGroupPatrol",value:function(e){this.props.globalStore.updatePatrolGroupId(e)}},{key:"render",value:function(){var e=this.props,t=e.userListDataStore,a=e.userListStatusStore,i=e.globalStore,o=e.groupId,n=t.userListGroupData[o],l=a.allShowGroup.indexOf(o)>-1,s=c.default.hasRole.roleChairman&&i.isGroup&&i.groupId===o,r={display:"none"};return s&&(r.display="block"),d.default.createElement("div",{className:"user-group-name"},d.default.createElement("button",{className:"user-group-arrow "+(s?l?"user-group-arrow-yellow-spread":"user-group-arrow-yellow-fold":l?"user-group-arrow-white-spread":""),onClick:this.isGrouoShow.bind(this,o)}),d.default.createElement("div",{className:"user-group-title "+(s?"user-group-title-patrol":""),onClick:this.isGrouoShow.bind(this,o)},n.name+"   ("+n.value.length+")"),d.default.createElement("div",{className:"user-group-patrol-eyes",style:r}),d.default.createElement("span",{className:"user-group-patrolling",style:r},""))}}]),t}(d.default.Component))||i)||i;t.default=h},iDD2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(a("HPAy")),o=n(a("aJKe"));function n(e){return e&&e.__esModule?e:{default:e}}var l={drop:function(e,t,a){var n=t.getSourceClientOffset();if(n&&null!=n){var l=t.getItem(),s=l.id,r=i.default.windowInnerWidth/TkConstant.STANDARDSIZE,d=document.getElementById(s),u=d.clientWidth,c=d.clientHeight,f=document.getElementById("lc-full-vessel")||document.getElementById("lc-full-vessel"),h=f.clientWidth,m=f.clientHeight,p=n.x,g=n.y,v=void 0,y=void 0;i.default.mainContainerFull||i.default.isVideoInFullscreen?(p<0?p=0:p>h-u&&(p=h-u),g<0?g=0:g>m-c&&(g=m-c),v=p/(h-u),y=g/(m-c)):(p<i.default.dragRange.left*r?p=i.default.dragRange.left*r:p>i.default.dragRange.left*r+h-u&&(p=i.default.dragRange.left*r+h-u),g<i.default.dragRange.top*r?g=i.default.dragRange.top*r:g>i.default.dragRange.top*r+m-c&&(g=i.default.dragRange.top*r+m-c),v=(p-i.default.dragRange.left*r)/(h-u),y=(g-i.default.dragRange.top*r)/(m-c)),v=isNaN(v)||v===1/0||null===v?0:v;var S={percentTop:y=isNaN(y)||y===1/0||null===y?0:y,percentLeft:v,isDrag:!0};o.default.CoreController.dispatchEvent({type:"changeOtherVideoStyle",message:{data:{style:S,id:s,item:l},initiative:!0}})}},canDrop:function(e,t){e.isDrag;return!0}};t.default=l},iHFX:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=w(a("oF3Q")),o=w(a("sk9p")),n=w(a("/f1G")),l=w(a("FyfS")),s=w(a("GQeE")),r=w(a("m1cH")),d=w(a("Yz+Y")),u=w(a("iCc5")),c=w(a("V7oC")),f=w(a("FYw3")),h=w(a("mRg0")),m=a("q1tI"),p=w(m),g=(w(a("i8i4")),w(a("HPAy"))),v=w(a("JL1q")),y=w(a("aJKe")),S=w(a("mrNk")),b=w(a("eQYT")),C=w(a("Zt/p")),k=w(a("uuqz"));function w(e){return e&&e.__esModule?e:{default:e}}var T=function(e){function t(e,a){(0,u.default)(this,t);var i=(0,f.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e,a));return i.state={updateState:!1},i.chatType={allChat:"allChat"},i.ids={teacherid:"",myid:""},i.property={publishState:0,drawtype:!1,raiseHand:void 0},i.chatList=[],i.awitTextMsgs=[],i.maxChatListNum=1e4,i.maxAwitTextMsgNum=1e4,i.delChatListNum=0,i.listernerBackupid=(new Date).getTime()+"_"+Math.random(),i}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){y.default.CoreController.addEventListener(b.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener(b.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener(b.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener(b.default.EVENTTYPE.RoomEvent.roomParticipantJoin,this.handlerRoomParticipantJoin.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener(b.default.EVENTTYPE.RoomEvent.roomParticipantLeave,this.handlerRoomParticipantLeave.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener(b.default.EVENTTYPE.RoomEvent.roomTextMessage,this.handlerRoomTextMessage.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener(b.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener(b.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,this.handlerRoomPlaybackClearAll.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener("captureImgUploadFailed",this.captureImgUploadFailed.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener("captureImgStartUploading",this.captureImgStartUploading.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener("captureImgUploadFinished",this.captureImgUploadFinished.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener("captureImgUploadSaved",this.captureImgUploadSaved.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener("preventRepeatChat",this.handlerRepeatChat.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener("synchronousData",this.handlerSynchronousData.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener("getHronousData",this.handlergethronousData.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener("togo_layout",this.handlerTogoLayout.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener(b.default.EVENTTYPE.RoomEvent.roomModeChanged,this.roomModeChanged.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener("room-text-message-list",this.handlerRoomTextMessageList.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener(b.default.EVENTTYPE.RoomEvent.roomNativeNotification,this.downloadFinishedToMesg.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener("handleNoticeMoreUsers",this.handleNoticeMoreUsers.bind(this),this.listernerBackupid),g.default.openUrl=this.openUrl,this.props.isFloating||y.default.CoreController.dispatchEvent({type:"getHronousData"})}},{key:"componentWillUnmount",value:function(){y.default.CoreController.removeBackupListerner(this.listernerBackupid),this.batchDisposeTimer=void 0}},{key:"componentWillUpdate",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"captureImgUploadFailed",value:function(){var e=this.getSendTime(g.default.playback,0);this.notice(e,g.default.language.languageData.captureImg.uploadFailed)}},{key:"captureImgStartUploading",value:function(){var e=this.getSendTime(g.default.playback,0);this.notice(e,g.default.language.languageData.captureImg.StartUploading)}},{key:"captureImgUploadFinished",value:function(){var e=this.getSendTime(g.default.playback,0);this.notice(e,g.default.language.languageData.captureImg.UploadSuccess)}},{key:"captureImgUploadSaved",value:function(e){var t=this.getSendTime(g.default.playback,0),a=e.message.captureImgInfo;this.notice(t,g.default.language.languageData.captureImg.SaveSuccess+a.path)}},{key:"handleNoticeMoreUsers",value:function(e){var t=this.getSendTime(g.default.playback,0);this.notice(t,g.default.language.languageData.moreUser.text)}},{key:"handlerRepeatChat",value:function(){this.notice(void 0,g.default.language.languageData.videoContainer.sendMsg.repeatSpeak.text,"brush")}},{key:"handlerRoomTextMessageList",value:function(e){var t=e.message;this.awitTextMsgs=[].concat((0,r.default)(this.awitTextMsgs),(0,r.default)(t)),this._batchDisposeAwitTextMsgs()}},{key:"handlerSynchronousData",value:function(e){var t=e.message.chatList;this.props.isFloating||(this.chatList=t,this.setState({updateState:!this.state.updateState}))}},{key:"handlergethronousData",value:function(){if(this.props.isFloating){var e=[];this.chatList.forEach(function(t){e.push(t)}),y.default.CoreController.dispatchEvent({type:"synchronousData",message:{chatList:e}})}}},{key:"handlerTogoLayout",value:function(e){if("Encompassment"===e.message.nowLayout&&this.props.isFloating){var t=[];this.chatList.forEach(function(e){t.push(e)}),y.default.CoreController.dispatchEvent({type:"synchronousData",message:{chatList:t}})}}},{key:"_batchDisposeAwitTextMsgs",value:function(){if(this.awitTextMsgs.length){var e=(new Date).getTime(),t=0;L.Logger.debug("  "+this.awitTextMsgs.length+" ,  "+e);for(var a=0,i=this.awitTextMsgs.length;a<i;a++){switch(t++,this.awitTextMsgs[a].type){case"room-text-message":this.handlerRoomTextMessage(this.awitTextMsgs[a],!1)}var o=(new Date).getTime()-e;if(o>300){L.Logger.debug("300ms  "+t+" ,  "+o+"ms , "+(this.awitTextMsgs.length-t));break}}t>=this.awitTextMsgs.length?this.awitTextMsgs.length=0:this.awitTextMsgs.splice(0,t),L.Logger.debug(""+t+" ,  "+((new Date).getTime()-e)+"ms , "+this.awitTextMsgs.length),this.isNeedRender=!1,this.setState({updateState:!this.state.updateState})}}},{key:"roomModeChanged",value:function(){clearInterval(this.batchDisposeTimer),this.batchDisposeTimer=void 0}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(e.message.name){case"EveryoneBanChat":if(t.data.isFromLayout)return;var a=this.getSendTime(g.default.playback,0);this.notice(a,g.default.language.languageData.alertWin.call.prompt.allSilence.yes.text)}}},{key:"handlerRoomDelmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"ClassBegin":!b.default.joinRoomInfo.isClassOverNotLeave&&v.default.handler.getAppPermissions("endClassbeginRevertToStartupLayout")&&setTimeout(function(){t._resetChatList()},250);break;case"EveryoneBanChat":if(a.data.isFromLayout)return;var i=t.getSendTime(g.default.playback,0);t.notice(i,g.default.language.languageData.alertWin.call.prompt.allSilence.no.text)}}},{key:"handlerRoomConnected",value:function(e){if(this.ids.teacherid=(0,s.default)(k.default.getSpecifyRoleList(b.default.role.roleChairman,S.default.getTkRoom().getUsers()))[0],this.ids.myid=S.default.getTkRoom().getMySelf().id,g.default.HeightConcurrence);else{if(b.default.hasRole.roleTeachingAssistant&&!this.isLoadUserVersion){this.isLoadUserVersion=!0;var t=!0,a=!1,i=void 0;try{for(var o,r=(0,l.default)((0,n.default)(S.default.getTkRoom().getUsers()));!(t=(o=r.next()).done);t=!0){var d=o.value;if(d.role!==b.default.role.rolePatrol&&d.role!==b.default.role.rolePlayback&&(d.role!==b.default.role.roleTeachingAssistant||!b.default.joinRoomInfo.isJoinRoomTip)){var u=this.getSendTime(g.default.playback,d.joinTs),c="",f="";switch(d.role){case b.default.role.roleChairman:f=""+g.default.language.languageData.videoContainer.sendMsg.tips.teacher+"";break;case b.default.role.roleTeachingAssistant:f=""+g.default.language.languageData.videoContainer.sendMsg.tips.assistant+"";break;case b.default.role.roleStudent:f=""+g.default.language.languageData.videoContainer.sendMsg.tips.student+"";break;case b.default.role.rolePatrol:f=""+g.default.language.languageData.videoContainer.sendMsg.tips.patrol+""}if(b.default.hasRole.roleTeachingAssistant&&d.appType&&d.devicetype&&d.systemversion&&d.version){var h=g.default.language.languageData.version.clientDeviceVersionInfo.key+d.devicetype,m="webpageApp"===d.appType&&("MacClient"===d.devicetype||"WindowClient"===d.devicetype)&&Number(d.systemversion)>=2018010200?d.systemversion:("webpageApp"===d.appType?g.default.language.languageData.version.browserVersionInfo.webpageApp:g.default.language.languageData.version.browserVersionInfo.mobileApp)+d.systemversion,p=g.default.language.languageData.version.appVersionInfo.key+d.version,v="chinese"===g.default.language.name?"":",";c=v+h+("webpageApp"===d.appType&&("MacClient"===d.devicetype||"WindowClient"===d.devicetype)&&Number(d.systemversion)>=2018010200?" ":v)+m+v+p}this.notice(u,'<span class="limit-length diff-width">'+d.nickname+"</span>"+f+g.default.language.languageData.alertWin.call.prompt.joinRoom.stream.join.text+c)}}}catch(e){a=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw i}}}if(b.default.hasRole.roleTeachingAssistant||b.default.hasRole.roleChairman||b.default.hasRole.rolePatrol){var y=!0,C=!1,w=void 0;try{for(var T,E=(0,l.default)((0,n.default)(S.default.getTkRoom().getUsers()));!(y=(T=E.next()).done);y=!0){var I=T.value;if(!0===I.isInBackGround){var D=this.getSendTime(g.default.playback,0),x=I.nickname+""+I.devicetype+""+g.default.language.languageData.alertWin.call.prompt.homeBtnRemind.leave.text;this.notice(D,x)}else if(!1===I.isInBackGround){var R=this.getSendTime(g.default.playback,0),_=I.nickname+""+I.devicetype+""+g.default.language.languageData.alertWin.call.prompt.homeBtnRemind.join.text;this.notice(R,_)}}}catch(e){C=!0,w=e}finally{try{!y&&E.return&&E.return()}finally{if(C)throw w}}}}}},{key:"downloadFinishedToMesg",value:function(e){if(e.message.args&&e.message.args.result&&"string"==typeof e.message.args.result)try{if(JSON.parse(e.message.args.result).filename)return}catch(e){return}if("onHttpResult"===e.message.name&&0===e.message.args.httpcode){var t=this.getSendTime(g.default.playback,0);this.notice(t,g.default.language.languageData.alertWin.call.prompt.publishStatus.download.success.text)}else if("onHttpResult"===e.message.name&&0!==e.message.args.httpcode){var a=this.getSendTime(g.default.playback,0);this.notice(a,g.default.language.languageData.alertWin.call.prompt.publishStatus.download.failed.text)}}},{key:"handlerRoomParticipantJoin",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this,i=e.user;if(!(g.default.HeightConcurrence||i.role===b.default.role.rolePatrol||i.role===b.default.role.rolePlayback||i.role===b.default.role.roleTeachingAssistant&&b.default.joinRoomInfo.isJoinRoomTip)){var o=a.getSendTime(g.default.playback,e.user.joinTs),n="",l="";switch(i.role){case b.default.role.roleChairman:l=""+g.default.language.languageData.videoContainer.sendMsg.tips.teacher+"";break;case b.default.role.roleTeachingAssistant:l=""+g.default.language.languageData.videoContainer.sendMsg.tips.assistant+"";break;case b.default.role.roleStudent:l=""+g.default.language.languageData.videoContainer.sendMsg.tips.student+"";break;case b.default.role.rolePatrol:l=""+g.default.language.languageData.videoContainer.sendMsg.tips.patrol+""}if(b.default.hasRole.roleTeachingAssistant&&i.appType&&i.devicetype&&i.systemversion&&i.version){var s=g.default.language.languageData.version.clientDeviceVersionInfo.key+i.devicetype,r="webpageApp"===i.appType&&("MacClient"===i.devicetype||"WindowClient"===i.devicetype)&&Number(i.systemversion)>=2018010200?i.systemversion:("webpageApp"===i.appType?g.default.language.languageData.version.browserVersionInfo.webpageApp:g.default.language.languageData.version.browserVersionInfo.mobileApp)+i.systemversion,d=g.default.language.languageData.version.appVersionInfo.key+i.version,u="chinese"===g.default.language.name?"":",";n=u+s+("webpageApp"===i.appType&&("MacClient"===i.devicetype||"WindowClient"===i.devicetype)&&Number(i.systemversion)>=2018010200?" ":u)+r+u+d}a.notice(o,'<span class="limit-length diff-width">'+e.user.nickname+"</span>"+l+" "+g.default.language.languageData.alertWin.call.prompt.joinRoom.stream.join.text+n,void 0,t)}}},{key:"handlerRoomParticipantLeave",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this;if(!g.default.HeightConcurrence){var i=e.user,o="";switch(i.role){case b.default.role.roleChairman:o=""+g.default.language.languageData.videoContainer.sendMsg.tips.teacher+"";break;case b.default.role.roleTeachingAssistant:o=""+g.default.language.languageData.videoContainer.sendMsg.tips.assistant+"";break;case b.default.role.roleStudent:o=""+g.default.language.languageData.videoContainer.sendMsg.tips.student+"";break;case b.default.role.rolePatrol:o=""+g.default.language.languageData.videoContainer.sendMsg.tips.patrol+""}if(i.role!==b.default.role.rolePatrol&&i.role!==b.default.role.rolePlayback&&(i.role!==b.default.role.roleTeachingAssistant||!b.default.joinRoomInfo.isJoinRoomTip)){var n=a.getSendTime(g.default.playback,e.user.leaveTs);a.notice(n,'<span class="limit-length diff-width">'+e.user.nickname+"</span>"+o+" "+g.default.language.languageData.alertWin.call.prompt.joinRoom.stream.leave.text,void 0,t)}}}},{key:"handlerRoomTextMessage",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this.getSendTime(g.default.playback,e.message.ts),i=e.message,o=e.nickname,n=e.role,l=e.userid,s={nickname:o,role:n,id:l};i.msg&&this.appendChatList(i,s,a,t)}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this,n=e.user.id,s=e.message,r=!0,d=!1,u=void 0;try{for(var c,f=(0,l.default)((0,i.default)(s));!(r=(c=f.next()).done);r=!0){var h=c.value,m=(0,o.default)(h,2),p=m[0],v=m[1];if("isInBackGround"===p&&(b.default.hasRole.roleTeachingAssistant||b.default.hasRole.roleChairman||b.default.hasRole.rolePatrol))if(!0===v){var y=S.default.getTkRoom().getUser(n),C=a.getSendTime(g.default.playback,0),k=y.nickname+""+y.devicetype+""+g.default.language.languageData.alertWin.call.prompt.homeBtnRemind.leave.text;a.notice(C,k,void 0,!1)}else if(!1===v){var w=S.default.getTkRoom().getUser(n),T=a.getSendTime(g.default.playback,0),E=w.nickname+""+w.devicetype+""+g.default.language.languageData.alertWin.call.prompt.homeBtnRemind.join.text;a.notice(T,E,void 0,!1)}}}catch(e){d=!0,u=e}finally{try{!r&&f.return&&f.return()}finally{if(d)throw u}}if(n==a.ids.myid&&n!=a.ids.teacherid&&!g.default.playback){var I=e.message.publishstate,D=e.user.candraw,x=e.message.raisehand;null!=x&&(a.property.raiseHand=x);var R=a.getSendTime(g.default.playback,0);null!=I&&((3==a.property.publishState&&1==I||2==a.property.publishState&&4==I)&&a.notice(R,g.default.language.languageData.alertWin.call.prompt.publishStatus.stream.videooff.text,void 0,!1),(3==a.property.publishState&&2==I||1==a.property.publishState&&4==I)&&a.notice(R,g.default.language.languageData.alertWin.call.prompt.publishStatus.stream.audiooff.text,void 0,!1),(4==a.property.publishState&&1==I||2==a.property.publishState&&3==I)&&a.notice(R,g.default.language.languageData.alertWin.call.prompt.publishStatus.stream.audioon.text,void 0,!1),(4==a.property.publishState&&2==I||1==a.property.publishState&&3==I)&&a.notice(R,g.default.language.languageData.alertWin.call.prompt.publishStatus.stream.videoon.text,void 0,!1),0==a.property.publishState&&I&&a.notice(R,g.default.language.languageData.alertWin.call.prompt.publishStatus.stream.yes_status_3.text,void 0,!1),0==I&&a.notice(R,g.default.language.languageData.alertWin.call.prompt.publishStatus.stream.no_status_0.text,void 0,!1),a.property.publishState=I),null!=D&&(e.user.publishstate?D!=a.property.drawtype&&(D?a.notice(R,g.default.language.languageData.alertWin.call.prompt.chat.literally.yes.text,void 0,!1):a.notice(R,g.default.language.languageData.alertWin.call.prompt.chat.literally.no.text,void 0,!1),a.property.drawtype=D):a.property.drawtype=D)}t&&(this.isNeedRender=!1,this.setState({updateState:!this.state.updateState}))}},{key:"handlerRoomPlaybackClearAll",value:function(){this._resetChatList()}},{key:"getSendTime",value:function(e,t){var a=void 0;if(e&&null!=t){var i=new Date(parseInt(t));a=this.toTwo(i.getHours())+":"+this.toTwo(i.getMinutes())}else a=this.toTwo((new Date).getHours())+":"+this.toTwo((new Date).getMinutes());return a}},{key:"switchRole",value:function(e,t){var a="";if(g.default.playback)return a;var i=S.default.getTkRoom().getMySelf().id;if(e.id===i)a=""+g.default.language.languageData.videoContainer.sendMsg.tips.me;else switch(e.role){case b.default.role.roleChairman:a=""+g.default.language.languageData.videoContainer.sendMsg.tips.teacher;break;case b.default.role.roleTeachingAssistant:a=""+g.default.language.languageData.videoContainer.sendMsg.tips.assistant}return a}},{key:"toTwo",value:function(e){return 0==parseInt(e/10)?"0"+e:e}},{key:"notice",value:function(e,t,a){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.chatList.push({time:e,who:t,styleName:a}),i&&(this.isNeedRender=!1,this.setState({updateState:!this.state.updateState}))}},{key:"replace_em",value:function(e){if(e){e.indexOf()&&(e=e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\n/g,"<br/>").replace(/ /g,"&nbsp;")),-1!=e.indexOf("em")&&(e=e.replace(/\[em_([1-8]*)\]/g,function(e,t){return"<img src=./img/"+t+'.png border="0" />'}));return e=(e=e.replace(/&nbsp;/g," ")).replace(/((http|ftp|https):\/\/)?[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/g,function(e){if(2==e.split(".").length&&!e.match(/.com|.cn|.net|.org|.gov|.edu|.mil|.mobi|.io|.ws|.tv|.fm|.museum|.int|.areo|.post|.rec|.asia/i))return e;var t=-1!=e.indexOf("http")?e:"http://"+e;return g.default.isClient?g.default.isClient&&g.default.clientversion>=2018031e3&&S.default.getNativeInterface().clientOpenBrowserUrl?'<a href="javascript:void(0);" onclick="window.GLOBAL.openUrl('+("'"+t+"'")+')">'+e+"</a>":void 0:'<a href="'+t+'" target="_blank" >'+e+"</a>"}),p.default.createElement("span",{dangerouslySetInnerHTML:{__html:e}})}}},{key:"openUrl",value:function(e){g.default.isClient&&S.default.getNativeInterface().clientOpenBrowserUrl(e)}},{key:"appendChatList",value:function(e,t,a){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=this,n="onlyimg"===e.msgtype?e.msg:o.replace_em(e.msg),l=this.switchRole(t,e.type);0===e.type&&(o.chatList.push({who:t.nickname,sendUserType:l,time:a,msg:n,styleName:t.id===S.default.getTkRoom().getMySelf().id?"isme ":"",type:e.type,fromID:t.id,msgtype:e.msgtype,cospath:e.cospath}),i&&(this.isNeedRender=!1,this.setState({updateState:!this.state.updateState})))}},{key:"changeChatList",value:function(e,t){this.chatList[e]&&(this.chatList[e].transResult=t,this.isNeedRender=!1,this.setState({updateState:!this.state.updateState}))}},{key:"_resetChatList",value:function(){this.chatList=[],this.awitTextMsgs=[],this.isNeedRender=!1,this.setState({updateState:!this.state.updateState})}},{key:"accelerateDate",value:function(e){return this.chatList[e]}},{key:"render",value:function(){var e=this.props,t=e.isShow,a=e.chatFontSize;return p.default.createElement("section",{className:"chat-part "+(b.default.hasRole.rolePatrol||b.default.hasRole.rolePlayback?" aa":"")},p.default.createElement(C.default,{isShow:t||"",changeChatList:this.changeChatList.bind(this),accelerateDate:this.accelerateDate.bind(this),chatMessageListLength:this.chatList.length,show:this.props.selectChat===this.chatType.allChat,delChatListNum:this.delChatListNum,chatFontSize:a}))}}]),t}(m.Component),E=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return p.default.createElement(T,{selectChat:this.state.selectChat,layoutToChat:!!this.state.layoutToChat,isFloating:!1,chatFontSize:this.state.chatFontSize,isShow:this.state.show})}}]),t}(m.Component);t.default=E},ikRo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=m(a("Yz+Y")),o=m(a("iCc5")),n=m(a("V7oC")),l=m(a("FYw3")),s=m(a("mRg0")),r=(0,m(a("CSPP")).default)(["\n   display : ",";\n"],["\n   display : ",";\n"]),d=m(a("q1tI")),u=m(a("vOnD")),c=m(a("HPAy")),f=m(a("eQYT")),h=m(a("U5/2"));function m(e){return e&&e.__esModule?e:{default:e}}var p=u.default.div(r,function(e){return e.classBegin&&(f.default.hasRole.roleChairman||f.default.hasRole.roleTeachingAssistant)?"block":"none"}),g=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.option,a=e.buttonClick,i=e.classBegin,o=c.default.systemStyleJson.HeaderVesselSmartStyleJson,n=void 0===o?{}:o,l="calc("+window.innerHeight+"px - "+n.height+")";return d.default.createElement("div",null,d.default.createElement(p,{title:c.default.language.languageData.toolContainer.toolIcon.overallControl.title,className:"Tk-header-icon icon-option "+(t?"active":""),onClick:a,classBegin:i},d.default.createElement(h.default,{id:"controlPanelMain"})),d.default.createElement("div",{className:"mask2",onClick:a,style:{display:t?"block":"none",height:l}}))}}]),t}(d.default.Component);t.default=g},imbG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(a("Yz+Y")),o=u(a("iCc5")),n=u(a("V7oC")),l=u(a("FYw3")),s=u(a("mRg0")),r=u(a("q1tI")),d=(u(a("aJKe")),u(a("JL1q")));u(a("HPAy"));function u(e){return e&&e.__esModule?e:{default:e}}a("/dUc"),a("bF9o");var c=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={showState:!0},a.clickFlag=!0,a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"play",value:function(){this.clickFlag&&(d.default.handler.joinPlaybackRoom(),this.setState({showState:!1}),this.clickFlag=!1)}},{key:"render",value:function(){var e=this.state.showState,t=this.props.content;return r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{style:{display:e?"block":"none"},className:"playButton",onClick:this.play.bind(this)}),r.default.createElement("div",{className:"load-container",style:{display:e?"none":"block"}},r.default.createElement("span",{className:"icon"}),r.default.createElement("span",{className:"content"},t)))}}]),t}(r.default.Component);t.default=c},jBpf:function(e,t,a){},jKbA:function(e,t,a){},jiMi:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=p(a("Yz+Y")),o=p(a("iCc5")),n=p(a("V7oC")),l=p(a("FYw3")),s=p(a("mRg0")),r=p(a("q1tI")),d=p(a("Fveh")),u=p(a("aJKe")),c=p(a("mrNk")),f=p(a("HPAy")),h=p(a("eQYT")),m=p(a("uuqz"));p(a("JL1q"));function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={startTime:0,endTime:0,currTime:0,play:!1,fullScreenState:!1,progress:0,volume:100},a.currTimeBackup=0,a.intervalNumber=1e3,a.progressDraging=!1,a.isVolumeDraging=!1,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){u.default.Document.addEventListener(h.default.EVENTTYPE.DocumentEvent.onFullscreenchange,this.handlerOnFullscreenchange.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomPlaybackClearAll,this.handlerRoomPlaybackClearAll.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomPlaybackDuration,this.handlerRoomPlaybackDuration.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomPlaybackPlaybackEnd,this.handlerRoomPlaybackPlaybackEnd.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomPlaybackPlaybackUpdatetime,this.handlerRoomPlaybackPlaybackUpdatetime.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),u.default.CoreController.addEventListener("callPlaybackOnClick",this.handlerCallPlaybackOnClick.bind(this,2e3),this.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.play!==this.state.play&&(c.default.getTkWhiteBoardManager().noticeWhiteboardActionCommand&&c.default.getTkWhiteBoardManager().noticeWhiteboardActionCommand("playOrPauseDynamicPpt",{pause:!this.state.play}),u.default.CoreController.dispatchEvent({type:"playbackControl_play_pause",message:{play:this.state.play}})),this.state.progress>=100&&(this.currTimeBackup=this.state.startTime,this.setState({startTime:this.state.startTime,currTime:this.state.startTime,progress:0}),c.default.getTkRoom().seekPlayback(this.state.startTime),this.state.play&&this.playOrPausePlayback(!1,!1),u.default.CoreController.dispatchEvent({type:"playbackControl_seek_position",message:{positionTime:this.state.startTime,progress:0}}))}},{key:"componentWillUnmount",value:function(){u.default.CoreController.removeBackupListerner(this.listernerBackupid),u.default.Document.removeBackupListerner(this.listernerBackupid),this._stopTimer()}},{key:"handlerRoomPlaybackClearAll",value:function(){f.default.playback?u.default.CoreController.dispatchEvent({type:h.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController}):L.Logger.error("No playback environment, no execution event[roomPlaybackClearAll] handler ")}},{key:"handlerRoomPlaybackDuration",value:function(e){var t=e.message,a=t.startTime,i=t.endTime;this.currTimeBackup=a,this.setState({startTime:a,endTime:i,currTime:a,progress:0,play:!0}),this.handlerRoomPlaybackClearAll(),this._startTimer(),this.handlerCallPlaybackOnClick(3e3)}},{key:"handlerRoomPlaybackPlaybackEnd",value:function(){var e=this.state.endTime;this.currTimeBackup=e,this.setState({currTime:e,progress:100,play:!1}),this._stopTimer();var t=document.getElementById("playback-container");clearTimeout(this.showControllerTimer),t.classList.add("show")}},{key:"handlerRoomPlaybackPlaybackUpdatetime",value:function(e){var t=e.message.current,a=m.default.isMillisecondClass(t)?t:1e3*t,i=this._getProgressByTimeDifference(a);this.currTimeBackup=a,this.setState({currTime:a,progress:i})}},{key:"handlerOnFullscreenchange",value:function(){this.setState({fullScreenState:m.default.tool.getFullscreenElement()&&"body"==m.default.tool.getFullscreenElement().nodeName.toLowerCase()})}},{key:"handlerRoomPubmsg",value:function(e){}},{key:"handlerRoomDelmsg",value:function(e){}},{key:"onAfterChangeProgressPlayback",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this;a.progressDraging=!1,a.changeProgress=void 0;var i=a.state,o=i.startTime,n=i.endTime,l=parseInt(e/100*(n-o)+o);l>n?(l=n,e=100):l<=o&&(l=o,e=0),a.currTimeBackup=l,a.setState({currTime:l,progress:e}),c.default.getTkRoom().seekPlayback(l),t&&!this.state.play&&a.playOrPausePlayback(!0,!1),u.default.CoreController.dispatchEvent({type:"playbackControl_seek_position",message:{positionTime:l,progress:e}})}},{key:"onBeforeChangeProgressPlayback",value:function(e){this.progressDraging=!0,this.changeProgress=e,u.default.CoreController.dispatchEvent({type:"playbackProgressChange",message:{}})}},{key:"playOrPausePlayback",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this;e?(t&&this.state.progress>=100&&(a.setState({currTime:0,progress:0}),a.onAfterChangeProgressPlayback(0,!1)),c.default.getTkRoom().pausePlayback(!1),a._startTimer()):(c.default.getTkRoom().pausePlayback(!0),a._stopTimer()),a.setState({play:e}),u.default.CoreController.dispatchEvent({type:"playOrPausePlaybackTimer",play:e})}},{key:"playbackFullScreen",value:function(e){this.state.fullScreenState?m.default.tool.exitFullscreen():m.default.tool.launchFullscreen(e)}},{key:"_timeDifferenceToFormat",value:function(e,t){var a=m.default.getTimeDifferenceToFormat(e,t),i=void 0;if(a){var o=a.hh;i=a.mm+":"+a.ss,"0"!=o&&"00"!=o&&(i=o+":"+i)}return i}},{key:"_startTimer",value:function(){}},{key:"_stopTimer",value:function(){}},{key:"_getProgressByTimeDifference",value:function(e,t,a){var i=0,o=e-(t=t||this.state.startTime),n=(a=a||this.state.endTime)-t;return n>0&&(i=Math.floor(o/n*100)),o>n&&(i=100),i<0&&(i=0),i>100&&(i=100),i}},{key:"volumeOnBeforeChange",value:function(e){this.isVolumeDraging=!0,this.changeVolume=e}},{key:"volumeOnAfterChange",value:function(e){this.isVolumeDraging=!1,this.changeVolume=void 0,this.volume=e,this.setState({volume:e})}},{key:"volumeMuteOnClick",value:function(){this.setState({volume:0!==this.state.volume?0:this.volume||100})}},{key:"handlerCallPlaybackOnClick",value:function(e){var t=document.getElementById("playback-container");clearTimeout(this.showControllerTimer),t.classList.toggle("show"),this.showControllerTimer=setTimeout(function(){t.classList.remove("show")},e)}},{key:"handlerCallPlaybackOnMouseOut",value:function(){clearTimeout(this.showControllerTimer),document.getElementById("playback-container").classList.add("show")}},{key:"handlerCallPlaybackOnMouseLeave",value:function(){clearTimeout(this.showControllerTimer);var e=document.getElementById("playback-container");this.showControllerTimer=setTimeout(function(){e.classList.remove("show")},2e3)}},{key:"render",value:function(){var e=this.state,t=e.play,a=e.startTime,i=e.endTime,o=(e.fullScreenState,this.currTimeBackup),n=this._timeDifferenceToFormat(a,o),l=this._timeDifferenceToFormat(a,i);return r.default.createElement("div",{className:"whiteboard-sdk-px-to-rem tk-video-player-container playback ",id:"playback-container",onMouseOut:this.handlerCallPlaybackOnMouseOut.bind(this),onMouseLeave:this.handlerCallPlaybackOnMouseLeave.bind(this)},r.default.createElement("article",{className:"talkcloud-sdk-whiteboard tk-media-player  tk-media-player-total-control-box"},r.default.createElement("article",{className:"talkcloud-sdk-whiteboard tk-media-player  tk-media-player-total-control video-player-control-container  "},r.default.createElement("article",{className:"media-player-box clear-float "},r.default.createElement("span",{className:"media-player-icon add-fl"}),r.default.createElement("div",{className:"media-player-control-container add-fl clear-float"},r.default.createElement("button",{className:"play-pause-btn aaaa add-cursor-pointer add-fl "+(t?"pause":"play"),id:"play_pause_btn_replay",onClick:this.playOrPausePlayback.bind(this,!t)}),r.default.createElement("div",{className:"media-player-info-container add-fl"},r.default.createElement(d.default,{className:"tk-slider tk-playback-progress-slider",value:void 0!==this.changeProgress?this.changeProgress:this.state.progress,onAfterChange:this.onAfterChangeProgressPlayback.bind(this),onBeforeChange:this.onBeforeChangeProgressPlayback.bind(this)}),r.default.createElement("div",{className:"media-player-name-time-container clear-float"},r.default.createElement("span",{className:"media-player-name add-fl add-nowrap"}),r.default.createElement("span",{className:"media-player-time-container add-fr"},r.default.createElement("em",{className:"curr-time"},n)," / ",r.default.createElement("em",{className:"total-time"},l)))))))))}}]),t}(r.default.Component);t.default=g},k7z5:function(e,t,a){},kQrP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=c(a("FyfS")),o=c(a("Yz+Y")),n=c(a("iCc5")),l=c(a("V7oC")),s=c(a("FYw3")),r=c(a("mRg0")),d=c(a("q1tI")),u=c(a("i8i4"));function c(e){return e&&e.__esModule?e:{default:e}}a("+Aed");var f=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={extendShow:!1,listDirection:"down"},a.maxOptionNumber=5,a.pageSelectListPassivityHideNumber=a.props.pageSelectListPassivityHideNumber,a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){clearTimeout(this.pageSelectListPassivityHideNumbertTimer),this.pageSelectListPassivityHideNumbertTimer=null}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(t.extendShow!==this.state.extendShow&&this._noticeSelectExtendListShowOrHide(this.state.extendShow),void 0!==this.props.pageSelectListPassivityHideNumber&&this.pageSelectListPassivityHideNumber!==this.props.pageSelectListPassivityHideNumber&&(clearTimeout(this.pageSelectListPassivityHideNumbertTimer),this.pageSelectListPassivityHideNumbertTimer=setTimeout(function(){a.pageSelectListPassivityHideNumber=a.props.pageSelectListPassivityHideNumber,a.state.extendShow&&a.setState({extendShow:!1})},150)),this.refs.tkSelectContainer){var i=u.default.findDOMNode(this.refs.tkSelectContainer);if(i){var o=this._getRect(i),n=o.top,l=o.height;window.innerHeight-n>this.maxOptionNumber*l+20?"down"!==this.state.listDirection&&this.setState({listDirection:"down"}):"up"!==this.state.listDirection&&this.setState({listDirection:"up"})}}}},{key:"optionOnClick",value:function(e,t,a){return this.setState({extendShow:!1}),e!==this.props.currentValue&&this.props.onChange&&"function"==typeof this.props.onChange&&this.props.onChange(e,t),a&&(a.preventDefault(),a.stopPropagation()),!1}},{key:"currentTextOnClick",value:function(e){return this.setState({extendShow:!this.state.extendShow}),e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"selectContainerOnMouseLeave",value:function(e){return this.setState({extendShow:!1}),e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"_noticeSelectExtendListShowOrHide",value:function(e){this.props.noticeSelectExtendListShowOrHide&&"function"==typeof this.props.noticeSelectExtendListShowOrHide&&this.props.noticeSelectExtendListShowOrHide(e)}},{key:"_getRect",value:function(e){var t=e.getBoundingClientRect(),a=document.documentElement.clientTop,i=document.documentElement.clientLeft;return{top:t.top-a,bottom:t.bottom-a,left:t.left-i,right:t.right-i,width:t.width,height:t.height}}},{key:"render",value:function(){var e=this,t=this.props,a=t.id,o=t.className,n=t.optionClassName,l=t.selectOptions,s=void 0===l?[]:l,r=t.disabled,u=t.isMobile,c=void 0!==u&&u,f=t.currentValue,h=t.maxH,m=void 0,p=!0,g=!1,v=void 0;try{for(var y,S=(0,i.default)(s);!(p=(y=S.next()).done);p=!0){var b=y.value;if(b.value===f){m=b.label;break}}}catch(e){g=!0,v=e}finally{try{!p&&S.return&&S.return()}finally{if(g)throw v}}return d.default.createElement("div",{id:a,ref:"tkSelectContainer",className:"tk-select-container "+this.state.listDirection+(r?" disabled ":"  ")+(o||"")+(c?"app-mobile ":" ")+(r?" hideExtendList":this.state.extendShow?" showExtendList":" hideExtendList"),onMouseLeave:c?void 0:this.selectContainerOnMouseLeave.bind(this)},d.default.createElement("div",{className:"current-select-text "+(r?"disabled ":" "),disabled:r,onClick:r?void 0:this.currentTextOnClick.bind(this)},m),d.default.createElement("span",{className:"arrow-icon icon-tools_up "+(r?"disabled ":" "),onClick:r?void 0:this.currentTextOnClick.bind(this)}),d.default.createElement("div",{className:"select-extend-list-container-box "+this.state.listDirection+(r?" disabled ":"  "),style:{display:r?"none":this.state.extendShow?"block":"none",maxHeight:h?"1.45rem":"calc("+this.maxOptionNumber+" * 0.5rem)"}},d.default.createElement("ol",{className:"select-extend-list-container "+this.state.listDirection+(r?" disabled ":"  "),style:{display:r?"none":this.state.extendShow?"block":"none",maxHeight:h?"1.25rem":"calc("+this.maxOptionNumber+" * 0.5rem)"}},s.map(function(t,a){return d.default.createElement("li",{key:a,className:"select-option "+(n||" ")+(f===t.value?" selected":" "),tkcustomdatalabel:t.label,onClick:r?void 0:e.optionOnClick.bind(e,t.value,a)},t.label)}))))}}]),t}(d.default.Component);t.default=f},kXfj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(a("gDS+")),o=d(a("iCc5")),n=d(a("V7oC")),l=d(a("aJKe")),s=d(a("eQYT")),r=d(a("XbJA"));function d(e){return e&&e.__esModule?e:{default:e}}var u=new(function(){function e(){(0,o.default)(this,e),this.listernerBackupid=(new Date).getTime()+"_"+Math.random()}return(0,n.default)(e,[{key:"addEventListener",value:function(){l.default.CoreController.addEventListener(s.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),l.default.CoreController.addEventListener(s.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),l.default.CoreController.addEventListener("outIframe-msglist",this.handlerOutIframeMsglist.bind(this),this.listernerBackupid)}},{key:"removeEventListener",value:function(){l.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerRoomPubmsg",value:function(e){if(window!=window.parent){var t=e.message;if(/outIframe/.test(t.name)){var a=(0,i.default)(t.data);if(L.Logger.debug("[pubmsg]send outIframe info:",a),window==window.parent)return;window.parent.postMessage(a,"*")}}}},{key:"handlerOutIframeMsglist",value:function(e){if(window!=window.parent){var t=e.message.signallingData;if(/outIframe/.test(t.name)){var a=(0,i.default)(t.data);L.Logger.debug("[msglist]send outIframe info:",a),window.parent.postMessage(a,"*")}}}},{key:"handlerOnMessage",value:function(e){return this.handlerIframeMessage(e)}},{key:"handlerIframeMessage",value:function(e){var t=void 0;try{if((t=JSON.parse(e.data)).source)switch(t.source){case"tk_dynamicPPT":case"tk_dynamicPPT_preload":break;default:return window==window.parent||(L.Logger.debug("receive outIframe info:",t),r.default.sendSignallingToParentIframe(t),!0)}}catch(t){return void L.Logger.warning("iframe message data can't be converted to JSON , iframe data:",e.data)}}},{key:"handlerRoomConnected",value:function(){window!=window.parent&&window.parent.postMessage((0,i.default)({source:"Talk",data:{action:"loaded"}}),"*")}}]),e}());t.default=u},"kd7/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=T(a("HaWR")),o=T(a("Yz+Y")),n=T(a("iCc5")),l=T(a("V7oC")),s=T(a("FYw3")),r=T(a("mRg0")),d=T(a("P2sY")),u=T(a("ODRq"));a("3of3");var c=T(a("q1tI")),f=T(a("pIe1")),h=T(a("mrNk")),m=T(a("aJKe")),p=T(a("XbJA")),g=T(a("3mpg")),v=T(a("eQYT")),y=T(a("HPAy")),S=T(a("s17s")),b=T(a("361B")),C=T(a("vPeN")),k=T(a("QpLg")),w=T(a("ylj9"));function T(e){return e&&e.__esModule?e:{default:e}}var E={on:m.default.CoreController.addEventListener,off:m.default.CoreController.removeBackupListerner,emit:m.default.CoreController.dispatchEvent},I={detail:"DETAIL",option:"OPTION",statistics:"STATISTICS",current:"CURRENT"},D=[v.default.EVENTTYPE.RoomEvent.roomPubmsg,v.default.EVENTTYPE.RoomEvent.roomDelmsg,v.default.EVENTTYPE.RoomEvent.roomDisconnected,"receive-msglist-question","receive-msglist-publishResult"],x=["UNSTART","RUNNING","FINISHED"],R=new u.default([[x[0],I.option],[x[1],I.statistics],[x[2],I.current]]),_={hasChose:!1},P=new Array(4).fill(void 0).map(function(e){return(0,d.default)({},_)}),A=function(e){function t(){(0,n.default)(this,t);var e=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return e.owner=h.default.getTkRoom().getMySelf(),e.role=e.owner.role,e.pollTimerID=void 0,e.ansTimerID=void 0,e.statisticsTimerID=void 0,e.quesID=void 0,e.pollInterval=3e3,e.markID=(new Date).getTime()+"_"+Math.random(),e.state={show:!1,questionState:x[0],page:{index:I.option,data:null},options:P,result:new Array(P.length).fill(0),hasPub:!1,ansTime:0,resultNum:0,rightOptions:[],detailData:[],resizeInfo:{width:0,height:0},detailPageInfo:{current:1,total:1},hintShow:!1},e}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this;D.forEach(function(t,a){return E.on(t,e.handleEvent.bind(e),e.markID)})}},{key:"componentWillUnmount",value:function(){E.off(this.markID)}},{key:"componentDidUpdate",value:function(e,t){t.show!==this.state.show&&this.state.show&&(this.isSetDefaultPosition=!1,this.setDefaultPosition()),this.updateResize()}},{key:"updateResize",value:function(){var e=this.props.id,t=document.getElementById(e);if(t){var a=y.default.windowInnerWidth/v.default.STANDARDSIZE,o=t.offsetWidth/a,n=t.offsetHeight/a;!this.state.resizeInfo||(0,i.default)(this.state.resizeInfo.width,o)&&(0,i.default)(this.state.resizeInfo.height,n)||(this.state.resizeInfo={width:o,height:n},this.setState({resizeInfo:this.state.resizeInfo}))}}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,i=document.getElementById(t),o=document.querySelector(a.bounds);if(i&&o&&a.changePosition&&"function"==typeof a.changePosition){a.changePosition(t,{percentLeft:.5,percentTop:.5,isDrag:!1},!0)}}},{key:"dispose",value:function(e){var t=e.action,a=e.data,i=e.extra;if(null===t||null===a)return L.Logger.error("Incomplete parameter");this[t]&&"function"==typeof this[t]&&this[t]({action:t,data:a,extra:i})}},{key:"turn",value:function(e){var t=e.data,a=e.extra,i=e.extra.page;if(null===t||null===a||void 0===i)return L.Logger.error("Error parameter");i.index!==I.current&&this.setState({page:i})}},{key:"handleEvent",value:function(e){var t=this,a=e.type,i=e.message;a=/-/.test(a)&&a.replace(/\-/g,"")||a,this.setState({event:{type:a,message:i}},function(){return t.dispose({action:a,data:i})})}},{key:"changeQuestionState",value:function(e){var t=this,a=e.data,i=this.state,o=i.questionState,n=i.options,l=x.indexOf(o),s=R.get(x.length-1===l?x[0]:x[l+1]),r=s===I.current?this.state.page:{index:s,data:a};if("UNSTART"!==o||n.some(function(e){return!0===e.hasChose})){var d="UNSTART"===o?"Start":"RUNNING"===o?"End":"Reset",u=n.map(function(e,t){if(!0===e.hasChose)return t}).filter(function(e){return void 0!==e});this.setState({questionState:x[x.length-1===l?0:l+1],page:r,rightOptions:u},function(){t["questionWill"+d]()})}else this.setState({hintShow:!0})}},{key:"questionWillStart",value:function(){var e=this.state,t=e.options,a=e.rightOptions;p.default.sendQuestion(!1,{options:t,action:"start",rightOptions:a,state:this.state}),this.startAnsTimer(),this.startGetAnswerData()}},{key:"questionWillEnd",value:function(){this.stopGetAnswerData(),this.stopAnsTimer(),p.default.sendQuestion(!1,{action:"end",state:this.state,quesID:this.quesID||void 0});var e=this.state,t=e.result,a=e.resultNum,i=e.ansTime,o=e.rightOptions;p.default.publishResult({result:t,resultNum:a,ansTime:i,rightOptions:o})}},{key:"questionWillReset",value:function(){p.default.sendQuestion(!0,{}),p.default.publishResult({},!0),p.default.sendQuestion(!1,{action:"open"}),this.statisticsTimerID&&clearInterval(this.statisticsTimerID),this.setState({resultNum:0,ansTime:0,hasPub:!1,options:new Array(4).fill(void 0).map(function(e){return(0,d.default)({},_)}),detailData:[],detailPageInfo:{current:1,total:1},hintShow:!1})}},{key:"roompubmsg",value:function(e){var t=this,a=e.data;if(a.data){var i=a.name,o=a.values,n=a.answerCount,l=a.data,s=(l.options,l.action),r=(l.rightOptions,l.state),u=l.quesID;switch(i){case"Question":if(!v.default.hasRole.roleStudent)switch(s){case"open":this.setState({show:!0,questionState:x[0],page:{index:I.option},options:new Array(4).fill(void 0).map(function(e){return(0,d.default)({},_)})});break;case"start":this.quesID=a.data.quesID,this.setState(r,function(){t.startAnsTimer(),t.startGetAnswerData()});break;case"end":this.quesID=u,this.stopAnsTimer(),this.stopGetAnswerData(),this.setState({questionState:x[2]})}break;case"GetQuestionCount":var c=null!=o?new Array(this.state.options.length).fill(0).map(function(e,t){return o&&Number(o[""+t])||0}):new Array(this.state.options.length).fill(0),f=n;this.setState({result:c,resultNum:f});break;case"PublishResult":var h=a.data.hasPub;h&&this.setState({hasPub:h})}}}},{key:"roomdelmsg",value:function(e){switch(e.data.name){case"Question":case"ClassBegin":this.setState({show:!1,questionState:x[0],options:new Array(4).fill(void 0).map(function(e){return(0,d.default)({},_)}),resultNum:0,ansTime:0,hasPub:!1,detailData:[]},function(){E.emit({type:"colse-holdAll-item",message:{type:"answer"}})})}}},{key:"roomdisconnected",value:function(e){e.data;this.state.show&&this.setState({show:!1})}},{key:"receivemsglistpublishResult",value:function(){this.setState({hasPub:!0})}},{key:"receivemsglistquestion",value:function(e){var t=this;if(e.data.data.data){this.state.questionState;var a=y.default.serviceTime/1e3-e.data.data.ts,i=e.data.data.data,o=i.action,n=i.options,l=i.rightOptions,s=i.quesID,r=i.state;"open"!==o||v.default.hasRole.roleStudent||this.setState({show:!0,options:new Array(4).fill(void 0).map(function(e){return(0,d.default)({},_)})}),"start"!==o||v.default.hasRole.roleStudent||(this.quesID=s,p.default.getQuestionCount({}),this.setState({show:!0,questionState:"RUNNING",page:{index:I.statistics},ansTime:a,rightOptions:l,options:n},function(){t.startAnsTimer(),t.startGetAnswerData()})),"end"!==o||v.default.hasRole.roleStudent||(this.quesID=s,this.stopAnsTimer(),this.stopGetAnswerData(),this.setState(r))}}},{key:"startGetAnswerData",value:function(){this.pollTimerID&&clearInterval(this.pollTimerID),this.pollTimerID=setInterval(function(){p.default.getQuestionCount({})},this.pollInterval),this.setState({result:new Array(this.state.options.length).fill(0)})}},{key:"startAnsTimer",value:function(){var e=this;this.ansTimerID&&clearInterval(this.ansTimerID),this.ansTimerID=setInterval(function(){var t=e.state.ansTime+1;e.setState({ansTime:t})},1e3)}},{key:"stopGetAnswerData",value:function(){this.pollTimerID&&clearInterval(this.pollTimerID),this.pollTimerID=void 0,p.default.getQuestionCount({})}},{key:"stopAnsTimer",value:function(){this.ansTimerID&&clearInterval(this.ansTimerID)}},{key:"publishResult",value:function(){var e=this.state,t=e.result,a=e.resultNum,i=e.ansTime,o=e.rightOptions;p.default.publishResult({result:t,resultNum:a,ansTime:i,rightOptions:o,hasPub:!0}),this.setState({hasPub:!0})}},{key:"changeOptionLength",value:function(e){var t=e.data.num,a=this.state.options;a.length>=8&&t>0||a.length<=2&&t<0||(t>0&&a.push((0,d.default)({},_))||a.pop(),this.setState({options:a}))}},{key:"optionClick",value:function(e){var t=e.data.index,a=this.state.options;a[t].hasChose=!a[t].hasChose,this.setState({options:a})}},{key:"changeDetail",value:function(e){var t=this,a=(e.action,e.data);if(!(1===this.state.detailPageInfo.current&&-1===a.action||this.state.detailPageInfo.current===this.state.detailPageInfo.total&&1===a.action))if(-1===a.action){var i=this.state.detailPageInfo.current-1;this.getDetailData(i),this.statisticsTimerID&&(clearInterval(this.statisticsTimerID),this.getDetailData(i),this.statisticsTimerID=setInterval(function(){t.getDetailData(i)},500))}else if(1===a.action){var o=this.state.detailPageInfo.current+1;this.getDetailData(o),this.statisticsTimerID&&(clearInterval(this.statisticsTimerID),this.getDetailData(o),this.statisticsTimerID=setInterval(function(){t.getDetailData(o)},500))}else if(2===a.action){var n=a.text;""===n&&(n=this.state.detailPageInfo.current),this.getDetailData(n),this.statisticsTimerID&&(clearInterval(this.statisticsTimerID),this.getDetailData(n),this.statisticsTimerID=setInterval(function(){t.getDetailData(n)},500))}else if(3===a.action){var l=void 0;l=isNaN(parseInt(a.text))?this.state.detailPageInfo.current:a.text,this.getDetailData(l),this.statisticsTimerID&&(clearInterval(this.statisticsTimerID),this.getDetailData(l),this.statisticsTimerID=setInterval(function(){t.getDetailData(l)},500))}}},{key:"changeDetailOrStatistics",value:function(){var e=this,t=this.state.page;this.state.page.index===I.statistics?(this.getDetailData(1),this.statisticsTimerID=setInterval(function(){e.getDetailData(1)},500)):this.statisticsTimerID&&(clearInterval(this.statisticsTimerID),this.statisticsTimerID=void 0),this.setState({page:{index:t.index===I.statistics?I.detail:I.statistics}})}},{key:"getDetailData",value:function(e){var t=this;g.default.getSimplifyAnswer({id:this.quesID,page:e},{doneCallback:function(a){0===a.result&&t.setState({detailData:a.data,detailPageInfo:{total:a.pageinfo&&Math.ceil(a.pageinfo.count/20)||1,current:e}})}})}},{key:"close",value:function(){this.props.id;this.statisticsTimerID&&clearInterval(this.statisticsTimerID),this.setState({show:!1,questionState:x[0],options:new Array(4).fill(void 0).map(function(e){return(0,d.default)({},_)}),resultNum:0,ansTime:0,hasPub:!1,hintShow:!1,detailData:[],detailPageInfo:{current:1,total:1}},function(){p.default.sendQuestion(!0,{}),p.default.publishResult({},!0),E.emit({type:"colse-holdAll-item",message:{type:"answer"}})})}},{key:"render",value:function(){var e=this.state,t=e.show,a=e.questionState,i=e.resizeInfo,o=(0,d.default)(this.state,{role:this.role,owner:this.owner}),n=this.props,l=n.id,s=n.answerDrag,r=n.draggableData,u=s.percentLeft,h=s.percentTop;0==u||u||(u=.5),0==h||h||(h=.5);var m={position:"absolute",zIndex:130,display:t?"":"none",left:0,top:0},p=Object.customAssign({id:l,size:i,percentPosition:{percentLeft:u,percentTop:h}},r);return y.default.playback?void 0:c.default.createElement(f.default,p,c.default.createElement("div",{id:l,className:"question-panel teacher "+a.toLowerCase()+"  beyondDaTiQi",style:m},c.default.createElement(k.default,{parentState:o,dispose:this.dispose.bind(this),pageDict:I}),c.default.createElement("div",{className:"body"},this.state.page.index===I.option?c.default.createElement(S.default,{parentState:o,dispose:this.dispose.bind(this),pageDict:I}):void 0,this.state.page.index===I.detail||this.state.page.index===I.statistics?c.default.createElement(b.default,{parentState:o,dispose:this.dispose.bind(this),pageDict:I}):void 0,this.state.page.index===I.detail||this.state.page.index===I.statistics?c.default.createElement(w.default,{parentState:o,dispose:this.dispose.bind(this),pageDict:I}):void 0),c.default.createElement(C.default,{parentState:o,dispose:this.dispose.bind(this),pageDict:I})))}}]),t}(c.default.Component);t.default=A},kfeF:function(e,t,a){},kpjk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=m(a("Yz+Y")),o=m(a("iCc5")),n=m(a("V7oC")),l=m(a("FYw3")),s=m(a("mRg0")),r=m(a("q1tI")),d=m(a("HPAy")),u=m(a("eQYT")),c=m(a("aJKe")),f=m(a("V7x4")),h=(m(a("rTPC")),m(a("xWvL")));function m(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={notClockTimeClass:""},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){c.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"classbeginAndRaiseShowButtonCallback",value:function(e){e?""!==this.state.notClockTimeClass&&this.setState({notClockTimeClass:""}):"only-clock"!==this.state.notClockTimeClass&&this.setState({notClockTimeClass:"only-clock"})}},{key:"render",value:function(){return r.default.createElement("article",{className:"h-right-wrap clear-float add-fr "+this.state.notClockTimeClass,id:"header_right"},r.default.createElement(h.default,null),d.default.playback||u.default.hasRole.rolePatrol&&u.default.joinRoomInfo.tourCancelBtn?void 0:r.default.createElement(f.default,{classbeginAndRaiseShowButtonCallback:this.classbeginAndRaiseShowButtonCallback.bind(this)}))}}]),t}(r.default.Component);t.default=p},lJXf:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=c(a("Yz+Y")),o=c(a("iCc5")),n=c(a("V7oC")),l=c(a("FYw3")),s=c(a("mRg0"));a("pT4K");var r=c(a("q1tI")),d=c(a("i8i4")),u=c(a("HPAy"));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={alert:{isShow:!1,ok:"",type:""},confirm:{isShow:!1},isHasClassCenter:!1,title:"",message:"",callback:null},a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"addNotice",value:function(e,t,a){var i=a&&"function"==typeof a?a:function(){};switch(e){case"showAlert":return this.showAlert(t,i);case"showConfirm":return this.showConfirm(t,i);case"showInputTooltip":return this.showInputTooltip(t,i)}}},{key:"alertCloseClick",value:function(e){this.setState({isHasClassCenter:!1,alert:{isShow:!1},confirm:{isShow:!1}}),e(!0)}},{key:"confirmClick",value:function(e){var t={text:this.refs.subNode_1?this.refs.subNode_1.value:void 0,href:this.refs.subNode_2?this.refs.subNode_2.value:void 0};this.setState({isHasClassCenter:!1,alert:{isShow:!1},confirm:{isShow:!1}}),e(!0,t)}},{key:"cancelClick",value:function(e){this.setState({isHasClassCenter:!1,alert:{isShow:!1},confirm:{isShow:!1}}),e(!1)}},{key:"showAlert",value:function(e,t){var a=e.title,i=e.message,o=e.ok,n=e.type;this.setState({alert:{isShow:!0,ok:o,type:n},confirm:{isShow:!1},title:a,message:i,callback:t,isHasClassCenter:!0})}},{key:"showConfirm",value:function(e,t){var a=e.title,i=e.message,o=e.button;this.setState({alert:{isShow:!1},confirm:{isShow:!0,isOk:o},title:a,message:i,callback:t,isHasClassCenter:!0})}},{key:"showInputTooltip",value:function(e,t){var a=e.title,i=e.message,o=e.isOk,n=e.contentType;this.setState({alert:{isShow:!1},confirm:{isShow:!0,isOk:o},title:a,message:i,callback:t,isHasClassCenter:!0,contentType:n})}},{key:"__loadContent",value:function(){var e=void 0;if(this.state.message)e=this.state.message;else if(this.state.contentType)switch(this.state.contentType){case"edit-text-area":e=r.default.createElement("div",{className:"edit-node"},r.default.createElement("textarea",{ref:"subNode_1",name:"",id:"",cols:"50",rows:"6",maxLength:"50"}));break;case"edit-input":e=r.default.createElement("div",{className:"edit-node"},r.default.createElement("label",{htmlFor:""},u.default.language.languageData.notice.content,":"),r.default.createElement("input",{ref:"subNode_1",type:"text",style:{marginLeft:".08rem"},maxLength:"20"}));break;case"edit-input-db":e=r.default.createElement("div",{className:"edit-node"},r.default.createElement("label",{htmlFor:""},u.default.language.languageData.notice.content,":"),r.default.createElement("input",{ref:"subNode_1",type:"text",style:{marginLeft:".22rem",marginBottom:".3rem"},maxLength:"30"}),r.default.createElement("br",null),r.default.createElement("label",{htmlFor:""},u.default.language.languageData.notice.href,":"),r.default.createElement("input",{ref:"subNode_2",type:"text",style:{marginLeft:".08rem"},maxLength:"50"}));break;default:L.Logger.error("This content type has not defined, please check out and define this content!")}return{content:e}}},{key:"render",value:function(){var e=this.state,t=e.alert,a=e.confirm,i=e.isHasClassCenter,o=e.title,n=e.callback,l=this.__loadContent().content;return r.default.createElement("section",{id:"alert-error-confrim",className:"alert-error-confrim "+(t.isShow?"error"===t.type?" error-message":" prompt-message":""),style:{display:t.isShow||a.isShow?"block":"none"}},r.default.createElement("div",{id:"alert-box",className:"alert-box "+(i?"center ":"")},r.default.createElement("div",{className:"alert-title"},r.default.createElement("p",{className:"title-text user-select-none "},o),t.isShow?r.default.createElement("button",{onClick:this.alertCloseClick.bind(this,n),className:"title-close",id:"title-close"}):""),r.default.createElement("div",{className:"alert-contant user-select-none "},l),r.default.createElement("div",{className:"alert-isOk"},r.default.createElement("button",{id:"alert-confrim",className:"user-select-none"+(a.isShow?" alert-red-confirm":" alert-blue-confirm"),onClick:t.isShow?this.alertCloseClick.bind(this,n):a.isShow?this.confirmClick.bind(this,n):void 0},t.isShow?t.ok:a.isShow?a.isOk.ok:""),a.isShow?r.default.createElement("button",{id:"alert-cancel",onClick:this.cancelClick.bind(this,n),className:"alert-cancel user-select-none "},a.isOk.cancel):"")))}}]),t}(r.default.Component);t.default=function(){var e=document.createElement("div");document.body.appendChild(e);var t=r.default.createRef();return d.default.render(r.default.createElement(f,{ref:t}),e),{addNotice:function(e,a,i){return t.current.addNotice(e,a,i)},destroy:function(){d.default.unmountComponentAtNode(e),document.body.removeChild(e)}}}()},lU1p:function(e,t,a){var i={"./default/i18_chinese.js":"4vYp","./default/i18_english.js":"2hPu","./default/i18_indonesia.js":"cFpp","./default/i18_japan.js":"3vm4","./default/i18_spanish.js":"WtN9","./default/i18_taiwan.js":"lfGQ","./meeting/i18_chinese.js":"EtRj","./meeting/i18_english.js":"yVle"};function o(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=n,e.exports=o,o.id="lU1p"},lfGQ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={login:{language:{joinRoomHint:{text:""},preLoad:{text:"",pass:""},detection:{company:{text:"",normal:"",icoachu:""},selectOption:{noCam:"",noMicrophone:"",noEarphones:""},welAll:{one:"",two:"",three:" , ",four:""},deviceTestHeader:{device:{text:""},areaSwitch:{text:""},deviceSwitch:{text:""},optimalServer:{text:""},areaSelection:{text:""},videoinput:{text:""},audioouput:{text:""},audioinput:{text:""},detectionResult:{text:""},changeScreen:{text:""},MainMinorChange:{text:""},systemInfo:{text:""}},networkExtend:{title:{select:"",area:"",delay:"",text:""},testBtn:""},videoinputExtend:{cameraOptionAll:{cameraOption:{text:""},noticeRed:{text:""}},noticeCarmera:{one:":",two:"1.360",three:"2.",four:"3.",five:"4.",six:"5.",seven:"6."}},audioouputExtend:{cameraOptionAll:{cameraOption:{text:""},earphoneVolume:{text:""},clickmusic:{one:""},playMusic:""},noticeCarmera:{one:":",two:"1.360",three:"2.",four:"3.",five:"4.",six:"5.",seven:"6."}},audioinputExtend:{cameraOptionAll:{cameraOption:{text:""},noticeRed:{text:""},speakSound:{text:"110"}},noticeCarmera:{one:":",two:"1.360",three:"2.",four:"3.",five:"4.",six:"5.",seven:"6."}},browserDetection:{browserVersion:"",versionError:"Chrome",versionPass:"Chrome",prompt:{one:": ",two:"Chrome"}},systemInfo:{currentUser:"",operatingSystem:"",processor:"",RAM:"",serverName:"",IPAddress:"IP",LoginDevice:"",MediaServer:"",CoursewareServer:"",networkDelay:"",packetLoss:"",browser:"",uploadSpeed:"",downloadSpeed:"",roomNumber:"",versionNumber:""},CoursewareServer:{TkServer:"",DocServer:""},resultExtend:{head:{text:""},item1:{text:""},item2:{text:"",content:{abnormal:"",normal:""}},item3:{text:"",content:{video:"",listen:"",speak:""}},item4:{content:{video:"",listen:"",speak:""}}},button:{next:{text:""},join:{text:""},ok:{text:""},startNetworkTest:{text:""},canSee:{text:""},notSee:{text:""},canListen:{text:""},notListen:{text:""},canSpeak:{text:""},notSpeak:{text:""},checkBack:{text:""},joinRoom:{text:""}},mirrorMode:{text:""}}}},header:{tool:{allStepDown:{title:{yes:"",no:""}},allMute:{title:{yes:"",no:""}},capture:{title:{all:"",small:""}},qrCode:{title:{yes:""}},allGift:{title:{yes:"",giftText:""}},blackBoard:{title:{open:"",close:"",prev:"",next:"",shrink:""},content:{blackboardHeadTitle:""},toolBtn:{dispenseed:"",recycle:"",againDispenseed:"",commonTeacher:""},tip:{saveImage:""},boardTool:{pen:"",text:"",eraser:"",color:""},upload:{localUpload:"",scanCodeUpload:""}},sharing:{title:""},mouse:{title:""},pencil:{title:"",pen:{text:""},Highlighter:{text:""},linellae:{text:""},arrow:{text:""},laser:{title:"",text:""}},text:{title:"",Msyh:{text:""},Ming:{text:""},Arial:{text:"Arial"}},shape:{title:"",outlinedRectangle:{text:""},filledRectangle:{text:""},outlinedCircle:{text:""},filledCircle:{text:""}},eraser:{title:""},undo:{title:""},redo:{title:""},clear:{title:""},tool_zoom_big:{title:""},tool_zoom_small:{title:""},tool_rotate_left:{title:""},tool_rotate_right:{title:""},colorAndMeasure:{title:"",selectColorText:"",selectMeasure:""},VideoCapture:{title:""}},page:{prev:{text:""},next:{text:""},add:{text:""},lcFullBtn:{title:""},pptFullBtn:{title:"PPT"},h5FileFullBtn:{title:"h5"},skipPage:{text_one:"",text_two:""},ok:{text:""},coursewareRemarks:{title:""}},system:{attend:{text:" "},oneToOneFinsh:{text:" "},Raise:{hashand:"   ",text:" ",noText:"",yesText:"",raisingHand:""},finish:{text:" "},gift:{text:""},muteAll:{text:""},help:{title:""},network:{title:"",extend:{ChinaTelecom:"China Telecom",ChinaUnicom:"China Unicom",ChinaMobile:"China Mobile",InternationalNetwork:"International Network",ChinaSouthernTelecom:"China Southern Telecom"}},setting:{title:""}},volume:{title:""},ControlPanel:{operation:""}},toolContainer:{toolIcon:{whiteBoard:{title:""},courseList:{title:""},classFolder:{title:""},adminFolders:{title:""},documentList:{title:"",titleTop:"",titleSort:"",button:{addCourse:{text:" + "},fileName:{text:""},fileType:{text:""},uploadTime:{text:""},search:{name:"",text:""},close:{text:""}}},H5DocumentList:{title:"",titleTop:"",button:{addCourse:{text:" + H5"}}},addCourse:{relationCourse:{title:"",button:{addCourse:{text:" + "},pervPage:"",nextPage:"",relation:"",loadMore:""}},uploadCourse:{resourceLibrary:"",localUpload:"",uploadNotice:{one:"1. *.xls;*.xlsx;*.ppt;*.pptx;*.doc;*.docx;*.txt;*.pdf;*.jpg; *.gif;*.jpeg;*.png;*.bmp;",two:"2. 300M300;",three:"3. PPTPPT;",four:"4. WPSPDF;",five:"5. PPT ;"},button:{setLoaclFile:"",setLoaclAgain:"",upload:"",uploadAgain:""},fileInfo:"",h5Name:"",dynamicPpt:"ppt",dynamicPptSuccess:""}},mediaDocumentList:{title:"",titleTop:"",button:{addCourse:{text:" + "}}},moviesSharing:{title:""},resourceLibrary:{title:"",dynamicpptSuccess:"",dynamicpptFail:""},message:{title:""},full:{title:""},fullOff:{title:""},overallControl:{title:""},screenSharing:{title:""},messageList:{title:""},addDocument:{title:""},userList:{title:"",thead:{facility:"",nick:"",platform:"",camera:"",microphone:"",draw:"",raise:"",mute:"",remove:""},button:{Scrawl:{on:{title:""},off:{title:""}},answered:{on:{title:""},off:{title:""}},video:{on:{title:""},off:{title:""},disabled:{title:""}},update:{up:{title:""},down:{title:""}},audio:{on:{title:""},off:{title:""},disabled:{title:""}},mute:{on:{title:""},off:{title:""},patrol:{on:{title:""},off:{title:""}}},remove:{title:""}},input:{text:""},userStatus:{assistant:{text:""},student:{text:""}},groupModeStatus:{groupMode:{text:""},normalMode:{text:""}}},disableVideo:{yes:"",no:""},disableAudio:{yes:"",no:""},setting:{title:""},help:{title:""},guide:{title:""},seekHelp:{title:""},FileConversion:{text:""}}},videoContainer:{videoIcon:{camera:{title:""},microphone:{title:""}},sendMsg:{inputText:{placeholder:"",patrolPlaceholder:"",frequently:""},btn:{title:{banChat:"",allChat:"",sendImg:"",sendEmotion:""}},repeatSpeak:{text:""},sendBtn:{text:"",title:""},tap:{chat:"",question:"",users:"",doc:"",refresh:""},tips:{online:"",goback:"",pics:"",private:"TA",teacher:"",assistant:"",student:"",patrol:"",me:"",join:"",leave:"",beforeClass:"",afterClass:"",whiteBoard:"",openAllBans:"",closeAllBans:""},filter:{quizobj:"",seeQuiz:"",seeChat:"",seeAnswer:""},fontSize:{fontSize14:"",fontSize16:"",fontSize18:"",fontSize22:""}},download:{downloadFile:{title:""},downloadFailMessage:{title:""}}},otherVideoContainer:{videoIcon:{microphone:{title:""},userUpdate:{title:""},userPen:{title:""}},button:{scrawl:{yes:"",no:""},platform:{yes:"",no:""},audio:{yes:"",no:""},video:{yes:"",no:""},gift:{yes:"",no:""},close:{yes:""},restoreDrag:{text:""},allPlatformDown:{yes:""},allMute:{yes:""},videoStatusChairman:{yes:"",no:"",text:""},audioStatusChairman:{yes:"",no:"",text:""},areaExchange:{text:""},doubleDivision:{text:""},oneKeyReset:{text:""},onlyAudio:{no:"",yes:"",create:"",cancel:""},pointerReminder:{text:""}},prompt:{text:"home",userText:"home"}},alertWin:{login:{register:{roomEmpty:{text:""},eventListener:{accessDenied:{text:""},errorRoom:{text:""},errorMedia:{text:{one:",",two:""}},roomClosed:{text:{one:" '",two:"' "}},roomDelClassBegin:{text:""},lostConnection:{text:{one:"",two:""},ok:{text:""},title:{text:""}},participantEvicted:{roleConflict:{text:""},kick:{text:""},noJoin:{text:","}},broadcastClass:{roleChairman:{text:""}}}},func:{checkMeeting:{status_minus_1:{text:""},status_3001:{text:""},status_3002:{text:""},status_3003:{text:""},status_4007:{text:""},status_4008:{text:""},status_4110:{text:""},status_4109:{text:""},status_4103:{text:""},status_4112:{text:""},status_defalut:{text:""}}}},call:{prompt:{noLogin:{text:""},noAudioFacility:{text:""},chat:{literally:{yes:{text:""},no:{text:""}}},publishStatus:{stream:{yes_status_3:{text:""},no_status_0:{text:""},yes_status_0_to_2:{text:","},yes_status_3_to_2:{text:""},videooff:{text:""},audiooff:{text:""},audioon:{text:""},videoon:{text:""},allon:{text:""},alloff:{text:""},speakoff:{text:""},speakon:{text:""}},download:{success:{text:""},failed:{text:""}},allMute:{yes:{text:""},no:{text:""}}},joinRoom:{stream:{join:{text:""},leave:{text:""}}},allSilence:{yes:{text:""},no:{text:""}},homeBtnRemind:{join:{text:""},leave:{text:""},userBackgroundMode:{text:""}},streamConnectFailed:{onceSuccessed:{text:""},notSuccess:{text:"udpudp"}},remoteStreamFailure:{udpNotOnceSuccess:{one:"",two:"UDP"},udpMidwayDisconnected:{one:"",two:"UDP"},publishvideoFailure_notOverrun:{one:"",two:""},publishvideoFailure_overrun:{one:""},mobileHome:{one:"",two:""}},releaseFailed:{text:""}},fun:{uploadCourseFile:{fileTypeError:{text:{one:"'.",two:"'"}},fileSizeError:{text:{one:""}},fileUpload:{success:{text:"'"},failureCode:{text:""},failureNegativeOne:{text:""},failureNegativeTwo:{text:""},failureNegativeThree:{text:""},failureNegativeFour:{text:""},failureNegativeSeven:{text:""},failureNegativeEight:{text:""},failureNegativeTen:{text:""},failureFhree:{text:""},failureFour:{text:"index.html"}}},deleteCourseFile:{fileDelete:{failure:{text:""}},isDel:""},page:{pageInteger:{text:""},pageMax:{text:""},pageMin:{text:"1"}},file:{mediaFile:{text:""},pptFile:{text:"PPT"}},video:{max:{text:""}},audit:{title:{text:""},ended:{text:""}},UnreadMessage:{text:""}}},ok:{showError:{text:""},showPrompt:{text:""},showConfirm:{cancel:"",ok:""}},title:{showError:{text:""},showPrompt:{text:""},showConfirm:{text:""}},settingWin:{settingTitle:{text:""},default:{text:""},communications:{text:""},settingOk:{text:""},settingClose:{text:""},videoInput:{text:""},audioInput:{text:""},audioOutput:{text:""}},messageWin:{title:{closeWindow:{text:""},classBeginEnd:{text:""},allGift:{text:""}},winMessageText:{closeWindow:{ok:{text:""}},classBeginEnd:{text:""},removeStudent:{text:""},classBeginEndLocalRecord:{text:""},classBeginStartNotSelectRecord:{text:""},aloneGift:{before:"",after:""},allGift:{one:"",two:"",three:""}},messageOk:{text:""},messageClose:{text:""}}},remind:{time:{readyStart:{one:"",two:""},timeoutStart:{one:"",two:""},endNotBegin:{one:""},readyEnd:{one:"",two:"~"},timeoutReadyEnd:{one:"",two:"",three:""},timeoutEnd:{one:" (",two:")"},endBegin:{one:""},readyEndAiBanMa:{one:",",two:",",three:"",four:""}},button:{remindKnow:{text:""},raise:{yes:"",no:""}},raise:{content:{text:""}}},publish:{beyondMaxVideo:{text:"!"}},networkStatus:{rtt:{title:{text:""}},packetsLost:{title:{text:""}},network:{title:{text:""},value:{excellent:"",well:"",general:"",suck:""}}},toolCase:{toolBox:{text:""}},qrCode:{scan:{text:""},attention:{text:""}},timers:{timerSetInterval:{text:""},timerBegin:{text:""},timerStop:{text:""},again:{text:""},startNowBtn:{text:""}},dial:{turntable:{text:""}},answers:{headerTopLeft:{text:""},headerMiddel:{text:""},beginAnswer:{text:""},tureAccuracy:{text:""},add:{text:""},reduce:{text:""},people:{text:""},trueAnswer:{text:""},endAnswer:{text:""},restarting:{text:""},myAnswer:{text:""},changeAnswer:{text:""},selectAnswer:{text:""},submitAnswer:{text:""},numberOfAnswer:{text:""},PublishTheAnswer:{text:""},published:{text:""},details:{text:""},statistics:{text:""},student:{text:""},TheSelectedTheAnswer:{text:""},AnswerTime:{text:""},end:{text:""},selectedAnswer:{text:""}},responder:{responder:{text:""},begin:{text:""},restart:{text:""},clickTitle:{text:""},somebodyTeacher:{text:""},my:{text:""},other:{text:""},inAnswerTitle:{text:"..."},inAnswerBtn:{text:""},inAnswerStudent:{text:""},noContest:{text:""},noStart:{text:""}},shares:{shareSceen:{text:""},stopShare:{text:""},shareing:{text0:"......",text1:"......",text2:"......"},sharingMode:{text:""},programmShare:{text:""},shareArea:{text:""},startSharing:{text:""},selectProgramm:{text:""},programmShareArea:{text:"* "},screenWidthTip:{text:"1080P"}},layoutInfo:{layout:"",CoursewareDown:"",VideoDown:"",Encompassment:"",Bilateral:"",MainPeople:"",OnlyVideo:"",oneToOne:"",doubleDivision:"",doubleVideo:"",synStudent:""},phoneBroadcast:{chat:{notClassBegin:{text:","},face:{naughty:"",happy:"",complacent:"",curlOnesLips:"",grieved:"",shedTears:"",kiss:"",love:""}}},getUserMedia:{accessAccepted:{getUserMediaFailure_reGetAudio:"",getUserMediaFailure_reGetVideo:""},accessDenied:{streamFail:"/",notAudioAndVideo:"/"}},broadcast:{errorHintInfo:"~"},version:{clientDeviceVersionInfo:{key:"",client:"",pc:"PC",mobile:""},browserVersionInfo:{webpageApp:"",mobileApp:""},appVersionInfo:{key:""},ipInfo:{key:"IP"}},quiz:{ask:"",answer:"",pass:"",delete:"",studentAskRemind:{part1:"",part2:""},onlyTeacher:"",onlySelf:"",intervalTips:{part1:"",part2:""}},notice:{notice:"",broadcast:"",inform:"",content:"",href:"",publishNotice:"",publishBroadcast:"",publishInform:"",publish:"",cancel:""},welcomeClassroom:{text:"",roomId:""},loadSupernatantPrompt:{reconnecting:"",loadRooming:"",loadRoomingPlayback:"",refreshing:""},remoteControl:{remoteTitle:"",refresh:"",deviceManagement:"",optimalServer:"",kick:"",getDocAddress:"",line1:"",line2:""},localRecord:{recordState:{notStart:"",recording:"",recordPaused:""},title:{startRecord:"",stopRecord:"",pauseRecord:"",playRecord:""}},coursewareRemarks:{remarks:"",close:""},videLabel:{exit:""},captureImg:{StartUploading:"",UploadSuccess:"",uploadFailed:"",SaveSuccess:" "},moreUser:{text:""},reloadDoucumentHint:{one:"",two:""},qPanel:{answerPanel:"",tips:["",""],addOption:"",delOption:"",start:"",end:"",restart:"",rightOptionIs:"",hasPub:"",answerNum:"",people:"",commitAnswer:"",modifyAnswer:"",detail:"",statistics:"",useTime:"",choseAnswer:"",myAnswer:"",pubResult:"",loading:""},whiteboardSetSize:{lineWidth:"",eraserWidth:"",textWidth:""},fontSize:{number:""}}},lmaM:function(e,t,a){},lqVD:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointerReminderStatusDiv=t.ForegroundPicDiv=t.VideoHoverContainerDiv=t.VideoLi=void 0;var i=d(a("CSPP")),o=(0,i.default)(["\n  display: ",";\n"],["\n  display: ",";\n"]),n=(0,i.default)(["\n&&&&&&{ \n  display: ",";\n      \n  background-image: ",";\n  }\n"],["\n&&&&&&{ \n  display: ",";\n      \n  background-image: ",";\n  }\n"]),l=(0,i.default)(["\n  display: ","\n"],["\n  display: ","\n"]),s=(d(a("q1tI")),d(a("vOnD"))),r=(d(a("HPAy")),d(a("eQYT")));function d(e){return e&&e.__esModule?e:{default:e}}var u=s.default.li.attrs({className:"clear-float"}),c=s.default.div.attrs({className:"video-hover-function-container"})(o,function(e){return e.actionButtonArray&&0===e.actionButtonArray.length||e.isCanDrag?"none":void 0}),f=s.default.div.attrs({className:"foregroundpic-container"})(n,function(e){return r.default.hasRole.roleStudent&&r.default.joinRoomInfo.foregroundpic&&e.foregroundpicUrl&&e.pictureInPictureClassname?"block":"none"},function(e){return r.default.hasRole.roleStudent&&r.default.joinRoomInfo.foregroundpic&&e.foregroundpicUrl&&e.pictureInPictureClassname?"url("+e.foregroundpicUrl+")":void 0}),h=s.default.div.attrs({className:"pointerReminder-status"})(l,function(e){return e.user.pointerstate?"block":"none"});t.VideoLi=u,t.VideoHoverContainerDiv=c,t.ForegroundPicDiv=f,t.PointerReminderStatusDiv=h},m6uC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=v(a("FyfS")),o=v(a("Yz+Y")),n=v(a("iCc5")),l=v(a("V7oC")),s=v(a("FYw3")),r=v(a("mRg0"));a("SFpt");var d=v(a("q1tI")),u=v(a("HPAy")),c=v(a("eQYT")),f=v(a("uuqz")),h=v(a("aJKe")),m=(v(a("JL1q")),v(a("mrNk"))),p=v(a("XbJA")),g=v(a("pIe1"));function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));a.props.id;return a.state={responderIsShow:!1,answerText:"begin",beginIsStatus:!1,firstUser:!1,responderMsgTitle:"clickTitle",translateMove:null,isHasTransition:!1,resizeInfo:{width:0,height:0},studentIsGifImg:!1,startTime:0,endTime:0,playBackServerTime:0},a.userSort={},a.userArry=[],a.isClick=!1,a.timesRun=3,a.isSetDefaultPosition=!1,a.teacherTimeOut=null,a.isHasTransition=!1,a.msglistData=null,a.intervals=void 0,a.timeOutIntervals=void 0,a.temporaryStyle={percentLeft:null,percentTop:null},a.isRestart=!1,a.getUserPublishState=null,a.responderBeginTsValue=0,a.fastBackWard=!1,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){h.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomDisconnected,this.handlerRoomDisconnected.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener("receive-msglist-ResponderDrag",this.handlerMsglistResponderDrag.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener("receive-msglist-qiangDaQi",this.handlerMsglistQiangDaQi.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener("receive-msglist-QiangDaZhe",this.handlerMsglistQiangDaZhe.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomPlaybackPlaybackEnd,this.handlerRoomPlaybackPlaybackEnd.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,this.handlerRoomPlaybackClearAll.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomPlaybackPlaybackUpdatetime,this.handlerRoomPlaybackPlaybackUpdatetime.bind(this),this.listernerBackupid),h.default.CoreController.addEventListener(c.default.EVENTTYPE.RoomEvent.roomPlaybackDuration,this.handlerRoomPlaybackDuration.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){h.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.isHasTransition!==this.state.isHasTransition&&this.state.isHasTransition&&(this.isHasTransition=!1,this.setState({isHasTransition:!1})),t.responderIsShow!==this.state.responderIsShow&&this.state.responderIsShow&&this.isSetDefaultPosition&&(this.isSetDefaultPosition=!1,this.setDefaultPosition());var a=(t.playBackServerTime/1e3).toFixed(0),i=(this.state.playBackServerTime/1e3).toFixed(0);t.playBackServerTime!==this.state.playBackServerTime&&Math.abs(i-a)>1&&this.responderBeginTsValue&&this.state.playBackServerTime&&(this.fastBackWard=!0,this.playBackResponderHandle())}},{key:"handlerRoomDisconnected",value:function(){this._clearDataHandle(),this.setState({responderIsShow:!1})}},{key:"playBackResponderHandle",value:function(){var e=this;if(e.state.playBackServerTime&&e.responderBeginTsValue){var t=e._timeDifferenceToFormat(e.state.startTime,e.state.playBackServerTime),a=e._timeDifferenceToFormat(e.state.startTime,e.responderBeginTsValue);if(t<=a&&(clearTimeout(this.state.teacherTimeOut),e._clearDataHandle()),t-a>=8&&(clearTimeout(e.state.teacherTimeOut),e.state.firstUser?e.setState({answerText:e.state.answerText,responderMsgTitle:e.state.responderMsgTitle}):e.setState({answerText:c.default.hasRole.roleChairman?"restart":"noStart",responderMsgTitle:"noContest"})),t-a>0&&t-a<8){var i=1e3*(8-(t-a));e.setState({responderMsgTitle:"inAnswerTitle",answerText:"inAnswerBtn"}),e.state.teacherTimeOut=setTimeout(function(){e.state.firstUser?e.setState({answerText:e.state.answerText,responderMsgTitle:e.state.responderMsgTitle,beginIsStatus:!1}):e.setState({answerText:c.default.hasRole.roleChairman?"restart":"noStart",responderMsgTitle:"noContest",beginIsStatus:!1})},i)}}}},{key:"handlerRoomPlaybackPlaybackEnd",value:function(){this._clearDataHandle(),this.setState({responderIsShow:!1})}},{key:"handlerRoomPlaybackClearAll",value:function(){u.default.playback?(this._clearDataHandle(),this.setState({responderIsShow:!1})):L.Logger.error("No playback environment, no execution event[roomPlaybackClearAll] handler ")}},{key:"handlerRoomPlaybackPlaybackUpdatetime",value:function(e){var t=e.message.current;this.setState({playBackServerTime:t})}},{key:"handlerRoomPlaybackDuration",value:function(e){var t=e.message,a=t.startTime,i=t.endTime;this.setState({startTime:a,endTime:i})}},{key:"_timeDifferenceToFormat",value:function(e,t){var a=f.default.getTimeDifferenceToFormat(e,t),i=void 0;if(a){var o=a.hh,n=a.mm,l=a.ss;i=Number(l)+60*n+360*o}return i}},{key:"handlerMsglistResponderDrag",value:function(e){var t=this;e.message.ResponderDragArray.map(function(e,a){t.temporaryStyle.percentLeft=e.data.percentLeft,t.temporaryStyle.percentTop=e.data.percentTop})}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,i=document.getElementById(t),o=document.querySelector(a.bounds);if(i&&o&&a.changePosition&&"function"==typeof a.changePosition){a.changePosition(t,{percentLeft:.5,percentTop:.5,isDrag:!1},!0)}}},{key:"handlerRoomConnected",value:function(){}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"qiangDaQi":c.default.hasRole.roleStudent?m.default.getTkRoom().getMySelf().publishstate>0&&this._studentRecevedServiceQiangDaQiData(t):this._teacherRecevedServiceQiangDaQiData(t);break;case"QiangDaZhe":c.default.hasRole.roleStudent?this._studentRecevedServiceQiangDaZheData(t):this._teacherRecevedServiceQiangDaZheData(t);break;case"ResponderDrag":if(u.default.playback&&"0"===u.default.roomlayout)return;this.temporaryStyle.percentLeft=t.data.percentLeft,this.temporaryStyle.percentTop=t.data.percentTop}}},{key:"handlerRoomDelmsg",value:function(e){var t=e.message;switch(t.name){case"ClassBegin":this._clearDataHandle(),this.setState({responderIsShow:!1});break;case"qiangDaQi":c.default.hasRole.roleStudent?(this._clearDataHandle(),this.setState({responderIsShow:!1})):t.data.isShow?(this._clearDataHandle(),this.setState({responderIsShow:!0})):(this._clearDataHandle(),this.setState({responderIsShow:!1})),this.setState({responderIsShow:!1})}}},{key:"_clearDataHandle",value:function(){clearTimeout(this.teacherTimeOut),clearInterval(this.intervals),clearTimeout(this.timeOutIntervals),this.setState({answerText:"begin",beginIsStatus:!1,firstUser:!1,responderMsgTitle:"clickTitle",translateMove:null,isHasTransition:!1,resizeInfo:{width:0,height:0}}),this.isClick=!1,this.userSort={},this.userArry=[],this.isRestart=!1,this.timesRun=3,this.isSetDefaultPosition=!1,this.teacherTimeOut=null,this.isHasTransition=!1,this.msglistData=null,this.intervals=void 0,this.timeOutIntervals=void 0,this.getUserPublishState=null,this.temporaryStyle={percentLeft:null,percentTop:null}}},{key:"handlerRoomUserpropertyChanged",value:function(e){m.default.getTkRoom().getMySelf().id===e.user.id&&void 0!==e.message.publishstate&&(this.getUserPublishState=e.message.publishstate)}},{key:"handlerMsglistQiangDaQi",value:function(e){var t=!0,a=!1,o=void 0;try{for(var n,l=(0,i.default)(e.message.qiangDaQiArr);!(t=(n=l.next()).done);t=!0){var s=n.value;c.default.hasRole.roleStudent?this._studentRecevedServiceQiangDaQiData(s):this._teacherRecevedServiceQiangDaQiData(s)}}catch(e){a=!0,o=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw o}}}},{key:"handlerMsglistQiangDaZhe",value:function(e){var t=!0,a=!1,o=void 0;try{for(var n,l=(0,i.default)(e.message.QiangDaZheArr);!(t=(n=l.next()).done);t=!0){var s=n.value;c.default.hasRole.roleStudent?this._studentRecevedServiceQiangDaZheData(s):this._teacherRecevedServiceQiangDaZheData(s)}}catch(e){a=!0,o=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw o}}}},{key:"_teacherRecevedServiceQiangDaQiData",value:function(e){var t=this;this.isSetDefaultPosition=!0;var a=u.default.serviceTime/1e3-e.ts;e.data.isShow&&(clearTimeout(t.teacherTimeOut),t.setState({responderIsShow:!0,answerText:c.default.hasRole.roleChairman?"begin":"noStart",responderMsgTitle:"clickTitle"}),e.data.begin&&(this.setState({beginIsStatus:e.data.begin}),this.isRestart=!0,this.responderBeginTsValue=e.ts,a>=8?(clearTimeout(t.teacherTimeOut),t.state.firstUser?t.setState({answerText:t.state.answerText,responderMsgTitle:t.state.responderMsgTitle,beginIsStatus:!1}):t.setState({answerText:c.default.hasRole.roleChairman?"restart":"noStart",responderMsgTitle:"noContest",beginIsStatus:!1})):(t.setState({beginIsStatus:e.data.begin,responderMsgTitle:"inAnswerTitle",answerText:"inAnswerBtn"}),t.teacherTimeOut=setTimeout(function(){t.state.firstUser?t.setState({answerText:t.state.answerText,responderMsgTitle:t.state.responderMsgTitle,beginIsStatus:!1}):t.setState({answerText:c.default.hasRole.roleChairman?"restart":"noStart",responderMsgTitle:"noContest",beginIsStatus:!1})},8e3))))}},{key:"_teacherRecevedServiceQiangDaZheData",value:function(e){if(e.data.isClick){for(var t in clearTimeout(this.teacherTimeOut),this.userSort[e.fromID]={},this.userSort[e.fromID][e.seq]=e.data.userAdmin,this.userArry=[],this.userSort)for(var a in this.userSort[t])this.userArry.push(a),this.userArry=this.userArry.sort(),void 0!==this.userSort[t][this.userArry[0]]&&this.setState({answerText:"somebodyTeacher",responderMsgTitle:this.userSort[t][this.userArry[0]]});this.isRestart=!0,this.setState({firstUser:!0,beginIsStatus:!1})}}},{key:"_studentRecevedServiceQiangDaQiData",value:function(e){var t=this,a=t.props,i=a.id,o=a.draggableData,n=u.default.serviceTime/1e3-e.ts;if(t.setState({responderMsgTitle:"inAnswerStudent",answerText:"inAnswerStudent",beginIsStatus:e.data.begin}),e.data.begin){if(n>=8){var l=void 0,s=void 0;if(null===t.temporaryStyle.percentLeft?(l=.5,s=0):(l=t.temporaryStyle.percentLeft,s=t.temporaryStyle.percentTop),o.changePosition&&"function"==typeof o.changePosition){o.changePosition(i,{percentLeft:l,percentTop:s,isDrag:!0},!1)}t.setState({beginIsStatus:!1,responderMsgTitle:"noContest",answerText:"noContest",studentIsGifImg:!1})}else t.intervals=setInterval(function(){if(t.timesRun-=1,0===t.timesRun){if(o.changePosition&&"function"==typeof o.changePosition){o.changePosition(i,{percentLeft:.2,percentTop:.2,isDrag:!0},!1)}}if(1===t.timesRun){if(o.changePosition&&"function"==typeof o.changePosition){o.changePosition(i,{percentLeft:.4,percentTop:.6,isDrag:!0},!1)}}if(2===t.timesRun){if(o.changePosition&&"function"==typeof o.changePosition){o.changePosition(i,{percentLeft:.7,percentTop:.2,isDrag:!0},!1)}}t.timesRun<=0&&(clearInterval(t.intervals),t.setState({beginIsStatus:!1,studentIsGifImg:!0,responderMsgTitle:"clickTitle",answerText:"begin"}),!1===t.isClick&&(t.timeOutIntervals=setTimeout(function(){var e=void 0,a=void 0;if(null===t.temporaryStyle.percentLeft?(e=.5,a=0):(e=t.temporaryStyle.percentLeft,a=t.temporaryStyle.percentTop),t.isHasTransition=!0,o.changePosition&&"function"==typeof o.changePosition){o.changePosition(i,{percentLeft:e,percentTop:a,isDrag:!0},!1)}t.setState({isHasTransition:t.isHasTransition,responderMsgTitle:"noContest",beginIsStatus:!1,studentIsGifImg:!1,answerText:"noContest"})},4500)))},1e3);t.setState({responderIsShow:!0})}}},{key:"_studentRecevedServiceQiangDaZheData",value:function(e){var t=this.props,a=t.id,i=t.draggableData,o=[];if(e.data.isClick){for(var n in this.userSort[e.fromID]={},this.userSort[e.fromID][e.seq]=e.data.userAdmin,this.userSort)for(var l in this.userSort[n])o.push(l),this.userArry=o.sort(),void 0!==this.userSort[n][this.userArry[0]]&&(n===m.default.getTkRoom().getMySelf().id?this.setState({firstUser:!0,responderMsgTitle:"my",answerText:"other"}):this.setState({firstUser:!0,responderMsgTitle:this.userSort[n][this.userArry[0]],answerText:"other"}));clearInterval(this.intervals),clearTimeout(this.timeOutIntervals);var s=void 0,r=void 0;if(null===this.temporaryStyle.percentLeft?(s=.5,r=0):(s=this.temporaryStyle.percentLeft,r=this.temporaryStyle.percentTop),i.changePosition&&"function"==typeof i.changePosition){i.changePosition(a,{percentLeft:s,percentTop:r,isDrag:!0},!1)}this.setState({responderMsgTitle:this.state.responderMsgTitle}),this.isClick=e.data.isClick}}},{key:"beginOrRestartResponder",value:function(){if(c.default.hasRole.roleChairman||c.default.hasRole.roleTeachingAssistant)if(this.state.beginIsStatus||this.isRestart)!this.state.beginIsStatus&&this.isRestart&&this.restartResponder();else{var e={isShow:this.state.responderIsShow,begin:!0,userAdmin:""};p.default.sendSignallingQiangDaQi(!1,e)}else c.default.hasRole.roleStudent&&this.studentResponder()}},{key:"studentResponder",value:function(){var e=m.default.getTkRoom().getMySelf();if(c.default.hasRole.roleStudent&&"begin"===this.state.answerText&&!this.isClick){this.isClick=!0;var t={userAdmin:e.nickname,isClick:!0};p.default.sendSignallingQiangDaZhe(!1,t)}}},{key:"closeResponder",value:function(){if(c.default.hasRole.roleChairman||c.default.hasRole.roleTeachingAssistant){p.default.sendSignallingQiangDaQi(!0,{}),h.default.CoreController.dispatchEvent({type:"colse-holdAll-item",message:{type:"responder"}})}}},{key:"restartResponder",value:function(){var e={isShow:!0,begin:!1,userAdmin:""},t=!0;p.default.sendSignallingQiangDaQi(t,e),t=!1,p.default.sendSignallingQiangDaQi(t,e);var a=this.props,i=a.id,o=a.responderDrag,n=a.draggableData;if(n.changePosition&&"function"==typeof n.changePosition){n.changePosition(i,o,!0)}}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.responderDrag,i=e.draggableData,o=this.state,n=o.answerText,l=o.responderMsgTitle,s=o.firstUser,r=o.beginIsStatus,f=o.studentIsGifImg,h=a.percentLeft,m=a.percentTop;0==h||h||(h=.5),0==m||m||(m=.5);var p={display:this.state.responderIsShow?"block":"none"},v=Object.customAssign({id:t,percentPosition:{percentLeft:h,percentTop:m}},i);return d.default.createElement(g.default,v,d.default.createElement("div",{id:t,style:p,className:"responder-wrap"+(c.default.hasRole.roleStudent?" student":" teacher")},d.default.createElement("div",{className:"responder-lining"},d.default.createElement("div",{className:"responder-circle touch-select-select defalut-bg"+(c.default.hasRole.rolePatrol?" disabled":"")+(r||c.default.hasRole.roleStudent&&f?" gif-img":"")+(s||c.default.hasRole.rolePatrol?" somebody-click":" nobody-click")},d.default.createElement("div",{className:"responder-msg-title"},u.default.language.languageData.responder[l]&&void 0!==u.default.language.languageData.responder[l].text?u.default.language.languageData.responder[l].text:l),d.default.createElement("div",{className:"responder-begin-circle"+(r?" disabled":""),onClick:this.beginOrRestartResponder.bind(this)},d.default.createElement("p",null,u.default.language.languageData.responder[n].text)),c.default.hasRole.roleStudent||c.default.hasRole.rolePatrol?void 0:d.default.createElement("span",{className:"responder-close icon-close",onClick:this.closeResponder.bind(this)})))))}}]),t}(d.default.Component);t.default=y},mKia:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=g(a("nnFL")),o=g(a("Yz+Y")),n=g(a("iCc5")),l=g(a("V7oC")),s=g(a("FYw3")),r=g(a("mRg0")),d=g(a("q1tI")),u=g(a("HPAy")),c=g(a("eQYT")),f=g(a("mrNk")),h=g(a("uuqz")),m=g(a("XbJA")),p=g(a("aJKe"));function g(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,r.default)(t,e),(0,l.default)(t,[{key:"handleVideoCapture",value:function(){var e=document.createElement("canvas");e.id="videoCaptureCanvas";var t=document.getElementById(u.default.videoCaptureBoxId);if(t){var a=t.querySelector("video");if(!a)return!1;var i=a.offsetWidth,o=a.offsetHeight;e.width=i,e.height=o,e.getContext("2d").drawImage(a,0,0,i,o);var n=e.toDataURL("image/jpeg"),l=this._dataURLtoBlob(n),s=new FormData;s.append("serial",c.default.joinRoomInfo.serial),s.append("userid",f.default.getTkRoom().getMySelf().id),s.append("sender",f.default.getTkRoom().getMySelf().nickname),s.append("codeid",f.default.getTkRoom().getMySelf().id+"_"+h.default.getGUID().getGUIDDate()+h.default.getGUID().getGUIDTime()),s.append("codetype",1),s.append("conversion","1"),s.append("isconversiondone","0"),s.append("writedb","0"),s.append("alluser","1"),s.append("fileoldname","aaaa.jpg"),s.append("filetype","jpg"),s.append("filedata",l,"aaaa.jpg"),f.default.getTkRoom().uploadFile(s,function(e,t){if(0===e){t.fileid="videoCapture";var a=t.swfpath.substring(t.swfpath.lastIndexOf("."))||".jpg",i=t.swfpath.replace(a,"-1"+a),o=window.WBGlobal.nowUseDocAddress+i,n=new Image;n.onload=function(){var e=u.default.windowInnerWidth/c.default.STANDARDSIZE,a={captureImgInfo:t,remSize:{width:n.width/e,height:n.height/e}};m.default.sendSignallingFromCaptureImg("CaptureImg_videoCapture",{},!0),m.default.sendSignallingFromCaptureImg("CaptureImg_videoCapture",a)},n.src=o,L.Logger.info("capture image info"+t),p.default.CoreController.dispatchEvent({type:"captureImgUploadFinished"})}},function(e,t){L.Logger.warning("capture image upload failed")})}}},{key:"_dataURLtoBlob",value:function(e){for(var t=e.split(","),a=t[0].match(/:(.*?);/)[1],i=atob(t[1]),o=i.length,n=new Uint8Array(o);o--;)n[o]=i.charCodeAt(o);return new Blob([n],{type:a})}},{key:"render",value:function(){return(0,i.default)(this.props),d.default.createElement("li",{className:"tool-option tool-video-capture",title:u.default.language.languageData.header.tool.VideoCapture.title,onClick:this.handleVideoCapture.bind(this)},d.default.createElement("em",{className:"icon icon-camera"}))}}]),t}(d.default.Component);t.default=v},mVqE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=m(a("Yz+Y")),o=m(a("iCc5")),n=m(a("V7oC")),l=m(a("FYw3")),s=m(a("mRg0")),r=(0,m(a("CSPP")).default)(["\n display : ",";\n"],["\n display : ",";\n"]),d=m(a("q1tI")),u=m(a("vOnD")),c=m(a("HPAy")),f=m(a("JL1q")),h=m(a("gQA0"));function m(e){return e&&e.__esModule?e:{default:e}}var p=u.default.div(r,function(e){return e.classBegin&&f.default.handler.getAppPermissions("canDraw")&&e.isCourseMp4Play&&e.isShowTools?"block":"none"}),g=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.toolKit,a=e.buttonClick,i=e.classBegin,o=e.isShowTools,n=c.default.systemStyleJson.HeaderVesselSmartStyleJson,l=void 0===n?{}:n,s="calc("+window.innerHeight+"px - "+l.height+")";return d.default.createElement("div",null,d.default.createElement(p,{title:c.default.language.languageData.toolCase.toolBox.text,isCourseMp4Play:this.props.isCourseMp4Play,className:"Tk-header-icon icon-tools "+(t?"active":""),onClick:a,isShowTools:o,classBegin:{classBegin:i}},d.default.createElement(h.default,{id:"holdAllBox"})," "),d.default.createElement("div",{className:"mask2",onClick:a,style:{display:t?"block":"none",height:s}}))}}]),t}(d.default.Component);t.default=g},mrNk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=new function(){var e=void 0,t=void 0,a=void 0,i=void 0,o=void 0,n=void 0;this.getTkRoom=function(){return e},this.getRoomName=function(){return t},this.setTkRoom=function(t){e=t},this.setRoomName=function(e){t=e},this.getLocalStream=function(){return i},this.setLocalStream=function(e){i=e},this.getUserName=function(){return a},this.setUserName=function(e){a=e},this.getUserThirdid=function(){return o},this.setUserThirdid=function(e){o=e},this.getTkWhiteBoardManager=function(){return n},this.setTkWhiteBoardManager=function(e){n=e},this.getNativeInterface=function(){if(e&&e.getNativeInterface)return e.getNativeInterface()},this.clearAll=function(){e=null,t=null,a=null,i=null,o=null}}},mwLC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=m(a("Yz+Y")),n=m(a("iCc5")),l=m(a("V7oC")),s=m(a("FYw3")),r=m(a("mRg0")),d=m(a("q1tI")),u=m(a("GCUw")),c=a("okNM"),f=m(a("eQYT")),h=m(a("Z2bU"));function m(e){return e&&e.__esModule?e:{default:e}}var p=(0,c.inject)("userListDataStore","globalStore")(i=(0,c.observer)(i=function(e){function t(){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,r.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.userListDataStore,a=e.globalStore,i=t.userListItemData.length;return d.default.createElement("div",{className:"list-wrapper"},a.canDivided&&!f.default.hasRoomtype.oneToOne&&(f.default.hasRole.roleChairman||f.default.hasRole.roleTeachingAssistant||f.default.hasRole.rolePatrol)?d.default.createElement(h.default,null):d.default.createElement("ul",{className:"list-box",id:"tool_participant_user_list"},t.userListItemData.map(function(e,t){return d.default.createElement(u.default,{key:t,value:e,index:t,itemLen:i,type:"default"})})))}}]),t}(d.default.Component))||i)||i;t.default=p},nC4r:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=h(a("FyfS")),o=h(a("Yz+Y")),n=h(a("iCc5")),l=h(a("V7oC")),s=h(a("FYw3")),r=h(a("mRg0")),d=h(a("q1tI")),u=h(a("XbJA")),c=h(a("aJKe")),f=(h(a("JL1q")),h(a("1Nl6")));function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){c.default.CoreController.addEventListener("receive-msglist-timer",this.handlerMsglistTimerShow.bind(this),this.listernerBackupid)}},{key:"handlerMsglistTimerShow",value:function(e){var t=!0,a=!1,o=void 0;try{for(var n,l=(0,i.default)(e.message.timerShowArr);!(t=(n=l.next()).done);t=!0){n.value;this.props.isDisabledHoldItem("timer",!0)}}catch(e){a=!0,o=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw o}}}},{key:"timerAssemblyShowHandel",value:function(){u.default.sendSignallingTimerToStudent({isStatus:!1,sutdentTimerArry:[0,5,0,0],isShow:!0,isRestart:!1}),c.default.CoreController.dispatchEvent({type:"handleTurnShow",className:"timer-implement-bg",isShow:!0}),this.props.isDisabledHoldItem("timer",!0),this.props.close()}},{key:"render",value:function(){return d.default.createElement("li",{className:"holdAllitem "+(this.props.isDisabled?" disabled":"")},d.default.createElement("div",{onClick:this.timerAssemblyShowHandel.bind(this)},d.default.createElement("em",{className:"icon "+this.props.bgName}),d.default.createElement("span",null,this.props.name)))}}]),t}(d.default.Component);m=(0,f.default)(m),t.default=m},nHMO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(a("sk9p")),o=a("q1tI"),n=d(o);a("Szfz");var l=d(a("UOZY")),s=d(a("emLI")),r=d(a("B1Ng"));function d(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.close,a=(0,o.useState)("upload"),d=(0,i.default)(a,2),u=d[0],c=d[1],f=function(){t()};return n.default.createElement("div",{className:"addcourse-warp"},n.default.createElement(l.default,{close:f,addType:u,switchAddType:function(e){c(e)}}),"upload"===u&&n.default.createElement(s.default,{close:f}),"bind"===u&&n.default.createElement(r.default,{close:f}))}},"ni/M":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TeacherVideoList=t.StudentVideoList=void 0;var i,o=I(a("QbLZ")),n=I(a("P2sY")),l=I(a("oF3Q")),s=I(a("sk9p")),r=I(a("GQeE")),d=I(a("FyfS")),u=I(a("Yz+Y")),c=I(a("iCc5")),f=I(a("V7oC")),h=I(a("FYw3")),m=I(a("mRg0")),p=I(a("q1tI")),g=I(a("HPAy")),v=I(a("eQYT")),y=I(a("aJKe")),S=I(a("JL1q")),b=I(a("XbJA")),C=I(a("fZQK")),k=a("okNM"),w=a("LAQx"),T=I(a("7Ln7")),E=I(a("bm2/"));function I(e){return e&&e.__esModule?e:{default:e}}var D=(0,k.observer)(i=function(e){function t(e){(0,c.default)(this,t);var a=(0,h.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.streamNumber=0,a.asyncRenderBoard=!0,a.elementId="hvideo_container",a.videoBoxSize={width:0,height:0},a}return(0,m.default)(t,e),(0,f.default)(t,[{key:"componentWillUnmount",value:function(){!g.default.playback&&this.props.streamChange&&this.props.streamChange(T.default.streams),y.default.CoreController.dispatchEvent({type:"saveSwicthVideoStream",streams:T.default.streams}),y.default.CoreController.removeBackupListerner(this.listernerBackupid),y.default.Window.removeBackupListerner(this.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){T.default.streams&&T.default.streams.length!==this.streamNumber&&(this.streamNumber=T.default.streams.length),e.stream&&this.props.stream&&e.stream.length!=this.props.stream.length&&T.default.updatelayout(this.props.stream),this.videoBox&&(Math.abs(this.videoBox.offsetWidth-this.videoBoxSize.width)>.1||Math.abs(this.videoBox.offsetHeight-this.videoBoxSize.height)>.1)&&(this.videoBoxSize.width=this.videoBox.offsetWidth,this.videoBoxSize.height=this.videoBox.offsetHeight,y.default.CoreController.dispatchEvent({type:"videoBoxSizeChanged"}))}},{key:"_initVideoSizeByUserid",value:function(e,t,a){var i={otherVideoSize:{}},o=g.default.windowInnerWidth/v.default.STANDARDSIZE,n=(0,w.limitVideoSize)(e*window.GLOBAL.windowInnerWidth/100/o,t*window.GLOBAL.windowInnerWidth/100/o,T.default.layoutName,T.default.streams.length,(0,w.isTeacher)(a));i.otherVideoSize[a]=n,T.default.updateVideoSizeData(i)}},{key:"initOtherVideoStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={otherVideoStyle:{}};T.default.streams&&T.default.streams.map(function(e,a){E.default.otherVideoStyle[e.extensionId]&&(t.otherVideoStyle[e.extensionId]=E.default.otherVideoStyle[e.extensionId])});var a=!0,i=!1,o=void 0;try{for(var n,l=(0,d.default)((0,r.default)(t.otherVideoStyle));!(a=(n=l.next()).done);a=!0){var s=n.value;t.otherVideoStyle[s]={percentTop:0,percentLeft:0,isDrag:!1}}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}if(T.default.updateVideoDragData(t),e){var u={otherVideoStyle:t.otherVideoStyle};b.default.sendSignallingFromVideoDraghandle(u,"__all")}}},{key:"sendSignallingOfVideoSize",value:function(){var e={ScaleVideoData:{}},t=void 0,a=void 0,i=!0,o=!1,n=void 0;try{for(var r,u=(0,d.default)((0,l.default)(E.default.otherVideoSize));!(i=(r=u.next()).done);i=!0){var c=r.value,f=(0,s.default)(c,2),h=f[0],m=f[1];"Encompassment"===T.default.layoutName||"Bilateral"===T.default.layoutName&&(0,w.isTeacher)(h)?(t=(0,w.getInitVideoSize)("VideoDown",T.default.streams.length,!0).initVideoWidth,a=(0,w.getInitVideoSize)("VideoDown",T.default.streams.length,!1).initVideoWidth):(t=(0,w.getInitVideoSize)(T.default.layoutName,T.default.streams.length,!0).initVideoWidth,a=(0,w.getInitVideoSize)(T.default.layoutName,T.default.streams.length,!1).initVideoWidth),e.ScaleVideoData[h]={scale:m.videoWidth/((0,w.isTeacher)(h)?t:a)}}}catch(e){o=!0,n=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw n}}b.default.sendSignallingFromVideoChangeSize(e,"__all")}},{key:"changeVideoSize",value:function(e,t,a){var i=void 0;i="Encompassment"===T.default.layoutName||"Bilateral"===T.default.layoutName&&(0,w.isTeacher)(a)?(0,w.limitVideoSize)(e,t,"VideoDown",T.default.streams.length,(0,w.isTeacher)(a)):(0,w.limitVideoSize)(e,t,T.default.layoutName,T.default.streams.length,(0,w.isTeacher)(a)),E.default.updateVideoSize(i,a)}},{key:"initOtherVideoDragByUserid",value:function(e){this._initVideoSizeByUserid(E.default.otherVideoSize[e].videoWidth,E.default.otherVideoSize[e].videoHeight,e),this.sendSignallingOfVideoSize();var t={message:{data:{style:{percentLeft:0,percentTop:0,isDrag:!1},id:e},initiative:!0}};T.default.setChangeStyle(t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.isTeacher,i=t.isFromMod,l=void 0!==i&&i,s=T.default.layoutName,r=T.default.isHasCloseBtn;"MainPeople"==s&&(l=!0);var d=E.default.otherVideoStyle,u=E.default.otherVideoSize,c=E.default.videoList,f=0,h=!0;if(!a){var m=c.student.filter(function(e){return e.isShow});for(var y in m)if(d[m[y].id]&&!d[m[y].id].isDrag){h=!1;break}f=m.length}var b=v.default.joinRoomInfo.roomVideoHeight/v.default.joinRoomInfo.roomVideoWidth,w=0;!a&&f>0&&!h&&(w=("Encompassment"===s?12.5:100/7)*b);var I=null;a&&!c.teacher.filter(function(e){return e.isShow}).length&&("Encompassment"!==s&&"MainPeople"!==s||(I={},"Encompassment"===s&&(I.width="25vw",I.height=25*b+"vw")));var D="MainPeople"===s?"100vw":"CoursewareDown"!==s&&"VideoDown"!==s||!c.teacher.filter(function(e){return e.isShow&&!d[e.id].isDrag}).length?"100vw":"",x=v.default.joinRoomInfo.isStuHideOtherVideo&&v.default.hasRole.roleStudent;return p.default.createElement(k.Provider,{videoStore:T.default,videoStatusStore:E.default},p.default.createElement("div",{className:"studentVideoList "+(a?"teacherVideoList":"studentVideoLists")+"  "+(0===f?"resetWidth":"")+" "+(a&&!c.teacher.filter(function(e){return e.isShow}).length?" teacherListZero":"")+" "+(I?"icon icon-duorenshipin_zhanwei":""),ref:function(t){e.videoBox=t},style:(0,n.default)(x?{width:"100%",height:"50%"}:{minHeight:w+"vw",maxWidth:D},{display:g.default.doubleScreen},I?(0,o.default)({},I):{})},c[a?"teacher":"student"].filter(function(e){return e.isShow}).map(function(t){return p.default.createElement(p.default.Fragment,{key:t.id},p.default.createElement(C.default,(0,o.default)({},{sendSignallingOfVideoSize:e.sendSignallingOfVideoSize.bind(e),changeVideoSize:e.changeVideoSize.bind(e),initOtherVideoDragByUserid:e.initOtherVideoDragByUserid.bind(e)},d[t.id],u[t.id],{videoId:t.id,stream:t.stream,videoDumbClassName:"hvideo",hasDragJurisdiction:S.default.handler.getAppPermissions("isCanDragVideo")&&!l,videoClassName:e.props.isTeacher?"video-chairman-wrap":"video-student-wrap",studentLength:f,isHasCloseBtn:r,isTeacherList:a})))})))}}]),t}(p.default.Component))||i;function x(e,t){var a;return(0,k.observer)(a=function(a){function i(){return(0,c.default)(this,i),(0,h.default)(this,(i.__proto__||(0,u.default)(i)).apply(this,arguments))}return(0,m.default)(i,a),(0,f.default)(i,[{key:"componentWillUnmount",value:function(){T.default.distroy()}},{key:"render",value:function(){var a=this.props.isFromMod,i=void 0!==a&&a;return p.default.createElement(e,{isTeacher:t,isFromMod:i})}}]),i}(p.default.Component))||a}var R=x(D,!1),_=x(D,!0);t.StudentVideoList=R,t.TeacherVideoList=_},oCnM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(a("Yz+Y")),o=f(a("iCc5")),n=f(a("V7oC")),l=f(a("FYw3")),s=f(a("mRg0")),r=f(a("q1tI")),d=f(a("HPAy")),u=f(a("M3nf")),c=f(a("Fveh"));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.openToolText,a=e.changePen,i=e.mouseLeave,o=e.changeFontFamily,n=e.setLineColor,l=e.changeFontSize;return r.default.createElement("li",{className:"tool-option tool_text "+("tool_text"===this.props.isActive?"active":"")+(this.props.show?"":" hide"),onClick:t,title:d.default.language.languageData.header.tool.text.title},r.default.createElement("em",{className:"icon icon-text_sanjiao "}),r.default.createElement("div",{className:"tool-pen-list-extend",style:{display:this.props.textPanelShow&&"tool_text"===this.props.isActive?"block":"none"},onClick:a,onMouseLeave:i},TkConstant.joinRoomInfo.fontoptions&&TkConstant.hasRole.roleStudent?void 0:r.default.createElement("div",{className:"font-container",onClick:o},r.default.createElement("button",{className:"font-family-option Msyh "+(""===this.props.fontFamily?"active":""),"data-fontfamily":""},d.default.language.languageData.header.tool.text.Msyh.text),r.default.createElement("button",{className:"font-family-option Ming "+(""===this.props.fontFamily?"active":""),"data-fontfamily":""},d.default.language.languageData.header.tool.text.Ming.text),r.default.createElement("button",{className:"font-family-option Arial "+("Arial"===this.props.fontFamily?"active":""),"data-fontfamily":"Arial"},d.default.language.languageData.header.tool.text.Arial.text)),r.default.createElement("div",{style:{position:"relative"}},r.default.createElement(u.default,{setLineColor:n,selectColor:this.props.primaryColor})),TkConstant.joinRoomInfo.fontoptions&&TkConstant.hasRole.roleStudent?void 0:r.default.createElement("div",{className:"tool-slider"},r.default.createElement(c.default,{value:this.props.fontSize,onAfterChange:l}),r.default.createElement("span",null,this.props.fontSize))))}}]),t}(r.default.Component);t.default=h},oHfo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=y(a("QbLZ")),o=y(a("Yz+Y")),n=y(a("iCc5")),l=y(a("V7oC")),s=y(a("FYw3")),r=y(a("mRg0")),d=y(a("CSPP")),u=(0,d.default)(["\n    display: ",";\n"],["\n    display: ",";\n"]),c=(0,d.default)(["\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    padding: 0 .16rem;\n    border-radius: .06rem;\n    height: .46rem;\n    line-height: .46rem;\n    width: auto;\n    font-size: .14rem;\n    color: #FFF;\n    background: rgba(0, 0, 0, .6);\n"],["\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    padding: 0 .16rem;\n    border-radius: .06rem;\n    height: .46rem;\n    line-height: .46rem;\n    width: auto;\n    font-size: .14rem;\n    color: #FFF;\n    background: rgba(0, 0, 0, .6);\n"]),f=y(a("q1tI")),h=y(a("eQYT")),m=y(a("HPAy")),p=y(a("sVhb")),g=y(a("vOnD")),v=y(a("aJKe"));y(a("XbJA"));function y(e){return e&&e.__esModule?e:{default:e}}a("yiyr");var S=g.default.div(u,function(e){return e.isShow?"block":"none"}),b=g.default.div(c),C=function(e){function t(){(0,n.default)(this,t);var e=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return e.state={activeClass:"CoursewareDown",isSynStudent:!0,isShow:!1,toastShow:!1,realClass:"CoursewareDown",isAllBanSpeak:!1},e.LayoutItemData=[{className:"CoursewareDown",name:m.default.language.languageData.layoutInfo.CoursewareDown},{className:"VideoDown",name:m.default.language.languageData.layoutInfo.VideoDown},{className:"Encompassment",name:m.default.language.languageData.layoutInfo.Encompassment},{className:"Bilateral",name:m.default.language.languageData.layoutInfo.Bilateral},{className:"MainPeople",name:m.default.language.languageData.layoutInfo.MainPeople},{className:"OnlyVideo",name:m.default.language.languageData.layoutInfo.OnlyVideo},{className:"oneToOne",name:m.default.language.languageData.layoutInfo.oneToOne},{className:"oneToOneDoubleDivision",name:m.default.language.languageData.layoutInfo.doubleDivision},{className:"oneToOneDoubleVideo",name:m.default.language.languageData.layoutInfo.doubleVideo}],e.listernerBackupid=(new Date).getTime()+"_"+Math.random(),e}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){v.default.CoreController.addEventListener("triggerSwitchLayout",this.handleTriggerSwitchLayout.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("receive-msglist-SwitchLayout",this.handleMsgListSwitchLayout.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("receive-msglist-SwitchLayout",this.handleMsgListSwitchLayout.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),v.default.CoreController.addEventListener("SwitchLayout",this.handleSwitchLayout.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){v.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"switchLayout":this.setState({activeClass:t.data.nowLayout});break;case"ClassBegin":h.default.hasRole.roleChairman&&this.handleConfirmClick()}}},{key:"handleMsgListSwitchLayout",value:function(e){this.setState({activeClass:e.message.nowLayout,realClass:e.message.nowLayout})}},{key:"close",value:function(){this.setState({isShow:!1})}},{key:"handleSwitchLayout",value:function(e){var t=e.nowLayout;this.setState({activeClass:t,realClass:t})}},{key:"handleTriggerSwitchLayout",value:function(e){this.setState({isShow:e.layoutActive})}},{key:"LayoutClick",value:function(e){var t=this.state,a=(t.activeClass,t.isSynStudent,t.realClass);if(this.props.streamLen>24&&("MainPeople"==a||"Bilateral"==a)&&"MainPeople"!==e&&"Bilateral"!==e)return!1;this.setState({activeClass:e,realClass:this.state.activeClass})}},{key:"handlerSynStudentClick",value:function(){this.setState({isSynStudent:!this.state.isSynStudent})}},{key:"chatToggle",value:function(){this.setState({isAllBanSpeak:m.default.isAllBanSpeak})}},{key:"handleConfirmClick",value:function(){var e=this,t=this.state,a=t.activeClass,i=t.realClass;a!==i&&this.chatToggle();var o=m.default.classBegin;if(this.props.streamLen>24&&("MainPeople"==i||"Bilateral"==i)&&"MainPeople"!==a&&"Bilateral"!==a)return!1;if("MainPeople"!==a&&"Bilateral"!==a&&this.props.streamLen>24){this.setState({toastShow:!0,activeClass:i});var n=setTimeout(function(){e.setState({toastShow:!1}),clearTimeout(n)},3e3)}else var l=setTimeout(function(){v.default.CoreController.dispatchEvent({type:"triggerSwitchLayout",layoutActive:!1,message:{}}),v.default.CoreController.dispatchEvent({type:"SwitchLayout",nowLayout:a,isSynStudent:o}),clearTimeout(l)},300)}},{key:"_stopPreventClick",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.LayoutItemData,a=this.state.toastShow,o="";h.default.hasRole.roleTeachingAssistant?o="layout-container-teachingAssistant":h.default.joinRoomInfo.hiddenClassBegin&&!h.default.joinRoomInfo.helpcallbackurl&&m.default.isClient&&(o="layout-container-teachingAssistant");var n=h.default.hasRoomtype.oneToOne?/oneToOne/:/^((?!oneToOne).)*$/;return f.default.createElement(f.default.Fragment,null,a?f.default.createElement(b,null,""):"",f.default.createElement(S,{className:"layout-container "+o+" ",isShow:this.state.isShow,onClick:this._stopPreventClick.bind(this)},f.default.createElement("div",{className:"layout-box"},t.filter(function(e){return n.test(e.className)}).map(function(t,a){return f.default.createElement(p.default,(0,i.default)({key:a,isActive:e.state.activeClass===t.className},t,{LayoutClick:e.LayoutClick.bind(e,t.className)}))})),f.default.createElement("div",{className:"other-box"},f.default.createElement("button",{className:"confirmBtn",onClick:this.handleConfirmClick.bind(this),title:m.default.language.languageData.alertWin.ok.showPrompt.text},m.default.language.languageData.alertWin.ok.showPrompt.text))))}}]),t}(f.default.Component);t.default=C},opMs:function(e,t,a){},p5Yn:function(e,t,a){},p9a2:function(e,t,a){},pIe1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=p(a("QbLZ")),o=p(a("Yz+Y")),n=p(a("iCc5")),l=p(a("V7oC")),s=p(a("FYw3")),r=p(a("mRg0")),d=p(a("q1tI")),u=p(a("i8i4")),c=p(a("HPAy")),f=p(a("aJKe")),h=p(a("eQYT")),m=(p(a("01jY")),p(a("MKj4")));function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={eleResizeInfo:{width:e.size&&e.size.width?e.size.width:null,height:e.size&&e.size.height?e.size.height:null},updateState:!1,isCanResize:!1},a.isCanDrag=!1,a.isDrag=!1,a.stretchDirection=null,a.resizeTouchBounds=20,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.resizeEle=null,a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.id;f.default.Window.addEventListener(h.default.EVENTTYPE.WindowEvent.onResize,this.handlerOnResize.bind(this),this.listernerBackupid),f.default.Document.addEventListener(h.default.EVENTTYPE.DocumentEvent.onFullscreenchange,this.handlerOnFullscreenchange.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener("resizeHandler",this.handlerOnResize.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener("changeMainContentVesselSmartSize",this.changeMainContentVesselSmartSize.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener(e+"_mouseUp",this.handleMouseUp.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener(e+"_mouseMove",this.handleChangeSize.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){f.default.Window.removeBackupListerner(this.listernerBackupid),f.default.CoreController.removeBackupListerner(this.listernerBackupid),f.default.Document.removeBackupListerner(this.listernerBackupid)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.bounds,i=t.id,o=t.changePosition,n=t.borderWidth,l=void 0===n?0:n;t.resizeData;if(e.percentPosition&&!isNaN(e.percentPosition.percentTop)&&!isNaN(e.percentPosition.percentLeft)&&(e.percentPosition.percentLeft!==this.props.percentPosition.percentLeft||e.percentPosition.percentTop!==this.props.percentPosition.percentTop)){var s=this.getPosition(e.percentPosition,i,a);o&&"function"==typeof o&&o(i,s)}if(e.size&&this.props.size&&(e.size.width!==this.props.size.width||e.size.height!==this.props.size.height)){var r=c.default.windowInnerWidth/h.default.STANDARDSIZE,d=e.size,u=d.width,f=d.height,m=e.resizeData&&e.resizeData.eleInitResizeInfos?e.resizeData.eleInitResizeInfos.originalResizeScale:void 0;this.updateEleReSize(u*r,f*r,i,l,m);var p=this.getPosition(e.percentPosition,i,a,e.size);o&&"function"==typeof o&&o(i,p)}}},{key:"componentWillUpdate",value:function(e,t){if(!(isNaN(t.eleResizeInfo.width)||isNaN(t.eleResizeInfo.height)||isNaN(this.state.eleResizeInfo.width)||isNaN(this.state.eleResizeInfo.height)||t.eleResizeInfo.width===this.state.eleResizeInfo.width&&t.eleResizeInfo.height===this.state.eleResizeInfo.height)){var a=this.props,i=a.id,o=a.changePosition,n=a.bounds,l=this.getPosition(e.percentPosition,i,n,t.eleResizeInfo);o&&"function"==typeof o&&o(i,l)}}},{key:"handlerOnResize",value:function(){this.recalculation()}},{key:"handlerOnFullscreenchange",value:function(){this.recalculation()}},{key:"changeMainContentVesselSmartSize",value:function(){this.recalculation()}},{key:"recalculation",value:function(){var e=this.props,t=e.bounds,a=e.id,i=e.changePosition,o=e.percentPosition,n=e.borderWidth,l=void 0===n?0:n,s=e.resizeData,r=e.size,d={width:r&&r.width?r.width:null,height:r&&r.height?r.height:null};this.setState({eleResizeInfo:d});var u=this.getPosition(o,a,t);if(i&&"function"==typeof i&&i(a,u),s&&s.changeEleReSize&&"function"==typeof s.changeEleReSize){var f=c.default.windowInnerWidth/h.default.STANDARDSIZE,m=this.state.eleResizeInfo,p=m.width,g=m.height,v=this.limitEleReSize(p*f,g*f,a,l);s.changeEleReSize(a,v)}}},{key:"getPosition",value:function(e,t,a,i){var o=this.props.borderWidth,n=void 0===o?0:o,l=document.getElementById(t),s=void 0;if("string"==typeof a&&(s=document.querySelector(a)),l&&s&&void 0!==e.percentLeft&&void 0!==e.percentTop){var r=c.default.windowInnerWidth/h.default.STANDARDSIZE,d=i?(i.width+2*n)*r:l.offsetWidth,u=i?(i.height+2*n)*r:l.offsetHeight,f=s.offsetWidth,m=s.offsetHeight,p=e.percentLeft*(f-d),g=e.percentTop*(m-u);return{left:p=isNaN(p)||p===1/0||null===p||p<0?0:Number(p.toFixed(4)),top:g=isNaN(g)||g===1/0||null===g||g<0?0:Number(g.toFixed(4))}}return{left:0,top:0}}},{key:"getPercentPosition",value:function(e,t,a){var i=u.default.findDOMNode(t),o=void 0;if("string"==typeof a&&(o=document.querySelector(a)),i&&o&&void 0!==e.x&&void 0!==e.y){var n=i.offsetWidth,l=i.offsetHeight,s=o.offsetWidth,r=o.offsetHeight,d=e.x/(s-n),c=e.y/(r-l);return{percentLeft:d=isNaN(d)||d===1/0||null===d||d<0?0:Number(d.toFixed(6)),percentTop:c=isNaN(c)||c===1/0||null===c||c<0?0:Number(c.toFixed(6))}}return{percentLeft:0,percentTop:0}}},{key:"handlerOnStartDrag",value:function(e,t){if("INPUT"===e.target.nodeName)return!1;var a=this.props,i=a.onStartDrag,o=a.changeLayerIsShow;return o&&"function"==typeof o&&o(!0),this.isCanDrag=!0,i&&"function"==typeof i?i(e,t):void 0}},{key:"handlerOnDragging",value:function(e,t){var a=!!t.dragging&&t.dragging;if(this.props.isDragging&&this.props.isDragging(a),!this.isCanDrag)return!1;this.isDrag=!0}},{key:"handlerOnStopDrag",value:function(e,t){var a=this.props,i=(a.id,a.bounds),o=a.onStopDrag,n=a.changeLayerIsShow;n&&"function"==typeof n&&n(!1);var l=!!t.dragging&&t.dragging;if(this.props.isDragging&&this.props.isDragging(l),!0!==this.isDrag)return!1;this.isDrag=!1,this.isCanDrag=!1,(isNaN(t.x)||null===t.x||isNaN(t.y)||null===t.y)&&L.Logger.error("Drag and drop failed:",t);var s=u.default.findDOMNode(this),r=void 0;"string"==typeof i&&(r=document.querySelector(i))&&(t.x=t.x<0?0:t.x>r.offsetWidth-s.offsetWidth?r.offsetWidth-s.offsetWidth:t.x,t.y=t.y<0?0:t.y>r.offsetHeight-s.offsetHeight?r.offsetHeight-s.offsetHeight:t.y);var d={x:t.x,y:t.y};if(t.lastX||t.lastY){var c=this.getPercentPosition({x:t.lastX,y:t.lastY},this,i);t.lastX=c.percentLeft,t.lastY=c.percentTop}var f=this.getPercentPosition(d,this,i);o&&"function"==typeof o&&o(e,t,f)}},{key:"handlerOnMouseDown",value:function(e){var t=this.props,a=t.changeLayerIsShow,i=t.resizeData;i&&i.canResize&&("w-resize"!==this.stretchDirection&&"s-resize"!==this.stretchDirection&&"se-resize"!==this.stretchDirection||(c.default.isVideoStretch=!0,this.setState({updateState:!this.state.updateState,isCanResize:!0}),a&&"function"==typeof a&&a(!0)),e.preventDefault(),e.stopPropagation())}},{key:"mouseMove",value:function(e){var t=this.props,a=t.id,i=t.resizeData,o=t.isDrag;i&&i.canResize&&c.default.changeVideoSizeEventName!==a+"_mouseMove"&&c.default.changeVideoSizeMouseUpEventName!==a+"_mouseUp"&&!c.default.isVideoStretch&&o&&(c.default.changeVideoSizeEventName=a+"_mouseMove",c.default.changeVideoSizeMouseUpEventName=a+"_mouseUp")}},{key:"handleMouseUp",value:function(e){var t=this.props,a=t.id,i=t.changeLayerIsShow,o=t.resizeData;if(o&&o.canResize){var n=o.handleMouseUp,l=e.message.data.event;if(!0===c.default.isVideoStretch){n&&"function"==typeof n&&n(a,this.state.eleResizeInfo),l.onmousemove=null;["tk-resize-w-resize","tk-resize-s-resize","tk-resize-se-resize"].map(function(e,t){for(var a=document.querySelectorAll("."+e),i=0;i<a.length;i++)a[i].classList.remove(e)}),this.stretchDirection=null,c.default.isVideoStretch=!1,c.default.changeVideoSizeEventName=null,c.default.changeVideoSizeMouseUpEventName=null,this.setState({updateState:!this.state.updateState,isCanResize:!1}),i&&"function"==typeof i&&i(!1)}}}},{key:"handleChangeSize",value:function(e){var t=this.props,a=t.id,i=t.resizeData,o=t.borderWidth,n=void 0===o?0:o,l=t.percentPosition,s=t.bounds,r=e.message.data.event;if(i&&i.canResize&&l){var d=i.eleInitResizeInfos,u=i.handleMouseMove,f=c.default.windowInnerWidth/h.default.STANDARDSIZE,m=this.state.eleResizeInfo.width*f,p=this.state.eleResizeInfo.height*f,g=this.getPosition(l,a,s),v=void 0,y=void 0;c.default.mainContainerFull||c.default.isVideoInFullscreen?(v=g.left,y=g.top):(v=g.left+c.default.dragRange.left*f,y=g.top+c.default.dragRange.top*f);var S=r.pageX,b=r.pageY;if(!c.default.isVideoStretch){var C=void 0;try{C=document.querySelector("#"+a)}catch(e){C=document.querySelector("#player_"+a).parentNode.parentNode.parentNode}if(S>=v+m+2*n*f-this.resizeTouchBounds&&S<=v+m+2*n*f&&b>=y&&b<y+p+2*n*f-this.resizeTouchBounds)this.changeAllNodeClassName(C,"tk-resize-w-resize",!0),this.stretchDirection="w-resize";else if(b>=y+p+2*n*f-this.resizeTouchBounds&&b<=y+p+2*n*f&&S>=v&&S<v+m+2*n*f-this.resizeTouchBounds)this.changeAllNodeClassName(C,"tk-resize-s-resize",!0),this.stretchDirection="s-resize";else if(b<y+p+2*n*f&&b>=y+p+2*n*f-this.resizeTouchBounds&&S<v+m+2*n*f&&S>=v+m+2*n*f-this.resizeTouchBounds)this.changeAllNodeClassName(C,"tk-resize-se-resize",!0),this.stretchDirection="se-resize";else{["tk-resize-w-resize","tk-resize-s-resize","tk-resize-se-resize"].map(function(e,t){for(var a=document.querySelectorAll("."+e),i=0;i<a.length;i++)a[i].classList.remove(e)}),this.stretchDirection=null}}var k=void 0,w=void 0;if(c.default.isVideoStretch)if("w-resize"===this.stretchDirection||"se-resize"===this.stretchDirection){if(k=Math.abs(S-v)+2*n*f,w=d?k/d.originalResizeScale:p,S<v||!c.default.mainContainerFull&&!c.default.isVideoInFullscreen&&S<c.default.dragRange.left*f)return;var T=this.updateEleReSize(k,w,a,n);u&&"function"==typeof u&&u(a,T)}else if("s-resize"===this.stretchDirection){if(w=Math.abs(b-y)+2*n*f,k=d?w*d.originalResizeScale:m,b<y||!c.default.mainContainerFull&&!c.default.isVideoInFullscreen&&b<c.default.dragRange.top*f)return;var E=this.updateEleReSize(k,w,a,n);u&&"function"==typeof u&&u(a,E)}}}},{key:"changeAllNodeClassName",value:function(e,t,a){if(1===e.nodeType&&(a?e.classList.add(t):e.classList.remove(t)),e.hasChildNodes())for(var i=e.childNodes,o=0;o<i.length;o++)1===i[o].nodeType&&(a?i[o].classList.add(t):i[o].classList.remove(t),this.changeAllNodeClassName(i[o],t,a))}},{key:"limitEleReSize",value:function(e,t,a,i,o){var n=this.props.resizeData,l=n.eleInitResizeInfos,s=n.minResize;if(l&&s){var r=window.innerWidth/h.default.STANDARDSIZE,d=void 0,u=void 0;if("pc"===TK.SDKTYPE){var f=document.getElementById("lc-full-vessel");d=f.clientWidth,u=f.clientHeight}else d=c.default.windowInnerWidth,u=c.default.windowInnerHeight;var m=o||l.originalResizeScale;return m>s.width/s.height?t<s.height*r&&(e=(t=s.height*r)*m):e<s.width*r&&(t=(e=s.width*r)/m),(e>=d-2*i*r||t>=u-2*i*r)&&(m>d/u?t=(e=d-2*i*r)/m:e=(t=u-2*i*r)*m),{width:e/r,height:t/r}}}},{key:"updateEleReSize",value:function(e,t,a,i,o){if(this.props.resizeData){var n=this.limitEleReSize(e,t,a,i,o);return this.setState({eleResizeInfo:n}),n}}},{key:"render",value:function(){var e=this.state.eleResizeInfo,t=this.props,a=t.resizeData,o=t.percentPosition,n=t.bounds,l=t.id,s=(t.position,t.borderWidth),r=t.isResize,u=d.default.Children.only(this.props.children),f={BorderWidth:s*(c.default.windowInnerWidth/h.default.STANDARDSIZE),onMouseDown:this.handlerOnMouseDown.bind(this),onStart:this.handlerOnStartDrag.bind(this),onDrag:this.handlerOnDragging.bind(this),onStop:this.handlerOnStopDrag.bind(this),position:this.position?this.position:{},disable:this.props.disable?this.props.disable:!!this.props.disabled&&this.props.disabled,isResize:r||null};if(f=Object.customAssign(f,this.props),o){var p=this.getPosition(o,l,n);f.position.x=isNaN(p.left)||null===p.left?0:p.left,f.position.y=isNaN(p.top)||null===p.top?0:p.top}var g=c.default.isSplitScreen?null:{width:e.width+"rem",height:e.height+"rem"};return g=this.props.isDrag?g:null,c.default.isVideoStretch&&"string"==typeof u.props.id&&-1==u.props.id.indexOf("captureImg_")?d.default.cloneElement(u,{style:a&&a.canResize?(0,i.default)({},u.props.style,g):(0,i.default)({},u.props.style),onMouseMove:this.mouseMove.bind(this)}):d.default.createElement(m.default,f,d.default.cloneElement(u,{style:a&&a.canResize?(0,i.default)({},u.props.style,g):(0,i.default)({},u.props.style),onMouseMove:this.mouseMove.bind(this)}))}}]),t}(d.default.Component);t.default=g},pT4K:function(e,t,a){},per1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=f(a("Yz+Y")),n=f(a("iCc5")),l=f(a("V7oC")),s=f(a("FYw3")),r=f(a("mRg0")),d=f(a("q1tI")),u=f(a("HPAy")),c=a("okNM");function f(e){return e&&e.__esModule?e:{default:e}}var h=(0,c.inject)("userListDataStore")(i=(0,c.observer)(i=function(e){function t(){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,r.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.userListDataStore;return d.default.createElement("span",{className:"userlist-title"}," ",u.default.language.languageData.toolContainer.toolIcon.userList.title," ",d.default.createElement("span",{className:"tk-list-title-number"}," ","    ("+e.userListSum+")")," ")}}]),t}(d.default.Component))||i)||i;t.default=h},pl4W:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=c(a("Yz+Y")),o=c(a("iCc5")),n=c(a("V7oC")),l=c(a("FYw3")),s=c(a("mRg0")),r=c(a("q1tI")),d=(c(a("vOnD")),c(a("JL1q"))),u=c(a("HPAy"));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.courseware,a=e.buttonClick,i=e.isCourseMp4Play,o=e.isShowDynamicpptSuccess,n=e.isShowDynamicpptStatus,l=u.default.classBegin&&d.default.handler.getAppPermissions("canDraw")&&TkConstant.joinRoomInfo.isStudentUpdateFile,s=d.default.handler.getAppPermissions("loadCoursewarelist")&&!(i&&u.default.movieShareStatus&&u.default.isMovieSharePlay)||l;return r.default.createElement("button",{title:u.default.language.languageData.toolContainer.toolIcon.resourceLibrary.title,className:"Tk-header-icon icon-courseware "+(t?"active":""),onClick:a,style:{display:s?"block":"none"}},n&&!t?r.default.createElement("div",{className:"dynamicppt-success"},o?u.default.language.languageData.toolContainer.toolIcon.resourceLibrary.dynamicpptSuccess:u.default.language.languageData.toolContainer.toolIcon.resourceLibrary.dynamicpptFail):null)}}]),t}(r.default.Component);t.default=f},"rK/K":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=p(a("Yz+Y")),o=p(a("iCc5")),n=p(a("V7oC")),l=p(a("FYw3")),s=p(a("mRg0")),r=p(a("q1tI")),d=a("LbeR"),u=p(a("HPAy")),c=p(a("mrNk")),f=p(a("eQYT")),h=p(a("GXiF")),m=p(a("aJKe"));function p(e){return e&&e.__esModule?e:{default:e}}var g=0,v=void 0,y=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){v=c.default.getTkRoom().getMySelf().id}},{key:"deleteDocuemnt",value:function(e){if(f.default.hasRole.rolePatrol)return!1;"coursePublicFiles"===this.props.pub||"mediaPublicFiles"===this.props.pub?d.FileItemEvent.deletePublicDocuemnt(e):d.FileItemEvent.deleteDocuemnt(e)}},{key:"openDocuemnt",value:function(e,t){f.default.hasRole.roleStudent||(g+=1,setTimeout(function(){if(1===g){if(f.default.hasRole.rolePatrol)return!1;"mp3"!==e.filetype&&"mp4"!==e.filetype?u.default.defaultFileInfo=e:m.default.CoreController.dispatchEvent({type:"CloseLibrary"}),m.default.CoreController.dispatchEvent({type:"openCourseChange",message:{id:e.fileid}})}else 2===g&&t&&(t.preventDefault(),t.stopPropagation());g=0},200))}},{key:"render",value:function(){var e=this.props,t=e.file,a=e.fileID,i=e.isOnlyAudioRoom,o=(f.default.joinRoomInfo.isDocumentClassification,"");t.fileid==a&&(o="on"),a+""==d.HistoryFileId.media+""&&(d.HistoryFileId.course+"").length&&d.HistoryFileId.course==t.fileid&&(o="on"),d.HistoryFileId.mediaPlaying&&d.HistoryFileId.media+""==t.fileid+""&&(o="on");var n=u.default.companyidentify===f.default.COMPANYIDENTIFY.MEETING,l=void 0;return l="on"===o?"mediaPrivateFiles"===this.props.pub||"mediaPublicFiles"===this.props.pub?"on icon-timer_pause":"on icon-open_eye":"mediaPrivateFiles"===this.props.pub||"mediaPublicFiles"===this.props.pub?"icon-timer_star":"icon-close_eye",r.default.createElement("div",{className:"fileItem "+(i&&"mp4"===t.filetype?" hide":"")+(f.default.hasRole.rolePatrol?" disabled":"")},r.default.createElement(h.default,{openDocuemnt:this.openDocuemnt,file:t}),!f.default.hasRole.rolePatrol&&r.default.createElement("span",{className:"fileListTool"},r.default.createElement("span",{onClick:this.openDocuemnt.bind(this,t),className:"closeIcon "+l,style:{display:f.default.hasRole.roleStudent?"none":""}}),r.default.createElement("span",{style:{display:f.default.hasRole.roleStudent&&!n&&String(t.uploaduserid)!==String(v)||"whiteboard"==t.filetype?"none":""},onClick:this.deleteDocuemnt.bind(this,t.fileid),className:"icon-delete_icon deleteIcon"})))}}]),t}(r.default.Component);t.default=y},rTPC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=g(a("Yz+Y")),o=g(a("iCc5")),n=g(a("V7oC")),l=g(a("FYw3")),s=g(a("mRg0")),r=g(a("q1tI")),d=g(a("HPAy")),u=g(a("eQYT")),c=g(a("aJKe")),f=g(a("XbJA")),h=g(a("mrNk")),m=g(a("uuqz")),p=g(a("JL1q"));function g(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={clockTimeToHide:!1,clock:{hh:"00",mm:"00",ss:"00"},clockColor:"no-start"},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){this._stopTime(),c.default.CoreController.addEventListener(u.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener(u.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("receive-msglist-ClassBegin",this.handlerReceiveMsglistClassBegin.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("receive-msglist-not-ClassBegin",this.handlerReceiveMsglistNotClassBegin.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("backTimecolorOfRemind",this.handlerTimerColor.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener(u.default.EVENTTYPE.RoomEvent.roomParticipantEvicted,this.handlerClearClock.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener(u.default.EVENTTYPE.RoomEvent.roomParticipantLeave,this.handlerClearClock.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){this._stopTime(),c.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerRoomPubmsg",value:function(e){"ClassBegin"===e.message.name&&(this.setState({clockTimeToHide:!1}),this._startTime())}},{key:"handlerRoomDelmsg",value:function(e){"ClassBegin"===e.message.name&&(this._stopTime(),u.default.joinRoomInfo.isClassOverNotLeave&&this.setState({clockTimeToHide:!0}),p.default.handler.getAppPermissions("endClassbeginRevertToStartupLayout")&&this._resetClockTime())}},{key:"handlerReceiveMsglistNotClassBegin",value:function(e){this._stopTime(),this._resetClockTime()}},{key:"handlerReceiveMsglistClassBegin",value:function(e){"room-msglist"===e.source&&e.message&&(this.setState({clockTimeToHide:!1}),this._startTime())}},{key:"_startTime",value:function(){var e=this;clearInterval(e.timer),e.timer=setInterval(function(){d.default.classBeginTime&&d.default.serviceTime?(d.default.serviceTime+=1e3,e._clockTimeDifference()):d.default.serviceTime||f.default.sendSignallingFromUpdateTime(h.default.getTkRoom().getMySelf().id)},1e3)}},{key:"_stopTime",value:function(){clearInterval(this.timer),this.timer=null,this.intervalNumber=0}},{key:"_resetClockTime",value:function(){this.setState({clock:{hh:"00",mm:"00",ss:"00"},clockColor:"no-start"})}},{key:"_clockTimeDifference",value:function(){var e=m.default.getTimeDifferenceToFormat(d.default.classBeginTime,d.default.serviceTime);e&&(this.state.clock=e,this.setState({clock:this.state.clock}))}},{key:"handlerTimerColor",value:function(e){this.setState({clockColor:e.message.data.timeColor||"no-start"})}},{key:"handlerClearClock",value:function(e){e.userId===h.default.getTkRoom().getMySelf().id&&d.default.classBegin&&(this._stopTime(),this._resetClockTime())}},{key:"render",value:function(){return r.default.createElement("div",{className:"h-time-wrap "+this.state.clockColor,id:"time_container",style:{display:this.state.clockTimeToHide?"none":void 0}},this.state.clock.hh,r.default.createElement("span",{className:"space user-select-none "},":"),this.state.clock.mm,r.default.createElement("span",{className:"space user-select-none "},":"),this.state.clock.ss)}}]),t}(r.default.Component);t.default=v},"rU/x":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=v(a("HaWR")),o=v(a("FyfS")),n=v(a("Yz+Y")),l=v(a("iCc5")),s=v(a("V7oC")),r=v(a("FYw3")),d=v(a("mRg0")),u=(0,v(a("CSPP")).default)([""],[""]);a("44Pr");var c=v(a("q1tI")),f=v(a("HPAy")),h=v(a("eQYT")),m=v(a("aJKe")),p=v(a("XbJA")),g=(v(a("uuqz")),v(a("pIe1")));function v(e){return e&&e.__esModule?e:{default:e}}var y=v(a("vOnD")).default.button.attrs({className:function(e){return"dial-teachComponent-pointer-button "+(e.rolePatrol?"disabled":"")}})(u),S=function(e){function t(e){(0,l.default)(this,t);var a=(0,r.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.state={dialIsShow:!1,dialIconClose:!1,turnTableDeg:"rotate(0)",resizeInfo:{width:0,height:0}},a.deg=60,a.num=0,a.numdeg=0,a.isClick=!1,a.msgDeg=!1,a.isSetDefaultPosition=!1,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){m.default.CoreController.addEventListener("receive-msglist-dial",this.handlerMsglistDialShow.bind(this),this.listernerBackupid),m.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),m.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),m.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,this.handlerRoomPlaybackClearAll.bind(this),this.listernerBackupid),m.default.CoreController.addEventListener(h.default.EVENTTYPE.RoomEvent.roomDisconnected,this.handlerRoomDisconnected.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){m.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.dialIsShow!==this.state.dialIsShow&&this.state.dialIsShow&&this.isSetDefaultPosition&&(this.isSetDefaultPosition=!1,this.setDefaultPosition()),this.updateResize()}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,i=document.getElementById(t),o=document.querySelector(a.bounds);if(i&&o&&a.changePosition&&"function"==typeof a.changePosition){a.changePosition(t,{percentLeft:.5,percentTop:.5,isDrag:!1},!0)}}},{key:"handlerRoomDisconnected",value:function(){this._clearDataHanler()}},{key:"handlerMsglistDialShow",value:function(e){this.msgDeg=!0;var t=!0,a=!1,i=void 0;try{for(var n,l=(0,o.default)(e.message.dialShowArr);!(t=(n=l.next()).done);t=!0){var s=n.value;this.handlerDisplayTeachTool(s)}}catch(e){a=!0,i=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw i}}}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"dial":this.handlerDisplayTeachTool(t)}}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"dial":case"ClassBegin":this._clearDataHanler()}}},{key:"_clearDataHanler",value:function(){this.deg=60,this.num=0,this.numdeg=0,this.isClick=!1,this.msgDeg=!1,this.isSetDefaultPosition=!1,this.setState({dialIsShow:!1,dialIconClose:!1,turnTableDeg:"rotate(0)"})}},{key:"handlerDisplayTeachTool",value:function(e){var t=this;t.isSetDefaultPosition=!0,t.refs.turnTable.style.transform="rotate(0)",t.refs.turnTable.style.transition="transform 0s ease",clearTimeout(this.dialTimer),h.default.hasRole.roleStudent?(t.refs.turnTable.style.transition="transform 4s ease",e.data.isShow?(t.setState({dialIsShow:!0,turnTableDeg:"rotate(0)",dialIconClose:!1}),this.isClick=!1):t.setState({turnTableDeg:e.data.rotationAngle,dialIconClose:!1,dialIsShow:!0})):(t.refs.turnTable.style.transition="transform 4s ease",e.data.isShow?(t.setState({dialIsShow:!0,turnTableDeg:t.state.turnTableDeg,dialIconClose:!0}),this.isClick=!1):(this.msgDeg=!1,t.setState({turnTableDeg:e.data.rotationAngle,dialIconClose:!1,dialIsShow:!0}),t.isClick=!0,this.dialTimer=setTimeout(function(){t.setState({dialIconClose:!0}),t.isClick=!1},4e3)))}},{key:"handlerRoomPlaybackClearAll",value:function(){f.default.playback?this._clearDataHanler():L.Logger.error("No playback environment, no execution event[roomPlaybackClearAll] handler ")}},{key:"clickBeginHandle",value:function(){if(h.default.hasRole.roleStudent||!0===this.isClick||h.default.hasRole.rolePatrol)return!1;clearTimeout(this.dialTimer),this.msgDeg&&this.setState({turnTableDeg:"rotate(0)"});var e=Math.floor(5*Math.random()+1);this.num=e+this.num,this.numdeg+=e*this.deg+360*Math.floor(2*Math.random()+2),90!==this.numdeg.toString().substr(-2)&&30!==this.numdeg.toString().substr(-2)&&10!==this.numdeg.toString().substr(-2)&&50!==this.numdeg.toString().substr(-2)&&70!==this.numdeg.toString().substr(-2)||(this.numdeg=this.numdeg+30),this.isClick=!0,this.msgDeg=!1;var t={rotationAngle:"rotate("+this.numdeg+"deg)",isShow:!1};p.default.sendSignallingDialToStudent(t)}},{key:"dialCloseHandle",value:function(){if(h.default.hasRole.roleChairman||h.default.hasRole.roleTeachingAssistant){p.default.sendSignallingDialToStudent({},!0)}}},{key:"updateResize",value:function(){var e=this.props.id,t=document.getElementById(e);if(t){var a=f.default.windowInnerWidth/h.default.STANDARDSIZE,o=t.offsetWidth/a,n=t.offsetHeight/a;!this.state.resizeInfo||(0,i.default)(this.state.resizeInfo.width,o)&&(0,i.default)(this.state.resizeInfo.height,n)||(this.state.resizeInfo={width:o,height:n},this.setState({resizeInfo:this.state.resizeInfo}))}}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.dialDrag,i=e.draggableData,o=this.state.resizeInfo,n={width:h.default.hasRole.roleStudent?"3.2rem":"3.4rem",height:h.default.hasRole.roleStudent?"3.2rem":"3.4rem",position:"absolute",zIndex:130,display:this.state.dialIsShow?"block":"none",left:0,top:0},l=a.percentLeft,s=a.percentTop;0==l||l||(l=.5),0==s||s||(s=.5);var r=Object.customAssign({id:t,size:o,percentPosition:{percentLeft:l,percentTop:s}},i);return c.default.createElement(g.default,r,c.default.createElement("div",{id:"dialDrag",style:n},c.default.createElement("div",{className:"dial-teachComponent-bg touch-select-select ",style:{display:this.state.dialIsShow}},c.default.createElement(y,{onClick:this.clickBeginHandle.bind(this),rolePatrol:h.default.hasRole.rolePatrol}),c.default.createElement("div",{className:"dial-teachComponent-turntable",ref:"turnTable",style:{transition:"transform 4s ease",transform:this.state.turnTableDeg}}),h.default.hasRole.roleStudent?void 0:c.default.createElement("span",{className:h.default.hasRole.rolePatrol?"":"dialCloseP icon-close",style:{display:this.state.dialIconClose?"block":"none"},onClick:this.dialCloseHandle.bind(this)}))))}}]),t}(c.default.Component);t.default=S},s17s:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(a("q1tI")),o=l(a("HPAy")),n=l(a("eQYT"));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.dispose,a=e.parentState.options;return i.default.createElement("div",{className:"option-panel"},i.default.createElement("div",{className:"options"},a.map(function(e,a){return i.default.createElement("div",{className:"option-wrap",key:a},i.default.createElement("span",{className:(e.hasChose?"active":"")+" icon-alphabet_"+String.fromCharCode("A".charCodeAt()+a).toLowerCase()+" option "+(n.default.hasRole.rolePatrol?" disabled":"")+" ",onClick:function(){t({action:"optionClick",data:{index:a}})}}))})),i.default.createElement("button",{style:{display:n.default.hasRole.roleChairman||n.default.hasRole.roleTeachingAssistant?"":"none"},className:"option-btn "+(a.length>=8?"disabled":""),onClick:function(){t({action:"changeOptionLength",data:{num:1}})}},o.default.language.languageData.qPanel.addOption),i.default.createElement("button",{style:{display:n.default.hasRole.roleChairman||n.default.hasRole.roleTeachingAssistant?"":"none"},className:"option-btn "+(a.length<=2?"disabled":""),onClick:function(){t({action:"changeOptionLength",data:{num:-1}})}},o.default.language.languageData.qPanel.delOption))}},s1tW:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=h(a("Yz+Y")),n=h(a("iCc5")),l=h(a("V7oC")),s=h(a("FYw3")),r=h(a("mRg0")),d=h(a("q1tI")),u=h(a("HPAy")),c=a("okNM"),f=h(a("XbJA"));function h(e){return e&&e.__esModule?e:{default:e}}var m=(0,c.inject)("globalStore")(i=(0,c.observer)(i=function(e){function t(){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,r.default)(t,e),(0,l.default)(t,[{key:"changeGroupModeStatus",value:function(){var e=this.props.globalStore,t={isGroup:!e.isGroup,groupingDocumentId:e.groupingDocumentId};f.default.sendIsGroup(t),e.changeGroup(!e.isGroup)}},{key:"render",value:function(){var e=this.props.globalStore;return d.default.createElement("button",{className:"userlist-group-mode",onClick:this.changeGroupModeStatus.bind(this)},d.default.createElement("div",null),e.isGroup?u.default.language.languageData.toolContainer.toolIcon.userList.groupModeStatus.normalMode.text:u.default.language.languageData.toolContainer.toolIcon.userList.groupModeStatus.groupMode.text)}}]),t}(d.default.Component))||i)||i;t.default=m},sVhb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=d(a("Yz+Y")),o=d(a("iCc5")),n=d(a("V7oC")),l=d(a("FYw3")),s=d(a("mRg0")),r=d(a("q1tI"));function d(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.isActive!=this.props.isActive}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.className,i=e.LayoutClick,o=e.isActive;return r.default.createElement("div",{className:"layout "+a+" "+(o?"active":""),onClick:i},r.default.createElement("i",{className:"img"}),r.default.createElement("div",{className:"text-box  "},r.default.createElement("span",{className:"name"},t)))}}]),t}(r.default.Component);t.default=u},tIin:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(a("Yz+Y")),o=f(a("iCc5")),n=f(a("V7oC")),l=f(a("FYw3")),s=f(a("mRg0")),r=f(a("q1tI")),d=f(a("eQYT")),u=f(a("HPAy")),c=f(a("u9sa"));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isFontSizeShow,a=e.chatFontSize,i=e.changeChatFontSize,o=e.changeIsFontSize,n=[{className:"fz14",fontSize:14,name:u.default.language.languageData.videoContainer.sendMsg.fontSize.fontSize14},{className:"fz16",fontSize:16,name:u.default.language.languageData.videoContainer.sendMsg.fontSize.fontSize16},{className:"fz18",fontSize:18,name:u.default.language.languageData.videoContainer.sendMsg.fontSize.fontSize18},{className:"fz22",fontSize:22,name:u.default.language.languageData.videoContainer.sendMsg.fontSize.fontSize22}],l=n.filter(function(e){return e.fontSize===a})[0].name;return r.default.createElement("div",{className:"chat-title-tip"},d.default.hasRole.roleChairman||d.default.hasRole.roleTeachingAssistant?r.default.createElement(c.default,this.props):void 0,r.default.createElement("span",{className:"chat_title_text"},u.default.language.languageData.videoContainer.sendMsg.tap.chat),r.default.createElement("div",{className:"chat_title_fontSize"},r.default.createElement("p",null,r.default.createElement("i",{className:"icon icon-zihao"}),r.default.createElement("span",{onClick:function(){return o(!t)},className:t?"active":""},r.default.createElement("em",{className:"icon-right"}),l)),r.default.createElement("ul",{style:{display:t?"block":"none"}},n.map(function(e,t){return r.default.createElement("li",{key:t,className:e.className+(e.fontSize===a?" active":""),onClick:function(){return i(e.fontSize)}},r.default.createElement("i",{className:"icon-selected"}),e.name)}))))}}]),t}(r.default.Component);t.default=h},tW1m:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=d(a("Yz+Y")),o=d(a("iCc5")),n=d(a("V7oC")),l=d(a("FYw3")),s=d(a("mRg0")),r=d(a("q1tI"));function d(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props.user;return r.default.createElement(r.default.Fragment,null,e.raisehand&&r.default.createElement("button",{className:"v-raisehand icon-user_handup",style:{color:e.primaryColor}}))}}]),t}(r.default.Component);t.default=u},tZp5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(a("Yz+Y")),o=f(a("iCc5")),n=f(a("V7oC")),l=f(a("FYw3")),s=f(a("mRg0")),r=f(a("q1tI")),d=f(a("eQYT")),u=f(a("HPAy")),c=f(a("aJKe"));function f(e){return e&&e.__esModule?e:{default:e}}a("V9PI");var h=function(e){function t(e,a){(0,o.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,a));return n.state={className:"bg1",page:1,show:!1},n}return(0,s.default)(t,e),(0,n.default)(t,[{key:"_loadProloadArray",value:function(){for(var e=[],t=1;t<=7;t++)e.push(r.default.createElement("div",{key:t,className:"bg"+t+" "+(d.default.hasRole.roleChairman||d.default.hasRole.roleTeachingAssistant||d.default.hasRole.rolePatrol?"teacher":"student"),style:{display:"none"}}));return e}},{key:"render",value:function(){var e=this._loadProloadArray();return r.default.createElement("div",{id:"help",className:"tool-help-frame "+u.default.language.name,onClick:this.changeImg.bind(this),style:{display:this.state.show?"block":"none",height:"100%",position:"fixed",zIndex:99999}},r.default.createElement("div",{className:this.state.className+" "+(d.default.hasRole.roleChairman||d.default.hasRole.roleTeachingAssistant||d.default.hasRole.rolePatrol?"teacher":"student")}),e)}},{key:"changeImg",value:function(e){this.state.page<7?this.setState({className:"bg"+(this.state.page+1),page:this.state.page+1}):(this.setState({className:"bg1",page:1}),this.state.show=!1)}},{key:"componentDidMount",value:function(){var e=this;c.default.CoreController.addEventListener("showGuide",function(t){e.setState({show:t.message}),e.state.show=t.message})}}]),t}(r.default.Component);t.default=h},tn2s:function(e,t,a){"use strict";var i=s(a("q1tI")),o=s(a("i8i4")),n=s(a("JL1q")),l=s(a("dSw6"));function s(e){return e&&e.__esModule?e:{default:e}}n.default.handler.loadSystemRequiredInfo(),o.default.render(i.default.createElement(l.default,null),document.getElementById("tk_app"))},tqC3:function(e,t,a){},tqkD:function(e,t,a){},u9sa:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(a("Yz+Y")),o=u(a("iCc5")),n=u(a("V7oC")),l=u(a("FYw3")),s=u(a("mRg0")),r=u(a("q1tI")),d=u(a("HPAy"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.banChatTitle,a=e.isPatrol,i=e.textDisable,o=e.chatToggle,n=e.isAllBanSpeak;return r.default.createElement("button",{className:"emotion2 "+(n?"icon-quantifayan":"icon-quantijinyan"),disabled:!!d.default.isLeaveRoom||TkConstant.hasRole.roleStudent&&(a||i),title:t,onClick:o},t)}}]),t}(r.default.Component);t.default=c},uH9Y:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=T(a("m1cH")),o=T(a("Yz+Y")),n=T(a("iCc5")),l=T(a("V7oC")),s=T(a("FYw3")),r=T(a("mRg0")),d=T(a("QbLZ")),u=T(a("CSPP")),c=(0,u.default)(["\n","\ndisplay: flex;\nflex-wrap: wrap-reverse;\n// flex-wrap: wrap-reverse;\nflex-direction: column-reverse;\n"],["\n","\ndisplay: flex;\nflex-wrap: wrap-reverse;\n// flex-wrap: wrap-reverse;\nflex-direction: column-reverse;\n"]),f=(0,u.default)(["\nposition: relative;\n","\n"],["\nposition: relative;\n","\n"]),h=(0,u.default)(["\n    \n    ","\n\n"],["\n    \n    ","\n\n"]),m=a("q1tI"),p=T(m),g=T(a("aJKe")),v=T(a("XbJA")),y=T(a("JL1q")),S=T(a("eQYT")),b=T(a("HPAy")),C=T(a("By8T")),k=T(a("AAUp")),w=T(a("vOnD"));T(a("mrNk"));a("8eJ7");T(a("uuqz"));function T(e){return e&&e.__esModule?e:{default:e}}var E=w.default.div.attrs({className:"oneToone"})(c,function(e){return(0,d.default)({},e.RightContentVesselSmartStyleJson,e.RightVesselSmartStyleJson,{width:"100%"})}),I=w.default.div(f,function(e){return{width:e.width,height:e.height,top:e.top,left:e.isDoubleVideoStudent?"50%":e.left,rigth:e.rigth,position:e.position,order:e.order,zIndex:e.zIndex,display:void 0!==e.isDoubleVideo&&e.isDoubleVideo?"none":"block",background:e.background}}),D=w.default.div(h,function(e){return{left:"calc( "+e.width+" - 0.15rem )",opacity:e.opacity}}),x=w.default.div(h,function(e){return{left:"calc( 50vw - 0.15rem )",opacity:e.opacity}}),R=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.doubleVideotransStyleFn=function(e){if(a.state.isDoubleVideo){var t=e[0].height;if(e[a.state.styleArr[1]]=(0,d.default)({},e[a.state.styleArr[1]],{height:t,width:"50vw",position:"absolute !important",top:0,left:0}),e[a.state.styleArr[2]]=(0,d.default)({},e[a.state.styleArr[2]],{height:t,width:"50vw",position:"absolute  !important",top:0,right:0}),!a.state.isTeacherFirst){var i=e[a.state.styleArr[1]];e[a.state.styleArr[1]]=e[a.state.styleArr[2]],e[a.state.styleArr[2]]=i}return e}},a.doubleVideoExchang=function(){a.setState({isTeacherFirst:!a.state.isTeacherFirst})},a.state={styleArr:[0,1,2],offsetWidth:0,offsetHeight:0,mouseMoveX:0,isTrans:!1,switchName:"",update:!1,isFullScreen:!1,isStartMove:!1,isDoubleVideo:!1,isTeacherFirst:!0},a.defaultX=void 0,a.defaultY=void 0,a.videoScale=b.default.windowInnerWidth/S.default.STANDARDSIZE,a.baseOffsetWidth=0,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){g.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("doubleDivisionExchange",this.handlerDoubleDivisionExchange.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("receive-msglist-DoubleDivision",this.handlerReceiveMsglistDoubleDivision.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("receive-msglist-SwitchLayout",this.handleMsgListSwitchLayout.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("receive-msglist-FullScreen",this.handleMsgListFullScreen.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("SwitchLayout",this.handleSwitchLayout.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),g.default.CoreController.addEventListener("fullScreen",this.handlerFullScreen.bind(this),this.listernerBackupid),g.default.CoreController.dispatchEvent({type:"SwitchLayout",nowLayout:S.default.layoutParams[S.default.layout]})}},{key:"componentWillUnmount",value:function(){g.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerRoomConnected",value:function(){g.default.CoreController.dispatchEvent({type:"SwitchLayout",nowLayout:S.default.layoutParams[S.default.layout]})}},{key:"handlerReceiveMsglistDoubleDivision",value:function(e){var t=e.message.offsetWidth;void 0!==t&&this.upDatesDoubleDivisionStatus(t)}},{key:"handleMsgListSwitchLayout",value:function(e){e.message.nowLayout&&this.handleSwitchLayout(e.message,!0)}},{key:"handleMsgListFullScreen",value:function(e){e.message.FullScreenArray&&e.message.FullScreenArray.length&&this.setState({isFullScreen:!0})}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message,a=void 0===t?{}:t;switch(a.name){case"DoubleDivision":var i=a.data&&a.data.offsetWidth;if(void 0===i)return;this.upDatesDoubleDivisionStatus(i);break;case"ClassBegin":this.forceUpdate();break;case"FullScreen":a.data.fullScreenType;this.setState({isFullScreen:!0});break;case"switchLayout":this.handleSwitchLayout(a.data,!0)}}},{key:"handleSwitchLayout",value:function(e,t){var a=e.nowLayout,i=e.isSynStudent,o=this.getTransWidth(),n=o.maxWidth;o.transWidth;switch(i&&!t&&v.default.sendSignllingSwitchLayout({nowLayout:a}),a){case"oneToOne":this.setState({isDoubleVideo:!1}),this.upDatesDoubleDivisionStatus(0),this.baseOffsetWidth=0;break;case"oneToOneDoubleDivision":this.setState({isDoubleVideo:!1}),this.upDatesDoubleDivisionStatus(n),this.baseOffsetWidth=n;break;case"oneToOneDoubleVideo":g.default.CoreController.dispatchEvent({type:"fullScreen",message:{fullScreenType:"courseware_file",needPictureInPictureSmall:!1}}),this.setState({isDoubleVideo:!0}),this.upDatesDoubleDivisionStatus(0);break;default:this.setState({isDoubleVideo:!1}),this.upDatesDoubleDivisionStatus(0)}}},{key:"handlerFullScreen",value:function(e){var t=e.message,a=void 0===t?{}:t,i=a.isFullScreen,o=a.fullScreenType;if(("courseware_file"===o||"stream_media"===o&&S.default.hasRoomtype.oneToOne)&&this.setState({isFullScreen:i}),"stream_video"===o&&S.default.hasRoomtype.oneToOne){var n=a.needPictureInPictureSmall;this.setState({isFullScreen:n})}}},{key:"handlerDoubleDivisionExchange",value:function(){var e=[].concat((0,i.default)(this.state.styleArr)),t=e[1];e[1]=e[2],e[2]=t,this.setState({styleArr:e})}},{key:"upDatesDoubleDivisionStatus",value:function(e){var t=this.getTransWidth(),a=t.maxWidth,i=t.transWidth;(e=e>0?e<a?e:a:0)>i&&!this.state.isTrans&&this.setState({isTrans:!0,switchName:"hide"}),e<i&&this.setState({isTrans:!1,switchName:"",styleArr:[0,1,2]}),0===e&&this.setState({isTrans:!1,switchName:"",styleArr:[0,1,2]}),this.setState({offsetWidth:e})}},{key:"handlerRoomDelmsg",value:function(e){var t=e.message,a=void 0===t?{}:t;switch(a.name){case"ClassBegin":this.upDatesDoubleDivisionStatus(0),this.forceUpdate();break;case"FullScreen":a.data.fullScreenType;this.setState({isFullScreen:!1})}}},{key:"getWindowWidth",value:function(){return this.delrem(this.props.RightVesselSmartStyleJson.width)+this.delrem(this.props.RightContentVesselSmartStyleJson.width)}},{key:"getTransWidth",value:function(){var e=this.getWindowWidth();return{maxWidth:e/2-this.delrem(this.props.RightVesselSmartStyleJson.width),transWidth:e/2*.75-this.delrem(this.props.RightVesselSmartStyleJson.width)}}},{key:"transStyleFn",value:function(e){if(!this.state.isFullScreen){var t=e[0].height;switch(e[0].position="absolute !important",e[0].left=0,e[this.state.styleArr[1]]=(0,d.default)({},e[this.state.styleArr[1]],{height:t,position:"absolute !important",top:0,right:0,zIndex:1}),e[this.state.styleArr[2]]=(0,d.default)({},e[this.state.styleArr[2]],{height:"2.46rem",width:"3.3rem",position:"absolute  !important",top:0,right:0,zIndex:3,transition:"all 0.5s"}),this.state.switchName){case"show":e[1].isSmallVideo&&(e[1].right="-3.3rem"),e[2].isSmallVideo&&(e[2].right="-3.3rem");break;case"hide":e[2].right=0}return e}}},{key:"delrem",value:function(e){return Number((e+="").split("rem")[0].split("px")[0])}},{key:"testMouseDown",value:function(e){e.stopPropagation(),this.defaultX=e.screenX,this.defaultY=e.screenY,this.a=0,this.setState({isStartMove:!0})}},{key:"testMouseMove",value:function(e){if(e.stopPropagation(),this.state.isStartMove&&this.defaultX&&this.defaultY){var t=e.screenX-this.defaultX,a=this.state.offsetWidth-(t-this.a)/this.videoScale;this.a=t,this.upDatesDoubleDivisionStatus(a)}}},{key:"testMouseUp",value:function(e){e.stopPropagation(),this.state.isStartMove&&(this.setState({isStartMove:!1}),this.setState({update:!this.state.update})),this.defaultX&&(this.defaultX=void 0),this.defaultY&&(this.defaultY=void 0),this.baseOffsetWidth!=this.state.offsetWidth&&(this.state.offsetWidth>0&&this.state.isTrans?v.default.sendSignllingSwitchLayout({nowLayout:"oneToOneDoubleDivision"}):v.default.sendSignllingSwitchLayout({nowLayout:"oneToOne"}),this.baseOffsetWidth=this.state.offsetWidth)}},{key:"switchHideShow",value:function(){var e="";switch(this.state.switchName){case"show":e="hide";break;case"hide":e="show"}this.setState({switchName:e})}},{key:"doubleVideo",value:function(){this.setState({isDoubleVideo:!0})}},{key:"render",value:function(){var e=this,t=(0,d.default)({},this.props.RightVesselSmartStyleJson),a=(0,d.default)({},this.props.RightContentVesselSmartStyleJson);t.top=0,a.top=0,t.position="relative",a.position="relative","skin_beyond_default"===S.default.skin?a.background="rgba(101,92,191,0.23)":"skin_black"===S.default.skin&&(a.background="#242428"),t.height&&(t.height=t.height.split("rem")[0]/2+"rem");var i={0:(0,d.default)({},a,{order:3}),1:(0,d.default)({},t,{order:2,className:"video_wrap1v1",isSmallVideo:!1}),2:(0,d.default)({},t,{order:1,className:"video_wrap1v1",isSmallVideo:!0})};if(b.default.doubleScreen&&(i[0]=(0,d.default)({},i[0],{top:"0.42rem",order:-1})),this.state.offsetWidth){var o=this.state.offsetWidth;i[0].width=this.delrem(i[0].width)-o+"rem",i[1].width=this.delrem(i[1].width)+o+"rem",i[2].width=this.delrem(i[2].width)+o+"rem"}var n=this.state.styleArr.map(function(t){var a=i[t];return e.state.isFullScreen?a.zIndex="":a.zIndex=1,a});return!this.state.isTrans||this.state.isFullScreen||this.state.isDoubleVideo||(n=this.transStyleFn(n)),this.state.isDoubleVideo&&this.doubleVideotransStyleFn(n),p.default.createElement(E,this.props,p.default.createElement(I,(0,d.default)({},n[0],{isDoubleVideo:this.state.isDoubleVideo}),p.default.createElement(k.default,{pureVideoMod:this.state.isDoubleVideo})),p.default.createElement(I,n[1],p.default.createElement(C.default,{isTeacher:!0,styleJson:n[1],isSmallVideo:n[1].isSmallVideo,RightContentVesselSmartStyleJson:a,isHasHideBtn:!(!this.state.isTrans||this.state.isFullScreen)&&2==this.state.styleArr[1],switchName:this.state.switchName,switchHideShow:this.switchHideShow.bind(this)})),p.default.createElement(I,n[2],p.default.createElement(C.default,{isTeacher:!1,isSmallVideo:n[2].isSmallVideo,styleJson:n[2],RightContentVesselSmartStyleJson:a,isHasHideBtn:!(!this.state.isTrans||this.state.isFullScreen)&&2==this.state.styleArr[2],switchName:this.state.switchName,switchHideShow:this.switchHideShow.bind(this)})),!y.default.handler.getAppPermissions("doubleDivision")||this.state.isFullScreen||this.state.isDoubleVideo?"":p.default.createElement(D,{width:n[0].width,opacity:this.state.isStartMove?1:void 0,className:"drag_btn_box"},p.default.createElement("button",{className:"drag_btn icon-btn_drag",onMouseDown:this.testMouseDown.bind(this),onMouseUp:this.testMouseUp.bind(this)}),this.state.isStartMove?p.default.createElement("div",{className:"drag_mask",style:{top:"-"+this.props.RightVesselSmartStyleJson.top,left:"-"+n[0].width},onMouseMove:this.testMouseMove.bind(this),onMouseUp:this.testMouseUp.bind(this)}):""),this.state.isDoubleVideo&&!this.state.isFullScreen?p.default.createElement(x,{width:n[0].width,opacity:this.state.isStartMove?1:void 0,className:"drag_btn_box"},p.default.createElement("button",{id:"exchange_btn",className:"exchange_btn icon-btn_change",onClick:this.doubleVideoExchang}),this.state.isStartMove?p.default.createElement("div",{className:"drag_mask",style:{top:"-"+this.props.RightVesselSmartStyleJson.top,left:"-"+n[0].width}}):""):"")}}]),t}(m.PureComponent);t.default=R},uTxR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(a("Yz+Y")),o=u(a("iCc5")),n=u(a("V7oC")),l=u(a("FYw3")),s=u(a("mRg0")),r=u(a("q1tI")),d=(u(a("XbJA")),u(a("aJKe")),u(a("JL1q")),u(a("1Nl6")));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"smallCpatureClick",value:function(){this.props.takeSnapshot({isHideClassroom:!0}),this.props.close()}},{key:"render",value:function(){return r.default.createElement("li",{className:"holdAllitem "+(this.props.isDisabled?" disabled":"")},r.default.createElement("div",{onClick:this.smallCpatureClick.bind(this)},r.default.createElement("em",{className:"icon "+this.props.bgName}),r.default.createElement("span",null,this.props.name)))}}]),t}(r.default.Component);c=(0,d.default)(c),t.default=c},uk1l:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(a("Yz+Y")),o=d(a("iCc5")),n=d(a("V7oC")),l=d(a("FYw3")),s=d(a("mRg0")),r=d(a("q1tI"));function d(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={languageData:window.GLOBAL.language.languageData},a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return r.default.createElement("div",{className:"join"},r.default.createElement("div",{className:"wait-room-wrap"},r.default.createElement("span",null,this.state.languageData.login.language.joinRoomHint.text)," ",r.default.createElement("span",{className:"add-letter-spacing-5px"},"")))}}]),t}(r.default.Component);t.default=u},upFd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=c(a("Yz+Y")),o=c(a("iCc5")),n=c(a("V7oC")),l=c(a("FYw3")),s=c(a("mRg0")),r=c(a("q1tI")),d=c(a("eQYT")),u=c(a("/PVF"));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.stream,a=e.user;return r.default.createElement(r.default.Fragment,null,a.publishstate!==d.default.PUBLISHSTATE.PUBLISH_STATE_AUDIOONLY&&a.publishstate!==d.default.PUBLISHSTATE.PUBLISH_STATE_BOTH||!a.hasaudio?r.default.createElement("div",{className:"audio_close_icon icon-btn_mute"}):r.default.createElement("div",{className:"Audiochangew"},r.default.createElement("div",{className:"Audiochangewlogo icon-btn_audio"}),t&&r.default.createElement(u.default,{user:a,stream:t})))}}]),t}(r.default.Component);t.default=f},uuqz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(a("/f1G")),o=u(a("oF3Q")),n=u(a("FyfS")),l=u(a("sk9p")),s=u(a("EJiy")),r=u(a("GQeE")),d=u(a("gjeX"));function u(e){return e&&e.__esModule?e:{default:e}}var c={tool:{launchFullscreen:function(e){e&&(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen())},exitFullscreen:function(){document.exitFullScreen?document.exitFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},isFullScreenStatus:function(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen||!1},getFullscreenElement:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement},isFullscreenEnabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled},addFullscreenchange:function(e){c.tool.addEvent(document,"fullscreenchange",e,!1),c.tool.addEvent(document,"webkitfullscreenchange",e,!1),c.tool.addEvent(document,"mozfullscreenchange",e,!1),c.tool.addEvent(document,"MSFullscreenChange",e,!1),c.tool.addEvent(document,"msfullscreenchange",e,!1),c.tool.addEvent(document,"fullscreeneventchange",e,!1)},removeFullscreenchange:function(e){c.tool.removeEvent(document,"fullscreenchange",e,!1),c.tool.removeEvent(document,"webkitfullscreenchange",e,!1),c.tool.removeEvent(document,"mozfullscreenchange",e,!1),c.tool.removeEvent(document,"MSFullscreenChange",e,!1),c.tool.removeEvent(document,"msfullscreenchange",e,!1),c.tool.removeEvent(document,"fullscreeneventchange",e,!1)},addFullscreenerror:function(e){c.tool.addEvent(document,"fullscreenerror",e,!1),c.tool.addEvent(document,"webkitfullscreenerror",e,!1),c.tool.addEvent(document,"mozfullscreenerror",e,!1),c.tool.addEvent(document,"MSFullscreenError",e,!1),c.tool.addEvent(document,"msfullscreenerror",e,!1),c.tool.addEvent(document,"fullscreenerroreventchange",e,!1)},removeFullscreenerror:function(e){c.tool.removeEvent(document,"fullscreenerror",e,!1),c.tool.removeEvent(document,"webkitfullscreenerror",e,!1),c.tool.removeEvent(document,"mozfullscreenerror",e,!1),c.tool.removeEvent(document,"MSFullscreenError",e,!1),c.tool.removeEvent(document,"msfullscreenerror",e,!1),c.tool.removeEvent(document,"fullscreenerroreventchange",e,!1)},addEvent:function(e,t,a,i){i=null!=i&&null!=i&&i,e.addEventListener?e.addEventListener(t,a,i):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a},removeEvent:function(e,t,a,i){e.addEventListener?e.removeEventListener(t,a,i):e.attachEvent?e.detachEvent("on"+t,a):e["on"+t]=null}},getGUID:function(){return new function e(){this.date=new Date,"function"!=typeof this.newGUID&&(e.prototype.newGUID=function(){this.date=new Date;for(var e="",t=this.hexadecimal(this.getGUIDDate(),16),a=this.hexadecimal(this.getGUIDTime(),16),i=0;i<9;i++)e+=Math.floor(16*Math.random()).toString(16);for(e+=t,e+=a;e.length<32;)e+=Math.floor(16*Math.random()).toString(16);return this.formatGUID(e)},e.prototype.getGUIDDate=function(){return this.date.getFullYear()+this.addZero(this.date.getMonth()+1)+this.addZero(this.date.getDay())},e.prototype.getGUIDTime=function(){return this.addZero(this.date.getHours())+this.addZero(this.date.getMinutes())+this.addZero(this.date.getSeconds())+this.addZero(parseInt(this.date.getMilliseconds()/10))},e.prototype.addZero=function(e){return"NaN"!=Number(e).toString()&&e>=0&&e<10?"0"+Math.floor(e):e.toString()},e.prototype.hexadecimal=function(e,t,a){return null!=a?parseInt(e.toString(),a).toString(t):parseInt(e.toString()).toString(t)},e.prototype.formatGUID=function(e){return e.slice(0,8)+"-"+e.slice(8,12)+"-"+e.slice(12,16)+"-"+e.slice(16,20)+"-"+e.slice(20)})}},getNewGUID:function(){c.guidObj||(c.guidObj=new c.getGUID);var e=c.guidObj.newGUID();return c.guidObj=null,e},getBrowserInfo:function(){var e,t,a=window.navigator.userAgent,i=/(msie\s|trident.*rv:)([\w.]+)/,o=/edge\/(\d+).(\d+)$/,n=/(firefox)\/([\w.]+)/,l=/(opera).+version\/([\w.]+)/,s=/(chrome)\/([\w.]+)/,r=/version\/([\w.]+).*(safari)/,d=(e=a.toLowerCase(),null!=(t=i.exec(e))?{browser:"IE",version:t[2]||"0"}:null!=(t=o.exec(e))?{browser:"Edge",version:t[2]||"0"}:null!=(t=n.exec(e))?{browser:t[1]||"",version:t[2]||"0"}:null!=(t=l.exec(e))?{browser:t[1]||"",version:t[2]||"0"}:null!=(t=s.exec(e))?{browser:t[1]||"",version:t[2]||"0"}:null!=(t=r.exec(e))?{browser:t[2]||"",version:t[1]||"0"}:null!=t?{browser:"",version:"0"}:{browser:"unknown",version:"unknown"}),u=navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage||navigator.language;return{versions:function(){var e=navigator.userAgent;navigator.appVersion;return{edge:e.indexOf("Edge")>-1,trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari")}}(),language:u?u.toLowerCase():void 0,info:{browserName:d.browser,browserVersion:d.version,appCodeName:navigator.appCodeName,appMinorVersion:navigator.appMinorVersion,appName:navigator.appName,appVersion:navigator.appVersion,browserLanguage:navigator.browserLanguage,cookieEnabled:navigator.cookieEnabled,cpuClass:navigator.cpuClass,onLine:navigator.onLine,platform:navigator.platform,systemLanguage:navigator.systemLanguage,userAgent:navigator.userAgent,userLanguage:navigator.userLanguage}}},isEmpty:function(e){return 0===(0,r.default)(e).length},getUrlParams:function(e,t){var a=window.location.href;window.TkConstant&&(a=c.decrypt(window.TkConstant.SERVICEINFO.joinUrl)||window.location.href),a=t||a;var i=decodeURIComponent(a),o=i.indexOf("?"),n=i.substring(o+1),l=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),s=n.match(l);return null!=s?s[2]:""},replaceFirstUper:function(e){if(e.length>0)return e.substring(0,1).toUpperCase()+e.substring(1)},isArray:function(e){return Array&&Array.isArray&&"function"==typeof Array.isArray?Array.isArray(e):e&&"object"===(void 0===e?"undefined":(0,s.default)(e))&&"number"==typeof e.length&&"function"==typeof e.splice&&!e.propertyIsEnumerable("length")},filterContainDataAttribute:function(e){if(e&&!c.isArray(e)&&"object"===(void 0===e?"undefined":(0,s.default)(e))){var t={},a=!0,i=!1,r=void 0;try{for(var d,u=(0,n.default)((0,o.default)(e));!(a=(d=u.next()).done);a=!0){var f=d.value,h=(0,l.default)(f,2),m=h[0],p=h[1];/^tkcustomdata/g.test(m)&&(t[m]=p)}}catch(e){i=!0,r=e}finally{try{!a&&u.return&&u.return()}finally{if(i)throw r}}return t}return e},getFiletyeByFilesuffix:function(e){return"jpg"==e||"jpeg"==e||"png"==e||"gif"==e||"ico"==e||"bmp"==e?"jpg":"doc"==e||"docx"==e||"rtf"==e?"doc":"pdf"==e?"pdf":"ppt"==e||"pptx"==e||"pps"==e?"ppt":"txt"==e?"txt":"xls"==e||"xlsx"==e?"xlsx":"mp4"==e||"webm"==e?"mp4":"mp3"==e||"wav"==e?"mp3":"zip"==e?"h5":"html"==e?"html":"whiteboard"===e?"whiteboard":"other"},isFunction:function(e){return e&&"function"==typeof e},getCustomUserPropertyByUser:function(e){return{disableaudio:e.disableaudio,disablevideo:e.disablevideo,giftnumber:e.giftnumber,hasaudio:e.hasaudio,hasvideo:e.hasvideo,publishstate:e.publishstate,raisehand:e.raisehand}},getTimeDifferenceToFormat:function(e,t){var a=t-e;if(a>=0){var i=Math.floor(a/864e5),o=a%864e5,n=Math.floor(o/36e5),l=o%36e5,s=Math.floor(l/6e4),r=l%6e4,d=Math.round(r/1e3),u=n+24*i,c={};return d>=60&&(d=0,s+=1),s>=60&&(s=0,u+=1),c.hh=u>9?u:"0"+u,c.mm=s>9?s:"0"+s,c.ss=d>9?d:"0"+d,c}L.Logger.error("Start time is greater than end time [start:"+e+"  , end:"+t+"]!")},isMillisecondClass:function(e){if("number"==typeof e){var t=(e=String(e)).length;return 13===t||10!==t&&void L.Logger.warning("The incoming time is incorrect and cannot be judged to be second or second!")}L.Logger.error("time must is number!")},encrypt:function(e,t){if(!e)return e;if(window.TkConstant){if(window.TkConstant.DEV)return e}else{var a=!1;try{a=!1}catch(e){L.Logger.warning("There is no configuration dev mark[__DEV__]!")}if(a||c.getUrlParams("debug"))return e}return L.Utils.encrypt(e,t)},decrypt:function(e,t){if(!e)return e;if(window.TkConstant){if(window.TkConstant.DEV)return e}else{try{!1}catch(e){L.Logger.warning("There is no configuration dev mark[__DEV__]!")}if(!1||c.getUrlParams("debug"))return e}return L.Utils.decrypt(e,t)},detectOS:function(){var e=navigator.userAgent,t="Win32"===navigator.platform||"Windows"===navigator.platform,a="Mac68K"===navigator.platform||"MacPPC"===navigator.platform||"Macintosh"===navigator.platform||"MacIntel"===navigator.platform;if(a)return"Mac";if("X11"===navigator.platform&&!t&&!a)return"Unix";if(String(navigator.platform).indexOf("Linux")>-1)return"Linux";if(t){if(e.indexOf("Windows NT 5.0")>-1||e.indexOf("Windows 2000")>-1)return"Win2000";if(e.indexOf("Windows NT 5.1")>-1||e.indexOf("Windows XP")>-1)return"WinXP";if(e.indexOf("Windows NT 5.2")>-1||e.indexOf("Windows 2003")>-1)return"Win2003";if(e.indexOf("Windows NT 6.0")>-1||e.indexOf("Windows Vista")>-1)return"WinVista";if(e.indexOf("Windows NT 6.1")>-1||e.indexOf("Windows 7")>-1)return"Win7";if(e.indexOf("Windows NT 6.2")>-1||e.indexOf("Windows 8")>-1)return"Win8";if(e.indexOf("Windows NT 10.0")>-1||e.indexOf("Windows 10")>-1)return"Win10"}return"Other"},handleVisibilityChangeCompatibility:function(){var e=void 0,t=void 0,a=void 0;return void 0!==document.hidden?(e="hidden",a="visibilitychange",t="visibilityState"):void 0!==document.mozHidden?(e="mozHidden",a="mozvisibilitychange",t="mozVisibilityState"):void 0!==document.msHidden?(e="msHidden",a="msvisibilitychange",t="msVisibilityState"):void 0!==document.webkitHidden&&(e="webkitHidden",a="webkitvisibilitychange",t="webkitVisibilityState"),{hidden:e,state:t,visibilityChange:a}},lowclassCompareJsonIsCommon:function(e,t){if(e===t)return!0;var a=!0,i=!1,s=void 0;try{for(var r,d=(0,n.default)((0,o.default)(t));!(a=(r=d.next()).done);a=!0){var u=r.value,c=(0,l.default)(u,2),f=c[0],h=c[1];if(e[f]!==h)return!1}}catch(e){i=!0,s=e}finally{try{!a&&d.return&&d.return()}finally{if(i)throw s}}return!0},replaceRemToNumber:function(e){return e&&"string"==typeof e&&(e=Number(e.replace(/rem/g,""))),e},replacePxToNumber:function(e){return e&&"string"==typeof e&&(e=Number(e.replace(/px/g,""))),e},replaceCalc:function(e){return e&&"string"==typeof e&&(e=(e=e.replace(/(^\s*)|(\s*$)/g,"")).replace(/(^calc\s*\(|\)$)/g,"")),e},dateFormat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd HH:mm:ss",a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours()%12==0?12:e.getHours()%12,"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()},i={0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+i[e.getDay()+""])),a)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[o]:("00"+a[o]).substr((""+a[o]).length)));return t},getStyle:function(e,t){return e?window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t]:0},getSpecifyRoleList:function(e,t){if(void 0===e||void 0===t)return{};var a={},o=!0,l=!1,s=void 0;try{for(var r,d=(0,n.default)((0,i.default)(t));!(o=(r=d.next()).done);o=!0){var u=r.value;a[u.role]||(a[u.role]={}),a[u.role][u.id]=u}}catch(e){l=!0,s=e}finally{try{!o&&d.return&&d.return()}finally{if(l)throw s}}return a[e]||{}},createBurglarChain:function(e,t){var a=t+300;return{wsSecret:(0,d.default)("e32abcd53d6839164952931f26dc66ec"+e+a),wsTime:a}},throttle:function(e,t,a){var i,o,n,l=this,s=0;a||(a={});var r=function(){s=!1===a.leading?0:(new Date).getTime(),i=null,e.apply(o,n),i||(o=n=null)},d=function(){var d=(new Date).getTime();s||!1!==a.leading||(s=d);var u=t-(d-s);o=l,n=arguments,u<=0||u>t?(i&&(clearTimeout(i),i=null),s=d,e.apply(o,n),i||(o=n=null)):i||!1===a.trailing||(i=setTimeout(r,u))};return d.cancel=function(){clearTimeout(i),i=null},d},base64Encode:function(e){var t;return t=encodeURIComponent(e),t=unescape(t),t=window.btoa(t)},getCompanyidentify:function(){switch(c.getUrlParams("companyidentify")){case"1":case"2":return"default";case"3":return"meeting";default:return"default"}},BrowserCheck:function(){var e,t=navigator.appName,a=navigator.userAgent,i=a.match(/(opera|chrome|safari|firefox|msie|trident)\/?\s*(\.?\d+(\.\d+)*)/i);return i&&null!=(e=a.match(/version\/([\.\d]+)/i))&&(i[2]=e[1]),i=i?[i[1],i[2]]:[t,navigator.appVersion,"-?"]},isSafari:function(){return"Safari"===this.BrowserCheck()[0]},debounce:function(e,t){var a=void 0;return function(){var i=this,o=arguments;a&&clearTimeout(a),a=setTimeout(function(){e.apply(i,o)},t)}}};t.default=c},"v3i/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(a("Yz+Y")),o=f(a("iCc5")),n=f(a("V7oC")),l=f(a("FYw3")),s=f(a("mRg0")),r=f(a("q1tI")),d=f(a("aJKe")),u=(f(a("XbJA")),f(a("eQYT")),f(a("HPAy")),f(a("AAUp"))),c=a("ni/M");function f(e){return e&&e.__esModule?e:{default:e}}a("yvTm");var h=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){d.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.RightVesselSmartStyleJson,a=void 0===t?{}:t,i=e.RightContentVesselSmartStyleJson,o=void 0===i?{}:i,n={width:o.width,height:o.height,display:"flex"},l={width:a.width,height:a.height};return r.default.createElement("div",{className:"main-content-box"},r.default.createElement("div",{className:"whiteboard-content-box",style:n},r.default.createElement(u.default,null)),r.default.createElement("div",{className:"all-video-box",style:l},r.default.createElement(c.TeacherVideoList,null),r.default.createElement(c.StudentVideoList,null),r.default.createElement("ul",{className:"video-bg-box"},r.default.createElement("li",{className:"video-bg-teacher icon-teacher1"}),r.default.createElement("li",{className:"video-bg-student icon-student1"}))))}}]),t}(r.default.Component);t.default=h},"vK/f":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o,n=y(a("JO7F")),l=y(a("gDS+")),s=y(a("P2sY")),r=y(a("Yz+Y")),d=y(a("iCc5")),u=y(a("V7oC")),c=y(a("FYw3")),f=y(a("mRg0")),h=a("2vnA"),m=y(a("7Ln7")),p=(y(a("bm2/")),a("LAQx")),g=y(a("S+mp")),v=y(a("eQYT"));function y(e){return e&&e.__esModule?e:{default:e}}var S,b,C,k,w,T,E=new(i=(0,h.computed)({equals:h.comparer.structural}),o=function(e){function t(){return(0,d.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"arrRow",value:function(e){if(!e||!e.length)return[];var t=e.length,a={},i=[];return t<=2?(a=this.calcVideoStyle(t,1,!0),e.forEach(function(e){(0,s.default)(e,a)}),i=[e]):t>=3&&t<=4?(a=this.calcVideoStyle(2,2,!1),i=this.oneTOtwo(e,2,a)):t>=5&&t<=12?(a=this.calcVideoStyle(3,Math.ceil(e.length/3),!1),i=this.oneTOtwo(e,3,a)):t>=13&&t<=16?(a=this.calcVideoStyle(4,Math.ceil(e.length/4),!1),i=this.oneTOtwo(e,4,a)):t>=17&&t<=20?(a=this.calcVideoStyle(5,Math.ceil(e.length/5),!1),i=this.oneTOtwo(e,5,a)):t>=21&&t<=24&&(a=this.calcVideoStyle(6,Math.ceil(e.length/6),!0),i=this.oneTOtwo(e,6,a)),i}},{key:"oneTOtwo",value:function(e,t,a){var i=e.length,o=Math.ceil(i/t);e.forEach(function(e){(0,s.default)(e,a)});var n=[];if(i>6)for(var l=0;l<o;l++){var r=l*t,d=r+t;n[l]=e.slice(r,d)}else{var u=i%t||t;n[0]=e.slice(0,u),n[1]=e.slice(u,i)}return n}},{key:"calcVideoStyle",value:function(e,t,a){var i=v.default.joinRoomInfo.roomVideoHeight/v.default.joinRoomInfo.roomVideoWidth||.75,o=this.getWarpStyle(),n=o.warpClientWidth,l=o.warpClientHeight,s=void 0,r=void 0;return a?(r=(s=n/e)*i)*t>l&&(s=(r=l/t)/i):(s=(r=l/t)/i)*e>n&&(r=(s=n/e)*i),{clientWidth:s,clientHeight:r}}},{key:"getWarpStyle",value:function(){var e=document.getElementsByTagName("body")[0]||{clientWidth:100,clientHeight:100},t=document.getElementById("header_container")||{clientWidth:e.clientWidth,clientHeight:e.clientHeight};return{warpClientWidth:100,warpClientHeight:100*((e.clientHeight-t.clientHeight)/e.clientWidth).toFixed(4)}}},{key:"streamsList",get:function(){var e=JSON.parse((0,l.default)(m.default.streams));v.default.joinRoomInfo.VideosSequence&&e.length>2&&e.sort((0,p.keySort)("extensionId"));var t=e.map(function(e,t){if(e){var a=e.id||e.extensionId;return{id:a,isTeacher:(0,p.isTeacher)(a),stream:e,videoDumbClassName:"hvideo"}}});return t.length=t.length>24?24:t.length,this.arrRow(t)}}]),t}(g.default),S=o.prototype,b="streamsList",C=[i],k=(0,n.default)(o.prototype,"streamsList"),w=o.prototype,T={},Object.keys(k).forEach(function(e){T[e]=k[e]}),T.enumerable=!!T.enumerable,T.configurable=!!T.configurable,("value"in T||T.initializer)&&(T.writable=!0),T=C.slice().reverse().reduce(function(e,t){return t(S,b,e)||e},T),w&&void 0!==T.initializer&&(T.value=T.initializer?T.initializer.call(w):void 0,T.initializer=void 0),void 0===T.initializer&&(Object.defineProperty(S,b,T),T=null),o);t.default=E},vLgZ:function(e,t,a){},vPeN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(a("q1tI")),o=l(a("eQYT")),n=l(a("HPAy"));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.dispose,a=e.parentState,l=a.questionState,s=(a.role,a.hasPub),r=(a.options,a.pubRight),d=a.historyOptions;return i.default.createElement("div",{className:"footer"},i.default.createElement("div",{className:"footer-left"},i.default.createElement("span",{className:"hint item",style:{display:o.default.hasRole.roleStudent&&a.rightOptions.length<=0?"none":""}},o.default.hasRole.roleStudent?r&&a.rightOptions.length>0?n.default.language.languageData.qPanel.rightOptionIs+":"+(a.rightOptions&&a.rightOptions.map(function(e){return String.fromCharCode("A".charCodeAt()+e)})):"":"RUNNING"===a.questionState||"FINISHED"===a.questionState?n.default.language.languageData.qPanel.rightOptionIs+":"+(a.rightOptions&&a.rightOptions.map(function(e){return String.fromCharCode("A".charCodeAt()+e)})):o.default.hasRole.rolePatrol?"":n.default.language.languageData.qPanel.tips[0]),i.default.createElement("span",{className:"hint item empty",style:{display:!o.default.hasRole.roleStudent&&"UNSTART"===a.questionState&&a.hintShow?"":"none"}},n.default.language.languageData.qPanel.tips[1]),d&&d.length>0&&i.default.createElement("span",{className:"hint option item",style:{display:o.default.hasRole.roleStudent&&"FINISHED"===a.questionState?"":"none"}},n.default.language.languageData.qPanel.myAnswer,":",d.map(function(e,t){return!0===e.hasChose&&String.fromCharCode("A".charCodeAt()+t)||void 0}).filter(function(e){return void 0!==e}).toString()),i.default.createElement("button",{onClick:function(){t({action:"publishResult",data:{}})},disabled:s&&!0,style:{display:"FINISHED"===l&&(o.default.hasRole.roleChairman||o.default.hasRole.roleTeachingAssistant)&&o.default.joinRoomInfo&&o.default.joinRoomInfo.isShowTheAnswer?"":"none"},className:"item pub-btn"},s?n.default.language.languageData.qPanel.hasPub:n.default.language.languageData.qPanel.pubResult)),i.default.createElement("button",{className:"ques-state-btn item",onClick:function(){t({action:a.role===o.default.role.roleStudent?"changeCommitState":"changeQuestionState",data:{}})},style:{display:"FINISHED"===l&&!o.default.hasRole.roleChairman&&!o.default.hasRole.roleTeachingAssistant||o.default.hasRole.rolePatrol?"none":""},disabled:!(o.default.hasRole.roleChairman||o.default.hasRole.roleStudent||o.default.hasRole.roleTeachingAssistant)},a.role===o.default.role.roleStudent?"UNCOMMIT"===a.commitState?n.default.language.languageData.qPanel.commitAnswer:n.default.language.languageData.qPanel.modifyAnswer:"UNSTART"===a.questionState?n.default.language.languageData.qPanel.start:"RUNNING"===a.questionState?n.default.language.languageData.qPanel.end:n.default.language.languageData.qPanel.restart))}},veco:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(a("Yz+Y")),o=d(a("iCc5")),n=d(a("V7oC")),l=d(a("FYw3")),s=d(a("mRg0")),r=d(a("q1tI"));function d(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={prevDisabled:!1,nextDisabled:!1},a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentWillReceiveProps",value:function(e){if(!isNaN(parseInt(e.isPageText))){var t=e.isSearch?parseInt(e.searchNowPage):parseInt(e.isPageText);this.setState({prevDisabled:!1,nextDisabled:!1}),t>1&&t<=e.sum?this.setState({prevDisabled:!1}):this.setState({prevDisabled:!0}),t>=e.sum||t<1?this.setState({nextDisabled:!0}):this.setState({nextDisabled:!1})}}},{key:"handlerInputFocus",value:function(e){this.props.pagingInputFocus()}},{key:"handlerInputChange",value:function(e){this.props.pagingInputChange(e.target.value)}},{key:"handlerInputBlur",value:function(e){this.props.pagingInputBlur(e.target.value)}},{key:"handlerClickPrev",value:function(){this.props.pagingClickPrev()}},{key:"handlerClickNext",value:function(){this.props.pagingClickNext()}},{key:"inputOnKeyDown",value:function(e){13===e.which&&e.target.blur()}},{key:"render",value:function(){var e=this.props,t=e.sum,a=e.isPageText,i=e.searchNowPage,o=e.isSearch;return r.default.createElement("div",{className:"paging-container"},r.default.createElement("span",{className:"paging-left icon-left "+(this.state.prevDisabled?"disabled":""),onClick:this.handlerClickPrev.bind(this)}),r.default.createElement("div",{className:"paging-container-info"},r.default.createElement("input",{className:"paging-input",id:"pageInput",type:"text",onMouseDown:function(e){e.stopPropagation()},onKeyDown:this.inputOnKeyDown,value:o?i:a,onFocus:this.handlerInputFocus.bind(this),onBlur:this.handlerInputBlur.bind(this),onChange:this.handlerInputChange.bind(this)}),"/",r.default.createElement("span",{className:"paging-sum"},t)),r.default.createElement("span",{className:"paging-right icon-right "+(this.state.nextDisabled?"disabled":""),onClick:this.handlerClickNext.bind(this)}))}}]),t}(r.default.Component);t.default=u},vgEN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(a("Yz+Y")),o=u(a("iCc5")),n=u(a("V7oC")),l=u(a("FYw3")),s=u(a("mRg0")),r=u(a("q1tI")),d=u(a("HPAy"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props.user;return r.default.createElement("button",{className:"v-user-pen icon-btn_shouquan"+(e.candraw&&d.default.classBegin?" on":" off"),style:{color:e.primaryColor}})}}]),t}(r.default.Component);t.default=c},vwMP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=f(a("Yz+Y")),n=f(a("iCc5")),l=f(a("V7oC")),s=f(a("FYw3")),r=f(a("mRg0")),d=f(a("q1tI")),u=a("okNM"),c=f(a("HPAy"));function f(e){return e&&e.__esModule?e:{default:e}}var h=(0,u.inject)("userListDataStore")(i=(0,u.observer)(i=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={prevDisabled:!0,nextDisabled:!1},a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.userListDataStore;(e.pageSum===t.nowPage||t.isSearch&&e.pageSum===t.searchNowPage)&&!this.state.nextDisabled&&this.setState({nextDisabled:!0}),(1===this.props.userListDataStore.nowPage||t.isSearch&&1===t.searchNowPage)&&!this.state.prevDisabled&&this.setState({prevDisabled:!0}),this.props.pageSum<e.pageSum&&this.state.nextDisabled&&this.setState({nextDisabled:!1})}},{key:"handlerInputChange",value:function(e){var t=this.props.userListDataStore,a=e.target.value;!isNaN(Number(a))&&Number(a)<=t.pageSum&&t.updatePageInfo(!1,a)}},{key:"handlerInputBlur",value:function(e){var t=this.props.userListDataStore,a=e.target.value,i=t.isSearch?t.searchNowPage:t.nowPage,o=c.default.HeightConcurrence?"big":"small";a&&!isNaN(Number(a))?parseInt(a)!==i&&(t.updatePageInfo(parseInt(a),parseInt(a),o),this.isButtonDisabled()):t.updatePageInfo(!1,i)}},{key:"inputOnKeyDown",value:function(e){13===e.which&&e.target.blur()}},{key:"handlerClickPrev",value:function(){var e=this.props.userListDataStore,t=e.isSearch?e.searchNowPage-1:e.nowPage-1,a=c.default.HeightConcurrence?"big":"small";t>0&&t<=e.pageSum&&e.updatePageInfo(t,t,a),this.isButtonDisabled()}},{key:"handlerClickNext",value:function(){var e=this.props.userListDataStore,t=e.isSearch?e.searchNowPage+1:e.nowPage+1,a=c.default.HeightConcurrence?"big":"small";t>0&&t<=e.pageSum&&e.updatePageInfo(t,t,a),this.isButtonDisabled()}},{key:"isButtonDisabled",value:function(){var e=this.props.userListDataStore,t=e.isSearch?e.searchNowPage:e.nowPage;t<=1&&!this.state.prevDisabled&&this.setState({prevDisabled:!0}),t>1&&this.state.prevDisabled&&this.setState({prevDisabled:!1}),t>=e.pageSum&&!this.state.nextDisabled&&this.setState({nextDisabled:!0}),t<e.pageSum&&this.state.nextDisabled&&this.setState({nextDisabled:!1})}},{key:"render",value:function(){var e=this.props.userListDataStore,t=e.pageSum,a=e.isPageText,i=e.searchNowPage,o=e.isSearch;return d.default.createElement("div",{className:"paging-container"},d.default.createElement("span",{className:"paging-left icon-left "+(this.state.prevDisabled?"disabled":""),onClick:this.handlerClickPrev.bind(this)}),d.default.createElement("div",{className:"paging-container-info"},d.default.createElement("input",{className:"paging-input",id:"pageInput",style:{WebkitUserSelect:"text"},type:"text",onMouseDown:function(e){e.stopPropagation()},onKeyDown:this.inputOnKeyDown,value:o?i:a,onBlur:this.handlerInputBlur.bind(this),onChange:this.handlerInputChange.bind(this)}),"/",d.default.createElement("span",{className:"paging-sum"},t)),d.default.createElement("span",{className:"paging-right icon-right "+(this.state.nextDisabled?"disabled":""),onClick:this.handlerClickNext.bind(this)}))}}]),t}(d.default.Component))||i)||i;t.default=h},wB2e:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=E(a("QbLZ")),o=E(a("oF3Q")),n=E(a("FyfS")),l=E(a("sk9p")),s=E(a("rfXi")),r=E(a("Yz+Y")),d=E(a("iCc5")),u=E(a("V7oC")),c=E(a("FYw3")),f=E(a("mRg0")),h=(0,E(a("CSPP")).default)(["\n    display: ",";\n"],["\n    display: ",";\n"]),m=a("q1tI"),p=E(m),g=E(a("HPAy")),v=E(a("eQYT")),y=E(a("aJKe")),S=E(a("mrNk")),b=E(a("JL1q")),C=E(a("XbJA")),k=E(a("WYFG")),w=E(a("y1B5")),T=E(a("vOnD"));function E(e){return e&&e.__esModule?e:{default:e}}var I=T.default.div(h,function(e){return e.inputHide?"none":"block"}),D=T.default.div(h,function(e){return e.isShow?"":"none"}),x=T.default.div(h,function(e){return e.isShow?"none":""}),R=function(e){function t(e,a){(0,d.default)(this,t);var i=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,a));return i.emotionClick=function(e){var t=(0,s.default)(i.refs.textEditable.childNodes).findIndex(function(t,a){return t===e.target});if(e.clientX>$(e.target).offset().left+e.target.scrollWidth/2){var a=i.refs.textEditable;window.getSelection().collapse(a,t+1),a.focus()}else{var o=i.refs.textEditable;window.getSelection().collapse(o,t),o.focus()}},i.state={value:"",qqFaceShow:!1,sendRealText:"",uploadFileName:"",flag:1,size:1048576,updateState:!1,inputHide:!1,isPatrol:!1,HeightConcurrenceInputText:g.default.language.languageData.videoContainer.sendMsg.inputText.placeholder},i.chatType={allChat:"allChat",headTeacherChat:"headTeacherChat",groupChat:"groupChat"},i.accept=v.default.FILETYPE.imgFileListAccpet,i.hasFocus=!1,i.emotionArray=[g.default.language.languageData.phoneBroadcast.chat.face.naughty,g.default.language.languageData.phoneBroadcast.chat.face.happy,g.default.language.languageData.phoneBroadcast.chat.face.complacent,g.default.language.languageData.phoneBroadcast.chat.face.curlOnesLips,g.default.language.languageData.phoneBroadcast.chat.face.grieved,g.default.language.languageData.phoneBroadcast.chat.face.shedTears,g.default.language.languageData.phoneBroadcast.chat.face.kiss,g.default.language.languageData.phoneBroadcast.chat.face.love],i.historyChat=[],i.listernerBackupid=(new Date).getTime()+"_"+Math.random(),i}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){y.default.CoreController.addEventListener(v.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlerRoomPubmsg.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener(v.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener("initAppPermissions",this.initAppPermissions.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener(v.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener(v.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener("receive-msglist-EveryoneBanChat",this.handlerEveryoneBanChat.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){y.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerRoomPubmsg",value:function(e){"EveryoneBanChat"===e.message.name&&v.default.hasRole.roleStudent&&(this.refs.textEditable.innerHTML=g.default.language.languageData.alertWin.call.prompt.publishStatus.stream.speakoff.text)}},{key:"handlerRoomUserpropertyChanged",value:function(e){if(e.userid!==S.default.getTkRoom().getMySelf().id||!v.default.hasRole.roleStudent)return!1;var t=e.message.disablechat;if(void 0===t)return!1;if(t){var a=g.default.language.languageData.alertWin.call.prompt.publishStatus.stream.speakoff.text;this.refs.textEditable.innerHTML=a}else this.refs.textEditable.innerHTML=this.state.sendRealText}},{key:"handlerEveryoneBanChat",value:function(e){var t=e.message.EveryoneBanChatArr[0].data;if(v.default.hasRole.roleStudent)if(t){var a=g.default.language.languageData.alertWin.call.prompt.publishStatus.stream.speakoff.text;this.refs.textEditable.innerHTML=a}else this.refs.textEditable.innerHTML=this.state.sendRealText}},{key:"handlerRoomDelmsg",value:function(e){"EveryoneBanChat"===e.message.name&&v.default.hasRole.roleStudent&&(this.refs.textEditable.innerHTML=this.state.sendRealText)}},{key:"handlerRoomConnected",value:function(e){this.setState({inputHide:v.default.hasRole.rolePatrol||v.default.hasRole.rolePlayback,isPatrol:v.default.hasRole.rolePatrol||v.default.hasRole.rolePlayback})}},{key:"handleEditableOnInput",value:function(e){document.createRange();var t=this.refs.textEditable.innerHTML.replace(/&nbsp;/g," ");this.setState({sendRealText:t})}},{key:"preventRepeatChat",value:function(e){return this.historyChat=this.historyChat.filter(function(e){return((new Date).getTime()-e.timestamp)/1e3<=3}),!!this.historyChat.some(function(t){return t.value===e})||(this.historyChat.push({timestamp:(new Date).getTime(),value:e}),!1)}},{key:"handleEditableOnKeyDown",value:function(e){if(v.default.hasRole.roleStudent&&this.props.textDisable)return!1;if(13===e.keyCode){e.preventDefault(),console.error(this.state.sendRealText);var t=this.state.sendRealText.replace(/<img.*?(?:>|\/>)/gi,function(e){return"[em_"+e.substring(e.lastIndexOf("/")+1).split(".")[0]+"]"}).replace(/&nbsp;/g," ").replace(/<\/?[a-zA-Z]+[^><]*>/g,"");this._handleInputToSend({value:t}),this.refs.textEditable.innerHTML="",this.setState({sendRealText:""})}}},{key:"handleEditableOnButtonClick",value:function(e){if(v.default.hasRole.roleStudent&&this.props.textDisable)return!1;var t=this.state.sendRealText.replace(/<img.*?(?:>|\/>)/gi,function(e){return"[em_"+e.substring(e.lastIndexOf("/")+1).split(".")[0]+"]"}).replace(/&nbsp;/g," ").replace(/<\/?[a-zA-Z]+[^><]*>/g,"");this._handleInputToSend({value:t}),this.refs.textEditable.innerHTML="",this.setState({sendRealText:""})}},{key:"initAppPermissions",value:function(e){this.setState({updateState:!this.state.updateState})}},{key:"OnSendIMG",value:function(){if(v.default.hasRole.roleStudent&&this.props.textDisable)return!1;this.setState({flag:this.state.flag+1})}},{key:"emotionMouse",value:function(){this.hasFocus=$(this.refs.textEditable).is(":focus")}},{key:"handleEmotionBtnOnClick",value:function(){if(this.setState({qqFaceShow:!this.state.qqFaceShow}),this.refs.textEditable.focus(),!this.hasFocus){var e=document.createRange();e.selectNodeContents(this.refs.textEditable),e.collapse(!1);var t=window.getSelection();t.removeAllRanges(),t.addRange(e),this.hasFocus=!1}}},{key:"handleQqFaceOnMouseLeave",value:function(){this.setState({qqFaceShow:!1})}},{key:"handleFaceOnClick",value:function(e,t){if(v.default.hasRole.roleStudent&&this.props.textDisable)return!1;var a="./img/"+t+".png";this.insertImg(a),this.setState({qqFaceShow:!1,sendRealText:this.refs.textEditable.innerHTML})}},{key:"insertImg",value:function(e){if("getSelection"in window){var t=window.getSelection();if(t&&1===t.rangeCount&&t.isCollapsed){this.refs.textEditable.focus();var a=t.getRangeAt(0),i=new Image;i.src=e,i.onclick=this.emotionClick,a.insertNode(i),a.collapse(!1),t.removeAllRanges(),t.addRange(a)}}else if("selection"in document){this.refs.textEditable.focus(),document.selection.createRange().pasteHTML('<img onclick="this.emotionClick()" src="'+e+'">'),this.refs.textEditable.focus()}}},{key:"insertText",value:function(e){if("getSelection"in window){var t=window.getSelection();if(t&&1===t.rangeCount&&t.isCollapsed){this.refs.textEditable.focus();var a=t.getRangeAt(0),i=document.createTextNode(e);a.insertNode(i),a.collapse(!1),t.removeAllRanges(),t.addRange(a)}}else if("selection"in document){this.refs.textEditable.focus(),document.selection.createRange().text=e,this.refs.textEditable.focus()}}},{key:"_loadEmotionArray",value:function(){var e=this,t=[],a={};this.emotionArray.map(function(t,i){var o=Math.floor(i/15);a[o]=a[o]||[];var n=i+1;a[o].push(p.default.createElement("li",{key:"td_"+i},p.default.createElement("img",{title:t,className:"icon",src:"./img/"+n+".png",onClick:e.handleFaceOnClick.bind(e,i,n)})))});var i=!0,s=!1,r=void 0;try{for(var d,u=(0,n.default)((0,o.default)(a));!(i=(d=u.next()).done);i=!0){var c=d.value,f=(0,l.default)(c,2),h=f[0],m=f[1];t.push(p.default.createElement("ul",{key:"tr_"+h},m))}}catch(e){s=!0,r=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw r}}return{emotionArray:t}}},{key:"uploadSuccess",value:function(e){this._handleInputToSend({value:e.swfpath,cospath:e.cospath,msgtype:"onlyimg"})}},{key:"toTwo",value:function(e){return 0==parseInt(e/10)?"0"+e:e}},{key:"_handleInputToSend",value:function(e){if(e.value&&$.trim(e.value)){if(this.preventRepeatChat(e.value))return void y.default.CoreController.dispatchEvent({type:"preventRepeatChat"});var t=this.props.selectChat===this.chatType.allChat?0:void 0,a=this.toTwo((new Date).getHours())+":"+this.toTwo((new Date).getMinutes()),i={msg:e.value,type:t,time:a};switch(e.msgtype&&(i.msgtype=e.msgtype,i.cospath=e.cospath),t){case 0:C.default.sendTextMessage(i)}}}},{key:"render",value:function(){var e=this._loadEmotionArray().emotionArray;return p.default.createElement(I,{className:"input-box "+(v.default.hasRoomtype.oneToOne?"middle":"high"),inputHide:this.state.inputHide},g.default.playback||v.default.hasRole.roleRecord||this.state.isPatrol?void 0:p.default.createElement(x,{className:"input-top",isShow:v.default.hasRole.rolePatrol},p.default.createElement(k.default,(0,i.default)({emotionClick:this.handleEmotionBtnOnClick.bind(this),emotionMouseEnter:this.emotionMouse.bind(this),QQFaceMouseLeave:this.handleQqFaceOnMouseLeave.bind(this),emotionArray:e,textDisable:this.props.textDisable},this.state)),b.default.handler.getAppPermissions("chatSendImg")?p.default.createElement(w.default,(0,i.default)({OnSendIMG:this.OnSendIMG.bind(this),uploadSuccess:this.uploadSuccess.bind(this),accept:this.accept,textDisable:this.props.textDisable},this.state)):void 0),g.default.playback||v.default.hasRole.roleRecord?void 0:p.default.createElement(D,{className:"chat-subject",onMouseLeave:this.handleQqFaceOnMouseLeave.bind(this),isShow:!v.default.hasRole.rolePatrol},p.default.createElement("div",{className:"chat-input"},p.default.createElement("div",{contentEditable:!g.default.isLeaveRoom&&(!this.state.isPatrol&&!this.props.textDisable&&"plaintext-only"),ref:"textEditable",placeholder:this.state.isPatrol?g.default.language.languageData.videoContainer.sendMsg.inputText.patrolPlaceholder:this.state.HeightConcurrenceInputText===g.default.language.languageData.videoContainer.sendMsg.inputText.placeholder?g.default.language.languageData.videoContainer.sendMsg.inputText.placeholder:this.state.HeightConcurrenceInputText,"data-text":this.state.isPatrol?g.default.language.languageData.videoContainer.sendMsg.inputText.patrolPlaceholder:this.state.HeightConcurrenceInputText===g.default.language.languageData.videoContainer.sendMsg.inputText.placeholder?g.default.language.languageData.videoContainer.sendMsg.inputText.placeholder:this.state.HeightConcurrenceInputText,onInput:this.handleEditableOnInput.bind(this),onMouseDown:function(e){e.stopPropagation()},onKeyDown:this.handleEditableOnKeyDown.bind(this),className:"inputContentEditable custom-scroll-bar ",style:{fontSize:this.props.chatFontSize/100+"rem"}})),p.default.createElement("button",{className:"sendBtn user-select-none ",disabled:!!g.default.isLeaveRoom||v.default.hasRole.roleStudent&&(this.state.isPatrol||this.props.textDisable),onClick:this.handleEditableOnButtonClick.bind(this)},g.default.language.languageData.videoContainer.sendMsg.sendBtn.text)),p.default.createElement("div",{className:"chat_icon_rockets"}))}}]),t}(m.Component);t.default=R},wGxT:function(e,t,a){},wMZI:function(e,t,a){},"wa3/":function(e,t,a){},wsTX:function(e,t,a){},wtPx:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=h(a("Yz+Y")),o=h(a("iCc5")),n=h(a("V7oC")),l=h(a("FYw3")),s=h(a("mRg0")),r=h(a("q1tI")),d=h(a("aJKe")),u=h(a("eQYT")),c=h(a("HPAy")),f=h(a("mrNk"));function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={networkStatus:{rtt:0,packetsLost:0,kbps:0,frameRatio:{frameWidth:0,frameHeight:0},frameRate:0},show:!1},a.isSendNetworkDelay=0,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){d.default.CoreController.addEventListener(u.default.EVENTTYPE.RoomEvent.roomUsernetworkstateChanged,this.UsernetworkstateChanged.bind(this),this.listernerBackupid),d.default.CoreController.addEventListener(u.default.EVENTTYPE.RoomEvent.roomUservideostateChanged,this._controlRemoteStreamChange.bind(this),this.listernerBackupid),d.default.CoreController.addEventListener(u.default.EVENTTYPE.RoomEvent.roomUseraudiostateChanged,this._controlRemoteStreamChange.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){d.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"UsernetworkstateChanged",value:function(e){var t=this,a=e.message;if(a.userId===f.default.getTkRoom().getMySelf().id){var i=a.networkStatus,o={frameRate:i.video.frameRate,frameRatio:{frameWidth:i.video.frameWidth,frameHeight:i.video.frameHeight},kbps:i.video.bitsPerSecond,packetsLost:i.video.packetsLostRate,rtt:i.video.currentDelay};this.setState({networkStatus:o},function(){d.default.CoreController.dispatchEvent({type:"handleTestSystemInfo",message:{data:t.state}})})}}},{key:"_controlRemoteStreamChange",value:function(e){var t=e.message;t.publishstate===u.default.PUBLISHSTATE.PUBLISH_STATE_NONE?t.userId===f.default.getTkRoom().getMySelf().id&&(this.setState({show:!1}),d.default.CoreController.dispatchEvent({type:"handleTestSystemInfo",message:{data:this.state}})):t.userId===f.default.getTkRoom().getMySelf().id&&(this.setState({show:!0}),d.default.CoreController.dispatchEvent({type:"handleTestSystemInfo",message:{data:this.state}}))}},{key:"_getNetworkText",value:function(e,t,a){var i="",o=void 0,n=!1;return e<=5||t<=500?(i=c.default.language.languageData.networkStatus.network.value.excellent,n=!1):e<=20||t<=1e3?(i=c.default.language.languageData.networkStatus.network.value.well,n=!1):(e>20||t>1e3)&&(i=c.default.language.languageData.networkStatus.network.value.suck,o={color:"#ff021d"},n=!0),{networkText:i,networkStyle:o,isShow:n}}},{key:"render",value:function(){var e=this.state,t=e.networkStatus,a=void 0===t?{}:t,i=e.show,o=a.rtt,n=a.packetsLost,l=a.kbps,s=this._getNetworkText(n,o,l),d=s.networkText,f=s.networkStyle,h=s.isShow;return r.default.createElement("div",{style:{display:i?void 0:"none"},id:"network_status_container",className:"network-status-container add-position-relative add-fl"},u.default.joinRoomInfo.networkstate&&u.default.hasRole.roleStudent?void 0:r.default.createElement("label",null,r.default.createElement("span",{className:"rtt-container"},r.default.createElement("span",{className:"title"},c.default.language.languageData.networkStatus.rtt.title.text),":",r.default.createElement("span",{className:"value"},o,"ms")),r.default.createElement("span",{className:"packetsLost-container"},r.default.createElement("span",{className:"title"},c.default.language.languageData.networkStatus.packetsLost.title.text),":",r.default.createElement("span",{className:"value"},n,"%"))),r.default.createElement("span",{className:"network-container"},r.default.createElement("span",{className:"title"},c.default.language.languageData.networkStatus.network.title.text),":",r.default.createElement("span",{className:"value",style:f},d),h&&r.default.createElement("span",{className:"network-notice"},c.default.language.languageData.networkStatus.network.notice)))}}]),t}(r.default.Component);t.default=m},x8Le:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLibrary=t.CourseLibrary=void 0;var i=C(a("YEIV")),o=C(a("GQeE")),n=C(a("QbLZ")),l=C(a("Yz+Y")),s=C(a("iCc5")),r=C(a("V7oC")),d=C(a("FYw3")),u=C(a("mRg0")),c=C(a("q1tI")),f=C(a("aJKe")),h=C(a("HPAy")),m=C(a("eQYT")),p=C(a("mrNk")),g=C(a("Qxvg")),v=(C(a("FYSC")),a("LbeR")),y=C(a("rK/K")),S=C(a("zQaB")),b=(C(a("zrT5")),C(a("Q1Q1")));function C(e){return e&&e.__esModule?e:{default:e}}var k=function(e){function t(e){(0,s.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.state={fileList:[],selectedFileID:h.default.defaultFileInfo.fileid,isOnlyAudioRoom:h.default.isOnlyAudioRoom,autoFileRefresh:!1},a.recoveryList=[],a.defaultFileInfo=void 0,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){f.default.CoreController.addEventListener("openCourseChange",this.openCourseChange.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomFiles,this.handlerReceiveFileInfo.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomAddFile,this.handlerRoomAddFile.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener("isOnlyAudioRoom",this.handlerIsOnlyAudioRoom.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomDeleteFile,this.handlerRoomDeleteFile.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener("fileListEvent",this.handlerFileListObserver.bind(this),this.listernerBackupid),f.default.CoreController.addEventListener("receiveWhiteboardSDKAction",this.receiveWhiteboardSDKAction.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){f.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerIsOnlyAudioRoom",value:function(e){this.setState(function(){return{isOnlyAudioRoom:e.onlyAudio}})}},{key:"handlerReceiveFileInfo",value:function(e){var t=this,a=this.props.fileOption;this.recoveryList=[].concat(v.FileListEvent._filterList(e.message)[a]),this.setState(function(){return{fileList:[].concat(t.recoveryList)}})}},{key:"handlerFileListObserver",value:function(e){var t=e.message,a=/course/.test(this.props.fileOption);"courseLib"===t.libType&&a?t&&t.fileSortType?this._handleFileSort(t):t&&this._handleFileSearch(t):"mediaLib"!==t.libType||a||(t&&t.fileSortType?this._handleFileSort(t):t&&this._handleFileSearch(t))}},{key:"_CallbackFilterHandler",value:function(e,t){var a=this,i=e.fileid;this.recoveryList=[e].concat(this.state.fileList),this.setState(function(){return{fileList:[].concat(a.recoveryList),autoFileRefresh:!0}}),f.default.CoreController.dispatchEvent({type:"fileListEvent",message:{revealFileId:e.fileid}}),p.default.getTkRoom().getMySelf().id===t&&"mp3"!==e.filetype&&"mp4"!==e.filetype&&(h.default.defaultFileInfo=e,f.default.CoreController.dispatchEvent({type:"openCourseChange",message:{id:i}}))}},{key:"handlerRoomAddFile",value:function(e){var t=e.message,a=t.fileid,i=t.fromID,o=p.default.getTkRoom().getFileinfo&&p.default.getTkRoom().getFileinfo(a),n=this.props.fileOption;this.props.isLibraryShow&&("mp3"===o.filetype||"mp4"===o.filetype?f.default.CoreController.dispatchEvent({type:"fileListEvent",message:{fileSortType:"fileid",isAec:!1,libType:"mediaLib"}}):f.default.CoreController.dispatchEvent({type:"fileListEvent",message:{fileSortType:"fileid",isAec:!1,libType:"courseLib"}})),m.default.joinRoomInfo.isDocumentClassification&&+o.filecategory?"mp3"!==o.filetype&&"mp4"!==o.filetype||"mediaPublicFiles"!==n?"mp3"!==o.filetype&&"mp4"!==o.filetype&&"coursePublicFiles"===n&&this._CallbackFilterHandler(o,i):this._CallbackFilterHandler(o,i):"mp3"!==o.filetype&&"mp4"!==o.filetype||"mediaPrivateFiles"!==n?"mp3"!==o.filetype&&"mp4"!==o.filetype&&"coursePrivateFiles"===n&&this._CallbackFilterHandler(o,i):this._CallbackFilterHandler(o,i)}},{key:"_CallbackDelHandler",value:function(e){var t=this.state.fileList,a=t.filter(function(t){return t.fileid!=e}),i=this.recoveryList.filter(function(t){return t.fileid!=e});if(e===this.state.selectedFileID){var o=t.findIndex(function(t,a){return t.fileid===e}),n=this.props.fileOption;if("coursePrivateFiles"===n||"coursePublicFiles"===n)o>0?this._openCourseChange(t[o-1].fileid):0===o&&this._openCourseChange(0);else{var l=h.default.lastCourseInfo.fileid;g.default.stopAllMediaShare(),this._openCourseChange(l)}m.default.joinRoomInfo.isDocumentClassification&&"coursePrivateFiles"==this.props.fileOption&&(0==a.length&&(h.default.hasPrivateFile=!1),a.length>0&&(h.default.hasPrivateFile=!0))}this.recoveryList=[].concat(i),this.setState(function(){return{fileList:[].concat(a)}})}},{key:"handlerRoomDeleteFile",value:function(e){var t=e.message,a=t.fileid,i=t.fileinfo,o=this.props.fileOption;m.default.joinRoomInfo.isDocumentClassification&&+i.filecategory?"mp3"!==i.filetype&&"mp4"!==i.filetype||"mediaPublicFiles"!==o?"mp3"!==i.filetype&&"mp4"!==i.filetype&&"coursePublicFiles"===o&&this._CallbackDelHandler(a):this._CallbackDelHandler(a):"mp3"!==i.filetype&&"mp4"!==i.filetype||"mediaPrivateFiles"!==o?"mp3"!==i.filetype&&"mp4"!==i.filetype&&"coursePrivateFiles"===o&&this._CallbackDelHandler(a):this._CallbackDelHandler(a)}},{key:"_openCourseChange",value:function(e){f.default.CoreController.dispatchEvent({type:"openCourseChange",message:{id:e}})}},{key:"receiveWhiteboardSDKAction",value:function(e){var t=e.message,a=t.action,i=t.cmd;this.props.fileOption;switch(a){case"viewStateUpdate":var o=i.viewState,n=o.fileid,l=o.page,s=this.getFiles(n,l),r=s.file,d=s.fileList,u=d.find(function(e){return e.fileid==n});if(l.currentPage&&!h.default.classBegin&&u&&(h.default.currentPageBeforeClass=l.currentPage),r&&(this.setState(function(){return{fileList:d}}),n!==this.state.selectedFileID)){if("mp3"!==r.filetype&&"mp4"!==r.filetype&&(this.defaultFileInfo=void 0,h.default.lastCourseInfo=r),("mp3"===r.filetype||"mp4"===r.filetype)&&this.state.selectedFileID!==n)return;h.default.defaultFileInfo=r,this.setState(function(){return{autoFileRefresh:!1}}),f.default.CoreController.dispatchEvent({type:"openCourseChange"}),!r||"mp3"!=r.filetype&&"mp4"!=r.filetype?"mp3"!==r.filetype&&"mp4"!==r.filetype&&(v.HistoryFileId.mediaPlaying=null,v.HistoryFileId.course=r.fileid):(v.HistoryFileId.mediaPlaying=r.fileid,v.HistoryFileId.media=r.fileid)}break;case"mediaPlayerNotice":var c=i.fileid;if("play"===i.type)this.getFiles(c).file?(this.defaultFileInfo=h.default.defaultFileInfo,h.default.defaultFileInfo=this.getFiles(c).file,f.default.CoreController.dispatchEvent({type:"openCourseChange"}),this.state.selectedFileID+""!=v.HistoryFileId.course+""?v.HistoryFileId.mediaPlaying=this.getFiles(c).file.fileid:v.HistoryFileId.mediaPlaying=null):this.defaultFileInfo=void 0;else if("end"===i.type){if(this.state.selectedFileID+""==v.HistoryFileId.course+"")return;v.HistoryFileId.mediaPlaying=null,v.HistoryFileId.course||0==v.HistoryFileId.course?f.default.CoreController.dispatchEvent({type:"openCourseChange",message:{id:v.HistoryFileId.course}}):f.default.CoreController.dispatchEvent({type:"openCourseChange",message:{id:0}})}else"start"!==i.type&&this.defaultFileInfo&&(h.default.defaultFileInfo=this.defaultFileInfo,f.default.CoreController.dispatchEvent({type:"openCourseChange"}))}}},{key:"getFiles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=null,i=[].concat(this.state.fileList).map(function(i){return i.fileid==e&&(a=i,t.totalPage&&i.pagenum!==t.totalPage&&(i.pagenum=t.totalPage),t.currentPage&&i.currpage!==t.currentPage&&(i.currpage=t.currentPage)),i});return 0==e&&(a=v.FileItemEvent.addWhiteBoardInfo()),{file:a,fileList:i}}},{key:"openCourseChange",value:function(e){var t=e.message&&e.message.id,a=void 0;(0==t||t)&&this.getFiles(t)&&(a=this.getFiles(t).file,v.FileItemEvent.openDocuemnt(a)),!a||"mp3"!=a.filetype&&"mp4"!=a.filetype?v.HistoryFileId.mediaPlaying=null:v.HistoryFileId.mediaPlaying=a.fileid;var i=t||"0"==t?t:h.default.defaultFileInfo.fileid;this.setState(function(){return{selectedFileID:i}})}},{key:"_handleFileSort",value:function(e){var t=e.fileSortType,a=e.isAec,i=this.state.fileList,o=v.FileListEvent._sortFileList(i,{fileSortType:t,isAec:a});this.setState(function(){return{fileList:o}})}},{key:"_handleFileSearch",value:function(e){var t=this,a=e.searchText;if(a){var i=v.FileListEvent._filterFileBySearch([].concat(this.recoveryList),a);this.setState(function(){return{fileList:i}})}else this.setState(function(){return{fileList:[].concat(t.recoveryList)}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.fileList,i=t.selectedFileID,o=t.isOnlyAudioRoom;return c.default.createElement(c.default.Fragment,null,a.map(function(t){return c.default.createElement(y.default,{fileID:i,pub:e.props.fileOption,key:t.fileid,file:t,ref:t.fileid,isOnlyAudioRoom:o})}))}}]),t}(c.default.PureComponent);function w(e,t){return function(a){function i(){return(0,s.default)(this,i),(0,d.default)(this,(i.__proto__||(0,l.default)(i)).apply(this,arguments))}return(0,u.default)(i,a),(0,r.default)(i,[{key:"render",value:function(){return c.default.createElement(e,(0,n.default)({fileOption:t},this.props))}}]),i}(c.default.PureComponent)}var T=w(k,"coursePrivateFiles"),E=w(k,"coursePublicFiles"),I=w(k,"mediaPublicFiles"),D=w(k,"mediaPrivateFiles"),x=function(e){function t(){(0,s.default)(this,t);var e=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this));return e.state={classSwitch:!0,pubSwitch:!1,showProgress:!1,fileProgressArray:[]},e}return(0,u.default)(t,e),(0,r.default)(t,[{key:"openClassFile",value:function(){var e=this;this.setState(function(){return{classSwitch:!e.state.classSwitch}})}},{key:"openPubFile",value:function(){var e=this;this.setState(function(){return{pubSwitch:!e.state.pubSwitch}})}},{key:"uploadSuccess",value:function(e){var t=this,a=setTimeout(function(){t.setState(function(){return{showProgress:!1}}),t.props.clickDisable(),clearTimeout(a)},500);this._uploadCallbackFilter(e)}},{key:"uploadCancel",value:function(e){var t=this,a=setTimeout(function(){t.setState({showProgress:!1}),t.props.clickDisable(),clearTimeout(a)},2e3);this._uploadCallbackFilter(e)}},{key:"_uploadCallbackFilter",value:function(e){var t=this.state.fileProgressArray.filter(function(t){return(0,o.default)(t)!=e});this.setState(function(){return{fileProgressArray:t}})}},{key:"uploadFile",value:function(e,t,a,o){var n=this;if(this.setState(function(){return{showProgress:!0}}),this.props.clickEffect(!1),!this.state.fileProgressArray[o]){var l=[(0,i.default)({},o,[e,t,a])];this.setState(function(){return{fileProgressArray:l.concat(n.state.fileProgressArray)}})}}},{key:"render",value:function(){var e=this,t=m.default.joinRoomInfo.isDocumentClassification,a=function(){return{uploadSuccess:e.uploadSuccess.bind(e),uploadCancel:e.uploadCancel.bind(e),uploadFile:e.uploadFile.bind(e)}},i=this.state,o=(i.fileProgressArray,i.classSwitch),l=i.pubSwitch,s=i.showProgress;return c.default.createElement("div",{className:"fileContainer"},t?c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{onClick:this.openClassFile.bind(this),className:"classification"},h.default.language.languageData.toolContainer.toolIcon.classFolder.title,c.default.createElement("span",{className:"arrow "+(o?"icon-right on":"icon-right")})),c.default.createElement("div",{style:{display:o?"block":"none"}},c.default.createElement("span",{style:{display:s?"block":"none"}},c.default.createElement(S.default,(0,n.default)({},a(),this.props))),c.default.createElement(b.default,this.props),c.default.createElement(T,this.props)),c.default.createElement("div",{onClick:this.openPubFile.bind(this),className:"classification"},h.default.language.languageData.toolContainer.toolIcon.adminFolders.title,c.default.createElement("span",{className:"arrow "+(l?"icon-right on":"icon-right")})),c.default.createElement("div",{style:{display:l?"block":"none"}},c.default.createElement(E,this.props))):c.default.createElement(c.default.Fragment,null,c.default.createElement("span",{style:{display:s?"block":"none"}},c.default.createElement(S.default,(0,n.default)({},a(),this.props))),c.default.createElement(b.default,this.props),c.default.createElement(T,this.props)))}}]),t}(c.default.Component),R=function(e){function t(){(0,s.default)(this,t);var e=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this));return e.state={classSwitch:!0,pubSwitch:!1,showProgress:!1,fileProgressArray:[]},e}return(0,u.default)(t,e),(0,r.default)(t,[{key:"openClassFile",value:function(){var e=this;this.setState(function(){return{classSwitch:!e.state.classSwitch}})}},{key:"openPubFile",value:function(){var e=this;this.setState(function(){return{pubSwitch:!e.state.pubSwitch}})}},{key:"uploadSuccess",value:function(e){var t=this,a=setTimeout(function(){t.setState({showProgress:!1}),t.props.clickDisable(),clearTimeout(a)},500);this._uploadCallbackFilter(e)}},{key:"uploadCancel",value:function(e){var t=this,a=setTimeout(function(){t.setState({showProgress:!1}),t.props.clickDisable(),clearTimeout(a)},2e3);this._uploadCallbackFilter(e)}},{key:"_uploadCallbackFilter",value:function(e){var t=this.state.fileProgressArray.filter(function(t){return(0,o.default)(t)!=e});this.setState(function(){return{fileProgressArray:t}}),this.props.clickDisable()}},{key:"uploadFile",value:function(e,t,a,i){var o=this;if(this.setState(function(){return{showProgress:!0}}),this.props.clickEffect(!0),!this.state.fileProgressArray[i]){var n=[{id:[e,t,a]}];this.setState(function(){return{fileProgressArray:n.concat(o.state.fileProgressArray)}})}}},{key:"render",value:function(){var e=this,t=m.default.joinRoomInfo.isDocumentClassification,a=function(){return{uploadSuccess:e.uploadSuccess.bind(e),uploadCancel:e.uploadCancel.bind(e),uploadFile:e.uploadFile.bind(e)}},i=this.state,o=(i.fileProgressArray,i.classSwitch),l=i.pubSwitch,s=i.showProgress;return c.default.createElement("div",{className:"fileContainer media"},t?c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{onClick:this.openClassFile.bind(this),className:"classification"},h.default.language.languageData.toolContainer.toolIcon.classFolder.title,c.default.createElement("span",{className:"arrow "+(o?"icon-right on":"icon-right")})),c.default.createElement("div",{style:{display:o?"block":"none"}},c.default.createElement("span",{style:{display:s?"block":"none"}},c.default.createElement(S.default,(0,n.default)({},a(),this.props))),c.default.createElement(D,this.props)),c.default.createElement("div",{onClick:this.openPubFile.bind(this),className:"classification"},h.default.language.languageData.toolContainer.toolIcon.adminFolders.title,c.default.createElement("span",{className:"arrow "+(l?"icon-right on":"icon-right")})),c.default.createElement("div",{style:{display:l?"block":"none"}},c.default.createElement(I,this.props))):c.default.createElement(c.default.Fragment,null,c.default.createElement("span",{style:{display:s?"block":"none"}},c.default.createElement(S.default,(0,n.default)({},a(),this.props))),c.default.createElement(D,this.props)))}}]),t}(c.default.Component);t.CourseLibrary=x,t.MediaLibrary=R},"xG/F":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=h(a("QbLZ")),o=h(a("Yz+Y")),n=h(a("iCc5")),l=h(a("V7oC")),s=h(a("FYw3")),r=h(a("mRg0")),d=(0,h(a("CSPP")).default)(["\n  display: ",";\n"],["\n  display: ",";\n"]),u=h(a("q1tI")),c=h(a("vOnD")),f=a("N+lb");function h(e){return e&&e.__esModule?e:{default:e}}var m=c.default.div.attrs({className:"video-hover-function-container"})(d,function(e){return e.actionButtonArray&&0===e.actionButtonArray.length||e.isCanDrag?"none":void 0}),p=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.ButtononMouseOver=function(){a.forceUpdate()},a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=(0,f.loadActionButtonArray)(this.props.user,this.props);return u.default.createElement(m,(0,i.default)({},this.props,{actionButtonArray:e,onMouseOver:this.ButtononMouseOver}),e)}}]),t}(u.default.Component);t.default=p},xKLr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=v(a("sk9p")),o=v(a("oF3Q")),n=v(a("Yz+Y")),l=v(a("iCc5")),s=v(a("V7oC")),r=v(a("FYw3")),d=v(a("mRg0")),u=v(a("q1tI")),c=v(a("aJKe")),f=v(a("1Nl6")),h=v(a("HPAy")),m=v(a("mrNk")),p=v(a("Qxvg")),g=v(a("1Ea7"));function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){return(0,l.default)(this,t),(0,r.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e))}return(0,d.default)(t,e),(0,s.default)(t,[{key:"_screenSharing",value:function(){var e="Chrome"===this.BrowserCheck()[0],t="Safari"===this.BrowserCheck()[0],a=(0,o.default)(m.default.getTkRoom().getUsers()),n=a.filter(function(e){var t=(0,i.default)(e,2);t[0];return t[1].publishstate>0}),l=a.filter(function(e){var t=(0,i.default)(e,2),a=(t[0],t[1]);return a.publishstate>0&&(a.role===TkConstant.role.roleStudent||a.role===TkConstant.role.roleTeachingAssistant)});if((n.length>=TkConstant.joinRoomInfo.maxvideo||l.length>=TkConstant.joinRoomInfo.maxvideo-1)&&(TkConstant.hasRole.roleStudent||TkConstant.hasRole.roleTeachingAssistant))g.default.showPrompt("");else if(h.default.isClient)c.default.CoreController.dispatchEvent({type:"programmShare"}),this.props.isDisabledHoldItem("sharing",!0);else if(h.default.isClient||h.default.isMobile||!e){if(!h.default.isClient&&!h.default.isMobile&&t){var s=h.default.language.languageData.shares.safariNotify.text;g.default.showPrompt(s,function(){})}}else p.default.stopAllMediaShare(),m.default.getTkRoom().startShareScreen(null,function(e,t){e===window.TK_ERR.CHECK_USERDesktopMediaError&&c.default.CoreController.dispatchEvent({type:"check_no_plug"}),c.default.CoreController.dispatchEvent({type:"colse-holdAll-item",message:{type:"sharing"}})});this.props.close()}},{key:"BrowserCheck",value:function(){var e,t=navigator.appName,a=navigator.userAgent,i=a.match(/(opera|chrome|safari|firefox|msie|trident)\/?\s*(\.?\d+(\.\d+)*)/i);return i&&null!=(e=a.match(/version\/([\.\d]+)/i))&&(i[2]=e[1]),i=i?[i[1],i[2]]:[t,navigator.appVersion,"-?"]}},{key:"render",value:function(){return u.default.createElement("li",{className:"holdAllitem "+(this.props.isDisabled?" disabled":"")},u.default.createElement("div",{onClick:this._screenSharing.bind(this)},u.default.createElement("em",{className:"icon "+this.props.bgName}),u.default.createElement("span",null,this.props.name)))}}]),t}(u.default.Component);y=(0,f.default)(y),t.default=y},xWvL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=x(a("YEIV")),o=x(a("/f1G")),n=x(a("Yz+Y")),l=x(a("iCc5")),s=x(a("V7oC")),r=x(a("FYw3")),d=x(a("mRg0")),u=x(a("q1tI")),c=x(a("aJKe")),f=x(a("eQYT")),h=x(a("HPAy")),m=x(a("mrNk")),p=x(a("uuqz")),g=x(a("XbJA")),v=x(a("JL1q")),y=x(a("TKkb")),S=x(a("pl4W")),b=x(a("6trm")),C=x(a("mVqE")),k=x(a("ikRo")),w=x(a("Enau")),T=x(a("d4kU")),E=x(a("FH86")),I=x(a("Zz1c")),D=x(a("eTdC"));function x(e){return e&&e.__esModule?e:{default:e}}var R=function(e){function t(e){(0,l.default)(this,t);var a=(0,r.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.state={layoutActive:!1,settingActive:!1,isClassOverLeave:!1,actived:[],isFullScreen:!1,classBegin:!1,userList:!1,courseware:!1,toolKit:!1,option:!1,chat:!1,help:!1,canDraw:!1,unReadMessages:0,isHasHand:!1,isShowTools:!1,handShow:!1,isCourseMp4Play:!1,nowLayout:void 0,isHasToolBox:!0,isShowDynamicpptStatus:!1,isShowDynamicpptSuccess:!1},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.inittime=0,a.exceptOpts=["fullScreen"],a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){p.default.tool.addFullscreenchange(this.handleFullScreenChange.bind(this));c.default.CoreController.addEventListener("beyondTmplEvent",this.beyondTmplHandler.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("changeSettingBtn",this.handlerChangeSettingBtn.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("userListClose",this.triggerItem.bind(this,"userList","close"),this.listernerBackupid),c.default.CoreController.addEventListener("CoursewareRemove",this.triggerItem.bind(this,"courseware","close"),this.listernerBackupid),c.default.CoreController.addEventListener("colose_holdArr",this.triggerItem.bind(this,"toolKit","close"),this.listernerBackupid),c.default.CoreController.addEventListener("triggerControlPanelRecover",this.triggerItem.bind(this,"option","close"),this.listernerBackupid),c.default.CoreController.addEventListener("closeChatBox",this.triggerItem.bind(this,"chat","close"),this.listernerBackupid),c.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomPubmsg,this.handlePummsg.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomDelmsg,this.handlerRoomDelmsg.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("receive-msglist-ClassBegin",this.classBegin.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("updateAppPermissions_canDraw",this._changeCanDrawPermissions.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("isholdAllShow",this.toolKitShow.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomTextMessage,this.handleMessage.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("isholdAllShow",this.handlerHoldAllShow.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("receiveWhiteboardSDKAction",this.courseMp4Play.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("triggerSwitchLayout",this.beyondTmplHandler.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("receive-msglist-SwitchLayout",this.handleMsgListSwitchLayout.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("togo_layout",this.handlerTogoLayout.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("room-text-message-list",this.handlerRoomTextMessageList.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("hasToolBox",this.handlerHasToolBox.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomUserscreenstateChanged,this.roomUserscreenstateChanged.bind(this),this.listernerBackupid)}},{key:"handlerHasToolBox",value:function(e){var t=e.message.isHasToolBox;this.setState({isHasToolBox:t})}},{key:"handleFullScreenChange",value:function(){this.setState({isFullScreen:p.default.tool.isFullScreenStatus()})}},{key:"roomUserscreenstateChanged",value:function(e){var t=e.message;t&&"screen"===t.type&&(h.default.shareToolsBarShow=!t.published,this.setState({isHasToolBox:h.default.shareToolsBarShow}),t.published||c.default.CoreController.dispatchEvent({type:"colse-holdAll-item",message:{type:"sharing"}}))}},{key:"courseMp4Play",value:function(e){var t=e.message,a=t.action,i=t.cmd,o=void 0===i?{}:i;if("mediaPlayerNotice"===a){var n=!1;o&&o.streamType&&o.type&&(n=!("videoPlayer"!==o.playerType||"media"!==o.streamType&&"file"!==o.streamType||"start"!==o.type&&"play"!==o.type&&"pause"!==o.type)),h.default.isMovieSharePlay&&"videoPlayer"===o.playerType&&(o&&"pause"===o.type?h.default.movieShareStatus=!0:o&&"play"===o.type?h.default.movieShareStatus=!0:o&&"end"===o.type&&(h.default.isMovieSharePlay=!1)),this.setState({isCourseMp4Play:n})}}},{key:"handlerTogoLayout",value:function(e){var t=e.message.nowLayout;"Encompassment"===t?(this.setState({unReadMessages:0,nowLayout:t}),this.state.chat&&this.buttonClick("chat")):this.setState({nowLayout:t})}},{key:"handleMsgListSwitchLayout",value:function(e){"Encompassment"===e.message.nowLayout?this.setState({unReadMessages:0,nowLayout:e.message.nowLayout}):this.setState({nowLayout:e.message.nowLayout})}},{key:"handlerChangeSettingBtn",value:function(){this.setState({settingActive:!1})}},{key:"handlerRoomTextMessageList",value:function(e){var t=e.message;!this.state.chat&&"Encompassment"!==this.state.nowLayout&&Array.isArray(t)&&t.length&&this.setState({unReadMessages:parseInt(this.state.unReadMessages+parseInt(t.length))<99?parseInt(this.state.unReadMessages+parseInt(t.length)):parseInt(this.state.unReadMessages+parseInt(t.length))+"+"})}},{key:"handleMessage",value:function(e){this.state.chat||"Encompassment"===this.state.nowLayout||this.setState({unReadMessages:parseInt(this.state.unReadMessages+1)<99?parseInt(this.state.unReadMessages+1):parseInt(this.state.unReadMessages+1)+"+"})}},{key:"toolKitShow",value:function(e){if(e&&e.message&&e.message.isShowData){var t=e.message.isShowData;(0,o.default)(t).every(function(e){return!1===e.isShow})&&this.setState({toolKit:!1})}}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=this,a=e.message.raisehand;if(null!=a&&(this.setState({isHasHand:!this.state.userList&&a,handShow:!this.state.userList&&a}),a))var i=setTimeout(function(){clearTimeout(i),t.setState({handShow:!1})},3e3)}},{key:"_changeCanDrawPermissions",value:function(){var e=this.getCanDraw();this.setState({canDraw:e})}},{key:"handlePummsg",value:function(e){var t=this,a=e.message;switch(a.name){case"ClassBegin":this.classBegin();break;case"ChatShow":(f.default.hasRole.roleRecord||f.default.hasRole.rolePlayback)&&(this.setState({chat:!0,unReadMessages:0}),c.default.CoreController.dispatchEvent({type:"CloseALLPanel"}),c.default.CoreController.dispatchEvent({type:"beyondTmplEvent",message:{key:"chat"}}));break;case"switchLayout":var i=a.data.nowLayout;"Encompassment"===a.data.nowLayout?this.setState({unReadMessages:0,nowLayout:i,chat:!1}):this.setState({nowLayout:i});break;case"DocumentChange":var o=a.data;if(o&&o.isDynamicPPT){if(1!=+o.notshownow||!o.filedata)return;var n=!+o.filedata.converStatus;this.setState({isShowDynamicpptStatus:!0,isShowDynamicpptSuccess:n});var l=setTimeout(function(){t.setState({isShowDynamicpptStatus:!1,isShowDynamicpptSuccess:!1}),clearTimeout(l)},3e3)}}}},{key:"handlerHoldAllShow",value:function(e){var t=e.message,a=0;for(var i in t.isShowData)t.isShowData[i].isShow&&a++;a>0&&h.default.classBegin&&v.default.handler.getAppPermissions("canDraw")?this.setState({isShowTools:!0}):this.setState({isShowTools:!1})}},{key:"classBegin",value:function(){c.default.CoreController.dispatchEvent({type:"CloseALLPanel"});var e=this.getCanDraw();this.setState({classBegin:!0,canDraw:e})}},{key:"getCanDraw",value:function(){return v.default.handler.getAppPermissions("canDraw")}},{key:"onResize",value:function(e){document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||!1?this.setState({isFullScreen:!0}):this.setState({isFullScreen:!1})}},{key:"_openLoadDetectionDevice",value:function(){this.state.settingActive||c.default.CoreController.dispatchEvent({type:"loadDetectionDevice",message:{check:!1,main:!0,bgImg:!0}}),this.setState({settingActive:!0})}},{key:"_openHelpUrl",value:function(){h.default.isClient?h.default.isClient&&h.default.clientversion>=2018031e3&&m.default.getNativeInterface().clientOpenBrowserUrl&&window.GLOBAL.openUrl(f.default.joinRoomInfo.helpcallbackurl):window.open(f.default.joinRoomInfo.helpcallbackurl)}},{key:"openUrl",value:function(e){h.default.isClient&&m.default.getNativeInterface().clientOpenBrowserUrl(e)}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"ClassBegin":c.default.CoreController.dispatchEvent({type:"CloseALLPanel"}),this.triggerItem("clear");var t=!0;t=!(h.default.classBegin||!h.default.endClassBegin||f.default.hasRole.roleChairman||f.default.joinRoomInfo.isClassOverNotLeave),this.setState({isClassOverLeave:t,classBegin:!1,canDraw:!1});break;case"ChatShow":(f.default.hasRole.roleRecord||f.default.hasRole.rolePlayback)&&(this.setState({chat:!1}),c.default.CoreController.dispatchEvent({type:"CloseALLPanel"}))}}},{key:"buttonClick",value:function(e){switch(e){case"help":return this.state.isFullScreen&&this.setState({isFullScreen:!1}),void this._openHelpUrl();case"fullScreen":return void(this.state.isFullScreen?p.default.tool.exitFullscreen():p.default.tool.launchFullscreen(document.body));case"guide":c.default.CoreController.dispatchEvent({type:"showGuide",message:!0});break;case"setting":this._openLoadDetectionDevice();break;case"chat":c.default.CoreController.dispatchEvent({type:"CloseALLPanel"});var t=(new Date).getTime();t-this.inittime>1e3&&(this.inittime=t,this.setState((0,i.default)({},"chat",!0)));var a=document.getElementById("chatListBox");setTimeout(function(){a.scrollTop=a.scrollHeight});break;case"userList":this.setState({isHasHand:!1});break;case"courseware":this.setState({isShowDynamicpptStatus:!1,isShowDynamicpptSuccess:!1})}c.default.CoreController.dispatchEvent({type:"beyondTmplEvent",message:{key:e}}),"setting"!==e&&this.triggerItem(e)}},{key:"triggerItem",value:function(e,t,a){if(a&&a.type)return this.setState((0,i.default)({},e,!1)),t&&(this.isMoodUserLishPanel=!1,this.isMoodControlPanel=!1,this.setState({chat:!1}),this.setState({isLibraryActive:!1}),this.setState({isHoldAllShow:!1})),void(f.default.hasRole.roleChairman&&h.default.classBegin&&"chat"===e&&g.default.sendChatShow(!0));this.state[e]?(this.setState((0,i.default)({},e,!1)),f.default.hasRole.roleChairman&&h.default.classBegin&&"chat"===e&&g.default.sendChatShow(!0)):("chat"!==e&&this.setState((0,i.default)({},e,!0)),"chat"===e&&this.setState({unReadMessages:0}),f.default.hasRole.roleChairman&&h.default.classBegin&&"chat"===e&&g.default.sendChatShow(!1))}},{key:"beyondTmplHandler",value:function(e){if(e.message){var t=e.message.key;switch("switchLayout"!==t&&this.closeSwitchLayout(),t){case"toolKit":this.togoHoldAll();break;case"userList":this.triggerUserListPanel();break;case"option":this.triggerControlPanel();break;case"switchLayout":this.triggerSwitchLayout();break;case"courseware":this.handlercourseListClick()}}}},{key:"closeSwitchLayout",value:function(){this.setState({layoutActive:!1}),c.default.CoreController.dispatchEvent({type:"triggerSwitchLayout",layoutActive:!1})}},{key:"triggerSwitchLayout",value:function(){this.setState({layoutActive:!this.state.layoutActive}),c.default.CoreController.dispatchEvent({type:"triggerSwitchLayout",layoutActive:!this.state.layoutActive}),c.default.CoreController.dispatchEvent({type:"CloseALLPanel"})}},{key:"togoHoldAll",value:function(){c.default.CoreController.dispatchEvent({type:"CloseALLPanel"});var e=!this.state.isHoldAllShow;c.default.CoreController.dispatchEvent({type:"togo_holdArr",isShow:e}),this.setState({isHoldAllShow:e})}},{key:"triggerUserListPanel",value:function(){this.isMoodUserLishPanel?(c.default.CoreController.dispatchEvent({type:"CloseUserListPanel"}),this.setState({isSincereUserListActive:!1,isNoticeHands:!1}),this.isMoodUserLishPanel=!1):(c.default.CoreController.dispatchEvent({type:"CloseALLPanel"}),c.default.CoreController.dispatchEvent({type:"triggerUserListPanel"}),this.setState({isSincereUserListActive:!0,isNoticeHands:!1}),this.isMoodUserLishPanel=!0)}},{key:"handlercourseListClick",value:function(){this.state.isLibraryActive?(c.default.CoreController.dispatchEvent({type:"CloseLibrary"}),this.setState({isLibraryActive:!1})):(c.default.CoreController.dispatchEvent({type:"CloseALLPanel"}),c.default.CoreController.dispatchEvent({type:"CourseListClick"}),this.setState({isLibraryActive:!0}))}},{key:"triggerControlPanel",value:function(){this.isMoodControlPanel?(c.default.CoreController.dispatchEvent({type:"CloseControlPanel"}),this.setState({isSincereActive:!1}),this.isMoodControlPanel=!1):(c.default.CoreController.dispatchEvent({type:"CloseALLPanel"}),c.default.CoreController.dispatchEvent({type:"triggerControlPanel"}),this.setState({isSincereActive:!0}),this.isMoodControlPanel=!0)}},{key:"render",value:function(){var e=this.state,t=e.settingActive,a=e.layoutActive,i=e.isClassOverLeave,o=e.classBegin,n=e.isFullScreen,l=e.userList,s=e.courseware,r=e.toolKit,d=e.option,c=e.isHasHand,m=e.handShow,p=e.chat,g=e.unReadMessages,x=e.isCourseMp4Play,R=e.nowLayout,_=e.isShowTools,P=e.isShowDynamicpptStatus,A=e.isShowDynamicpptSuccess,L=e.isHasToolBox,B=e.canDraw,M=-1===["OnlyVideo","MainPeople","oneToOneDoubleVideo"].indexOf(R),N=h.default.companyidentify===f.default.COMPANYIDENTIFY.MEETING;return u.default.createElement(u.default.Fragment,null,u.default.createElement("div",{className:"Tk-header-othericon",style:{display:L?"":"none"}},c&&!f.default.hasRole.roleStudent&&m?u.default.createElement("div",{className:"showHand"},h.default.language.languageData.header.system.Raise.hashand):null,i||h.default.playback||f.default.hasRole.roleStudent?null:u.default.createElement(y.default,{userList:l,isHasHand:c,buttonClick:this.buttonClick.bind(this,"userList")}),!i&&!h.default.playback&&v.default.handler.getAppPermissions("loadCoursewarelist")&&M||f.default.hasRole.roleStudent&&!h.default.classBegin&&M||B?u.default.createElement(S.default,{courseware:s,isCourseMp4Play:x,isShowDynamicpptStatus:P,isShowDynamicpptSuccess:A,buttonClick:this.buttonClick.bind(this,"courseware")}):null,i||h.default.playback?null:u.default.createElement(C.default,{isShowTools:_&&M,toolKit:r,classBegin:o,isCourseMp4Play:!x,buttonClick:this.buttonClick.bind(this,"toolKit")}),i||f.default.hasRoomtype.oneToOne||h.default.playback||N?null:u.default.createElement(k.default,{option:d,classBegin:o,buttonClick:this.buttonClick.bind(this,"option")}),h.default.playback?null:u.default.createElement(b.default,{chat:p,buttonClick:this.buttonClick.bind(this,"chat"),isClassOverLeave:i,unReadMessages:g,isEncompassment:"Encompassment"===R}),f.default.hasRole.roleStudent||f.default.hasRole.rolePatrol||h.default.playback?null:u.default.createElement(E.default,{buttonClick:this.buttonClick.bind(this,"switchLayout"),layoutActive:a}),!f.default.joinRoomInfo.helpcallbackurl||i||h.default.playback?null:u.default.createElement(w.default,{buttonClick:this.buttonClick.bind(this,"help")}),f.default.hasRoomtype.oneToOne||h.default.playback||f.default.hasRole.roleStudent||N?null:u.default.createElement(D.default,{buttonClick:this.buttonClick.bind(this,"guide")}),f.default.hasRole.rolePatrol||i||h.default.playback?null:u.default.createElement(T.default,{buttonClick:this.buttonClick.bind(this,"setting"),settingActive:t}),h.default.isClient||h.default.playback?null:u.default.createElement(I.default,{buttonClick:this.buttonClick.bind(this,"fullScreen"),isFullScreen:n})),L?null:u.default.createElement("div",{className:"Tk-header-othericon"},i||h.default.playback||f.default.hasRole.roleStudent?null:u.default.createElement(y.default,{userList:l,isHasHand:c,buttonClick:this.buttonClick.bind(this,"userList")})))}}]),t}(u.default.Component);t.default=R},y1B5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=f(a("Yz+Y")),o=f(a("iCc5")),n=f(a("V7oC")),l=f(a("FYw3")),s=f(a("mRg0")),r=f(a("q1tI")),d=f(a("zrT5")),u=f(a("HPAy")),c=f(a("eQYT"));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isPatrol,a=e.textDisable,i=e.OnSendIMG,o=e.size,n=e.flag,l=e.uploadSuccess,s=e.accept;return r.default.createElement("div",{className:"sendImgBtn"},r.default.createElement("button",{className:"emotionl icon icon-pic",disabled:!!u.default.isLeaveRoom||c.default.hasRole.roleStudent&&(t||a),title:u.default.language.languageData.videoContainer.sendMsg.btn.title.sendImg,onClick:i}),r.default.createElement(d.default,{size:o,flag:n,uploadSuccessCallback:l,accept:s}))}}]),t}(r.default.Component);t.default=h},yAan:function(e,t,a){},yGYm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o,n,l,s,r,d=m(a("SEkw")),u=m(a("JO7F")),c=m(a("iCc5")),f=m(a("V7oC")),h=a("2vnA");m(a("28kM")),m(a("XbJA"));function m(e){return e&&e.__esModule?e:{default:e}}function p(e,t,a,i){a&&(0,d.default)(e,t,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(i):void 0})}function g(e,t,a,i,o){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce(function(a,i){return i(e,t,a)||a},n),o&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(o):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}var v=new(i=function(){function e(){(0,c.default)(this,e),p(this,"canDivided",o,this),p(this,"isGroup",n,this),p(this,"groupId",l,this),p(this,"groupingDocumentId",s,this),p(this,"groupingPage",r,this)}return(0,f.default)(e,[{key:"changeGroup",value:function(e){"boolean"==typeof e&&(this.isGroup=e)}},{key:"updatePatrolGroupId",value:function(e){this.groupId===e?this.groupId="":this.groupId=e}},{key:"changeGroupingDocumentId",value:function(e){this.groupingDocumentId=e||0}},{key:"changeGroupingPage",value:function(e){this.groupingPage=e||1}}]),e}(),o=g(i.prototype,"canDivided",[h.observable],{enumerable:!0,initializer:function(){return!1}}),n=g(i.prototype,"isGroup",[h.observable],{enumerable:!0,initializer:function(){return!1}}),l=g(i.prototype,"groupId",[h.observable],{enumerable:!0,initializer:function(){return""}}),s=g(i.prototype,"groupingDocumentId",[h.observable],{enumerable:!0,initializer:function(){return""}}),r=g(i.prototype,"groupingPage",[h.observable],{enumerable:!0,initializer:function(){return 1}}),g(i.prototype,"changeGroup",[h.action],(0,u.default)(i.prototype,"changeGroup"),i.prototype),g(i.prototype,"updatePatrolGroupId",[h.action],(0,u.default)(i.prototype,"updatePatrolGroupId"),i.prototype),g(i.prototype,"changeGroupingDocumentId",[h.action],(0,u.default)(i.prototype,"changeGroupingDocumentId"),i.prototype),g(i.prototype,"changeGroupingPage",[h.action],(0,u.default)(i.prototype,"changeGroupingPage"),i.prototype),i);t.default=v},yVle:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={login:{language:{joinRoomHint:{text:"Entering the meeting",remind:"This class may be monitored and/or recorded for quality assurance purposes"},preLoad:{text:"Being loaded materials",pass:"Skip "},detection:{company:{text:"Talk Cloud",normal:"Talk Cloud",icoachu:"Coach U"},selectOption:{noCam:"No camera was detected.",noMicrophone:"No microphone was detected.",noEarphones:"No headphones or speaker  was detected."},welAll:{one:"Welcome to use ",two:"Online meeting",three:"In order to ensure better meeting effect, please complete the equipment test first.",four:"Start Testing"},deviceTestHeader:{device:{text:"Device Test"},areaSwitch:{text:"Region Select"},deviceSwitch:{text:"Setting"},optimalServer:{text:"Optimal Server"},areaSelection:{text:"Region Select"},videoinput:{text:"Camera Test"},audioouput:{text:"Speaker Test"},audioinput:{text:"Mic Test"},detectionResult:{text:"Report"},changeScreen:{text:"double screen"},MainMinorChange:{text:"change screen"},systemInfo:{text:"System info"}},networkExtend:{title:{select:"Select",area:"Region",delay:"Delay",text:"Please choose the nearest server"},testBtn:"Server delay test"},videoinputExtend:{cameraOptionAll:{cameraOption:{text:"Camera"},noticeRed:{text:'Notice: Select "Forbid" may disable the camera.'}},noticeCarmera:{one:"Tips:If you can not see the video, you can check as follows:",two:'1.Select "Allow" when an anti-virus software pops up a message.',three:"2.Make sure that the camera has been connected and activated.",four:"3.If the camera does not work, please plug off and plug into another slot.",five:'4.Please select the correct camera.Select "Forbid" may disable the it.',six:"5.Make sure the camera is not  occupied by other programs.",seven:"6.Restart Computer."}},audioouputExtend:{cameraOptionAll:{cameraOption:{text:"Speaker"},earphoneVolume:{text:"Volume"},clickmusic:{one:"Click the play button, can you hear the music?"},playMusic:"Play Music"},noticeCarmera:{one:"Tips: If you can not hear the music, please check as follows:",two:'1.Select "Allow" when an anti-virus software pops up a reminder.',three:"2.Make Sure that the earphone and  the speaker have been connected and activateed.",four:"3.Make sure that the volume of earphone and speaker is at maximum level.",five:'4.Please select the correct earphone and the speaker. Select "Forbid" may disable the them.',six:"5.If the earphone and the speaker do not work, please plug them off and plug them into anthor slot.",seven:"6.Restart Computer."}},audioinputExtend:{cameraOptionAll:{cameraOption:{text:"Microphone"},noticeRed:{text:'Please select the correct microphone. Select "Forbid" may disable it.'},speakSound:{text:"Count from 1 to 10, Can you hear your voice and see the green bar rolling."}},noticeCarmera:{one:"Tips: If you fail to see the green rolling signs, pleack check as follows:",two:'1.Select "Allow" when an anti-virus software pops up a reminder.',three:"2.Make sure that the micorphone has been connected.",four:"3.Make sure that microphone has been plugged in and the volume is at maximum level.",five:'4.Please select the correct microphone. Select "Forbid" may disable the device.',six:"5.If there is no sound from the microphone, please plug off and plug it in to anther slot.",seven:"6.Restart Computer."}},systemInfo:{currentUser:"Current user:",operatingSystem:"Operating system:",processor:"Processor:",RAM:"RAM:",serverName:"Server name:",IPAddress:"IP Address:",LoginDevice:"Login device:",MediaServer:"Media server",CoursewareServer:"Materials server",networkDelay:"Network delay:",packetLoss:"Packet loss:",browser:"Browser:",uploadSpeed:"Upload speed:",downloadSpeed:"Download speed:",roomNumber:"Conference ID:",versionNumber:"Version number:"},CoursewareServer:{TkServer:"Talk-cloud CDN Server",DocServer:"CDN Server"},resultExtend:{head:{text:"Detection complete"},item1:{text:"Test items"},item2:{text:"Test reports",content:{abnormal:"Abnormal",normal:"Normal"}},item3:{text:"Detection details",content:{video:"No camera equipment was detected",listen:"You have choosen 'Do not hear the sound'",speak:"You have choosen 'Do not see the fluctuation'"}},item4:{content:{video:"Can see the video",listen:"Can hear the audio ",speak:"Can see the microphone work"}}},button:{next:{text:"Next"},join:{text:"Join"},ok:{text:"OK"},startNetworkTest:{text:"Start network test"},canSee:{text:"See"},notSee:{text:"Can't See"},canListen:{text:"Hear"},notListen:{text:"Can't Hear"},canSpeak:{text:"Fluctuations"},notSpeak:{text:"No fluctuations"},checkBack:{text:"Check again"},joinRoom:{text:"Join Conference"}},mirrorMode:{text:"Mirror mode"}}}},header:{tool:{allMute:{title:{yes:"All Microphones On",no:"All Microphones Off"}},capture:{title:{all:"Screenshot",small:"Hide the classroom window when Screenshot"}},qrCode:{title:{yes:"Upload picture by QR code"}},allGift:{title:{yes:"Award Trophy",giftText:"Award Trophy to all"}},blackBoard:{title:{open:"Small Whiteboard",close:"Close",prev:"Previous",next:"Next",shrink:"Shrink"},content:{blackboardHeadTitle:"Small Whiteboard"},toolBtn:{dispenseed:"Send",recycle:"Take Back",againDispenseed:"Send Again",commonTeacher:"moderator"},tip:{saveImage:"Save Image"},boardTool:{pen:"Pen",text:"Text Input",eraser:"Eraser",color:"Colors and Thickness"},upload:{localUpload:"",scanCodeUpload:""}},sharing:{title:"Sharing"},mouse:{title:"Mouse"},pencil:{title:"Pen",pen:{text:"Pencil"},Highlighter:{text:"Highlighter"},linellae:{text:"Line"},arrow:{text:"Arrow"},laser:{title:"Laser pen",text:"Laser pen"}},text:{title:"Text Input",Msyh:{text:"Microsoft YaHei"},Ming:{text:"SimSun"},Arial:{text:"Arial"}},shape:{title:"Shape",outlinedRectangle:{text:"Square"},filledRectangle:{text:"Solid Square"},outlinedCircle:{text:"Circle"},filledCircle:{text:"Solid Circle"}},eraser:{title:"Eraser"},undo:{title:"Undo"},redo:{title:"Recover"},clear:{title:" Clear Screen"},tool_zoom_big:{title:"Zoom In"},tool_zoom_small:{title:"Zoom Out"},VideoCapture:{title:"Video screenshot"}},page:{prev:{text:"Previous Page"},next:{text:"Next Page"},add:{text:"Add Page"},lcFullBtn:{title:"Full Screen of Drawing Area"},pptFullBtn:{title:"Full Screen of PPT"},h5FileFullBtn:{title:"Full Screen of materials"},skipPage:{text_one:"To ",text_two:" pages"},ok:{text:"Confirm"},coursewareRemarks:{title:"Materials Remarks"}},system:{attend:{text:"Start meeting"},oneToOneFinsh:{text:"Finish meeting"},Raise:{hashand:"someone hands up",text:"Raise Hand",noText:"Cancel your hands",yesText:"Raise hands",raisingHand:"Raising hand"},finish:{text:"Finish meeting"},gift:{text:"Award Trophy to All"},muteAll:{text:"Students' Microphone Off"},help:{title:"Help"},network:{title:"Select Server",extend:{ChinaTelecom:"China Telecom",ChinaUnicom:"China Unicom",ChinaMobile:"China Mobile",InternationalNetwork:"International Network",ChinaSouthernTelecom:"China Southern Telecom"}},setting:{title:"Setting"}},volume:{title:"Volume"}},toolContainer:{toolIcon:{whiteBoard:{title:"Whiteboard"},courseList:{title:"Materials list"},classFolder:{title:"Conference documentation"},adminFolders:{title:"public files"},documentList:{title:"Material Library",titleTop:"Materials list",titleSort:"Sort",button:{addCourse:{text:" + Add materials"},fileName:{text:"Name"},fileType:{text:"Type"},uploadTime:{text:"Time"},search:{name:"Search",text:"Enter search content"},close:{text:"Close"}}},H5DocumentList:{title:"Material Library",titleTop:"Materials list",button:{addCourse:{text:" + Add a H5 "}}},relationCourse:{title:"Bind file",button:{addCourse:{text:"Bind file"},pervPage:"Next",nextPage:"Previous",relation:"Bind file",loadMore:"Loading more"}},mediaDocumentList:{title:"Media",titleTop:"Media List",button:{addCourse:{text:" + Add a Media File"}}},moviesSharing:{title:"Media Sharing"},resourceLibrary:{title:"Material Library"},message:{title:"message"},full:{title:"Full Screen"},fullOff:{title:"Exit full screen"},overallControl:{title:"Global Control"},screenSharing:{title:"Screen Sharing"},messageList:{title:"Message List"},addDocument:{title:"Add a Meida File"},userList:{title:"Users list",thead:{facility:"Device",nick:"Nickname",platform:"Onstage",camera:"Camera",microphone:"Microphone",draw:"Draw",raise:"Raise",mute:"Mute",remove:"Kick Out"},button:{Scrawl:{on:{title:"Draw"},off:{title:"No Drawing"}},answered:{on:{title:"Answered"},off:{title:"No Answered"}},video:{on:{title:"Video On"},off:{title:"Video Off"},disabled:{title:"Video disabled"}},update:{up:{title:"Speaking"},down:{title:"Not speaking"}},audio:{on:{title:"Microphone On"},off:{title:"Microphone Off"},disabled:{title:"Microphone disabled"}},mute:{on:{title:"Banned On"},off:{title:"Banned OFF"},patrol:{on:{title:""},off:{title:""}}},remove:{title:"Kick Out"}},input:{text:"Check the network"},userStatus:{assistant:{text:"Participants"},student:{text:"Participants"}},groupModeStatus:{groupMode:{text:""},normalMode:{text:"conference pattern"}}},disableVideo:{yes:"Video On",no:"Disable Video"},disableAudio:{yes:"Audio On",no:"Disable Audio"},setting:{title:"Setting"},help:{title:"Help"},guide:{title:"Newbie Guide"},seekHelp:{title:"Seek Help"},FileConversion:{text:"File Conversion"}}},videoContainer:{videoIcon:{camera:{title:"Camera"},microphone:{title:"Microphone"}},sendMsg:{inputText:{placeholder:"Press button Enter to send message.",patrolPlaceholder:"You can't send a message on a cruise.",frequently:"Messages are sent too frequently.Please try later"},btn:{title:{banChat:"Chat Banned",allChat:"Allow Chat",sendImg:"Send Picture",sendEmotion:"Send Emotion"}},repeatSpeak:{text:"Not flood the screen here"},sendBtn:{text:"Send",title:"Send Message"},tap:{chat:"Message",question:"Quiz",users:"Users' list",doc:"WhiteBoard",refresh:"Refresh"},tips:{online:"Online",goback:"Back",pics:" Person(s) ",private:"Chat privately",teacher:"moderator",assistant:"Participants",student:"Participants",patrol:"patrol",me:"Me",join:"Join the conference!",leave:"Leave the meeting!",beforeClass:"The meeting hasn't started yet",afterClass:"The meeting has ended.",whiteBoard:"Haven't started meeting, no display content",openAllBans:"Open all bans",closeAllBans:"Cancellation of all bans"},filter:{quizobj:"Just ask the moderator",seeQuiz:"Only mine visible",seeChat:"Only look at the  moderator's chat",seeAnswer:"Only mine visible"},fontSize:{fontSize14:"Normal",fontSize16:"Medium",fontSize18:"Large",fontSize22:"Largest"}},download:{downloadFile:{title:"Download"},downloadFailMessage:{title:"Download Failed"}}},otherVideoContainer:{videoIcon:{microphone:{title:"Microphone"},userPen:{title:"Operation"}},button:{scrawl:{yes:"Operation",no:"No Operation"},platform:{yes:"Start speaking",no:"Stop speaking"},audio:{yes:"Microphone On",no:"Microphone Off "},video:{yes:"Video On",no:"Video Off "},gift:{yes:"Award Trophy",no:"Deduct trophy"},close:{yes:"Close"},restoreDrag:{text:"Restore Position"},allMute:{yes:"All Microphone Off"},videoStatusChairman:{yes:"Video On",no:"Video Off",text:"Video Off"},audioStatusChairman:{yes:"Microphone On",no:"Microphone Off",text:"Microphone Off"},areaExchange:{text:"Area Exchange"},oneKeyReset:{text:"Restore All"},doubleDivision:{text:"Video Switch"},onlyAudio:{no:"Audio conference",yes:"Video conference",create:"Whether to switch to audio interactive meeting mode",cancel:"Whether to switch to video interactive meeting mode"},pointerReminder:{text:"poninter reminder"}},prompt:{text:"The user presses the home button",userText:"user pressed home button"}},alertWin:{login:{register:{eventListener:{roomDelClassBegin:{text:"The meeting has ended."},participantEvicted:{roleConflict:{text:"User of the same identity has entered the room. You are blocked."},kick:{text:"You have been asked out of the room by the host!"},noJoin:{text:"You have been kicked out of the conference,please try again after three minutes!"}}}},func:{checkMeeting:{status_minus_1:{text:"Failed to get room information!"},status_3001:{text:"Server has expired!"},status_3002:{text:"Account of the company has expired."},status_3003:{text:"The room on line not exist or has expired."},status_4007:{text:"The room doesn't exist!"},status_4008:{text:"Wrong Password."},status_4110:{text:"The room needs password, please enter the password!"},status_4109:{text:"Authentication Failed"},status_4103:{text:"The number of participants has exceeded limit."},status_4112:{text:"Enterprise point has exceeded limit!"},status_4113:{text:"The balance of the package is insufficient. Please contact the administrator to recharge it."},status_defalut:{text:"Failed to get room information!"}}}},call:{prompt:{chat:{literally:{yes:{text:"You are allowed to scrawl now."},no:{text:"You are not allowed to scrawl now."}}},publishStatus:{stream:{yes_status_3:{text:"Your screen video is on now. "},no_status_0:{text:"Your screen video is off now."},yes_status_0_to_2:{text:"Your screen video is on now. But audio is off and you can press the raising-hand button if you have any questions."},yes_status_3_to_2:{text:"Audio is off and you can press the raising-hand button if you have any questions."},videooff:{text:"Your video is off."},audiooff:{text:"Microphone is off and you can press the raising-hand button if you have any questions."},audioon:{text:"Microphone is on and you can speak now"},videoon:{text:"Your video is on."},allon:{text:"Your video and microphone are all on."},alloff:{text:"Your video and microphone are all off."},speakoff:{text:"You have been banned for speaking."},speakon:{text:"You have been allowed to speaking."}},download:{success:{text:"Download successful!"},failed:{text:"Download failed!"}},allMute:{yes:{text:"All Microphone Off Now"},no:{text:"All Microphone On Now"}}},joinRoom:{stream:{join:{text:"Join the conference!"},leave:{text:"Leave the room"}}},allSilence:{yes:{text:"All prohibition to chat"},no:{text:"All permission to chat"}},homeBtnRemind:{join:{text:"Back to normal mode"},leave:{text:"Background mode"},userBackgroundMode:{text:"The user's application is in the background and cannot be staged"}},streamConnectFailed:{onceSuccessed:{text:"Network exception, check the network environment and re-enter"},notSuccess:{text:"We detected that your network do not support udp. Please contact your network administrator to turn off the firewall of udp."}},remoteStreamFailure:{udpNotOnceSuccess:{one:"Due to the firewall intervention,the user(",two:") is unable to carry out UDP connection with the server.  Opening video failed."},udpMidwayDisconnected:{one:"Anomalous UDP communication occurs between the user(",two:") and the server. Opening video failed."},publishvideoFailure_notOverrun:{one:"User",two:"Anomaly in server connection. Presence failed."},publishvideoFailure_overrun:{one:"The number of speakers in the room exceeded the limi."},mobileHome:{one:"Participants",two:"is running at back-end.  Presence failed."}}},fun:{uploadCourseFile:{fileTypeError:{text:{one:"The file type'.",two:"'is not supported"}},fileSizeError:{text:{one:"File size exceeds limit, file size cannot exceed "}},fileUpload:{success:{text:"The file has been uploaded successfully.the file name is '"},failureCode:{text:"Error code"},failureNegativeOne:{text:"File conversion failure"},failureNegativeTwo:{text:"Upload Failed"},failureNegativeThree:{text:"Upload file location error"},failureNegativeFour:{text:"This type of file is not supported"},failureNegativeSeven:{text:"The room does not exist or has been deleted!"},failureNegativeEight:{text:"The conference room does not belong to the company"},failureNegativeTen:{text:"Pages of material exceeds limit!"},failureFhree:{text:"Cloud storage failed"},failureFour:{text:"Error: file index.html missed"}}},deleteCourseFile:{fileDelete:{failure:{text:"Deletion Failed"}},isDel:"Are you sure you want to delete it?"},page:{pageInteger:{text:"The page number inputted must be integers."},pageMax:{text:"The page number inputted not exceed the maximum!"},pageMin:{text:"The page number entered can't be less than 1."}},UnreadMessage:{text:"Unread message"}}},ok:{showError:{text:"Confirm"},showPrompt:{text:"Confirm"},showConfirm:{cancel:"Cancel",ok:"Confirm"}},title:{showError:{text:"Error Message"},showPrompt:{text:"Prompt Message"},showConfirm:{text:"Confirmation Messages"}},settingWin:{settingTitle:{text:"Setting"},default:{text:"Default"},communications:{text:"Communications"},settingOk:{text:"Apply"},settingClose:{text:"Cancel"},videoInput:{text:"Video Equipment"},audioInput:{text:"Audio Input Equipment"},audioOutput:{text:"Audio Output Equipment"}},messageWin:{title:{closeWindow:{text:"Message Conformation Box"},classBeginEnd:{text:"Ending Conference Reminder"},allGift:{text:"Sending Message Reminder"}},winMessageText:{closeWindow:{ok:{text:"Shutting down the system?"}},classBeginEnd:{text:"Are you sure you want to finish conference?"},removeStudent:{text:"are you sure to kick this member off?"},classBeginEndLocalRecord:{text:"The recording will be stopped after conference. The storage address of the recording file is as follows:"},classBeginStartNotSelectRecord:{text:"Do not start recording automatically and start meeting"},aloneGift:{before:"Are you sure to award trophies to ",after:"Send participants rewards?"},allGift:{one:"Are you sure to",two:"Award trophies to ",three:"all visible students?"}},messageOk:{text:"Confirm"},messageClose:{text:"Cancel"}}},remind:{time:{readyStart:{one:"The conference will start after",two:" minutes,Please get ready."},timeoutStart:{one:"You are ",two:" minute late already. Seize the time!"},endNotBegin:{one:"The meeting is over. You  have missed it."},readyEnd:{one:"There are ",two:"minutes to finish class. Be reminded."},timeoutReadyEnd:{one:"Your class is",two:"minutes overtime now. This  meeting will end automatically in",three:"minutes."},timeoutEnd:{one:"This  conference room is about to shut down. (",two:")"},endBegin:{one:"The conference room has been finished."},readyEndAiBanMa:{one:"minutes to the end of the conference.",two:"seconds to the end of the conference.",three:"Please arrange the time",four:"Exceed the end of the conference !"}},button:{remindKnow:{text:"I got it."},raise:{yes:"Agree",no:"Disagree"}},raise:{content:{text:"A hand is raised!"}}},networkStatus:{rtt:{title:{text:"Network delay"}},packetsLost:{title:{text:"Packet loss"}},network:{title:{text:"Network state"},value:{excellent:"Excellent",well:"Good",general:"General",suck:"Bad"}}},toolCase:{toolBox:{text:"ToolBox"}},qrCode:{scan:{text:"Scan to upload"},attention:{text:"Please do not close"}},timers:{timerSetInterval:{text:"timer"},timerBegin:{text:"Start"},timerStop:{text:"Pause"},again:{text:"Restart"},startNowBtn:{text:"Start the time"}},dial:{turntable:{text:"Turntable"}},answers:{headerTopLeft:{text:"Answer"},headerMiddel:{text:"Set the right choice"},beginAnswer:{text:"Start Answer"},tureAccuracy:{text:"Accuracy"},add:{text:"Add Answer"},reduce:{text:"Reduce Answer"},people:{text:"People"},trueAnswer:{text:"The right answer"},endAnswer:{text:"End of the answer"},restarting:{text:"Restart"},myAnswer:{text:"My Answer"},changeAnswer:{text:"Modify the Answer"},selectAnswer:{text:"Please select at least one answer"},submitAnswer:{text:"Submit the answer"},numberOfAnswer:{text:"Number of answer"},PublishTheAnswer:{text:"Publish the answer"},published:{text:"Published"},details:{text:"Details"},statistics:{text:"Statistics"},student:{text:"Participants"},TheSelectedTheAnswer:{text:"The selections"},AnswerTime:{text:"Answer Time"},end:{text:"Please finish your questions first"},selectedAnswer:{text:"Selected answer"}},responder:{responder:{text:"Responder"},begin:{text:"Start"},restart:{text:"Restart"},clickTitle:{text:"Click button to start"},somebodyTeacher:{text:"Someone Snatched"},my:{text:"Congratulations,It's your turn"},other:{text:"Be Snatched"},inAnswerTitle:{text:"Is answering"},inAnswerBtn:{text:"Is answering"},inAnswerStudent:{text:"Ready to snatch"},noContest:{text:"Nobody to snatch"},noStart:{text:"Not started"}},shares:{shareSceen:{text:"Desktop Sharing"},stopShare:{text:"Stop Share"},shareing:{text0:"Program sharing is being carried out......",text1:"Regional Sharing is being carried out......",text2:"Desktop sharing is being carried out......"},sharingMode:{text:"Please select the sharing mode"},programmShare:{text:"Programm sharing"},shareArea:{text:"Area sharing"},startSharing:{text:"Start sharing"},selectProgramm:{text:"Please select the program you want to share"},programmShareArea:{text:"* The blue box is a shared area"},screenWidthTip:{text:"Your current resolution is greater than 1080P. You should choose region sharing."}},layoutInfo:{layout:"layout",CoursewareDown:"Video set-top",VideoDown:"Video down",Encompassment:"Video around",Bilateral:"Teacher priority",MainPeople:"Main Video",OnlyVideo:"Free Video",oneToOne:"Default Layout",doubleDivision:"Double Layout",doubleVideo:"Video Layout",synStudent:"Synchronous participants"},phoneBroadcast:{chat:{face:{naughty:"Naughty",happy:"Happy",complacent:"Complacent",curlOnesLips:"Curl ones lips",grieved:"Grieved",shedTears:"shed tears",kiss:"kiss",love:"Kisses and hugs"}}},getUserMedia:{accessAccepted:{getUserMediaFailure_reGetAudio:"The system detects that your video is not successful, please check whether the camera device is loose or occupied by other programs.",getUserMediaFailure_reGetVideo:"The system detects that your audio is not successful, please check whether the microphone device is loose or occupied by other programs."},accessDenied:{streamFail:"Access to audio / video failure, please check the system camera / microphone device settings, or exit antivirus software.",notAudioAndVideo:"The system cannot find your camera / microphone device.Please check if the cables are correctly connected or occupied by other programs."},deviceError:"The system can't get the hardware information. Please restart the computer."},version:{clientDeviceVersionInfo:{key:"The client device used:",client:"pc_client",pc:"pc_web",mobile:"mobile_web"},browserVersionInfo:{webpageApp:"Browser:",mobileApp:"Operation system:"},appVersionInfo:{key:"Version:"},ipInfo:{key:"IP Address"}},notice:{content:"content",href:"href",publish:"publish",cancel:"cancel"},loadSupernatantPrompt:{reconnecting:"Network has a jitter. Trying to restore for you.",loadRooming:"Connecting to conference room",loadRoomingPlayback:"Obtaining replay content",refreshing:"Please later, assistant is helping you to login again."},remoteControl:{remoteTitle:"Remote Control",refresh:"Force Refresh",deviceManagement:"Device Control",optimalServer:"Optimal server",kick:"Kicked out of the conference room",getDocAddress:"Materials server",line1:"Talk-cloud CDN Server",line2:"CDN Server"},localRecord:{recordState:{notStart:"Local Recording",recording:"In Recording",recordPaused:"Paused"},title:{notStart:"Start Recording",recording:"Stop Recording",recordPaused:"Pause Recording",recordPlay:"Restore Recording"}},coursewareRemarks:{remarks:"remarks",close:"close"},videLabel:{exit:"Drop out"},captureImg:{StartUploading:"Capture the image to start uploading",UploadSuccess:"The image of the screenshot is uploaded",uploadFailed:"The upload failed due to a network problem",SaveSuccess:"Screen shot is successfully stored in "},moreUser:{text:"Under current sceneonly onstage  participants can use little whiteboard !"},reloadDoucumentHint:{one:"The network is unstable , Trying to reopen the courseware ...",two:""},qPanel:{answerPanel:"Answer Panel",tips:["Click on the letter to preset the correct answer","Please Chose Option"],addOption:"Add",delOption:"Delete",start:"Release",end:"End",restart:"Restart",rightOptionIs:"The Right Option is",hasPub:"Published",answerNum:"Answer Number",people:"People",commitAnswer:"Commit",modifyAnswer:"Modify",detail:"Detail",statistics:"Statistics",useTime:"Use Time",choseAnswer:"Chose Answer",myAnswer:"My Answer",pubResult:"Publish Result",loading:"No Data"},whiteboardSetSize:{lineWidth:"Line width",eraserWidth:"Eraser size",textWidth:"Text size"},fontSize:{number:"Number"}}},yXoj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(a("GQeE")),o=u(a("EJiy")),n=u(a("iCc5")),l=u(a("V7oC")),s=(u(a("uuqz")),u(a("HPAy"))),r=(u(a("eQYT")),u(a("aJKe"))),d=u(a("XGlV"));function u(e){return e&&e.__esModule?e:{default:e}}var c=new(function(){function e(){(0,n.default)(this,e)}return(0,l.default)(e,[{key:"updateSystemStyleJsonValueByInnerKey",value:function(e,t,a){if(e&&t&&s.default.systemStyleJson[e]&&s.default.systemStyleJson[e][t]){var i={},o={};o[t]=a,i[e]=o,d.default.updateSystemStyleJson(i),r.default.CoreController.dispatchEvent({type:"updateSystemStyleJson"})}}},{key:"updateSystemStyleJson",value:function(e,t){e&&t&&"object"===(void 0===t?"undefined":(0,o.default)(t))&&s.default.systemStyleJson[e]&&(s.default.systemStyleJson[e]=t,d.default.updateSystemStyleJson(),r.default.CoreController.dispatchEvent({type:"updateSystemStyleJson"}))}},{key:"initSystemStyleJson",value:function(){d.default.loadSystemStyleJson(),r.default.CoreController.dispatchEvent({type:"initSystemStyleJson"})}},{key:"refreshSystemStyleJson",value:function(){s.default.systemStyleJson&&"object"===(0,o.default)(s.default.systemStyleJson)&&(0,i.default)(s.default.systemStyleJson).length>0?(d.default.updateSystemStyleJson(),r.default.CoreController.dispatchEvent({type:"updateSystemStyleJson"})):(d.default.loadSystemStyleJson(),r.default.CoreController.dispatchEvent({type:"initSystemStyleJson"}))}}]),e}());t.default=c},yfjp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(a("C/fv")),o=l(a("cruE")),n=l(a("DnfC"));function l(e){return e&&e.__esModule?e:{default:e}}t.default={Checkbox:i.default,Button:o.default,Input:n.default}},yiyr:function(e,t,a){},ylj9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(a("q1tI")),o=n(a("HPAy"));function n(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t,a,n,l,s=e.parentState,r=e.dispose,d=e.pageDict,u=(s.studentNum,s.result),c=s.ansTime,f=s.resultNum;return i.default.createElement("div",{className:"statistics",style:{display:s.page.index===d.statistics?"":"none"}},i.default.createElement("div",{className:"statistics-header"},i.default.createElement("span",{className:"num item"},o.default.language.languageData.qPanel.answerNum,":",f,o.default.language.languageData.qPanel.people),i.default.createElement("span",{className:"time item"},o.default.language.languageData.qPanel.useTime,":",(t=c,a=Number(t%60),n=Math.floor(t/60),((l=Math.floor(t/3600))>9&&l||"0"+l)+":"+(n>9&&n||"0"+n)+":"+(a>9&&a||"0"+a))),i.default.createElement("span",{className:"cut item",onClick:function(){r({action:"changeDetailOrStatistics",data:{}})}},o.default.language.languageData.qPanel.detail,i.default.createElement("span",{className:"icon icon-right"})," ")),i.default.createElement("div",{className:(u.length>4?"double ":"")+"statistics-wrap"},u.map(function(e,t){return i.default.createElement("div",{className:"statistics-item",key:t},i.default.createElement("span",{className:"op op-"+t},String.fromCharCode("A".charCodeAt()+t)),i.default.createElement("span",{className:"total"},i.default.createElement("span",{className:"process",style:{width:Number(e)/Number(f)*100+"%"}})),i.default.createElement("span",{className:"num"},e,o.default.language.languageData.qPanel.people))})))}},yu6M:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(a("q1tI")),o=n(a("fZQK"));function n(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.videoList,a=e.rowWidth;return i.default.createElement("div",{className:"view_row_item",style:{width:a}},t.map(function(e,t){return i.default.createElement(o.default,{key:e.id,clientWidth:e.clientWidth,clientHeight:e.clientHeight,videoId:e.id,stream:e.stream,videoDumbClassName:"hvideo",hasDragJurisdiction:!1,videoClassName:e.isTeacher?" video-chairman-wrap ":" video-student-wrap "})}))}},yvTm:function(e,t,a){},yzql:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(a("EJiy")),o=f(a("gDS+")),n=f(a("iCc5")),l=f(a("V7oC")),s=f(a("HPAy")),r=f(a("mrNk")),d=f(a("JL1q")),u=f(a("eQYT")),c=f(a("yGYm"));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(){(0,n.default)(this,e)}return(0,l.default)(e,[{key:"pubMsg",value:function(e,t,a,n,l,u,c,f){if("ShowPage"===e){var h=!1;"string"==typeof n?(n=JSON.parse(n),h=!0):n=n,n&&n.filedata&&n.filedata.baseurl&&delete n.filedata.baseurl,h&&(n=(0,o.default)(n))}if(d.default.handler.getAppPermissions("pubMsg")&&s.default.appConnected){a=a||"__all";var m=!l;n&&"object"===(void 0===n?"undefined":(0,i.default)(n))&&!Array.isArray(n)&&(n=(0,o.default)(n)),"isGroup"!==e&&"ClassBegin"!==e&&(a=this.changeToId(a||"__all"));var p={msgName:e,msgId:t,toId:a,data:n,save:m,expiresabs:u,associatedMsgID:c,associatedUserID:f,expires:void 0,type:void 0,write2DB:void 0,actions:void 0,do_not_replace:void 0};r.default.getTkRoom().pubMsg(p)}}},{key:"delMsg",value:function(e,t,a,n){if(d.default.handler.getAppPermissions("delMsg")&&s.default.appConnected){a=a||"__all",n&&"object"===(void 0===n?"undefined":(0,i.default)(n))&&!Array.isArray(n)&&(n=(0,o.default)(n)),"isGroup"!==e&&"ClassBegin"!==e&&(a=this.changeToId(a||"__all"));var l={msgName:e,msgId:t,toId:a,data:n};r.default.getTkRoom().delMsg(l)}}},{key:"setProperty",value:function(e,t,a){if(d.default.handler.getAppPermissions("setProperty")&&s.default.appConnected){if(t=u.default.hasRole.roleTeachingAssistant||u.default.hasRole.roleChairman?t||"__all":this.changeToId(t||"__all"),void 0!==a.publishstate&&e!==r.default.getTkRoom().getMySelf().id){var i={socure:"setProperty",logType:"setProperty",myUserId:r.default.getTkRoom().getMySelf().id,userId:e,properties:a};L.Logger.info("Bug Log:",(0,o.default)(i)),(u.default.hasRole.roleChairman||u.default.hasRole.roleTeachingAssistant)&&this.sendLogToServer(i)}r.default.getTkRoom().changeUserProperty(e,t,a)}}},{key:"setParticipantPropertyToAll",value:function(e,t,a){if(d.default.handler.getAppPermissions("setParticipantPropertyToAll")&&s.default.appConnected){var i=a||"__all";if(!s.default.HeightConcurrence)if(!r.default.getTkRoom().getUser(e))return void L.Logger.error("user is not exist  , user id is "+e+"!");this.setProperty(e,i,t)}}},{key:"setParticipantPropertyToAllByoRole",value:function(e,t,a){if(d.default.handler.getAppPermissions("setParticipantPropertyToAllByoRole")&&s.default.appConnected){var i=this.changeToId(a||TK.MSG_TO_ALLUSER);r.default.getTkRoom().changeUserPropertyByRole(e,i,t)}}},{key:"sendSignallingDataToParticipant",value:function(e,t,a,i,o,n,l,r,u){if(d.default.handler.getAppPermissions("sendSignallingDataToParticipant")){c.default.isGroup&&"RoomStart"!==t&&"ClassBegin"!==t&&"isGroup"!==t&&(a=a+"_"+s.default.myGroup),e?this.delMsg(t,a,i,o):(r||"VideoWhiteboard"===t||"ClassBegin"===t||(r="ClassBegin"),this.pubMsg(t,a,i,o,n,l,r,u))}}},{key:"delmsgTo__AllAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"__none";if(d.default.handler.getAppPermissions("delmsgTo__AllAll")){var t=this,a="__AllAll",i="__AllAll",o={};t.delMsg(a,i,e,o)}}},{key:"sendTextMessage",value:function(e,t){var a,o;if(d.default.handler.getAppPermissions("sendTextMessage")&&(s.default.appConnected&&e)){t=t||"__all","string"==typeof e&&(e=L.Utils.toJsonParse(e));var n=void 0;e&&"object"===(void 0===e?"undefined":(0,i.default)(e))&&(a=e.msg,o={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'},n=a.replace(/&(lt|gt|nbsp|amp|quot);/gi,function(e,t){return o[t]}),delete e.msg),r.default.getTkRoom().sendMessage(n,t,e)}}},{key:"sendMiniWhiteBoardImgMessage",value:function(e,t){if(s.default.appConnected&&e){t=t||"__all","string"==typeof e&&(e=L.Utils.toJsonParse(e));var a={msgName:"MiniBlackBoard_upload",msgId:"MiniBlackBoard_upload",toId:t,data:{swfpath:e.swfpath},save:!0,fromID:r.default.getTkRoom().getMySelf().id,expiresabs:"",associatedMsgID:"ClassBegin",expires:void 0,type:void 0,write2DB:void 0,actions:void 0,do_not_replace:void 0};r.default.getTkRoom().pubMsg(a)}}},{key:"sendMiniWhiteBoardShowPage",value:function(e,t){if(s.default.appConnected&&e){t=t||"__all","string"==typeof e&&(e=L.Utils.toJsonParse(e));var a={msgName:"ShowPage_extendWhiteBoard",msgId:"DocumentFilePage_ShowPage_extendWhiteBoard",toId:t,data:e.data,save:!0,fromID:r.default.getTkRoom().getMySelf().id,expiresabs:"",associatedMsgID:"ClassBegin",expires:void 0,type:void 0,write2DB:void 0,actions:void 0,do_not_replace:void 0};r.default.getTkRoom().pubMsg(a)}}},{key:"sendDelMiniWhiteBoardShowPage",value:function(e){var t=e||"__all";this.delMsg("ShowPage_extendWhiteBoard","DocumentFilePage_ShowPage_extendWhiteBoard",t,{})}},{key:"sendDelMiniWhiteBoardImgMessage",value:function(e){var t=e||"__all";this.delMsg("MiniBlackBoard_upload","MiniBlackBoard_upload",t,{})}},{key:"sendLogToServer",value:function(e){var t={sosure:"PC_H5",data:e},a={msgName:"Log",msgId:"TKLOG",toId:"__none",data:(0,o.default)(t),save:!1};r.default.getTkRoom().pubMsg(a)}},{key:"changeToId",value:function(e){if(!c.default.isGroup)return e;return"__all"!==e&&e?"__allExceptSender"===e?"__groupExceptSender:"+s.default.myGroup:e:"__group:"+s.default.myGroup}}]),e}();t.default=h},z3Fu:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=p(a("GQeE")),o=p(a("FyfS")),n=p(a("Yz+Y")),l=p(a("iCc5")),s=p(a("V7oC")),r=p(a("FYw3")),d=p(a("mRg0")),u=p(a("q1tI")),c=p(a("aJKe")),f=p(a("eQYT")),h=p(a("HPAy")),m=p(a("mrNk"));function p(e){return e&&e.__esModule?e:{default:e}}a("0oMa"),a("JgAh");var g=function(e){function t(e){(0,l.default)(this,t);var a=(0,r.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.giftAnimationElement=void 0,a.giftAnimationJson={},a.giftAnimationJsonIndex=0,a.timeStamp=0,a.autoPlay=!0,a.state={voicefileUrl:"",reduce:!1},a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){c.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid),c.default.CoreController.addEventListener("playbackControl_seek_position",this.handlerPlaybackControl_seek_position.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){c.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerRoomConnected",value:function(){if(TK.isTkNative&&TK.subscribe_from_native){var e=window.WBGlobal.nowUseDocAddress;if(e=(e=e.replace(/https/g,"http")).replace(/443/g,"80"),f.default.joinRoomInfo.customTrophys&&f.default.joinRoomInfo.customTrophysVoice&&m.default.getNativeInterface().clientPreloadMediaFile){var t=[],a=!0,i=!1,n=void 0;try{for(var l,s=(0,o.default)(f.default.joinRoomInfo.customTrophys);!(a=(l=s.next()).done);a=!0){var r=l.value;t.push(e+r.trophyvoice)}}catch(e){i=!0,n=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}this.setState({voicefileUrl:""}),m.default.getNativeInterface().clientPreloadMediaFile(t)}else if(f.default.joinRoomInfo.voicefileUrl&&f.default.joinRoomInfo.customTrophysVoice&&m.default.getNativeInterface().clientPreloadMediaFile){var d=[];d.push(e+f.default.joinRoomInfo.voicefileUrl),this.setState({voicefileUrl:e+f.default.joinRoomInfo.voicefileUrl}),m.default.getNativeInterface().clientPreloadMediaFile(d)}}else TK.isTkNative||TK.subscribe_from_native||h.default.isClient||h.default.isMacClient||(f.default.joinRoomInfo.customTrophys&&f.default.joinRoomInfo.customTrophysVoice?this.setState({voicefileUrl:""}):f.default.joinRoomInfo.voicefileUrl&&f.default.joinRoomInfo.customTrophysVoice&&this.setState({voicefileUrl:window.WBGlobal.nowUseDocAddress+f.default.joinRoomInfo.voicefileUrl}))}},{key:"handlerPlaybackControl_seek_position",value:function(e){for(var t in this.autoPlay=!1,this.giftAnimationJson)this.giftAnimationJson[t]&&(clearTimeout(this.giftAnimationJson[t].timer),this.giftAnimationJson[t].element&&this.giftAnimationJson[t].element.remove&&this.giftAnimationJson[t].element.remove(),this.giftAnimationJson[t]=null,delete this.giftAnimationJson[t])}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=e.message,a=e.user,n=e.fromID,l=document.getElementById(a.id);if(!l||!l.classList.contains("hide-other-student-video")){var s=!0,r=!1,d=void 0;try{for(var u,c=(0,o.default)((0,i.default)(t));!(s=(u=c.next()).done);s=!0){if("giftnumber"===u.value&&a.id!==n&&a.publishstate!==f.default.PUBLISHSTATE.PUBLISH_STATE_NONE)if(t.type){3===(0,i.default)(e.message).length&&(this.autoPlay=!0);var h=document.getElementById(a.id),m=$('<div class="gift-reduce-animation"><span class="icon-btn_delete-trophy_default"><span class="reduce-num">1</span></span></div>');h&&h.append(m[0]),this._triggerTrophyTones(),this._reduceGiftAnimation(a,m,1200)}else{1===(0,i.default)(e.message).length&&(this.autoPlay=!0);var p=$("#gift_animation_container"),g=$('<div class="gift-animation"></div>');if(p&&p.append(g),t.giftinfo&&f.default.joinRoomInfo.customTrophys&&f.default.joinRoomInfo.customTrophysVoice){var v=this._changecustomTrophyBg(t.giftinfo,g);this._triggerTrophyTones(),this._giftAnimation(a,g,2e3,v)}else this._triggerTrophyTones(),this._giftAnimation(a,g,1300,"0")}}}catch(e){r=!0,d=e}finally{try{!s&&c.return&&c.return()}finally{if(r)throw d}}}}},{key:"removeAudioElement",value:function(e){var t=document.getElementById("gift_animation_container"),a=(document.getElementById(e),this.state.voicefileUrl);if(t)if(TK.isTkNative&&TK.subscribe_from_native);else{var i=document.createElement("audio");i.id=e,i.src="trophyTones"===e?a||"./music/gift_default.wav":"./music/reduce_gift_default.mp3",t.appendChild(i),i.addEventListener("ended",function(){t.removeChild(i)},!1),this._triggerTrophyTones(e)}}},{key:"_reduceGiftAnimation",value:function(e,t,a){this.removeAudioElement("reduceTrophyTones"),t.addClass(" scalc giftReduceAnimationBig ");var i=setTimeout(function(){var a=e.id;if($("#hvideo"+a).length>0){t.animate({},200,function(){t.remove()});var o=document.getElementsByClassName(o);clearTimeout(i)}else{t.remove();var n=document.getElementsByClassName(n);clearTimeout(i)}},a)}},{key:"_giftAnimation",value:function(e,t,a,i){this.removeAudioElement("trophyTones");var o=this;t.removeClass("giftAnimationSmall giftAnimationBig scalc").addClass(" giftAnimationBig "),o.giftAnimationElement=t,o.giftAnimationJsonIndex++;var n=o.giftAnimationJsonIndex;o.giftAnimationJson[n]={timer:void 0,element:t},o.giftAnimationJson[n].timer=setTimeout(function(){t.removeClass("giftAnimationBig giftAnimationSmall scalc").addClass("scalc giftAnimationSmall");var a=e.id,i=$("#hvideo"+a);i=i.length>0?i:$("#vvideo"+a);var l=h.default.windowInnerWidth/f.default.STANDARDSIZE;if(i.length>0){var s=i.offset().left+i[0].offsetWidth/2,r=i.offset().top+i[0].offsetHeight/2;t.animate({left:s/l+"rem",top:r/l+"rem"},500,function(){t.remove(),o.giftAnimationJson[n]&&(clearTimeout(o.giftAnimationJson[n].timer),o.giftAnimationJson[n]=null,delete o.giftAnimationJson[n])})}else t.remove(),o.giftAnimationJson[n]&&(clearTimeout(o.giftAnimationJson[n].timer),o.giftAnimationJson[n]=null,delete o.giftAnimationJson[n])},a)}},{key:"_changecustomTrophyBg",value:function(e,t){if(f.default.joinRoomInfo.customTrophys&&e&&f.default.joinRoomInfo.customTrophysVoice)return t.css("background","url("+window.WBGlobal.nowUseDocAddress+e.trophyimg+") no-repeat center center"),t.css("backgroundSize","100% 100%"),this.state.voicefileUrl=e.trophyvoice?window.WBGlobal.nowUseDocAddress+e.trophyvoice:"./music/gift_default.wav",this.setState({voicefileUrl:this.state.voicefileUrl}),e.trophyeffect}},{key:"_triggerTrophyTones",value:function(e){if(TK.isTkNative&&TK.subscribe_from_native){var t=this.state.voicefileUrl.replace(/https/g,"http"),a=h.default.projectPublishDirAddress;t=t.replace(/443/g,"80"),a=(a=a.replace(/https/g,"http")).replace(/443/g,"80");var i=t||a+"music/gift_default.wav";m.default.getNativeInterface().clientAudioMediaPlayer(i,"play",{localMediaFile:"gift_default.wav"})}else f.default.joinRoomInfo.customTrophys&&f.default.joinRoomInfo.customTrophysVoice?this.setState({voicefileUrl:this.state.voicefileUrl}):f.default.joinRoomInfo.voicefileUrl&&f.default.joinRoomInfo.customTrophysVoice?(this.state.voicefileUrl=window.WBGlobal.nowUseDocAddress+f.default.joinRoomInfo.voicefileUrl,this.setState({voicefileUrl:this.state.voicefileUrl})):(""===f.default.joinRoomInfo.voicefileUrl&&f.default.joinRoomInfo.customTrophysVoice,this.setState({voicefileUrl:""})),this.autoPlay&&L.Utils.mediaPlay(e)}},{key:"render",value:function(){var e=this.state;e.voicefileUrl,e.reduce;return u.default.createElement("div",null,u.default.createElement("section",{className:"gift-animation-container",id:"gift_animation_container"}))}}]),t}(u.default.Component);t.default=g},zQaB:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=m(a("Yz+Y")),o=m(a("iCc5")),n=m(a("V7oC")),l=m(a("FYw3")),s=m(a("mRg0")),r=m(a("q1tI")),d=m(a("mrNk")),u=a("LbeR"),c=m(a("HPAy")),f=m(a("FYSC")),h=m(a("zrT5"));function m(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={percent:0,currProgressText:0},a.AJAXCancel=null,a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"uploadSuccess",value:function(e){this.props.uploadSuccess(e)}},{key:"uploadCancel",value:function(e){return this.AJAXCancel&&f.default.isFunction(this.AJAXCancel.abort)&&this.AJAXCancel.abort(),this.props.uploadCancel(e),!1}},{key:"uploadFile",value:function(e,t,a){var i=this,o=(new Date).getTime();this.props.uploadFile(e,t,a,o),"mp3"!==a&&"mp4"!==a||e&&"function"==typeof e.set&&e.set("notshownow",1),this.AJAXCancel=d.default.getTkRoom().uploadFile(e,function(e,t){0===e?i.uploadSuccess(o):(i.setState({percent:100,currProgressText:u.FileItemEvent.fileUploadErrorCode(e)}),i.uploadCancel(o))},function(e,t){t>=100?"mp3"!==a&&"mp4"!==a?i.setState({percent:100,currProgressText:c.default.language.languageData.toolContainer.toolIcon.FileConversion.text}):i.setState({percent:100,currProgressText:"100%"}):i.setState({percent:t,currProgressText:t+"%"})})}},{key:"render",value:function(){var e=this.state,t=e.percent,a=e.currProgressText,i=this.props,o=i.libType,n=i.fileType,l=i.uploadFileFromFlag,s=null;return"courseLib"==o&&"h5"==n?s=TkConstant.FILETYPE.h5DocumentFileListAccpet:"mediaLib"==o?s=TkConstant.FILETYPE.mediaFileListAccpet:"courseLib"==o&&(s=TkConstant.FILETYPE.documentFileListAccpet),r.default.createElement("div",{className:"progress-bar-box"},r.default.createElement("span",{className:"progress-bar",style:{width:t+"%"}},r.default.createElement("span",{className:"curr-progress"},a)),r.default.createElement("button",{className:"cancel-file-upload icon-close",onClick:this.uploadCancel.bind(this)}),r.default.createElement(h.default,{isWritedbFromUploadFile:!0,accept:s,fileType:n,flag:l,externalUploadFileCallback:this.uploadFile.bind(this)}))}}]),t}(r.default.Component);t.default=p},zS2F:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=v(a("QbLZ")),o=v(a("Yz+Y")),n=v(a("iCc5")),l=v(a("V7oC")),s=v(a("FYw3")),r=v(a("mRg0"));a("NHlZ");var d=a("q1tI"),u=v(d),c=v(a("HPAy")),f=v(a("eQYT")),h=v(a("aJKe")),m=v(a("3mpg")),p=v(a("pIe1")),g=v(a("DHeB"));function v(e){return e&&e.__esModule?e:{default:e}}var y=h.default.CoreController,S=function(e){function t(){(0,n.default)(this,t);var e=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return e.listernerBackupid=(new Date).getTime()+"_"+Math.random(),e.state={customTrophys:[],customTrophyShow:!1},e.userIdJson={},e}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){y.addEventListener("loadCustomTrophyItem",this.loadCustomTrophyItem.bind(this),this.listernerBackupid),y.addEventListener(f.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),y.addEventListener("recoverPanelBeforeStarting",this.handlerRecoverPanelBeforeStarting.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){y.removeBackupListerner(this.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){var a=t.customTrophyShow,i=this.state.customTrophyShow;a!==i&&i&&this.setDefaultPosition()}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,i=document.getElementById(t),o=document.querySelector(a.bounds);if(i&&o&&"function"==typeof a.changePosition){a.changePosition(t,{percentLeft:.5,percentTop:.5,isDrag:!1},!1)}}},{key:"handlerRecoverPanelBeforeStarting",value:function(){this.setState({customTrophyShow:!1})}},{key:"handlerRoomConnected",value:function(){var e=f.default.joinRoomInfo,t=e.customTrophys,a=e.customTrophysVoice;t&&a&&f.default.hasRole.roleChairman&&this.setState({customTrophys:t})}},{key:"loadCustomTrophyItem",value:function(e){this.userIdJson=e.message.userIdJson,this.setState({customTrophyShow:!0})}},{key:"_sendGiftToStudent",value:function(e){var t=f.default.joinRoomInfo,a=t.customTrophys,i=t.customTrophysVoice;(y.handler.getAppPermissions("giveAllUserSendGift")||y.handler.getAppPermissions("giveAloneUserSendGift"))&&((a||[]).length>1&&i&&e&&m.default.sendGift(this.userIdJson,e),this.customTrophyCloseHandel())}},{key:"customTrophyCloseHandel",value:function(){this.setState({customTrophyShow:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.id,o=t.customTrophyDrag,n=t.draggableData,l=this.state,s=l.customTrophys,r=l.customTrophyShow,d=Object.customAssign({id:a,percentPosition:{percentLeft:o.percentLeft||.5,percentTop:o.percentTop||.5}},n);return u.default.createElement(p.default,d,u.default.createElement("div",{id:a,className:"customTrophy-container ",style:{display:f.default.joinRoomInfo.customTrophys&&f.default.joinRoomInfo.customTrophysVoice&&r?"block":"none"}},u.default.createElement("div",{className:"container_top"},u.default.createElement("span",{className:"container-header"},c.default.language.languageData.otherVideoContainer.button.gift.yes),u.default.createElement("button",{id:"container-closeBtn",className:"icon-close container-closeBtn",title:c.default.language.languageData.otherVideoContainer.button.close.yes,onClick:this.customTrophyCloseHandel.bind(this)})),u.default.createElement("ul",{className:"container_ul"},s.map(function(t,a){return t=t||{},u.default.createElement(g.default,(0,i.default)({},t,{key:a,id:"customTrophysItemBg"+a,onClick:e._sendGiftToStudent.bind(e,t)}))}))))}}]),t}(d.PureComponent);t.default=S},zrT5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=p(a("YEIV")),o=p(a("Yz+Y")),n=p(a("iCc5")),l=p(a("V7oC")),s=p(a("FYw3")),r=p(a("mRg0")),d=a("q1tI"),u=p(d),c=p(a("mrNk")),f=p(a("1Ea7")),h=p(a("HPAy")),m=p(a("eQYT"));function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){(0,n.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={uploadFileParams:null},a.isNeedUpdateFile=!1,a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this;if(e.flag!==this.props.flag){var i=this.i;i.value="",i.click()}if(this.isNeedUpdateFile){this.isNeedUpdateFile=!1;var o=new FormData(this.form);this.props.uploadFileCallbackOnBefore&&"function"==typeof this.props.uploadFileCallbackOnBefore&&this.state.uploadFileParams&&this.props.uploadFileCallbackOnBefore(o,this.state.uploadFileParams.fileoldname,this.state.uploadFileParams.fieltype),this.props.externalUploadFileCallback&&"function"==typeof this.props.externalUploadFileCallback&&this.state.uploadFileParams?this.props.externalUploadFileCallback(o,this.state.uploadFileParams.fileoldname,this.state.uploadFileParams.fieltype):c.default.getTkRoom().uploadFile(o,function(e,t){0===e?a.props.uploadSuccessCallback&&"function"==typeof a.props.uploadSuccessCallback&&a.props.uploadSuccessCallback(t):L.Logger.warning("")})}}},{key:"change",value:function(e){var t=this.i,a=this.props.accept,i=t.files[0].name,o=i.substring(i.lastIndexOf(".")+1);if(-1!==(a.toString()+"").toLowerCase().indexOf("."+o.toLowerCase())){if(this.props.size){var n=this.props.size;if(this.props.imgMaxSize&&-1!==m.default.FILETYPE.imgFileListAccpet.toLowerCase().indexOf("."+o.toLowerCase())&&(n=this.props.imgMaxSize),t.files[0].size>n)return void f.default.showError(h.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileSizeError.text.one+n/1024/1024+"M",!1)}var l=c.default.getTkRoom().getUploadFileParams(i,o,void 0!==this.props.isWritedbFromUploadFile&&this.props.isWritedbFromUploadFile);this.isNeedUpdateFile=!0,this.setState({uploadFileParams:l}),e.preventDefault(),e.stopPropagation()}else f.default.showError(h.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileTypeError.text.one+o+h.default.language.languageData.alertWin.call.fun.uploadCourseFile.fileTypeError.text.two)}},{key:"render",value:function(){var e=this,t=[];for(var a in this.state.uploadFileParams)t.push((0,i.default)({},a,this.state.uploadFileParams[a]));return u.default.createElement("div",null,u.default.createElement("form",{style:{display:"none"},ref:function(t){return e.form=t}},u.default.createElement("input",{type:"file",ref:function(t){return e.i=t},onChange:this.change.bind(this),name:"filedata",accept:h.default.isClient&&this.props.fileType&&"h5"!==this.props.fileType?void 0:this.props.accept}),t.length>0?t.map(function(e,t){var a=void 0,i=void 0;for(var o in e)a=o,i=e[o];return u.default.createElement("input",{type:"text",key:t,name:a,value:i,readOnly:!0})}):null))}}]),t}(d.Component);t.default=g}});